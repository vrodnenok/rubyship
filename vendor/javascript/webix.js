var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var i={};
/**
 * @license
 * webix UI v.9.2.3
 * This software is allowed to use under GPL or you need to obtain Commercial License
 * to use it in non-GPL project. Please contact sales@webix.com for details
 */(function(e,s){s(i)})(0,(function(i){function _typeof(e){_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return _typeof(e)}function _slicedToArray(e,i){return _arrayWithHoles(e)||_iterableToArrayLimit(e,i)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var i=0,s=new Array(e.length);i<e.length;i++)s[i]=e[i];return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _iterableToArrayLimit(e,i){var s=[];var n=true;var r=false;var a=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=true){s.push(o.value);if(i&&s.length===i)break}}catch(e){r=true;a=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}return s}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var s=window;var n=1;var r={};var a=false;!s.setImmediate&&s.addEventListener&&s.addEventListener("message",(function(e){if(e.source==s)if(a)nextTick(r[e.data]);else{a=true;try{"function"===typeof r[e.data]&&r[e.data]()}catch(e){}delete r[e.data];a=false}}));function nextTick(e){if(s.setImmediate)s.setImmediate(e);else if(s.importScripts||!s.addEventListener)setTimeout(e);else{n++;r[n]=e;s.postMessage(n,"*")}}Deferred.resolve=function(i){if(!(1==(this||e)._d))throw TypeError();return i instanceof Deferred?i:new Deferred((function(e){e(i)}))};Deferred.reject=function(i){if(!(1==(this||e)._d))throw TypeError();return new Deferred((function(e,s){s(i)}))};Deferred.all=function(i){if(!(1==(this||e)._d))throw TypeError();if(!(i instanceof Array))return Deferred.reject(TypeError());var s=new Deferred;function done(e,n){if(n)return s.resolve(n);if(e)return s.reject(e);var r=i.reduce((function(e,i){return i&&i.then?e+1:e}),0);0==r&&s.resolve(i);i.map((function(e,s){e&&e.then&&e.then((function(e){i[s]=e;done();return e}),done)}))}done();return s};Deferred.race=function(i){if(!(1==(this||e)._d))throw TypeError();if(!(i instanceof Array))return Deferred.reject(TypeError());if(0==i.length)return new Deferred;var s=new Deferred;function done(e,n){if(n)return s.resolve(n);if(e)return s.reject(e);var r=i.reduce((function(e,i){return i&&i.then?e+1:e}),0);0==r&&s.resolve(i);i.map((function(e){e&&e.then&&e.then((function(e){done(null,e)}),done)}))}done();return s};Deferred._d=1;function Deferred(i){if("function"!=typeof i&&void 0!=i)throw TypeError();if("object"!=_typeof(this||e)||(this||e)&&(this||e).then)throw TypeError();var s,n,r=this||e,a=0,o=0,l=[];r.promise=r;r.resolve=function(e){s=r.fn;n=r.er;if(!a){o=e;a=1;nextTick(fire)}return r};r.reject=function(e){s=r.fn;n=r.er;if(!a){o=e;a=2;nextTick(fire)}return r};r._d=1;r.then=function(i,s){if(!(1==(this||e)._d))throw TypeError();var n=new Deferred;n.fn=i;n.er=s;3==a?n.resolve(o):4==a?n.reject(o):l.push(n);return n};r.finally=function(e){var i;var handler=function(s){i=s;return e()};var value=function(){var e=new Deferred;return 4==a?e.reject(i):e.resolve(i)};return r.then(handler,handler).then(value,value)};r.catch=function(e){return r.then(null,e)};r.fail=function(e){return r.then(null,e)};var finish=function(e){a=e||4;for(var i=0;i<l.length;i++){var s=l[i];3==a&&s.resolve(o)||s.reject(o)}};try{"function"==typeof i&&i(r.resolve,r.reject)}catch(e){r.reject(e)}return r;function thennable(e,i,s,n){if(2==a)return n();if("object"!=_typeof(o)&&"function"!=typeof o||"function"!=typeof e)n();else try{var r=0;e.call(o,(function(e){if(!r++){o=e;i()}}),(function(e){if(!r++){o=e;s()}}))}catch(e){o=e;s()}}function fire(){var e;try{e=o&&o.then}catch(e){o=e;a=2;return fire()}thennable(e,(function(){a=1;fire()}),(function(){a=2;fire()}),(function(){try{if(1==a&&"function"==typeof s)o=s(o);else if(2==a&&"function"==typeof n){o=n(o);a=1}}catch(e){o=e;return finish()}if(o==r){o=TypeError();finish()}else thennable(e,(function(){finish(3)}),finish,(function(){finish(1==a&&3)}))}))}}Deferred.defer=function(){return new Deferred(null)};var o={};function define(e,i){o[e]=i}function use(e){return o[e]}function assert(e,i){if(!e){log("error",i);var s=use("message");s&&"string"==typeof i&&s({type:"debug",text:i,expire:-1});debugger}}function log(e,i,s){if(1==arguments.length){i=e;e="log"}if(window.console&&window.console.log){e=e.toLowerCase();window.console[e]?window.console[e](i||"unknown error"):window.console.log(e+": "+i);s&&window.console.log(s)}}var l={};function debug(e){if(e)if("object"!==_typeof(e))l={events:true};else for(var i in e)l[i]=e[i];else l={}}var h=0;function debug_size_step(){var e="";for(var i=0;i<h;i++)e+="|  ";return e}function debug_size_box_start(e,i){if(l.size){h||log(i?"--- get sizes ---":"--- set sizes ---");log(debug_size_step()+e.name+"@"+e.config.id);h++}}function debug_size_box_end(e,i){if(l.size){h--;log(debug_size_step()+i.join(","))}}function debug_size_box(e,i,s){if(l.size){h||log(s?"--- get sizes ---":"--- set sizes ---");log(debug_size_step()+e.name+"@"+e.config.id+" "+i.join(","))}}var _=0;function level_in(){_++;assert(100!==_,"Attempt to copy object with self reference")}function level_out(){_--}function clone(e){var i=clone._function;i.prototype=e;return new i}clone._function=function(){};i.extend=function(e,s,n){assert(e,"Invalid mixing target");assert(s,"Invalid mixing source");if(e.$protoWait){d.insertAt.call(e.$protoWait,s,1);return e}for(var r in s)r in e&&!n||(e[r]=s[r]);s.defaults&&i.extend(e.defaults,s.defaults);s.$init&&s.$init.call(e);return e};function copy(e){assert(e,"Invalid mixing target");level_in();var i=!!window.Map&&!!window.Set&&!!window.WeakMap&&!!window.WeakSet;var s;if(arguments.length>1){s=arguments[0];e=arguments[1]}else s=isArray(e)?[]:{};for(var n in e){var r=e[n];if(!r||"object"!=_typeof(r)||r instanceof RegExp)s[n]=r;else if(isDate(r))s[n]=new Date(r);else if(i&&(r instanceof Map||r instanceof Set||r instanceof WeakMap||r instanceof WeakSet))s[n]=r;else{s[n]=isArray(r)?[]:{};copy(s[n],r)}}level_out();return s}function single(e){var i=null;var t=function(){i||(i=new e({}));i._reinit&&i._reinit.apply(i,arguments);return i};return t}function bind(e,i){return function(){return e.apply(i,arguments)}}function exec(e){return window.eval(e)}function wrap(i,s){return i?function(){var n=i.apply(this||e,arguments);s.apply(this||e,arguments);return n}:s}function isUndefined(e){return"undefined"==typeof e}function delay(e,i,s,n){return window.setTimeout((function(){if(!(i&&i.$destructed)){var n=e.apply(i,s||[]);e=i=s=null;return n}}),n||1)}function once(i){var s=true;return function(){if(s){s=false;i.apply(this||e,arguments)}}}var c=(new Date).valueOf();function uid(){c++;return c}function toNode(e){return"string"==typeof e?document.getElementById(e):e}function toFunctor(e,i){if("string"==typeof e){var s=e.replace("()","");return i&&i[s]?i[s]:window[s]||exec(e)}return e}function isArray(e){return Array.isArray(e)}function isDate(e){return e instanceof Date}function _to_array(e){return i.extend(e||[],d,true)}var d={removeAt:function(e,i){e>=0&&this.splice(e,i||1)},remove:function(e){this.removeAt(this.find(e))},insertAt:function(e,i){i||0===i?this.splice(i,0,e):this.push(e)},find:function(i){for(var s=0;s<(this||e).length;s++)if(i==(this||e)[s])return s;return-1},each:function(i,s){for(var n=0;n<(this||e).length;n++)i.call(s||this||e,(this||e)[n])},map:function(i,s){for(var n=0;n<(this||e).length;n++)(this||e)[n]=i.call(s||this||e,(this||e)[n]);return this||e},filter:function(i,s){for(var n=0;n<(this||e).length;n++)if(!i.call(s||this||e,(this||e)[n])){this.splice(n,1);n--}return this||e}};window.webix_on_core_ready&&(i.extend=window.webix_on_core_ready({extend:i.extend}).extend);var u={parseFormat:"%Y-%m-%d %H:%i:%s",parseTimeFormat:"%H:%i:%s"};function stringify(i){var s=Date.prototype.toJSON;Date.prototype.toJSON=function(){return u.parseFormatStr(this||e)};var n;n=i instanceof Date?i.toJSON():JSON.stringify(i);Date.prototype.toJSON=s;return n}var f={$init:function(){if(!(this||e)._evs_events){(this||e)._evs_events={};(this||e)._evs_handlers={};(this||e)._evs_map={}}},blockEvent:function(){(this||e)._evs_events._block=true},unblockEvent:function(){(this||e)._evs_events._block=false},mapEvent:function(s){i.extend((this||e)._evs_map,s,true)},on_setter:function(i){if(i)for(var s in i){var n=toFunctor(i[s],(this||e).$scope);var r=s.indexOf("->");-1!==r?(this||e)[s.substr(0,r)].attachEvent(s.substr(r+2),bind(n,this||e)):this.attachEvent(s,n)}},callEvent:function(i,s){var n=(this||e)._event_master||this||e;if((this||e)._evs_events._block)return true;i=i.toLowerCase();var r=(this||e)._evs_events[i.toLowerCase()];var a=true;(l.events||(this||e).debug)&&"onmousemoving"!==i&&log("info","["+(this||e).name+"@"+((this||e)._settings||{}).id+"] event:"+i,s);if(r)for(var o=0;o<r.length;o++)false===r[o].apply(n,s||[])&&(a=false);if((this||e)._evs_map[i]){var h=(this||e)._evs_map[i];h.$eventSource=this||e;h.callEvent(i,s)||(a=false);h.$eventSource=null}return a},attachEvent:function(i,s,n){assert(s,"Invalid event handler for "+i);i=i.toLowerCase();n=n||uid();s=toFunctor(s,(this||e).$scope);var r=(this||e)._evs_events[i]||_to_array();arguments[3]?r.unshift(s):r.push(s);(this||e)._evs_events[i]=r;(this||e)._evs_handlers[n]={f:s,t:i};return n},detachEvent:function(i){if((this||e)._evs_handlers[i]){var s=(this||e)._evs_handlers[i].t;var n=(this||e)._evs_handlers[i].f;var r=(this||e)._evs_events[s];r.remove(n);delete(this||e)._evs_handlers[i]}else{var a=(i+"").toLowerCase();(this||e)._evs_events[a]&&((this||e)._evs_events[a]=_to_array())}},hasEvent:function(i){i=i.toLowerCase();var s=(this||e)._evs_events[i];if(s&&s.length)return true;var n=(this||e)._evs_map[i];return!!n&&n.hasEvent(i)}};var g={};i.extend(g,f,true);var callEvent=function(e,i){return g.callEvent(e,i)};var attachEvent=function(e,i,s,n){return g.attachEvent(e,i,s,n)};var detachEvent=function(e){return g.detachEvent(e)};var blockEvent=function(){return g.blockEvent()};var unblockEvent=function(){return g.unblockEvent()};var mapEvent=function(e){return g.mapEvent(e)};var hasEvent=function(e){return g.hasEvent(e)};var v={_isValidXML:function(e){return e&&e.documentElement?e.getElementsByTagName("parsererror").length?null:e:null},toObject:function(e,i){var s=i?i.rawxml?i.rawxml():i:null;if(this._isValidXML(s))return s;s="string"==typeof e?this.fromString(e.replace(/^[\s]+/,"")):e;return this._isValidXML(s)?s:null},getRecords:function(i){return this.xpath(i,(this||e).records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(e){return this.tagToObject(e,{})},getOptions:function(){return false},getInfo:function(i){var s=this.xpath(i,(this||e).config);s=s.length?this.assignTypes(this.tagToObject(s[0],{})):null;return{size:i.documentElement.getAttribute("total_count")||0,from:i.documentElement.getAttribute("pos"),parent:i.documentElement.getAttribute("parent")||0,config:s}},xpath:function(e,i){if(window.XPathResult){var s=e;-1==e.nodeName.indexOf("document")&&(e=e.ownerDocument);var n=[];var r=e.evaluate(i,s,null,XPathResult.ANY_TYPE,null);var a=r.iterateNext();while(a){n.push(a);a=r.iterateNext()}return n}var o=true;try{"undefined"==typeof e.selectNodes&&(o=false)}catch(e){}if(o)return e.selectNodes(i);var l=i.split("/").pop();return e.getElementsByTagName(l)},assignTypes:function(e){for(var i in e){var s=e[i];if("object"==_typeof(s))this.assignTypes(s);else if("string"==typeof s){if(""===s)continue;"true"==s?e[i]=true:"false"==s?e[i]=false:s==1*s&&(e[i]=1*e[i])}}return e},tagToObject:function(e,i){var s=1==e.nodeType&&e.getAttribute("stack");var n=0;if(s){i=[];var r=e.childNodes;for(var a=0;a<r.length;a++)1==r[a].nodeType&&i.push(this.tagToObject(r[a],{}))}else{i=i||{};var o=e.attributes;if(o&&o.length)for(var l=0;l<o.length;l++){i[o[l].name]=o[l].value;n=1}var h=e.childNodes;for(var _=0;_<h.length;_++)if(1==h[_].nodeType){var c=h[_].tagName;if(i[c]){"function"!=typeof i[c].push&&(i[c]=[i[c]]);i[c].push(this.tagToObject(h[_],{}))}else i[c]=this.tagToObject(h[_],{});n=2}if(!n)return this.nodeValue(e);n<2&&(i.value=i.value||this.nodeValue(e))}return i},nodeValue:function(e){return e.firstChild?e.firstChild.wholeText||e.firstChild.data:""},fromString:function(e){try{if(window.DOMParser)return(new DOMParser).parseFromString(e,"text/xml");if(window.ActiveXObject){var i=new ActiveXObject("Microsoft.xmlDOM");i.loadXML(e);return i}}catch(e){assert(0,e);return null}assert(0,"Load from xml string is not supported")}};var p={toObject:function(i){if(!i)return null;if("string"==typeof i)try{if((this||e).parseDates){var s=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{1-3})?Z/;i=JSON.parse(i,(function(e,i){return"string"==typeof i&&s.test(i)?new Date(i):i}))}else i=JSON.parse(i)}catch(e){log(e);log(i);assert(0,"Invalid JSON data for parsing");return null}return i},getRecords:function(e){e&&e.data&&(e=e.data);return e&&!isArray(e)?[e]:e},getDetails:function(e){return"string"==typeof e?{id:e||uid(),value:e}:e},getOptions:function(e){return e.collections},getInfo:function(e){return{size:e.total_count||0,from:e.pos,parent:e.parent||0,config:e.config}},child:"data",parseDates:false};function ajax(i,s,n){return 0!==arguments.length?(new ajax).get(i,s,n):(this||e)&&(this||e).getXHR?this||e:new ajax}ajax.count=0;ajax.prototype={master:null,getXHR:function(){return new XMLHttpRequest},stringify:function(e){return stringify(e)},_send:function(i,s,n,r){var a;if(s&&(isArray(s)||"function"==typeof(s.success||s.error||s))){a=n;n=s;s=null}var o=Deferred.defer();var l=this.getXHR();var h=(this||e)._header||{};if(!callEvent("onBeforeAjax",[r,i,s,l,h,null,o]))return o.reject(l);var _=false;if("GET"!==r){var c=false;for(var d in h)if("content-type"==d.toString().toLowerCase()){c=true;"application/json"==h[d]&&(_=true)}c||window.FormData&&s instanceof window.FormData||(h["Content-Type"]="application/x-www-form-urlencoded")}if("object"==_typeof(s)&&!(window.FormData&&s instanceof window.FormData))if(_)s=this.stringify(s);else{var u=[];for(var f in s){var g=s[f];null!==g&&void 0!==g||(g="");"object"===_typeof(g)&&(g=this.stringify(g));u.push(f+"="+encodeURIComponent(g))}s=u.join("&")}if(s&&"GET"===r){i=i+(-1!=i.indexOf("?")?"&":"?")+s;s=null}l.open(r,i,!(this||e)._sync);var v=(this||e)._response;v&&(l.responseType=v);for(var p in h)l.setRequestHeader(p,h[p]);var m=this||e;(this||e).master=(this||e).master||a;l.onreadystatechange=function(){if(!l.readyState||4==l.readyState){ajax.count++;var e=l.status>=400||0===l.status;var i,s;if("blob"==l.responseType||"arraybuffer"==l.responseType){i="";s=l.response}else{i=l.responseText||"";s=m._data(l)}if(e){callEvent("onAjaxError",[l]);o.reject(l);n&&ajax.$callback(m.master||window,n,i,s,l,e)}else{o.resolve(s);n&&ajax.$callback(m.master||window,n,i,s,l,e)}}};(this||e)._timeout&&(l.timeout=(this||e)._timeout);(this||e)._sync?l.send(s||null):setTimeout((function(){l.send(s||null)}),0);(this||e).master&&!(this||e)._sync&&o.then((function(e){m.master=null;n=m=a=null;return e}));return(this||e)._sync?l:o},_data:function(i){return{xml:function(){try{return v.tagToObject(v.toObject(i.responseText,this||e))}catch(e){log(i.responseText);log(e.toString());assert(0,"Invalid xml data for parsing")}},rawxml:function(){return window.XPathResult?i.responseXML:v.fromString(i.responseText)},text:function(){return i.responseText},json:function(){return p.toObject(i.responseText,false)}}},get:function(e,i,s){return this._send(e,i,s,"GET")},post:function(e,i,s){return this._send(e,i,s,"POST")},put:function(e,i,s){return this._send(e,i,s,"PUT")},del:function(e,i,s){return this._send(e,i,s,"DELETE")},patch:function(e,i,s){return this._send(e,i,s,"PATCH")},sync:function(){(this||e)._sync=true;return this||e},timeout:function(i){(this||e)._timeout=i;return this||e},response:function(i){(this||e)._response=i;return this||e},headers:function(s){(this||e)._header=i.extend((this||e)._header||{},s);return this||e},bind:function(i){(this||e).master=i;return this||e}};ajax.$callback=function(e,i,s,n,r,a){if(!e.$destructed){a&&callEvent("onAjaxError",[r]);if(i){var o=i.success||i;a&&(o=i.error);o&&o.call&&o.call(e,s,n,r)}}};var m={$proxy:true,load:function(){var i=(this||e).source.split("@");var s=i[0].split(".").pop();return ajax().response("arraybuffer").get(i[0]).then((function(e){var n={ext:s,dataurl:i[1]};return{data:e,options:n}}))}};var b={$proxy:true,load:function(){},save:function(e,i,s){delay((function(){window.console.log("[DP] "+i.id+" -> "+i.operation,i.data);var e={id:i.data.id,newid:i.data.id,status:i.data.operation};s.processResult(e,e)}))}};var w={$proxy:true,load:function(){return ajax((this||e).source)},save:function(i,s){return w._save_logic.call(this||e,s,ajax())},_save_logic:function(i,s){var n=(this||e).source;var r="";var a=n.indexOf("?");if(-1!==a){r=n.substr(a);n=n.substr(0,a)}n+="/"==n.charAt(n.length-1)?"":"/";var o=i.operation;var l=i.data;"insert"==o&&delete l.id;return"update"==o?s.put(n+l.id+r,l):"delete"==o?s.del(n+l.id+r,l):s.post(n+r,l)}};var x={$proxy:true,load:function(){return ajax((this||e).source)},save:function(i,s){var n=ajax().headers({"Content-Type":"application/json"});return w._save_logic.call(this||e,s,n)}};var y={$proxy:true,load:function(s,n){n=i.extend(n||{},(this||e).params||{},true);return ajax().post((this||e).source,n)}};function unbox(e){if(!e||"object"===!_typeof(e)||Array.isArray(e))return e;var i="";var s=0;for(var n in e){s++;if(2==s)return e;i=n}return e[i]}var S={$proxy:true,save:function(e){return this.load(e)},load:function(i){var s={query:(this||e).source};1===arguments.length&&(s.variables=i);return ajax().headers({"Content-type":"application/json"}).post((this||e).url,s).then((function(e){return unbox(e.json().data)}))}};function proxy$5(e,s,n){assert(proxy$5[e],"Invalid proxy name: "+e);var r=copy(proxy$5[e]);r.source=s;n&&i.extend(r,n,true);r.init&&r.init();return r}proxy$5.$parse=function(e){if("string"==typeof e&&-1!=e.indexOf("->")){var i=e.split("->");return proxy$5(i[0],i[1])}return e};proxy$5.binary=m;proxy$5.debug=b;proxy$5.json=x;proxy$5.post=y;proxy$5.rest=w;proxy$5.GraphQL=S;var $={toObject:function(e){return"string"==typeof e?JSON.parse(e):e},getRecords:function(e){e&&e.data&&(e=e.data);return e},getDetails:function(i){var s={};for(var n=0;n<i.length;n++)s["data"+n]=i[n];null!==(this||e).idColumn&&(s.id=i[(this||e).idColumn]);return s},getOptions:function(){return false},getInfo:function(){return{size:0}},idColumn:null};var C={toObject:function(e){return e},getRecords:function(i){return i.split((this||e).row)},getDetails:function(i){i=this.stringToArray(i);var s={};for(var n=0;n<i.length;n++)s["data"+n]=i[n];null!==(this||e).idColumn&&(s.id=i[(this||e).idColumn]);return s},getOptions:function(){return false},getInfo:function(){return{size:0}},stringToArray:function(i){i=i.split((this||e).cell);for(var s=0;s<i.length;s++)i[s]=i[s].replace(/^[ \t\n\r]*("|)/g,"").replace(/("|)[ \t\n\r]*$/g,"");return i},idColumn:null,row:"\n",cell:","};var k={toObject:function(e){if("string"==typeof e){var i=null;-1==e.indexOf("<")&&(i=toNode(e));if(!i){i=document.createElement("DIV");i.innerHTML=e}return i.firstChild}return e},getRecords:function(i){return i.getElementsByTagName((this||e).tag)},getDetails:function(e){return v.tagToObject(e)},getOptions:function(){return false},getInfo:function(){return{size:0}},tag:"LI"};var I=0;var M={};var T={};function denySelect(){I||(I=document.onselectstart);document.onselectstart=stopEvent}function allowSelect(){0!==I&&(document.onselectstart=I||null);I=0}function index(e){var i=0;while(e=e.previousSibling)i++;return i}function createCss(e,i){var s="";i=i||"";for(var n in e)s+=n+":"+e[n]+";";var r=T[s+i];if(!r){r="s"+uid();addStyle("."+r+(i||"")+"{"+s+"}");T[s+i]=r}return r}function addStyle(e,i){var s=i?M[i]:M.default;if(!s){s=document.createElement("style");s.setAttribute("type","text/css");s.setAttribute("media","screen,print");document.getElementsByTagName("head")[0].appendChild(s);i?M[i]=s:M.default=s}s.appendChild(document.createTextNode(e))}function removeStyle(e){var i=M[e||"default"];i&&(i.innerHTML="")}function create(e,i,s){i=i||{};var n=document.createElement(e);for(var r in i)n.setAttribute(r,i[r]);i.style&&(n.style.cssText=i.style);i.class&&(n.className=i.class);s&&(n.innerHTML=s);return n}function getValue(e){e=toNode(e);return e?isUndefined(e.value)?e.innerHTML:e.value:""}function remove(e){if(e instanceof Array)for(var i=0;i<e.length;i++)remove(e[i]);else e&&e.parentNode&&e.parentNode.removeChild(e)}function insertBefore(e,i,s){e&&(i&&i.parentNode?i.parentNode.insertBefore(e,i):s.appendChild(e))}function locate(e,i){var s;s=e.tagName?e:e.target;while(s){if(s.getAttribute){var n=s.getAttribute(i);if(n)return n}s=s.parentNode}return null}function offset(e){var i=e.getBoundingClientRect();var s=document.body;var n=document.documentElement;var r=window.pageYOffset||n.scrollTop||s.scrollTop;var a=window.pageXOffset||n.scrollLeft||s.scrollLeft;var o=n.clientTop||s.clientTop||0;var l=n.clientLeft||s.clientLeft||0;var h=i.top+r-o;var _=i.left+a-l;return{y:Math.round(h),x:Math.round(_),width:e.offsetWidth,height:e.offsetHeight}}function posRelative(e){return{x:e.offsetX,y:e.offsetY}}function pos(e){if(!e.type)return{x:e.x,y:e.y};e.touches&&e.touches[0]&&(e=e.touches[0]);return{x:e.pageX,y:e.pageY}}function preventEvent(e){e.preventDefault();return stopEvent(e)}function stopEvent(e){e.stopPropagation();return false}function triggerEvent(e,s,n,r){var a;if("function"===typeof window[s]){r=i.extend(r||{},{bubbles:true,cancelable:true});a=new window[s](n,r)}else{a=document.createEvent(s);a.initEvent(n,true,true)}e.dispatchEvent(a)}function addCss(e,i,s){s&&-1!==e.className.indexOf(i)||(e.className+=" "+i)}function removeCss(e,i){e.className=e.className.replace(RegExp(" "+i,"g"),"")}function getTextSize(e,i,s){var n=create("DIV",{class:"webix_view webix_measure_size "+(i||"")},"");n.style.cssText="height:auto;visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;"+(s?"width:"+s+"px;":"width:auto;white-space:nowrap;");document.body.appendChild(n);var r="object"!==_typeof(e)?[e]:e;var a=0,o=0;for(var l=0;l<r.length;l++){n.innerHTML=r[l];var h=n.getBoundingClientRect();a=Math.max(a,Math.ceil(h.width));o=Math.max(o,Math.ceil(h.height))}remove(n);return{width:a,height:o}}function download(e,i){var s=false;if("object"==_typeof(e)){if(window.navigator.msSaveBlob)return window.navigator.msSaveBlob(e,i);e=window.URL.createObjectURL(e);s=true}var n=document.createElement("a");n.href=e;n.download=i;document.body.appendChild(n);n.click();delay((function(){s&&window.URL.revokeObjectURL(e);document.body.removeChild(n);n.remove()}))}function _getClassName(e){if(!e)return"";var i=e.className||"";i.baseVal&&(i=i.baseVal);i.indexOf||(i="");return i}function setSelectionRange(e,i,s){i=i||0;s=s||i;e.focus();e.setSelectionRange(i,s)}function getSelectionRange(e){return{start:e.selectionStart||0,end:e.selectionEnd||0}}function addMeta(e,i){document.getElementsByTagName("head").item(0).appendChild(create("meta",{name:e,content:i}))}var E=Object.freeze({denySelect:denySelect,allowSelect:allowSelect,index:index,createCss:createCss,addStyle:addStyle,removeStyle:removeStyle,create:create,getValue:getValue,remove:remove,insertBefore:insertBefore,locate:locate,offset:offset,posRelative:posRelative,pos:pos,preventEvent:preventEvent,stopEvent:stopEvent,triggerEvent:triggerEvent,addCss:addCss,removeCss:removeCss,getTextSize:getTextSize,download:download,_getClassName:_getClassName,setSelectionRange:setSelectionRange,getSelectionRange:getSelectionRange,addMeta:addMeta});var A={toObject:function(e){e=toNode(e);assert(e,"table is not found");assert("table"===e.tagName.toLowerCase(),"Incorrect table object");var i=e.rows;remove(e);return i},getRecords:function(e){var i=[];var s=e[0]&&e[0]._webix_skip?1:0;for(;s<e.length;s++)i.push(e[s]);return i},getDetails:function(e){var i=e.getElementsByTagName("td");e={};for(var s=0;s<i.length;s++)e["data"+s]=i[s].innerHTML;return e},getInfo:function(){return{size:0}},getOptions:function(){},getConfig:function(e){var s=[];var n=e[0].getElementsByTagName("th");n.length&&(e[0]._webix_skip=true);for(var r=0;r<n.length;r++){var a={id:"data"+r,header:this._de_json(n[r].innerHTML)};var o=this._get_attrs(n[r]);a=i.extend(a,o);s.push(a)}return s},_de_json:function(e){var i=e.indexOf("json://");-1!=i&&(e=JSON.parse(e.substr(i+7)));return e},_get_attrs:function(e){var i=e.attributes;var s={};for(var n=0;n<i.length;n++)s[i[n].nodeName]=this._de_json(i[n].nodeValue);s.width=parseInt(s.width,10);return s}};var z={};z.cdn="//cdn.webix.com";z.codebase="";z.zIndexBase=100;z.scrollSize=17;z.strict=!!window.webix_strict;z.https="https:"===document.location.protocol;var H=navigator.userAgent;z.isMac=-1!=H.indexOf("Mac");/iPad|iPhone|iPod/.test(H)&&(z.isIOS=true);-1!=H.indexOf("Android")&&(z.isAndroid=true);(z.isIOS||z.isAndroid||-1!=H.indexOf("Mobile")||-1!=H.indexOf("Windows Phone"))&&(z.mobile=true);(z.mobile||navigator.maxTouchPoints>1)&&(z.touch=true);z.fastClick=!z.touch;-1!==H.indexOf("Trident")?z.isIE=true:-1!==H.indexOf("Edge")?z.isEdge=true:-1!==H.indexOf("Firefox")?z.isFF=true:-1!==H.indexOf("Chrome")?z.isChromium=true:-1!==H.indexOf("Safari")&&(z.isSafari=true);(z.isIE||z.isEdge||z.isFF)&&(z.maxHTMLElementSize=1e7);z.isSafari&&(z.maxHTMLElementSize=1e8);z.transform="transform";z.transition="transition";z.transitionDuration="transitionDuration";z.translate="translate3d";z.transitionEnd="transitionend";z.passiveEventListeners=false;try{var j=Object.defineProperty({},"passive",{get:function(){z.passiveEventListeners=true}});window.addEventListener("testPassive",null,j);window.removeEventListener("testPassive",null,j)}catch(e){}z.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();z.svganimation=function(){return document.implementation.hasFeature("https://www.w3.org/TR/SVG11/feature#SVG-animation","1.1")}();var P={};function require(i,s,n){var r=Deferred.defer();s&&true!==s&&(r=r.then((function(){s.call(n||this||e)})));if(require.disabled){r.resolve();return r}if("string"!=typeof i){var a=i.length||0;if(a){var _callback=function(){if(a){a--;require(i[i.length-a-1]).then(_callback,(function(){return r.reject()}))}else r.resolve()};_callback()}else{for(var o in i)a++;var callback2=function(){a--;0===a&&r.resolve()};for(var l in i)require(l).then(callback2,(function(){return r.reject()}))}return r}if(true!==P[i]){var h=i;if(true===s){exec(ajax().sync().get(h).responseText);P[i]=true;return r.resolve()}if(P[i]){P[i].push(r);return r}P[i]=[r];var onerror=function(){var e=P[i];P[i]=false;for(var s=0;s<e.length;s++)e[s].reject()};var onload=function(){var e=P[i];P[i]=true;for(var s=0;s<e.length;s++)e[s].resolve()};var _=i.split("?");if(".css"==_[0].substr(_[0].length-4)){var c=create("LINK",{type:"text/css",rel:"stylesheet",href:h});c.onload=onload;c.onerror=onerror;document.getElementsByTagName("head")[0].appendChild(c)}else{var d=document.createElement("script");d.onload=onload;d.onerror=onerror;document.getElementsByTagName("head")[0].appendChild(d);d.src=h}}else r.resolve();return r}var V=i.extend({toObject:function(s){if(!s.excel){var n=s.options||{};n.dataurl&&i.extend(n,this._urlToOptions(n.dataurl));s=s.data||s;var r=Deferred.defer();if(s.name){n.ext=s.name.split(".").pop();var a=new FileReader;a.onload=bind((function(e){r.resolve(this.parseData(e.target.result,n))}),this||e);a.readAsArrayBuffer(s)}else r.resolve(this.parseData(s,n));return r}return s},parseData:function(s,n){s=new Uint8Array(s);var r=[];for(var a=0;a!=s.length;++a)r[a]=String.fromCharCode(s[a]);var o=(n.ext||n).toLowerCase();"xls"!=o&&(o="xlsx");return require(z.cdn+"/extras/xlsx.core.styles.min.js").then(bind((function(){var e=!!isUndefined(n.cellDates)||n.cellDates;var s="xls"==o?XLS.read(r.join(""),{type:"binary",cellStyles:true,cellDates:e}):XLSX.read(r.join(""),{type:"binary",cellStyles:true,cellDates:e});var a={sheets:s.Sheets,names:s.SheetNames,options:n,ranges:s.Workbook&&s.Workbook.Names||[]};return i.extend(this.getSheet(a,n),a)}),this||e))},getSheet:function(e,i){var s=i.name||e.names[0];e=this.sheetToArray(e.sheets[s],i);i.rows&&i.rows.length&&(e.data=e.data.splice(i.rows[0],Math.min(i.rows[1],e.data.length)-i.rows[0]));return e},sheetToArray:function(e,i){var s=[];var n=[];var r=[];var a=[];var o=[];var l=[];var h={n:"number",d:"date",s:"string",b:"boolean"};if(e&&e["!ref"]){var _,c,d,f,g=XLS.utils.decode_range(e["!ref"]),v=g.s.c,p=g.s.r+(i.rows?i.rows[0]:0);for(_=g.s.r;_<=g.e.r;_++){var m=[];for(c=g.s.c;c<=g.e.c;c++){d=XLS.utils.encode_cell({r:_,c:c});f=e[d];if(f){var b="";b=i.math&&f.f?"="==f.f.charAt(0)?f.f:"="+f.f:"d"==f.t&&isDate(f.v)?u.dateFormatStr(f.v):f.v;m.push(b);f.s&&r.push([_-p,c-v,f.s]);f.t&&o.push([_-p,c-v,h[f.t]])}else m.push("")}s.push(m)}if(e["!merges"]){var w=e["!merges"];for(var x=0;x<w.length;x++){var y=w[x].s;var S=w[x].e;(!i.rows||y.r-p>=0&&S.r-p<=i.rows[1])&&n.push([y.r-p,y.c-v,S.c-y.c+1,S.r-y.r+1])}}if(e["!cols"]){var $=e["!cols"];for(var C=0;C<$.length;C++){var k=$[C];if(k){var I=C-v;a.push(["column",I,Math.round(k.wch/(8.43/70))]);k.hidden&&l.push(["column",I])}}}if(e["!rows"]){var M=e["!rows"];for(var T=0;T<M.length;T++){var E=M[T];if(E){var A=T-p;a.push(["row",A,E.hpx]);E.hidden&&l.push(["row",A])}}}}return{data:s,spans:n,styles:r,sizes:a,types:o,hidden:l,excel:true}},_urlToOptions:function(e){var i=e.split("[");var s={};s.name=i[0];if(i[1]){var n=i[1].split(/[^0-9]+/g);n[0]=1*n[0]||0;n[1]=1*n[1]||9999999;s.rows=n}return s}},$);var N={json:p,jsarray:$,xml:v,csv:C,html:k,htmltable:A,excel:V};var D={};var L={$init:function(i){(this||e)._data_generation=0;(this||e).data={};(this||e).waitData=Deferred.defer();i&&((this||e)._settings.datatype=i.datatype||"json");(this||e).$ready.push((this||e)._load_when_ready)},_load_when_ready:function(){(this||e)._ready_for_data=true;(this||e)._settings.url&&this.url_setter((this||e)._settings.url);(this||e)._settings.data&&this.data_setter((this||e)._settings.data)},url_setter:function(i){i=proxy$5.$parse(i);if(!(this||e)._ready_for_data)return i;this.load(i,(this||e)._settings.datatype);return i},data_setter:function(i){if(!(this||e)._ready_for_data)return i;this.parse(i,(this||e)._settings.datatype);return true},load:function(i,s,n,r){var a=this||e;var o;if("string"==typeof s){o=s;s=arguments[2]}var l=this._fetch(i,o,n||null);if(l&&l.then)return l.then((function(e){a._onLoad(e,r);s&&ajax.$callback(a,s,"",e,-1);return e}),(function(e){return a._onLoadError(e)}))},_fetch:function(i,s,n){var r=this||e;var a;!s&&(this||e).data.driver||((this||e).data.driver=N[s||"json"]);if(!this.callEvent("onBeforeLoad",[]))return Deferred.reject();i=proxy$5.$parse(i);a=i.$proxy&&i.load?i.load(this||e,n):"function"===typeof i?i.call(this||e,n):ajax().bind(this||e).get(i);a&&!a.then&&(a=Deferred.resolve(a));var o=++(this||e)._data_generation;return a&&a.then?a.then((function(e){return r.$destructed||r._data_generation!==o?Deferred.reject(D):e})):a},parse:function(i,s,n){var r=this||e;if(i&&"function"==typeof i.then){var a=++(this||e)._data_generation;return i.then((function(e){if(r.$destructed||r._data_generation!==a)return Deferred.reject();r.parse(e,s,n)}))}if(i&&i.sync&&(this||e).sync)this._syncData(i);else{if(!this.callEvent("onBeforeLoad",[]))return Deferred.reject();!s&&(this||e).data.driver||((this||e).data.driver=N[s||"json"]);this._onLoad(i,n)}return Deferred.resolve()},_syncData:function(i){(this||e).data&&(this||e).data.attachEvent&&(this||e).data.attachEvent("onSyncApply",bind((function(){(this||e)._call_onready&&this._call_onready()}),this||e));this.sync(i)},_parse:function(i){var s,n,r=(this||e).data.driver;n=r.getRecords(i)[0];s=n?r.getDetails(n):{};(this||e).setValues?this.setValues(s,false,"auto"):(this||e).data=s},_onLoadContinue:function(i,s){if(i){if(!(this||e).$onLoad||!this.$onLoad(i,(this||e).data.driver,s))if((this||e).data&&(this||e).data._parse){s&&(this||e).data.clearAll(true);(this||e).data._parse(i)}else{s&&this.clearAll(true);this._parse(i)}}else this._onLoadError(i);(this||e)._call_onready&&this._call_onready();this.callEvent("onAfterLoad",[]);(this||e).waitData.resolve()},_onLoad:function(i,s){var n=this||e;i&&"function"===typeof i.text&&!i.name&&(i=i.text());i=(this||e).data.driver.toObject(i);i&&i.then?i.then((function(e){return n._onLoadContinue(e,s)})):this._onLoadContinue(i,s)},_onLoadError:function(i){if(i!==D){if(!(this||e).$destructed){this.callEvent("onAfterLoad",[]);this.callEvent("onLoadError",arguments)}callEvent("onLoadError",[i,this||e])}return Deferred.reject(i)},_check_data_feed:function(i){if(!(this||e)._settings.dataFeed||(this||e)._ignore_feed||!i)return true;var s=(this||e)._settings.dataFeed;if("function"==typeof s)return s.call(this||e,i.id||i,i);s=s+(-1==s.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(i.id||i);if(!this.callEvent("onBeforeLoad",[]))return false;ajax(s,(function(i,s,n){(this||e)._ignore_feed=true;var r=N.json;var a=r.toObject(i,s);a?this.setValues(r.getDetails(r.getRecords(a)[0]),false,"auto"):this._onLoadError(n);(this||e)._ignore_feed=false;this.callEvent("onAfterLoad",[])}),this||e);return false}};var B={collapseNames:function(e,i,s,n){s=s||{};i=i||"";n=n||function(){return true};if(!e||"object"!=_typeof(e))return null;for(var r in e){var a=e[r];var o=i+r;a&&"object"==_typeof(a)&&!isDate(a)&&!isArray(a)&&n(o)?B.collapseNames(a,o+".",s,n):s[o]=a}return s},expandNames:function(e){var i,s,n,r,a,o={};for(a in e){n=a.split(".");s=n.length-1;r=o;for(i=0;i<s;i++){r[n[i]]||(r[n[i]]={});r=r[n[i]]}r[n[s]]=e[a]}return o}};var F={};var R={};var O=new RegExp("(\\r\\n|\\n)","g");var W=new RegExp('(\\")',"g");var U=new RegExp("(\\\\)","g");var Y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var q=/[&<>"'`]/g;var escapeChar=function(e){return Y[e]||"&amp;"};function template(i){if("function"==typeof i)return i;if(F[i])return F[i];i=(i||"").toString();if(-1!=i.indexOf("->")){var s=i.split("->");switch(s[0]){case"html":i=getValue(s[1]);break;case"http":i=(new ajax).sync().get(s[1],{uid:uid()}).responseText;break;default:break}}i=(i||"").toString();if(z.strict){if(!R[i]){R[i]=[];var n=[];i.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,(function(e,i,s,r,a){n.push({pos:a,str:e,fn:function(e){return e[i]?s:r}})}));i.replace(/\{common\.([^}(]*)\}/g,(function(e,i,s){n.push({pos:s,str:e,fn:function(e,s){return s[i]||""}})}));i.replace(/\{common\.([^}(]*)\(\)\}/g,(function(i,s,r){n.push({pos:r,str:i,fn:function(i,n){return n[s]?n[s].apply(this||e,arguments):""}})}));i.replace(/\{obj\.([^:}]*)\}/g,(function(e,i,s){n.push({pos:s,str:e,fn:function(e){return e[i]}})}));i.replace("{obj}",(function(e,i){n.push({pos:i,str:e,fn:function(e){return e}})}));i.replace(/#([^#'";, ]+)#/gi,(function(e,i,s){if("!"==i.charAt(0)){i=i.substr(1);n.push({pos:s,str:e,fn:function(e){-1!=i.indexOf(".")&&(e=B.collapseNames(e));return template.escape(e[i])}})}else n.push({pos:s,str:e,fn:function(e){-1!=i.indexOf(".")&&(e=B.collapseNames(e));return e[i]}})}));n.sort((function(e,i){return e.pos>i.pos?1:-1}));if(n.length){var r=0;var addStr=function(e,i,s){R[e].push((function(){return e.slice(i,s)}))};for(var a=0;a<n.length;a++){var o=n[a].pos;addStr(i,r,o);R[i].push(n[a].fn);r=o+n[a].str.length}addStr(i,r,i.length)}else R[i].push((function(){return i}))}return function(){var s="";for(var n=0;n<R[i].length;n++)s+=R[i][n].apply(this||e,arguments);return s}}var l=false;i=i.replace(U,"\\\\");i=i.replace(O,"\\n");i=i.replace(W,'\\"');i=i.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');i=i.replace(/\{common\.([^}(]*)\}/g,"\"+(common.$1||'')+\"");i=i.replace(/\{common\.([^}(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"');i=i.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"');i=i.replace("{obj}",'"+obj+"');i=i.replace(/#([^#'";, ]+)#/gi,(function(e,i){if("!"==i.charAt(0)){l=true;return'"+template.escape(obj.'+i.substr(1)+')+"'}return'"+(obj.'+i+')+"'}));try{if(l){var h=Function("obj","common","marks","value","template",'return "'+i+'";');F[i]=function(e,i,s,n){return h(e,i,s,n,template)}}else F[i]=Function("obj","common",'return "'+i+'";')}catch(e){assert(0,"Invalid template:"+i)}return F[i]}template.escape=function(e){return void 0===e||null===e?"":(e.toString()||"").replace(q,escapeChar)};template.empty=function(){return""};var X={_toHTML:function(i){return i.$empty?"":(this||e)._settings.template(i,this||e)},render:function(){var i=(this||e)._settings;if(this.isVisible(i.id)){if(!(this||e).callEvent||this.callEvent("onBeforeRender",[(this||e).data])){if((this||e).data&&!i.content){(this||e)._dataobj.innerHTML="";(this||e)._dataobj.innerHTML=this._toHTML((this||e).data)}(this||e).callEvent&&this.callEvent("onAfterRender",[])}return true}return false},sync:function(i){(this||e)._backbone_sync=false;"DataStore"!=i.name&&(i.data&&"DataStore"==i.data.name?i=i.data:(this||e)._backbone_sync=true);(this||e)._backbone_sync?i.bind("change",bind((function(i){if(i.id==(this||e).data.id){(this||e).data=i.attributes;this.refresh()}}),this||e)):i.attachEvent("onStoreUpdated",bind((function(s){if(!s||s==(this||e).data.id){(this||e).data=i.pull[s];this.refresh()}}),this||e))},template_setter:template};var G={_auto_scroll:function(i){var s,n;var r=(this||e)._settings.dragscroll;"string"!==typeof r&&(r=(this||e)._settings.layout||"xy");n=-1!==r.indexOf("x");s=-1!==r.indexOf("y");var a=(this||e)._body||(this||e).$view;var o=offset(a);var l=Math.max(((this||e)._settings.rowHeight||((this||e).type&&!isNaN(parseFloat((this||e).type.height))?(this||e).type.height:0))+5,40);var h=false;s&&this._auto_y_scroll(i,o,l)&&(h=true);n&&this._auto_x_scroll(i,o,l)&&(h=true);h&&((this||e)._auto_scroll_delay=delay((this||e)._auto_scroll,this||e,[i],100))},_auto_scroll_column:function(i){var s=(this||e)._settings.dragscroll;if("string"!==typeof s||-1!==s.indexOf("x")){var n=(this||e)._header||(this||e).$view;var r=offset(n);var a=Math.max((this||e)._settings.headerRowHeight||0,40);this._auto_x_scroll(i,r,a)&&((this||e)._auto_scroll_delay=delay((this||e)._auto_scroll_column,this||e,[i],100))}},_auto_y_scroll:function(i,s,n){var r=s.y;var a=r+s.height;var o=this.getScrollState();var l=(this||e)._settings;if(l.topSplit){var h=this._cellPosition(this.getIdByIndex(l.topSplit-1),this.columnId(0));r+=h.top+h.height}return i.y<r+n?this._auto_scrollTo(o.x,o.y-2*n,i,"y"):i.y>a-n&&this._auto_scrollTo(o.x,o.y+2*n,i,"y")},_auto_x_scroll:function(e,i,s){var n=i.x;var r=n+i.width;var a=this.getScrollState();return e.x<n+s?this._auto_scrollTo(a.x-2*s,a.y,e,"x"):e.x>r-s&&this._auto_scrollTo(a.x+2*s,a.y,e,"x")},_auto_scrollTo:function(e,i,s,n){if(this.callEvent("onBeforeAutoScroll",[s])){this.scrollTo(e,i);this.callEvent("onAfterAutoScroll",[]);var r=this.getScrollState();return Math.abs(("x"===n?e:i)-r[n])<1}return false}};var K={};function _events_final_destructor(){for(var e in K)eventRemove(e)}function _event(e,i,s,n){n=n||{};n.inner=true;event$1(e,i,s,n)}function event$1(e,i,s,n){n=n||{};e=toNode(e);assert(e,"Invalid node as target for webix.event");var r=n.id||uid();n.bind&&(s=bind(s,n.bind));var a=[e,i,s,n.capture];n.inner||(K[r]=a);var o=!!n.capture;!isUndefined(n.passive)&&z.passiveEventListeners&&(o={passive:n.passive,capture:o});e.addEventListener(i,s,o);return r}function eventRemove(e){if(e){assert(K[e],"Removing non-existing event");var i=K[e];i[0].removeEventListener(i[1],i[2],!!i[3]);delete K[e]}}function type(e,i){if(!e.$protoWait){"function"==typeof e&&(e=e.prototype);if(!e.types){e.types={default:e.type};e.type.name="default"}var s=i.name;var n=e.type;s&&(n=e.types[s]=clone(i.baseType?e.types[i.baseType]:e.type));for(var r in i)0===r.indexOf("template")?n[r]=template(i[r]):n[r]=i[r];return s}e._webix_type_wait||(e._webix_type_wait=[]);e._webix_type_wait.push(i)}var J={top_views:[],_global_scope:null,_global_collection:null,_child_sizing_active:null,_responsive_exception:null,_responsive_tinkery:null,_freeze_resize:null,_parent_cell:null,_focus_time:null,_ui_creation:0,_edit_open_time:null,_final_destruction:null,_events:[],destructors:[],_noselect_element:null,_modality:[],_popups:_to_array(),_wait_animate:null};var Z={};function ui(e,i,s){var n;J._ui_creation++;var r=J._global_scope;J._global_scope=e.$scope||r;try{n=_ui_creator(e,i,s)}finally{J._ui_creation--;J._global_scope=r}return n}ui.views=Z;function _ui_creator(e,i,s){var n=isArray(e);var r=toNode(e.container||i||document.body);r._settings&&(s=_correctId(r,n,s));var a;var o=false;var l=r==document.body;if(e._settings||r&&n){a=e;o=true}else{r&&l&&(e.$topView=true);e._inner||(e._inner={});i&&i.getParentView&&(J._parent_cell=s||0===s?i:i.getParentView());a=_view(e)}!l||a.setPosition||a.$apiOnly||use("_fixHeight")();if(a._settings&&a._settings._hidden&&!r.$view)a._settings._container=r;else if(!a.$apiOnly)if(r.appendChild)_appendDom(r,a,e);else if(r.destructor){var h=r;if(!s&&0!==s&&!isArray(a)){s=r;r=r.getParentView()}if(r&&r._replace){if(o&&a.getParentView){var _=a.getParentView();_&&_._remove&&_._remove(a);a._parent_cell=r;a.$scope=r.$scope}r._replace(a,s)}else{var c=h.$view.parentNode;h.destructor();_appendDom(c,a,e)}}else assert(0,"Not existing parent:"+e.container);return a}function _appendDom(e,i,s){e.appendChild(i._viewobj);if(!i.getParentView()){((!i.setPosition||i._settings.fullscreen)&&e==document.body||i._settings.position)&&J.top_views.push(i._destructor_handler);s.skipResize||i.adjust()}}function _correctId(e,i,s){var n=[e];if(i)n=e.getChildViews();else if(e._body_cell)n=[e._body_cell];else{if("number"==typeof s)return s;if(s){n=[$$(s)];_deleteIds(n);return n[0].config.id}}_deleteIds(n);return s}function _deleteIds(e){for(var i=e.length-1;i>=0;i--){var s=e[i];delete Z[s.config.id];s.config.id="x"+uid();Z[s.config.id]=s;s.getChildViews&&_deleteIds(s.getChildViews());s._destroy_with_me&&_deleteIds(s._destroy_with_me)}}function _view(e){var i=e.cells||e.rows||e.elements||e.cols;if(i)for(var s=0;s<i.length;s++)null!==i[s]&&"undefined"!==typeof i[s]||assert(0,"You have trailing comma or Null element in collection's configuration");if(e.view){var n=e.view;assert(ui[n],"unknown view:"+n);return new ui[n](e)}if(e.rows||e.cols){var r=e.rows||e.cols;var a=false;for(var o=0;o<r.length;o++)!r[o].body||r[o].view||r[o].align||(a=true);return a?new ui.headerlayout(e):new ui.layout(e)}return e.cells?new ui.multiview(e):e.template||e.content?new ui.template(e):e.align&&e.body?new ui.align(e):new ui.spacer(e)}ui._view=_view;function $$(e){if(!e)return null;if(Z[e])return Z[e];var i=e;if("object"==_typeof(e)){if(e._settings)return e;i=e.target||e}return Z[locate({target:toNode(i)},"view_id")]}"undefined"===typeof window.$$&&(window.$$=$$);i.protoUI=function(){var s=arguments;var n=s[0].name;var t=function(s){if(!t)return ui[n].prototype;var r=t.$protoWait;if(r){var a=[r[0]];for(var o=1;o<r.length;o++){a[o]=r[o];a[o].$protoWait&&(a[o]=a[o].call(-1,a[o].name));a[o].prototype&&a[o].prototype.name&&(ui[a[o].prototype.name]=a[o])}ui[n]=i.proto.apply(-1,a);if(t._webix_type_wait)for(var l=0;l<t._webix_type_wait.length;l++)type(ui[n],t._webix_type_wait[l]);t=r=null}return-1!=(this||e)?new ui[n](s):ui[n]};t.$protoWait=Array.prototype.slice.call(arguments,0);return ui[n]=t};i.proto=function(){var i=arguments;var s=i[0];var n=!!s.$init;var r=[];assert(s,"Invalid mixing target");for(var a=i.length-1;a>0;a--){assert(i[a],"Invalid mixing source");"function"==typeof i[a]&&(i[a]=i[a].prototype);i[a].$init&&r.push(i[a].$init);if(i[a].defaults){var o=i[a].defaults;s.defaults||(s.defaults={});for(var l in o)isUndefined(s.defaults[l])&&(s.defaults[l]=o[l])}if(i[a].type&&s.type)for(var h in i[a].type)s.type[h]||(s.type[h]=i[a].type[h]);for(var _ in i[a])s[_]||false===s[_]||(s[_]=i[a][_])}n&&r.push(s.$init);s.$init=function(){for(var i=0;i<r.length;i++)r[i].apply(this||e,arguments)};s.$skin&&s.$skin();var result=function(i){(this||e).$ready=[];assert((this||e).$init,"object without init method");this.$init(i);(this||e)._parseSettings&&this._parseSettings(i,(this||e).defaults);for(var s=0;s<(this||e).$ready.length;s++)(this||e).$ready[s].call(this||e)};result.prototype=s;s=i=null;return result};attachEvent("onClick",(function(e){var i=$$(e);if(i&&i.touchable){use("UIManager").applyChanges(i);i.getNode(e);var s=e.target;if(i.config.disabled)return;var n="";if(s.className&&0===s.className.toString().indexOf("webix_view"))return;i&&use("UIManager")._focus_action(i);while(s&&s.parentNode){if(s.getAttribute){if(s.getAttribute("view_id"))break;n=s.className;if(n){n=n.toString().split(" ");for(var r=0;r<n.length;r++)if(i.on_click[n[r]]){var a=i.on_click[n[r]].call(i,e,i._settings.id,s);if(false===a)return}}}s=s.parentNode}if(i._settings.click){var o=toFunctor(i._settings.click,i.$scope);o&&o.call&&o.call(i,i._settings.id,e)}var l=i._settings.popup;if(l&&!i._settings.readonly&&!e.longtouch_drag){if("object"==_typeof(l)&&!l.name){l=i._settings.popup=ui(l)._settings.id;i._destroy_with_me.push($$(l))}l=$$(l);assert(l,"Unknown popup");if(!l.isVisible()){l._settings.master=i._settings.id;l.show(i.getInputNode()||i.getNode(),null,true)}}i.callEvent("onItemClick",[i._settings.id,e])}}));if(window.webix_on_core_ready){var Q=window.webix_on_core_ready({proto:i.proto,protoUI:i.protoUI});i.proto=Q.proto;i.protoUI=Q.protoUI}var tt={_tooltip_masters:_to_array(["dummy"]),_tooltip_exist:0,overflow:false,delay:400,addTooltip:function(i,s){var n=this||e;var r,a;i=toNode(i);assert(i,"Target isn't defined");if(i instanceof Element){r=i;"string"===typeof s?r.setAttribute("webix_tooltip",s):a=s}else{r=i.$view;a=i}a=a||this||e;var o=(this||e)._tooltip_masters.find(a);if(-1===o){o=(this||e)._tooltip_masters.length;(this||e)._tooltip_masters.push(a)}r.webix_tooltip=o;(this||e)._tooltip_exist++;if(!(this||e)._tooltip){(this||e)._tooltip=new ui.tooltip({});(this||e)._tooltip._css_name="webix_tooltip webix_global_tooltip";(this||e)._webix_tooltip_mm=event$1(document,"pointermove",(function(e){return n._move_tooltip(e)}));(this||e)._webix_tooltip_ml=event$1(document,"pointerleave",(function(){return n._hide_tooltip()}));(this||e)._drag_event=attachEvent("onDragMode",(function(){return n._hide_tooltip()}));(this||e)._click_event=attachEvent("onClick",(function(){return n._hide_tooltip()}))}},getTooltip:function(){return(this||e)._tooltip},_move_tooltip:function(i){if("mouse"===i.pointerType){var s={};var n=i.target;while(n instanceof Element&&"HTML"!=n.tagName){if(!s.first||!s.overflow){var r=n.getAttribute("webix_tooltip");s.first=s.first||r;r&&n.scrollWidth>n.clientWidth&&(s.overflow=r)}if((this||e)._tooltip_masters[n.webix_tooltip]){if((this||e)._last&&(this||e)._last!=n){this.$tooltipOut((this||e)._last,n,i);(this||e)._last=null;return}(this||e)._last||((this||e)._last=this.$tooltipIn(n,i));return this.$tooltipMove(n,i,s)}n=n.parentElement}(this||e)._last&&((this||e)._last=this.$tooltipOut((this||e)._last,null,i))}},_hide_tooltip:function(){clearTimeout((this||e)._before_show_delay);(this||e)._tooltip.hide()},getMaster:function(i){return(this||e)._tooltip_masters[i.webix_tooltip]},removeTooltip:function(i){var s;assert(i,"Target isn't defined");i=toNode(i);s=i instanceof Element?i:i.$view;var n=s.webix_tooltip;if(n){if((this||e)._last==s){this._hide_tooltip();(this||e)._last=null}delete s.webix_tooltip;(this||e)._tooltip_exist--;(this||e)._tooltip_masters[n]=null}if(!(this||e)._tooltip_exist&&(this||e)._tooltip){(this||e)._webix_tooltip_mm=eventRemove((this||e)._webix_tooltip_mm);(this||e)._webix_tooltip_ml=eventRemove((this||e)._webix_tooltip_ml);(this||e)._drag_event=detachEvent((this||e)._drag_event);(this||e)._click_event=detachEvent((this||e)._click_event);(this||e)._tooltip.destructor();(this||e)._tooltip=(this||e)._last=null;(this||e)._tooltip_masters=_to_array(["dummy"])}},$tooltipIn:function(i,s){var n=(this||e)._tooltip_masters[i.webix_tooltip];if(n.$tooltipIn&&n!=(this||e))return n.$tooltipIn(i,s);(this||e)._tooltip.define({dx:20,dy:0,template:"",css:""});return i},$tooltipOut:function(i,s,n){var r=(this||e)._tooltip_masters[i.webix_tooltip];if(r.$tooltipOut&&r!=(this||e))return r.$tooltipOut(i,s,n);this._hide_tooltip();return null},$tooltipMove:function(i,s,n){var r=(this||e)._tooltip_masters[i.webix_tooltip];if(r.$tooltipMove&&r!=(this||e))return r.$tooltipMove(i,s,n);var a=isUndefined(r.overflow)?(this||e).overflow:r.overflow;var o=isUndefined(r.delay)?(this||e).delay:r.delay;var l=a?n.overflow:n.first;o>0&&this._hide_tooltip();(this||e)._before_show_delay=delay((this||e)._tooltip.show,(this||e)._tooltip,[l||{},pos(s)],o)}};function _uid(e){return"$"+e+(et[e]=(et[e]||0)+1)}var et={};var it=false;function freeze(e,i){it=true;var s=e();if(s&&s.then)s=s.then((function(e){it=false;false!==i&&resize();return e}));else{it=false;false!==i&&resize()}return s}function resize(){use("UIManager").applyChanges();callEvent("onClick",[]);J._force_resize=true;if(!it)for(var e=J.top_views.length-1;e>=0;e--)J.top_views[e].obj&&J.top_views[e].obj.resize();J._force_resize=false}function _each(e,i,s,n){if(e){var r=n?[e]:e.getChildViews();for(var a=0;a<r.length;a++)false!==i.call(s,r[a])&&_each(r[a],i,s)}}function zIndex(e){if(!isUndefined(e)){z.zIndexBase=Math.max(z.zIndexBase,e+1);return e}return z.zIndexBase++}event$1(window,"resize",(function(){z.touch&&J._focus_time&&new Date-J._focus_time<1e3||resize()}));function ready(e){st?e.call():nt.push(e)}var st=false;var nt=[];var rt=document.getElementsByTagName("SCRIPT");assert(rt.length,"Can't locate codebase");if(rt.length){rt=(rt[rt.length-1].getAttribute("src")||"").split("/");rt.splice(rt.length-1,1);z.codebase=rt.slice(0,rt.length).join("/")+"/"}var handler=function(){z.isIE&&(document.body.className+=" webix_ie");callEvent("onReady",[])};var doit=function(){st=true;window.webix_ready&&isArray(webix_ready)&&(nt=webix_ready.concat(nt));for(var e=0;e<nt.length;e++)nt[e].call();nt=[]};attachEvent("onReady",(function(e){e?doit():delay(doit)}));"complete"==document.readyState?handler():event$1(window,"load",handler);ready((function(){event$1(document.body,"click",(function(e){callEvent("onClick",[e])}))}));var at={isEmail:function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test((e||"").toString())},isNumber:function(e){return parseFloat(e)==e},isChecked:function(e){return!!e||"0"===e},isNotEmpty:function(e){return 0===e||e}};function callback(e,i){if(-1!=e.type.indexOf("prompt"))if(false===i)e._promise.reject();else{var s=e._box.querySelector(".webix_popup_input");var n=s.querySelector("input");if(e.input.required&&!n.value){e.input.invalid=true;addCss(s,"webix_popup_invalid");return}i=n.value||"";e._promise.resolve(i)}-1!=e.type.indexOf("confirm")&&false===i?e._promise.reject():e._promise.resolve(i);var r=e.callback;r&&r(i,e.details);modalbox.hide(e.id)}function modal_key(e){var i=modalbox.order;var s=i.length;var n=e.target;if(s>0&&message.keyboard){var r=e.which||e.keyCode;if(13!=r&&32!=r&&27!=r)return;var a;for(var o=s-1;o>=0;o--){var l=modalbox.pull[i[o]];if(l._box!=n&&l._box.contains(n)&&32==r)return;if(l.container&&l.container.contains(n)){a=l;break}}a||(a=modalbox.pull[i[i.length-1]]);13==r||32==r?callback(a,true):27==r&&callback(a,false);preventEvent(e);return!(e.cancelBubble=true)}}event$1(document,"keydown",modal_key,{capture:true});function modality(e,i){var s=i||document.body;var n;if(isUndefined(s.modality)){n=create("DIV",{class:"webix_modal_cover",style:"position:"+(i?"absolute":"fixed")+";"});n.onkeydown=modal_key;if(i){var r=window.getComputedStyle(i).position;"fixed"!=r&&"absolute"!=r&&"sticky"!=r&&"relative"!=r&&(s.style.position="relative")}s.appendChild(n);s.modality=1}else e?s.modality++:s.modality--;if(e&&1===s.modality||0===s.modality){n=n||Array.prototype.slice.call(s.querySelectorAll(".webix_modal_cover")).filter((function(e){return e.parentNode==s}))[0];if(n)if(s.modality){if(1==s.modality){n.style.display="inline-block";addCss(s,"webix_modalbox_inside")}}else{n.style.display="none";removeCss(s,"webix_modalbox_inside")}}return n}function button(e,i,s){return"<div role='button' tabindex='0' aria-label='"+e+"' class='webix_popup_button"+(s?" "+s:"")+"' result='"+i+"' ><div>"+e+"</div></div>"}function input(e){return"<div tabindex='0' class='webix_popup_input webix_el_text"+(e.required?" webix_required":"")+"'><input value='"+template.escape(e.value||"")+"' placeholder='"+template.escape(e.placeholder||"")+"'></input></div>"}function info(e){if(!ot.area){ot.area=document.createElement("DIV");ot.area.className="webix_message_area";ot.area.style[ot.position]="5px";document.body.appendChild(ot.area)}ot.area.setAttribute("role","alert");ot.area.setAttribute("aria-atomic",true);ot.hide(e.id);var i=document.createElement("DIV");i.innerHTML="<div>"+e.text+"</div>";i.className="webix_message webix_"+e.type;i.onclick=function(){e&&ot.hide(e.id);e=null};"bottom"==ot.position&&ot.area.firstChild?ot.area.insertBefore(i,ot.area.firstChild):ot.area.appendChild(i);e.expire>0&&(ot.timers[e.id]=window.setTimeout((function(){ot.hide(e.id)}),e.expire));i.style.height=i.offsetHeight-2+"px";ot.pull[e.id]=i;i=null;return e.id}function _boxStructure(e,i,s,n){var r=document.createElement("DIV");var a=e.css?" "+e.css:"";r.className="webix_modal_box webix_"+e.type+a;r.setAttribute("webixbox",1);r.setAttribute("role","alertdialog");r.setAttribute("aria-label",e.title||"");r.setAttribute("tabindex","0");var o="";e.width&&(r.style.width=e.width+(at.isNumber(e.width)?"px":""));e.height&&(r.style.height=e.height+(at.isNumber(e.height)?"px":""));e.title&&(o+='<div class="webix_popup_title">'+e.title+"</div>");o+='<div class="webix_popup_text'+(n?" webix_popup_label":"")+'"><span>'+(e.content?"":e.text||"")+"</span></div>";o+='<div  class="webix_popup_controls">';n&&(o+=input(e.input));s&&(o+=button(e.cancel||u.message.cancel,false));i&&(o+=button(e.ok||u.message.ok,true,"confirm"));if(e.buttons&&!i&&!s)for(var l=0;l<e.buttons.length;l++)o+=button(e.buttons[l],l);o+="</div>";r.innerHTML=o;if(e.content){var h=e.content;"string"==typeof h&&(h=document.getElementById(h));"none"==h.style.display&&(h.style.display="");r.childNodes[e.title?1:0].appendChild(h)}if(-1!=e.type.indexOf("prompt")){var _=r.querySelector(".webix_popup_input");var c=_.querySelector("input");c.oninput=function(){if(e.input.invalid){removeCss(_,"webix_popup_invalid");e.input.invalid=false}}}r.onclick=function(i){var s=i.target;s.className||(s=s.parentNode);if(-1!=s.className.indexOf("webix_popup_button")){var n=s.getAttribute("result");n="true"==n||"false"!=n&&n;callback(e,n)}i.cancelBubble=true};e._box=r;return r}modalbox.pull={};modalbox.order=[];function _createBox(e,i,s,n){var r=e.tagName?e:_boxStructure(e,i,s,n);var a=e.container;var o=a?a.offsetWidth:window.innerWidth||document.documentElement.offsetWidth;var l=a?a.offsetHeight:window.innerHeight||document.documentElement.offsetHeight;var h=a?a.scrollLeft:0;var _=a?a.scrollTop:0;e.container&&(r.style.position="absolute");toNode((e.container||document.body).appendChild(r));var c=modality(true,e.container);var d=e.left||Math.abs(h+Math.floor((o-r.offsetWidth)/2));var u=e.top||Math.abs(_+Math.floor((l-r.offsetHeight)/2));if("top"==e.position)r.style.top="-3px";else{r.style.top=u+"px";if(c){c.style.top=_+"px";c.style.left=h+"px"}}r.style.left=d+"px";r.onkeydown=modal_key;n?r.querySelector(".webix_popup_input input").focus():r.focus();e.id?modalbox.pull[e.id]&&modalbox.hide(e.id):e.id=_uid("modalbox");modalbox.order.push(e.id);modalbox.pull[e.id]=e;e._promise=Deferred.defer();return e._promise}function alertPopup(e){return _createBox(e,true)}function confirmPopup(e){return _createBox(e,true,true)}function boxPopup(e){return _createBox(e)}function promptPopup(e){return _createBox(e,true,true,true)}function box_params(e,i,s){if("object"!=_typeof(e)){if("function"==typeof i){s=i;i=""}e={text:e,type:i,callback:s}}return e}function params(e,i,s,n){"object"!=_typeof(e)&&(e={text:e,type:i,expire:s,id:n});e.id=e.id||_uid("message");e.expire=e.expire||ot.expire;return e}function alert(){var i=box_params.apply(this||e,arguments);i.type=i.type||"alert";return alertPopup(i)}function confirm(){var i=box_params.apply(this||e,arguments);i.type=i.type||"confirm";return confirmPopup(i)}function modalbox(){var i=box_params.apply(this||e,arguments);i.type=i.type||"alert";return boxPopup(i)}function prompt(){var i=box_params.apply(this||e,arguments);i.type=i.type||"prompt";i.input=i.input||{};return promptPopup(i)}modalbox.hide=function(e){if(e&&modalbox.pull[e]){var i=modalbox.pull[e]._box;if(i){i.parentNode.removeChild(i);modalbox.order.splice(modalbox.order.indexOf(e),1);modality(false,modalbox.pull[e].container);delete modalbox.pull[e]}}};modalbox.hideAll=function(){for(var e in modalbox.pull)this.hide(e)};function message(i,s,n,r){i=params.apply(this||e,arguments);i.type=i.type||"info";var a=i.type.split("-")[0];switch(a){case"alert":return alertPopup(i);case"confirm":return confirmPopup(i);case"modalbox":return boxPopup(i);case"prompt":return promptPopup(i);default:return info(i)}}var ot=message;ot.expire=4e3;ot.keyboard=true;ot.position="top";ot.pull={};ot.timers={};ot.hideAll=function(){for(var e in ot.pull)ot.hide(e)};ot.hide=function(e){var i=ot.pull[e];if(i&&i.parentNode){window.setTimeout((function(){i.parentNode.removeChild(i);i=null}),2e3);i.style.height=0;i.className+=" hidden";ot.area.removeAttribute("role");ot.timers[e]&&window.clearTimeout(ot.timers[e]);delete ot.pull[e]}};define("message",message);var lt={set:function(i,s){s=s||{};(this||e)._view&&this.exit();if($$(i))i=$$(i);else{"string"==typeof i&&(i=document.getElementById(i));i instanceof Element&&(i={$view:i,$html:true});assert(i,"Incorrect view for fullscreen mode")}(this||e)._view=i;(this||e)._pos=this._setPosition();var n=i.config;if(i.setPosition){n.fullscreen=true;i.resize();return i}(this||e)._fullscreen=ui({view:"window",head:this._getHeadConfig(s),css:s.css||"",fullscreen:true,borderless:true,body:{rows:[]}});n&&((this||e)._sizes={width:n.width,minWidth:n.minWidth,maxWidth:n.maxWidth,height:n.height,minHeight:n.minHeight,maxHeight:n.maxHeight});if(i.getParentView&&i.getParentView()){(this||e)._parent=i.getParentView();if((this||e)._parent.index){(this||e)._pos.index=(this||e)._parent.index(i);(this||e)._pos.active=!!(this||e)._parent.getActiveId&&(this||e)._parent.getActiveId()==n.id}}else{(this||e)._parent=i.$view.parentNode;(this||e)._pos.node=create("div");(this||e)._parent.replaceChild((this||e)._pos.node,i.$view)}(this||e)._fullscreen.getBody().addView(i.$html?{view:"template",content:i.$view,css:"webix_fullscreen_html"}:i);(this||e)._fullscreen.show();this._setSizes(i);return(this||e)._fullscreen},exit:function(){if((this||e)._view){var i=(this||e)._view.config;this._setPosition(true);if((this||e)._view.setPosition){i.fullscreen=false;(this||e)._view.resize()}else{if((this||e)._parent instanceof Element){(this||e)._view._parent_cell=null;(this||e)._view._set_inner&&(this||e)._view._set_inner((this||e)._view.config);(this||e)._parent.replaceChild((this||e)._view.$view,(this||e)._pos.node)}else if(isUndefined((this||e)._pos.index)){(this||e)._view._parent_cell=(this||e)._parent;(this||e)._parent._replace((this||e)._view)}else{(this||e)._parent.addView((this||e)._view,(this||e)._pos.index);(this||e)._pos.active&&(this||e)._view.show(false,false)}this._setSizes((this||e)._view,(this||e)._sizes);(this||e)._view.$html||((this||e)._fullscreen.getBody()._cells=[]);(this||e)._fullscreen.close()}this._clearValues()}},_clearValues:function(){delete(this||e)._parent;delete(this||e)._view;delete(this||e)._sizes;delete(this||e)._pos;delete(this||e)._fullscreen},_setPosition:function(i){var s=this||e;var n=(this||e)._view;var r={};if(n.setPosition)if(i)n.setPosition((this||e)._pos.left,(this||e)._pos.top);else{r.left=n.config.left;r.top=n.config.top;n.setPosition(0,0)}else{var a=["position","top","bottom","left","right"];var o=n.$view.style;a.forEach((function(e){if(i)o[e]=s._pos[e];else{r[e]=o[e];o[e]="position"==e?"relative":0}}))}return r},_setSizes:function(e,i){if(!e.$html){i=i||{height:0,minHeight:0,maxHeight:0,width:0,minWidth:0,maxWidth:0};e.define(i);e.resize()}},_getHeadConfig:function(i){var s=this||e;return false===i.head||"object"==_typeof(i.head)?i.head:{cols:[{template:i.head||"",type:"header",borderless:true},{view:"icon",icon:"wxi-close",click:function(){s.exit()}}]}}};var ht={_view:null,_hotkeys:{},_focus_time:0,_controls:{esc:"escape",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright",pgdown:"pagedown",pgup:"pageup",space:" ",multiply:"*",add:"+",subtract:"-",decimal:".",divide:"/",pausebreak:"pause","5numlocked":"clear"},_inputs:{input:1,button:1,textarea:1,select:1},_enable:function(){event$1(document,"keydown",(this||e)._keypress,{bind:this||e});event$1(document.body,"click",(this||e)._focus_click,{capture:true,bind:this||e});event$1(document.body,"focus",(this||e)._focus_tab,{capture:true,bind:this||e});J.destructors.push({obj:this||e})},destructor:function(){ht._view=null},getFocus:function(){return(this||e)._view},_focus_action:function(i){(this||e)._focus_was_there=(this||e)._focus_was_there||i._settings.id},setFocus:function(i,s,n){i=$$(i);i&&!i.$view&&(i=null);(this||e)._focus_time=J._focus_time=new Date;if((this||e)._view===i)return true;(this||e)._view&&(this||e)._view.callEvent&&(this||e)._view.callEvent("onBlur",[(this||e)._view]);if(i&&i.callEvent){i.callEvent("onFocus",[i,(this||e)._view]);n&&i.callEvent("onTabFocus",[i,(this||e)._view])}callEvent("onFocusChange",[i,(this||e)._view]);(this||e)._view&&(this||e)._view.blur&&!s&&(this||e)._view.blur();(this||e)._view=i;i&&i.focus&&!s&&i.focus();return true},applyChanges:function(e){var i=this.getFocus();i&&i!=e&&i._applyChanges&&i._applyChanges(e)},hasFocus:function(i){return i===(this||e)._view},_focus:function(i){for(var s=0;s<modalbox.order.length;s++)if(modalbox.pull[modalbox.order[s]]._box.contains(i.target))return;var n=locate(i,"view_id")||(this||e)._focus_was_there;n=$$(n);(this||e)._focus_was_there=null;J._focus_time=new Date;if(n==(this||e)._view)return true;if(n)if(this.canFocus(n))if((this||e)._view&&(this||e)._view.getFormView()==n&&(this||e)._view.focus)(this||e)._view.focus();else{"radio"!=i.target.type&&"radio"!=i.target.getAttribute("role")||callEvent("onClick",[i]);this.setFocus(n)}else n.$view.contains(i.target)&&i.target.blur();else this.setFocus(null);return true},_focus_click:function(i){if(new Date-(this||e)._focus_time<100){(this||e)._focus_was_there=null;return false}return this._focus(i)},_focus_tab:function(i){return!!(this||e)._inputs[i.target.nodeName.toLowerCase()]&&this._focus(i)},_top_modal:function(e){var i=J._modality;if(!i.length)return true;var s=e.queryView((function(e){return!e.getParentView()}),"parent")||e;return(s.$view.style.zIndex||0)>=Math.max.apply(Math,_toConsumableArray(i))},canFocus:function(e){return!(document.body.modality||e.$view.modality||e.queryView((function(e){return e.$view.modality}),"parent"))&&(e.isVisible()&&e.isEnabled()&&!e.config.disabled&&this._top_modal(e)&&!e.queryView({disabled:true},"parent"))},_moveChildFocus:function(i){var s=this.getFocus();if(i&&!this._is_child_of(i,s))return false;this._focus_logic("getPrev",i)||((this||e)._view=null)},_is_child_of:function(e,i){if(!e)return false;if(!i)return false;while(i){if(i===e)return true;i=i.getParentView()}return false},_keypress_timed:function(){(this||e)&&(this||e).callEvent&&this.callEvent("onTimedKeyPress",[])},_keypress:function(i){var s=i.which||i.keyCode;if(229!=s&&0!=s){s>95&&s<106&&(s-=48);var n=this.getFocus();if(n&&n.callEvent){false===n.callEvent("onKeyPress",[s,i])&&preventEvent(i);if(n.hasEvent("onTimedKeyPress")){clearTimeout(n._key_press_timeout);n._key_press_timeout=delay((this||e)._keypress_timed,n,[],n._settings.keyPressTimeout||250)}}if(false===this._check_keycode(i)){preventEvent(i);return false}}},_focus_logic:function(e,i){var s=i||this.getFocus();if(s){e=e||"getNext";var n=s;var r=uid();while(true){s=this[e](s);if(s&&this.canFocus(s))return this.setFocus(s);if(s===n||s.$fmarker==r){i&&document.activeElement.blur();return null}s.$fmarker=r}}},_tab_logic:function(e,i){var s=!i.shiftKey;if(e&&e._custom_tab_handler&&!e._custom_tab_handler(s,i))return false;if(e&&e._in_edit_mode){if(e.editNext)return e.editNext(s);if(e.editStop){e.editStop();return true}}else delay((function(){e=$$(document.activeElement);if(e&&!ht.canFocus(e))return ht._focus_logic(s?"getNext":"getPrev",e);ht.setFocus(e,true,true)}))},getTop:function(e){var i,s=$$(e);while(s&&(i=s.getParentView()))s=i;return s},getNext:function(e,i){var s=e.getChildViews();if(s.length&&!i)for(var n=0;n<s.length;n++)if(this.canFocus(s[n]))return s[n];var r=e.getParentView();if(!r)return e;var a=r.getChildViews();if(a.length){var o=d.find.call(a,e)+1;while(o<a.length){if(this.canFocus(a[o]))return a[o];o++}}return this.getNext(r,true)},getPrev:function(e,i){var s=e.getChildViews();if(s.length&&i)for(var n=s.length-1;n>=0;n--)if(this.canFocus(s[n]))return this.getPrev(s[n],true);if(i&&this.canFocus(e))return e;var r=e.getParentView();if(!r)return this.canFocus(e)?this.getPrev(e,true):e;var a=r.getChildViews();if(a){var o=d.find.call(a,e)-1;while(o>=0){if(this.canFocus(a[o]))return this.getPrev(a[o],true);o--}}return this.getPrev(r,true)},addHotKey:function(i,s,n){assert(s,"Hot key handler is not defined");var r=this._parse_keys(i);n||(n=null);(this||e)._hotkeys[r]||((this||e)._hotkeys[r]=[]);(this||e)._hotkeys[r].push({handler:s,view:n});return i},removeHotKey:function(i,s,n){var r=this._parse_keys(i);if(s||n){var a=(this||e)._hotkeys[r];if(a){for(var o=a.length-1;o>=0;o--)n&&a[o].view!==n||s&&a[o].handler!==s||a.splice(o,1);a.length||delete(this||e)._hotkeys[r]}}else delete(this||e)._hotkeys[r]},_keycode:function(e,i,s,n,r){return(e||"").toLowerCase()+"_"+["",i?"1":"0",s?"1":"0",n?"1":"0",r?"1":"0"].join("")},_check_keycode:function(i){var s=i.which||i.keyCode;var n=!i.ctrlKey&&!i.altKey&&!i.metaKey&&9!=s&&27!=s&&13!=s;var r=this._keycode(i.key,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey);var a=this.getFocus();return(this||e)._hotkeys[r]?this._process_calls((this||e)._hotkeys[r],a,i):!n||!(this||e)._hotkeys.any_0000||this._process_calls((this||e)._hotkeys.any_0000,a,i)},_process_calls:function(e,i,s){for(var n=0;n<e.length;n++){var r=e[n];if(null===r.view||i===r.view||"string"===typeof r.view&&i&&i.name===r.view){var a=r.handler(i,s);if(!!a===a)return a}}return true},_parse_keys:function(i){var s=(this||e)._controls;var n=i.toLowerCase().split(/[ +\-_]/);var r,a,o,l;r=a=o=l=0;var h="";for(var _=0;_<n.length;_++)"ctrl"===n[_]?r=1:"shift"===n[_]?a=1:"alt"===n[_]?o=1:"command"===n[_]?l=1:h=s[n[_]]||n[_];return this._keycode(h,r,a,o,l)},getState:function(e,i){i=i||false;e=$$(e);var s={id:e.config.id,width:e.config.width,height:e.config.height,gravity:e.config.gravity};isUndefined(e.config.collapsed)||(s.collapsed=e.config.collapsed);"tabs"!==e.name&&"tabbar"!==e.name||(s.activeCell=e.getValue());if(i){s=[s];if(e._cells)for(var n=0;n<e._cells.length;n++)s=s.concat(this.getState(e._cells[n],i))}return s},setState:function(e){isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var s=e[i];var n=$$(s.id);if(n){isUndefined(s.collapsed)||n.define("collapsed",s.collapsed);isUndefined(s.activeCell)||n.setValue(s.activeCell,"auto");n.define("width",s.width);n.define("height",s.height);n.define("gravity",s.gravity)}}var r=$$(e[0].id);r&&r.resize()}};ready((function(){ht._enable();ht.addHotKey("enter",(function(e,i){e&&e.callEvent&&e.callEvent("onEnter",[i]);if(e&&e.editStop&&e._in_edit_mode){e.editStop();return true}if(e&&e.touchable){var s=e.getFormView();s&&!e._skipSubmit&&s.callEvent("onSubmit",[e,i])}}));ht.addHotKey("esc",(function(e){if(e){if(e.editCancel&&e._in_edit_mode){e.editCancel();return true}var i=e.getTopParentView();if(i&&i.setPosition){lt._fullscreen==i&&lt.exit();i._hide()}}}));ht.addHotKey("shift+tab",ht._tab_logic);ht.addHotKey("tab",ht._tab_logic)}));define("UIManager",ht);var _t={$init:function(){(this||e)._settings=(this||e).config={}},define:function(e,i){return"object"==_typeof(e)?this._parseSeetingColl(e):this._define(e,i)},_define:function(i,s){var n=(this||e)[i+"_setter"];return(this||e)._settings[i]=n?n.call(this||e,s,i):s},_parseSeetingColl:function(e){if(e)for(var i in e)this._define(i,e[i])},_parseSettings:function(e,s){var n={};s&&(n=i.extend(n,s));"object"!=_typeof(e)||e.tagName||i.extend(n,e,true);this._parseSeetingColl(n)},_mergeSettings:function(e,i){for(var s in i)switch(_typeof(e[s])){case"object":e[s]=this._mergeSettings(e[s]||{},i[s]);break;case"undefined":e[s]=i[s];break;default:break}return e}};var ct={$init:function(){var i=(this||e)._destructor_handler=(this||e)._destructor_handler||{obj:this||e};J.destructors.push(i)},destructor:function(){var i=(this||e)._settings;(this||e)._last_editor&&this.editCancel();(this||e).callEvent&&this.callEvent("onDestruct",[]);(this||e).destructor=function(){};(this||e)._destructor_handler.obj=null;if((this||e).getChildViews){var s=this.getChildViews();if(s)for(var n=0;n<s.length;n++)s[n].destructor();if((this||e)._destroy_with_me)for(var r=0;r<(this||e)._destroy_with_me.length;r++)(this||e)._destroy_with_me[r].destructor()}delete ui.views[i.id];if(i.$id){var a=this.getTopParentView();a&&a._destroy_child&&a._destroy_child(i.$id)}(this||e)._htmlmap=null;(this||e)._htmlrows=null;(this||e)._html=null;if((this||e)._contentobj){(this||e)._contentobj.innerHTML="";(this||e)._contentobj._htmlmap=null}(this||e)._viewobj&&(this||e)._viewobj.parentNode&&(this||e)._viewobj.parentNode.removeChild((this||e)._viewobj);(this||e).data&&(this||e).data.destructor&&(this||e).data.destructor();(this||e).unbind&&this.unbind();(this||e).data=null;(this||e)._parent_cell=null;(this||e)._viewobj=(this||e).$view=(this||e)._contentobj=(this||e)._dataobj=null;(this||e)._evs_events=(this||e)._evs_handlers=(this||e)._evs_map={};ht._view==(this||e)&&(ht._view=null);var o=i.url;o&&o.$proxy&&o.release&&o.release();(this||e).$scope=null;(this||e).$destructed=true}};event$1(window,"unload",(function(){callEvent("unload",[]);J._final_destruction=true;for(var e=0;e<J.destructors.length;e++){var i=J.destructors[e].obj;i&&i.destructor()}J.destructors=[];J._popups=_to_array();_events_final_destructor()}));var dt={$init:function(){(this||e)._cursor=null;this.attachEvent("onSelectChange",(function(){var e=this.getSelectedId();this.setCursor(e?e.id||e:null)}));this.attachEvent("onAfterCursorChange",(this||e)._update_binds);this.attachEvent("onAfterDelete",(function(e){e==this.getCursor()&&this.setCursor(null)}));(this||e).data.attachEvent("onStoreUpdated",bind((function(e,i,s){e&&e==this.getCursor()&&"paint"!=s&&"delete"!=s&&this._update_binds()}),this||e));(this||e).data.attachEvent("onClearAll",bind((function(){(this||e)._cursor=null}),this||e));(this||e).data.attachEvent("onIdChange",bind((function(i,s){if((this||e)._cursor==i){(this||e)._cursor=s;this._update_binds()}}),this||e))},refreshCursor:function(){(this||e)._cursor&&this.callEvent("onAfterCursorChange",[(this||e)._cursor])},setCursor:function(i){if(i!=(this||e)._cursor&&(null===i||this.getItem(i))){this.callEvent("onBeforeCursorChange",[(this||e)._cursor]);(this||e)._cursor=i;this.callEvent("onAfterCursorChange",[i])}},getCursor:function(){return(this||e)._cursor},_bind_update:function(i,s,n){if("$level"==s&&(this||e).data.getBranch)return(i.data||i).importData((this||e).data.getBranch(this.getCursor()));var r=this.getItem(this.getCursor())||(this||e)._settings.defaultData||null;if("$data"==s){"function"===typeof n?n.call(i,r,this||e):i.data.importData(r?r[n]:[]);i.callEvent("onBindApply",[r,s,this||e])}else{n&&(r=n(r));this._bind_update_common(i,s,r)}}};var ut={$init:function(){this.attachEvent("onChange",(this||e)._update_binds)},_bind_update:function(i,s,n){s=s||"value";var r=this.getValue()||"";n&&(r=n(r));if(i.setValue)i.setValue(r,"auto");else if(i.filter)i.data.silent((function(){this.filter(s,r)}));else{var a={};a[s]=r;i._check_data_feed(r)&&i.setValues(a,false,"auto")}i.callEvent("onBindApply",[r,s,this||e])}};var ft={$init:function(){this.attachEvent("onChange",(this||e)._update_binds)},_bind_update:function(e,i,s){var n=this.getValues()||null;s&&(n=s(n));this._bind_update_common(e,i,n)}};var gt={$init:function(){(this||e)._bind_hash={};(this||e)._bind_updated={};(this||e)._ignore_binds={};this._bind_specific_rules(this||e)},saveBatch:function(i){(this||e)._do_not_update_binds=true;i.call(this||e);(this||e)._do_not_update_binds=false;this._update_binds()},setBindData:function(i,s){s&&((this||e)._ignore_binds[s]=true);if((this||e).setValue)this.setValue(i,"auto");else if((this||e).setValues)this.setValues(i,false,"auto");else{var n=this.getCursor();n?this.updateItem(n,i):this.add(i)}this.callEvent("onBindUpdate",[i,s]);(this||e).save&&this.save();s&&((this||e)._ignore_binds[s]=false)},getBindData:function(i,s){if((this||e)._bind_updated[i])return false;var n=$$(i);if(n.isVisible(n._settings.id)){(this||e)._bind_updated[i]=true;this._bind_update(n,(this||e)._bind_hash[i][0],(this||e)._bind_hash[i][1]);s&&n.filter&&n.refresh()}},addBind:function(i,s,n){(this||e)._bind_hash[i]=[s,n]},removeBind:function(i){delete(this||e)._bind_hash[i];delete(this||e)._bind_updated[i];delete(this||e)._ignore_binds[i]},_bind_specific_rules:function(s){s.filter?i.extend(this||e,dt):s.setValue?i.extend(this||e,ut):i.extend(this||e,ft)},_update_binds:function(){if(!(this||e)._do_not_update_binds)for(var i in(this||e)._bind_hash)if(!(this||e)._ignore_binds[i]){(this||e)._bind_updated[i]=false;this.getBindData(i,true)}},_bind_update_common:function(i,s,n){i.setValue?i.setValue(n&&s?n[s]:n,"auto"):i.filter?i.data.silent((function(){this.filter(s,n)})):!n&&i.clear?i.clear("auto"):i._check_data_feed(n)&&i.setValues(clone(n),false,"auto");i.callEvent("onBindApply",[n,s,this||e])}};var vt={bind:function(s,n,r){(this||e).attachEvent||i.extend(this||e,f);"string"==typeof s&&(s=$$(s));s._initBindSource&&s._initBindSource();(this||e)._initBindSource&&this._initBindSource();s.getBindData||i.extend(s,gt);this._bind_ready();s.addBind((this||e)._settings.id,n,r);(this||e)._bind_source=s._settings.id;(this||e)._bind_id=(this||e)._settings.id;(this||e)._bind_refresh_handler=this.attachEvent((this||e).touchable?"onAfterRender":"onBindRequest",(function(){return s.getBindData((this||e)._bind_id)}));(this||e).refresh&&this.isVisible((this||e)._bind_id)&&this.refresh()},unbind:function(){if((this||e)._bind_source){var i=$$((this||e)._bind_source);i&&i.removeBind((this||e)._bind_id);this.detachEvent((this||e)._bind_refresh_handler);(this||e)._bind_source=(this||e)._bind_refresh_handler=null}},_bind_ready:function(){var i=(this||e)._settings;if((this||e).filter){var s=i.id;(this||e).data._on_sync=bind((function(){$$((this||e)._bind_source)._bind_updated[s]=false}),this||e)}var n=(this||e).render;(this||e).render=function(){if(!(this||e)._in_bind_processing){(this||e)._in_bind_processing=true;var i=this.callEvent("onBindRequest");(this||e)._in_bind_processing=false;return n.apply(this||e,false===i?arguments:[])}};((this||e).getValue||(this||e).getValues)&&((this||e).save=function(i){var s=$$((this||e)._bind_source);if(i)s.setBindData(i);else{if((this||e).validate&&!this.validate())return false;var n=(this||e).getValue?(this||e).getValue:this.getValues();s.setBindData(n,(this||e)._settings.id);(this||e).setDirty&&this.setDirty(false)}});(this||e)._bind_ready=function(){}}};var pt=window.webix_view||{};var mt={name:"baseview",$init:function(i){i.id||(i.id=_uid((this||e).name));(this||e)._parent_cell=J._parent_cell;J._parent_cell=null;(this||e).$scope=i.$scope||((this||e)._parent_cell?(this||e)._parent_cell.$scope:J._global_scope);if(!(this||e)._viewobj){(this||e)._contentobj=(this||e)._viewobj=create("DIV",{class:"webix_view"});(this||e).$view=(this||e)._viewobj}},$skin:false,defaults:{width:0,height:0,gravity:1},getNode:function(){return(this||e)._viewobj},$setNode:function(i){(this||e)._viewobj=(this||e)._dataobj=(this||e).$view=i},getParentView:function(){return(this||e)._parent_cell||null},getTopParentView:function(){var i=this.getParentView();return i?i.getTopParentView():this||e},getFormView:function(){var e=this.getParentView();return!e||e._recollect_elements?e:e.getFormView()},getChildViews:function(){return[]},queryView:function(i,s){var n;"string"===typeof i&&(i={view:i});n="object"===_typeof(i)?function(e){var s=e.config;for(var n in i)if(s[n]!=i[n])return false;return true}:i;if("self"===s&&n(this||e))return this||e;var r="all"===s&&[];var a="parent"===s?(this||e)._queryGoUp:(this||e)._queryGoDown;var o=this._queryView(n,a,r);return"all"===s?r:o},_queryGoDown:function(e){return e.getChildViews()},_queryGoUp:function(e){var i=e.getParentView();return i?[i]:[]},_queryView:function(i,s,n){var r=s(this||e);for(var a=0;a<r.length;a++){if(i(r[a])){if(!n)return r[a];n.push(r[a])}var o=r[a]._queryView(i,s,n);if(o&&!n)return o}return null},isVisible:function(i){if((this||e)._settings.hidden){if(i){if(!(this||e)._hidden_render){(this||e)._hidden_render=[];(this||e)._hidden_hash={}}if(!(this||e)._hidden_hash[i]){(this||e)._hidden_hash[i]=true;(this||e)._hidden_render.push(i)}}return false}var s=this.getParentView();return!s||s.isVisible(i,(this||e)._settings.id)},isEnabled:function(){if((this||e)._disable_cover)return false;var i=this.getParentView();return!i||i.isEnabled()},_fix_cover:function(){(this||e)._disable_cover&&!(this||e)._disable_cover.parentNode&&(this||e)._viewobj.appendChild((this||e)._disable_cover)},disable:function(){remove((this||e)._disable_cover);(this||e)._settings.disabled=true;(this||e)._disable_cover=create("div",{class:"webix_disabled"});(this||e)._viewobj.appendChild((this||e)._disable_cover);(this||e)._viewobj.setAttribute("aria-disabled","true");addCss((this||e)._viewobj,"webix_disabled_view",true);ht._moveChildFocus(this||e)},enable:function(){(this||e)._settings.disabled=false;if((this||e)._disable_cover){remove((this||e)._disable_cover);removeCss((this||e)._viewobj,"webix_disabled_view");(this||e)._viewobj.removeAttribute("aria-disabled");(this||e)._disable_cover=null}},disabled_setter:function(e){e?this.disable():this.enable();return e},container_setter:function(e){assert(toNode(e),"Invalid container");return true},css_setter:function(i){"object"==_typeof(i)&&(i=createCss(i));(this||e)._viewobj.className+=" "+i;return i},id_setter:function(i){if(J._global_collection&&(J._global_collection!=(this||e)||(this||e)._prev_global_col)){var s=(this||e).config.$id=i;((this||e)._prev_global_col||J._global_collection)._elements[i]=this||e;i=_uid((this||e).name);((this||e)._prev_global_col||J._global_collection)._translate_ids[i]=s}assert(!ui.views[i],"Non unique view id: "+i);ui.views[i]=this||e;(this||e)._viewobj.setAttribute("view_id",i);return i},$setSize:function(i,s){var n=(this||e)._last_size;if(n&&n[0]==i&&n[1]==s){debug_size_box(this||e,[i,s,"not changed"]);return false}debug_size_box(this||e,[i,s]);(this||e)._last_size=[i,s];(this||e).$width=(this||e)._content_width=i-((this||e)._scroll_y?z.scrollSize:0);(this||e).$height=(this||e)._content_height=s-((this||e)._scroll_x?z.scrollSize:0);var r=(this||e)._settings;if(!r.flex){(this||e)._viewobj.style.width=i+"px";(this||e)._viewobj.style.height=s+"px"}return true},$getSize:function(i,s){var n=(this||e)._settings;var r=[1*(n.width||n.minWidth||0),1*(n.width||n.maxWidth||1e5),1*(n.height||n.minHeight||0),1*(n.height||n.maxHeight||1e5),n.gravity];if(assert){var a=isNaN(r[0])||isNaN(r[1])||isNaN(r[2])||isNaN(r[3]);if(a){assert(false,"Size is not a number "+(this||e)._settings.id);n.width=n.height=n.maxWidth=n.maxHeight=n.minWidth=n.minHeight=0;r=[0,0,1e5,1e5,1]}}r[0]+=i;r[1]+=i;r[2]+=s;r[3]+=s;return r},show:function(s,n){var r=this.getParentView();var a=!arguments[2];if(r){!n&&false!==n&&(this||e)._settings.animate&&r._settings.animate&&(n=i.extend(r._settings.animate?i.extend({},r._settings.animate):{},(this||e)._settings.animate,true));(a?r._show:r._hide)&&(a?r._show:r._hide).call(r,this||e,n);a&&this._render_hidden_views();s&&a&&r.show(!r.$$&&s)}else if((this||e)._settings.hidden){if(a){var o=toNode((this||e)._settings._container||document.body);o.appendChild((this||e)._viewobj);(this||e)._settings.hidden=false;this.adjust();if((this||e).callEvent){this.callEvent("onViewShow",[]);(this||e)._signal_hidden_cells&&_each(this||e,(this||e)._signal_hidden_cells)}this._render_hidden_views()}}else if(!a){(this||e)._settings.hidden=(this||e)._settings._hidden=true;if((this||e)._viewobj){(this||e)._settings._container=(this||e)._viewobj.parentNode;remove((this||e)._viewobj)}}},_render_hidden_views:function(){if((this||e)._hidden_render){for(var i=0;i<(this||e)._hidden_render.length;i++){var s=$$((this||e)._hidden_render[i]);s&&s.render()}(this||e)._hidden_render=[];(this||e)._hidden_hash={}}},_onKeyPress:function(i,s){var n=s.target,r=n.getAttribute("role");if((13===i||32===i)&&("button"==r||"tab"==r)&&!(this||e)._settings.disabled){triggerEvent(n,"MouseEvent","click");preventEvent(s)}},hidden_setter:function(i){i&&this.hide();return(this||e)._settings.hidden},hide:function(){this.show(null,null,true);ht._moveChildFocus(this||e)},adjust:function(){if(!(this||e)._viewobj.parentNode)return false;var i=(this||e)._viewobj.parentNode.clientWidth||0;var s=(this||e)._viewobj.parentNode.clientHeight||0;var n=this.$getSize(0,0);var r=(this||e)._viewobj.parentNode==document.body&&!(this||e).setPosition;n[0]>i&&(i=n[0]);n[2]>s&&(s=n[2]);(!r||(this||e)._settings.width)&&i>n[1]&&(i=n[1]);(!r||(this||e)._settings.height)&&s>n[3]&&(s=n[3]);this.$setSize(i,s);if(J._responsive_exception){J._responsive_exception=false;this.adjust()}},resize:function(){if(!(J._child_sizing_active||J._freeze_resize||J._responsive_tinkery)){var e=this.getParentView();if(e)e.resizeChildren?e.resizeChildren():e.resize();else{this.adjust();callEvent("onResize",[])}}}};var bt=i.protoUI(mt,_t,ct,vt,pt);var wt={api:mt,view:bt};var xt={name:"view",$init:function(e){this._set_inner(e)},_set_inner:function(i){var s=isUndefined(i.borderless);if(s&&!(this||e).setPosition&&i.$topView){i.borderless=true;s=false}if(s&&(this||e).defaults.borderless||i.borderless)i._inner={top:true,left:true,bottom:true,right:true};else{i._inner||(i._inner={});(this||e)._contentobj.style.borderWidth="1px"}},$getSize:function(i,s){var n=(this||e)._settings._inner;if(n){i+=(n.left?0:1)+(n.right?0:1);s+=(n.top?0:1)+(n.bottom?0:1)}var r=wt.api.$getSize.call(this||e,i,s);debug_size_box(this||e,r,true);return r},$setSize:function(i,s){debug_size_box(this||e,[i,s]);var n=(this||e)._settings._inner;if(n){i-=(n.left?0:1)+(n.right?0:1);s-=(n.top?0:1)+(n.bottom?0:1)}return wt.api.$setSize.call(this||e,i,s)}};var yt=i.protoUI(xt,wt.view);var St={api:xt,view:yt};yt.call(-1);var $t=i.proto({$init:function(){(this||e).type=clone((this||e).type)},customize:function(i){type(this||e,i)},template_setter:function(i){(this||e).type.template=template(i)},_toHTML:function(i){var s=(this||e).type;return(s.templateStart?s.templateStart(i,s):"")+s.template(i,s)+(s.templateEnd?s.templateEnd(i,s):"")}},X);var Ct={name:"tooltip",defaults:{dy:0,dx:20},$init:function(i){"string"==typeof i&&(i={template:i});(this||e).$view=(this||e)._viewobj=(this||e)._contentobj=(this||e)._dataobj=create("DIV",{role:"alert","aria-atomic":"true"});(this||e)._viewobj.className=(this||e)._css_name;insertBefore((this||e)._contentobj,document.body.firstChild,document.body)},adjust:function(){},isVisible:function(){return(this||e)._visible},_alt_render:function(i){if(this.callEvent("onBeforeRender",[i])){(this||e)._dataobj.innerHTML="";(this||e)._dataobj.innerHTML=i;this.callEvent("onAfterRender",[])}},_css_name:"webix_tooltip",css_setter:function(i){"object"===_typeof(i)&&(i=createCss(i));(this||e)._viewobj.className=(this||e)._css_name+" "+i;return i},show:function(s,n){if(!(this||e)._disabled){(this||e)._visible=true;if("string"===typeof s)this._alt_render(s);else{(this||e).data=i.extend({},s);this.render()}if((this||e)._dataobj.firstChild){var r=Math.max(document.documentElement.clientWidth,window.innerWidth||0);var a=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var o=r-n.x;var l=a-n.y;(this||e)._contentobj.style.display="block";if(o-(this||e)._settings.dx>(this||e)._contentobj.offsetWidth)o=n.x;else{o=n.x-2*(this||e)._settings.dx-(this||e)._contentobj.offsetWidth;o<0&&(o=0)}if(l-(this||e)._settings.dy>(this||e)._contentobj.offsetHeight)l=n.y;else{l=n.y-2*(this||e)._settings.dy-(this||e)._contentobj.offsetHeight;l<0&&(l=0)}(this||e)._contentobj.style.left=o+(this||e)._settings.dx+"px";(this||e)._contentobj.style.top=l+(this||e)._settings.dy+"px"}else this.hide()}},hide:function(){if((this||e)._visible){(this||e).data=null;(this||e)._contentobj.style.display="none";(this||e)._visible=false}},disable:function(){(this||e)._disabled=true},enable:function(){(this||e)._disabled=false},type:{template:template("{obj.value}"),templateStart:template.empty,templateEnd:template.empty}};i.protoUI(Ct,$t,_t,f,St.view);var kt={tooltip_setter:function(i){if(i){"function"!==typeof i&&"string"!==typeof i||(i={template:i});"object"!==_typeof(i)&&(i={});i.overflow&&isUndefined(i.template)&&(i.template="");this._init_tooltip_once();return i}if((this||e)._settings.tooltip)return{template:""}},_init_tooltip_once:function(){tt.addTooltip(this||e);this.attachEvent("onDestruct",(function(){tt.removeTooltip(this||e)}));this.attachEvent("onAfterScroll",(function(){tt._tooltip_exist&&tt._hide_tooltip()}));(this||e)._init_tooltip_once=function(){}},$tooltipIn:function(s){var n=tt._tooltip;var r=i.extend({dx:20,dy:0,template:"{obj.value}",css:""},(this||e)._settings.tooltip,true);n.define(r);return s},$tooltipOut:function(){tt._hide_tooltip();return null},$tooltipMove:function(i,s,n){var r=(this||e)._settings.tooltip;var a=!r||isUndefined(r.overflow)?tt.overflow:r.overflow;var o=!r||isUndefined(r.delay)?tt.delay:r.delay;var l=a?n.overflow:n.first;o>0&&tt._hide_tooltip();tt._before_show_delay=delay((this||e)._show_tooltip,this||e,[i,s,l],o)},_show_tooltip:function(e,i,s){var n=s||this._get_tooltip_data(e,i);n&&this.isVisible()&&tt._tooltip.show(n,pos(i))},_get_tooltip_data:function(i,s){if((this||e).locate&&(this||e).getItem){var n=this.locate(s);return n?this.getItem(n):null}return(this||e)._settings}};var It=i.proto({$init:function(i){(this||e)._canvas_labels=[];(this||e)._canvas_series=isUndefined(i.series)?i.name:i.series;(this||e)._obj=toNode(i.container||i);var s=i.width*(window.devicePixelRatio||1);var n=i.height*(window.devicePixelRatio||1);var r=i.style||"";r+=";width:"+i.width+"px;height:"+i.height+"px;";this._prepareCanvas(i.name,r,s,n,i.title)},_prepareCanvas:function(i,s,n,r,a){(this||e)._canvas=create("canvas",{title:a,width:n,height:r,canvas_id:i,style:s||""});(this||e)._obj.appendChild((this||e)._canvas);return(this||e)._canvas},getCanvas:function(i){var s=((this||e)._canvas||this._prepareCanvas((this||e)._contentobj)).getContext(i||"2d");if(!(this||e)._webixDevicePixelRatio){(this||e)._webixDevicePixelRatio=true;s.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)}return s},_resizeCanvas:function(i,s){if((this||e)._canvas){(this||e)._canvas.setAttribute("width",i*(window.devicePixelRatio||1));(this||e)._canvas.setAttribute("height",s*(window.devicePixelRatio||1));(this||e)._canvas.style.width=i+"px";(this||e)._canvas.style.height=s+"px";(this||e)._webixDevicePixelRatio=false}},renderText:function(i,s,n,r,a){if(n){a&&(a=Math.max(a,0));s&&(s=Math.max(s,0));var o=create("DIV",{class:"webix_canvas_text"+(r?" "+r:""),style:"left:"+i+"px; top:"+s+"px;","aria-hidden":"true"},n);(this||e)._obj.appendChild(o);(this||e)._canvas_labels.push(o);a&&(o.style.width=a+"px");return o}},renderTextAt:function(i,s,n,r,a,o,l){var h=(this||e).renderText.call(this||e,n,r,a,o,l);if(h){i&&(h.style.top="middle"==i?parseInt(r-h.offsetHeight/2,10)+"px":r-h.offsetHeight+"px");s&&(h.style.left="left"==s?n-h.offsetWidth+"px":parseInt(n-h.offsetWidth/2,10)+"px")}return h},clearCanvas:function(i){var s=[];remove((this||e)._canvas_labels);(this||e)._canvas_labels=[];if(!i&&(this||e)._obj._htmlmap){s=this._getMapAreas();while(s.length){s[0].parentNode.removeChild(s[0]);s.splice(0,1)}s=null;if(!(this||e)._obj._htmlmap.getElementsByTagName("AREA").length){(this||e)._obj._htmlmap.parentNode.removeChild((this||e)._obj._htmlmap);(this||e)._obj._htmlmap=null}}this.getCanvas().clearRect(0,0,(this||e)._canvas.offsetWidth||Math.floor((this||e)._canvas.width/(window.devicePixelRatio||1)),(this||e)._canvas.offsetHeight||Math.floor((this||e)._canvas.height/(window.devicePixelRatio||1)))},toggleCanvas:function(){this._toggleCanvas("none"==(this||e)._canvas.style.display)},showCanvas:function(){this._toggleCanvas(true)},hideCanvas:function(){this._toggleCanvas(false)},_toggleCanvas:function(i){var s,n;for(n=0;n<(this||e)._canvas_labels.length;n++)(this||e)._canvas_labels[n].style.display=i?"":"none";if((this||e)._obj._htmlmap){s=this._getMapAreas();for(n=0;n<s.length;n++)i?s[n].removeAttribute("disabled"):s[n].setAttribute("disabled","true")}(this||e)._canvas.style.display=i?"":"none"},_getMapAreas:function(){var i,s,n=[];i=(this||e)._obj._htmlmap.getElementsByTagName("AREA");for(s=0;s<i.length;s++)i[s].getAttribute("userdata")==(this||e)._canvas_series&&n.push(i[s]);return n}});var animate=function(e,i){var s=i;if(isArray(e))for(var n=0;n<e.length;n++){isArray(i)&&(s=i[n]);if("slide"==s.type){if("out"==s.subtype&&0===n)continue;if("in"==s.subtype&&1==n)continue}if("flip"!=s.type)animate(e[n],s);else{var r=clone(s);0===n&&(r.type="flipback");1==n&&(r.callback=null);animate(e[n],r)}}else{var a=toNode(e);a._has_animation?animate.end(a,s):animate.start(a,s)}};animate.end=function(i,s){i.style[z.transitionDuration]="1ms";i._has_animation=null;J._wait_animate&&window.clearTimeout(J._wait_animate);J._wait_animate=delay(animate,this||e,[i,s],10)};animate.formLine=function(e,i,s){var n=s.direction;i.parentNode&&(i.parentNode.style.position="relative");i.style.position="absolute";e.style.position="absolute";var r=z.isFF?"top"==n||"left"==n?-1:1:0;if("top"==n||"bottom"==n){e.style.left="0px";e.style.top=(s.top||r)+("top"==n?1:-1)*i.offsetHeight+"px"}else{e.style.top=(s.top||0)+"px";e.style.left=r+("left"==n?1:-1)*i.offsetWidth+"px"}i.parentNode==e.parentNode&&s.keepViews?e.style.display="":insertBefore(e,i.nextSibling,i.parentNode);if("slide"==s.type&&"out"==s.subtype){e.style.left="0px";e.style.top=(s.top||0)+"px";i.parentNode.removeChild(i);insertBefore(i,e.nextSibling,e.parentNode)}return[e,i]};animate.breakLine=function(e){arguments[1]?e[1].style.display="none":remove(e[1]);animate.clear(e[0]);animate.clear(e[1]);e[0].style.position=""};animate.clear=function(e){e.style[z.transform]="none";e.style[z.transition]="none";e.style.top=e.style.left=""};animate.defaults={type:"slide",delay:"0",duration:"500",timing:"ease-in-out",x:0,y:0};animate.start=function(e,i){"string"==typeof i&&(i={type:i});i=_t._mergeSettings(i,animate.defaults);var s=e._has_animation=i;var n,r;switch("slide"==s.type&&s.direction){case"right":s.x=e.offsetWidth;break;case"left":s.x=-e.offsetWidth;break;case"top":s.y=-e.offsetHeight;break;case"bottom":default:s.y=s.y||e.offsetHeight;break}if("flip"==s.type||"flipback"==s.type){n=[0,0];r="scaleX";if("vertical"==s.subtype){n[0]=20;r="scaleY"}else n[1]=20;if("right"==s.direction||"bottom"==s.direction){n[0]*=-1;n[1]*=-1}}var a=s.duration+"ms "+s.timing+" "+s.delay+"ms";var o="transformStyle: preserve-3d;";var l="";var h="";switch(s.type){case"fade":l="opacity "+a;o="opacity: 0;";break;case"show":l="opacity "+a;o="opacity: 1;";break;case"flip":a=s.duration/2+"ms "+s.timing+" "+s.delay+"ms";h="skew("+n[0]+"deg, "+n[1]+"deg) "+r+"(0.00001)";l="all "+a;break;case"flipback":s.delay+=s.duration/2;a=s.duration/2+"ms "+s.timing+" "+s.delay+"ms";e.style[z.transform]="skew("+-1*n[0]+"deg, "+-1*n[1]+"deg) "+r+"(0.00001)";e.style.left="0";h="skew(0deg, 0deg) "+r+"(1)";l="all "+a;break;case"slide":var _=s.x+"px";var c=s.y+"px";h=z.translate+"("+_+", "+c+("translate3d"==z.translate?", 0":"")+")";l="transform "+a;break;default:break}delay((function(){e.style[z.transition]=l;delay((function(){o&&(e.style.cssText+=o);h&&(e.style[z.transform]=h);var i=false;var n=event$1(e,z.transitionEnd,(function(r){e._has_animation=null;s.callback&&s.callback.call(s.master||window,e,s,r);i=true;eventRemove(n)}));window.setTimeout((function(){if(!i){var r=s.master||window;e._has_animation=null;!r.$destructed&&s.callback&&s.callback.call(r,e,s);i=true;eventRemove(n)}}),1.3*(1*s.duration+1*s.delay))}))}))};var Mt={topLayout:"space",barHeight:44,tabbarHeight:42,sidebarTitleHeight:44,rowHeight:36,toolbarHeight:44,listItemHeight:36,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:36,labelTopHeight:22,propertyItemHeight:28,timelineItemHeight:70,unitHeaderHeight:36,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:15,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:2},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:2,form:17,accordion:0},tabMargin:0,tabOffset:0,tabBottomOffset:0,tabTopOffset:0,tabBorder:true,customCheckbox:true,customRadio:true,sidebarMarkAll:true,popupNoPoint:true,borderlessPopup:true,popupPadding:0,dataPadding:12,calendarWeekHeaderHeight:18,padding:0,accordionType:"accordion",optionHeight:32,timelineColor:"#1CA1C1",backColor:"#ffffff",colorPadding:4};var Tt={topLayout:"space",barHeight:36,tabbarHeight:34,sidebarTitleHeight:36,rowHeight:28,toolbarHeight:36,listItemHeight:28,inputHeight:30,buttonHeight:30,inputPadding:3,menuHeight:28,labelTopHeight:16,propertyItemHeight:24,unitHeaderHeight:28,timelineItemHeight:50,inputSpacing:4,borderWidth:1,sliderHandleWidth:12,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:20,switchWidth:40,layoutMargin:{space:5,wide:5,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:2},layoutPadding:{space:5,wide:0,clean:0,head:0,line:0,toolbar:2,form:12,accordion:0},tabMargin:0,tabOffset:0,tabBottomOffset:0,tabTopOffset:0,tabBorder:true,customCheckbox:true,customRadio:true,sidebarMarkAll:true,popupNoPoint:true,borderlessPopup:true,popupPadding:0,dataPadding:12,calendarWeekHeaderHeight:18,padding:0,accordionType:"accordion",optionHeight:24,timelineColor:"#1CA1C1",backColor:"#ffffff",colorPadding:4};var Et={topLayout:"space",barHeight:46,tabbarHeight:46,rowHeight:34,toolbarHeight:46,sidebarTitleHeight:45,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:22,unitHeaderHeight:20,propertyItemHeight:28,timelineItemHeight:70,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:15,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:3,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:true,customRadio:true,popupPadding:8,dataPadding:10,calendarWeekHeaderHeight:24,padding:0,accordionType:"accordion",optionHeight:32,timelineColor:"#3498db",backColor:"#ffffff",colorPadding:4};var At={topLayout:"space",barHeight:34,tabbarHeight:34,sidebarTitleHeight:34,rowHeight:24,toolbarHeight:34,listItemHeight:28,unitHeaderHeight:20,propertyItemHeight:24,timelineItemHeight:50,inputHeight:30,buttonHeight:30,inputPadding:3,menuHeight:28,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:10,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:20,switchWidth:40,layoutMargin:{space:5,wide:5,clean:0,head:4,line:-1,toolbar:4,form:4,accordion:5},layoutPadding:{space:5,wide:0,clean:0,head:0,line:0,toolbar:1,form:12,accordion:0},tabMargin:3,tabOffset:0,tabBottomOffset:3,tabTopOffset:1,customCheckbox:true,customRadio:true,popupPadding:8,dataPadding:10,calendarWeekHeaderHeight:24,padding:0,accordionType:"accordion",optionHeight:23,timelineColor:"#3498db",backColor:"#ffffff",colorPadding:4};var zt={topLayout:"space",barHeight:46,tabbarHeight:46,rowHeight:34,toolbarHeight:46,sidebarTitleHeight:45,listItemHeight:34,unitHeaderHeight:20,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:22,propertyItemHeight:28,timelineItemHeight:70,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:15,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:8,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:3,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:true,customRadio:true,popupPadding:8,dataPadding:10,calendarWeekHeaderHeight:24,padding:0,accordionType:"accordion",optionHeight:32,timelineColor:"#b300b3",backColor:"#393939",colorPadding:4};var Ht,jt;function set$1(e){assert(Pt[e],"Incorrect skin name: "+e);if(jt!==e){Pt.$active=Ht=Pt[e];Pt.$name=jt=e;if(ui)for(var i in ui){var s=ui[i];s&&s.prototype&&s.prototype.$skin&&s.prototype.$skin(s.prototype)}}}var Pt={set:set$1,material:Mt,mini:Tt,flat:Et,compact:At,contrast:zt};set$1(window.webix_skin||"material");var Vt={config:{longTouchDelay:700,scrollDelay:150,gravity:500,deltaStep:10,speed:"0ms",finish:1e3,elastic:true},limit:function(e){Vt._limited=false!==e},disable:function(){Vt._disabled=true},enable:function(){Vt._disabled=false},$init:function(){Vt.$init=function(){};event$1(document.body,z.touch.down,Vt._touchstart,{passive:false});event$1(document.body,z.touch.move,Vt._touchmove,{passive:false});event$1(document,z.touch.up,Vt._touchend);event$1(document.body,"dragstart",(function(e){if(!Vt._disabled&&!Vt._limited)return preventEvent(e)}));Vt._clear_artefacts();Vt._scroll=[null,null];Vt.$active=true},_clear_artefacts:function(){Vt._start_context=Vt._current_context=Vt._prev_context=Vt._scroll_context=null;Vt._scroll_mode=Vt._scroll_node=Vt._scroll_stat=Vt._long_touched=null;Vt._delta={_x_moment:0,_y_moment:0,_time:0};if(Vt._css_button_remove){removeCss(Vt._css_button_remove,"webix_touch");Vt._css_button_remove=null}window.clearTimeout(Vt._long_touch_timer);Vt._was_not_moved=true;Vt._axis_x=true;Vt._axis_y=true;Vt._active_transion||Vt._scroll_end()},_touchend:function(e){if(Vt._start_context){if(Vt._scroll_mode){var i=Vt._get_matrix(Vt._scroll_node);var s=i.e;var n=i.f;var r=Vt.config.finish;var a=Vt._get_delta(e);var o=$$(Vt._scroll_node);var l=o&&o.$scroll?o.$scroll.gravity:Vt.config.gravity;if(a._time){var h=s+l*a._x_moment/a._time;var _=n+l*a._y_moment/a._time;var c=Vt._scroll[0]?Vt._correct_minmax(h,false,false,Vt._scroll_stat.dx,Vt._scroll_stat.px):s;var d=Vt._scroll[1]?Vt._correct_minmax(_,false,false,Vt._scroll_stat.dy,Vt._scroll_stat.py):n;var u=Math.max(Math.abs(c-s),Math.abs(d-n));u<150&&(r=r*u/150);c==s&&d==n||(r=Math.round(r*Math.max((c-s)/(h-s),(d-n)/(_-n))));var f={e:c,f:d};o=$$(Vt._scroll_node);o&&o.adjustScroll&&o.adjustScroll(f);r=Math.min(Vt.config.finish,Math.max(100,r));if(s!=f.e||n!=f.f){Vt._set_matrix(Vt._scroll_node,f.e,f.f,r+"ms");Vt._scroll_master&&Vt._scroll_master._sync_scroll(f.e,f.f,r+"ms")}else Vt._scroll_end()}else Vt._scroll_end()}else Vt._long_touched||(Vt._axis_y&&!Vt._axis_x?Vt._translate_event("onSwipeX"):Vt._axis_x&&!Vt._axis_y&&Vt._translate_event("onSwipeY"));Vt._translate_event("onTouchEnd");Vt._clear_artefacts()}},_touchmove:function(e){if(Vt._scroll_context&&Vt._start_context){var i=Vt._get_delta(e);Vt._translate_event("onTouchMove");if(Vt._scroll_mode)Vt._set_scroll_pos();else{Vt._axis_x=Vt._axis_check(i._x,"x",Vt._axis_x);Vt._axis_y=Vt._axis_check(i._y,"y",Vt._axis_y);if(Vt._scroll_mode){var s=Vt._get_event_view("onBeforeScroll",true);if(s){var n={};s.callEvent("onBeforeScroll",[n]);if(n.update){Vt.config.speed=n.speed;Vt.config.scale=n.scale}}Vt._init_scroller()}else{var r=Vt._is_scroll();var a=$$(r&&r[0]);if(a&&a.$hasYScroll&&a.$hasYScroll()&&e.cancelable)return preventEvent(e)}}return Vt._scroll_mode&&e.cancelable?preventEvent(e):void 0}},_set_scroll_pos:function(){if(Vt._scroll_node){var e=Vt._get_matrix(Vt._scroll_node);var i=Vt._prev_context||Vt._start_context;var s=$$(Vt._scroll_node);var n=s&&s.$scroll?s.$scroll.elastic:Vt.config.elastic;Vt._scroll[0]&&(e.e=Vt._correct_minmax(e.e-i.x+Vt._current_context.x,n,e.e,Vt._scroll_stat.dx,Vt._scroll_stat.px));Vt._scroll[1]&&(e.f=Vt._correct_minmax(e.f-i.y+Vt._current_context.y,n,e.f,Vt._scroll_stat.dy,Vt._scroll_stat.py));Vt._set_matrix(Vt._scroll_node,e.e,e.f,"0ms");Vt._scroll_master&&Vt._scroll_master._sync_scroll(e.e,e.f,"0ms")}},scrollTo:function(e,i,s,n){Vt._set_matrix(e,i,s,n)},_set_matrix:function(e,i,s,n){if(n){Vt._active_transion=true;if(e){var r=Vt.config.translate||z.translate;e.style[z.transform]=r+"("+Math.round(i)+"px, "+Math.round(s)+"px"+("translate3d"==r?", 0":"")+")";e.style[z.transitionDuration]=n}}else e.style[z.transform]=""},_get_matrix:function(e){var i=window.getComputedStyle(e)[z.transform];var s;if("none"==i)s={e:0,f:0};else if(window.WebKitCSSMatrix)s=new WebKitCSSMatrix(i);else{var n=i.replace(/(matrix\()(.*)(\))/gi,"$2");n=n.replace(/\s/gi,"");n=n.split(",");s={};var r=["a","b","c","d","e","f"];for(var a=0;a<r.length;a++)s[r[a]]=parseInt(n[a],10)}Vt._scroll_master&&Vt._scroll_master._sync_pos(s);return s},_correct_minmax:function(e,i,s,n,r){if(e===s)return e;if(r>n)return 0;var a=Math.abs(e-s);var o=a/(e-s);if(e>0)return i?s+o*Math.sqrt(a):0;var l=n-r;return l+e<0?i?s+o*Math.sqrt(a):-l:e},_init_scroll_node:function(e){if(!e.scroll_enabled){e.scroll_enabled=true;e.parentNode.style.position="relative";e.style.cssText+="transition:transform; user-select:none; transform-style:flat;";e.addEventListener(z.transitionEnd,Vt._scroll_end,false)}},_init_scroller:function(){-1!==Vt._scroll_mode.indexOf("x")&&(Vt._scroll[0]=true);-1!==Vt._scroll_mode.indexOf("y")&&(Vt._scroll[1]=true);(Vt._scroll[0]||Vt._scroll[1])&&(Vt._scroll[2]=Vt._scroll_node);Vt._init_scroll_node(Vt._scroll_node)},_axis_check:function(e,i,s){if(e>Vt.config.deltaStep){if(Vt._was_not_moved){Vt._long_move(i);Vt._locate(i);-1==(Vt._scroll_mode||"").indexOf(i)&&(Vt._scroll_mode="")}return false}return s},_scroll_end:function(){var i,s,n;n=$$(Vt._scroll_node||this||e);if(n){if(Vt._scroll_node)i=Vt._get_matrix(Vt._scroll_node);else if(n.getScrollState){s=n.getScrollState();i={e:-s.x,f:-s.y}}callEvent("onAfterScroll",[i]);n.callEvent&&n.callEvent("onAfterScroll",[i])}Vt._scroll_mode||(Vt._scroll=[null,null]);Vt._active_transion=false},_long_move:function(){window.clearTimeout(Vt._long_touch_timer);Vt._was_not_moved=false},_stop_old_scroll:function(e){if(!Vt._scroll[2])return true;Vt._stop_scroll(e,Vt._scroll[0]?"x":"y")},_touchstart:function(e){if(!Vt._disabled){Vt._long_touched=null;Vt._scroll_context=Vt._start_context=z.touch.context(e);Vt._limited&&!Vt._is_scroll()&&(Vt._scroll_context=null);Vt._translate_event("onTouchStart");Vt._stop_old_scroll(e)&&(Vt._long_touch_timer=window.setTimeout(Vt._long_touch,Vt.config.longTouchDelay));var i=$$(e);if(i&&i.touchable&&(!e.target.className||0!==e.target.className.indexOf("webix_view"))){Vt._css_button_remove=i.getNode(e);addCss(Vt._css_button_remove,"webix_touch")}}},_long_touch:function(){if(Vt._start_context){Vt._long_touched=true;Vt._translate_event("onLongTouch");callEvent("onClick",[Vt._start_context])}},_stop_scroll:function(e,i){Vt._locate(i);if(Vt._scroll[2]){var s=Vt._get_event_view("onBeforeScroll",true);s&&s.callEvent("onBeforeScroll",[Vt._start_context,Vt._current_context]);if(!Vt._scroll_node||Vt._scroll_node.parentNode!==Vt._scroll[2].parentNode){Vt._clear_artefacts();Vt._scroll_end();Vt._start_context=z.touch.context(e)}}Vt._touchmove(e)},_get_delta:function(e){Vt._prev_context=Vt._current_context;Vt._current_context=z.touch.context(e);Vt._delta._x=Math.abs(Vt._start_context.x-Vt._current_context.x);Vt._delta._y=Math.abs(Vt._start_context.y-Vt._current_context.y);if(Vt._prev_context){if(Vt._current_context.time-Vt._prev_context.time<Vt.config.scrollDelay){Vt._delta._x_moment=Vt._delta._x_moment/1.3+Vt._current_context.x-Vt._prev_context.x;Vt._delta._y_moment=Vt._delta._y_moment/1.3+Vt._current_context.y-Vt._prev_context.y}else Vt._delta._y_moment=Vt._delta._x_moment=0;Vt._delta._time=Vt._delta._time/1.3+(Vt._current_context.time-Vt._prev_context.time)}return Vt._delta},_get_sizes:function(e){return{dx:e.offsetWidth,dy:e.offsetHeight,px:e.parentNode.offsetWidth,py:e.parentNode.offsetHeight}},_is_scroll:function(e){var i=Vt._start_context.target;while(i&&"BODY"!=i.tagName){if(i.getAttribute){var s=i.getAttribute("touch_scroll");if(s&&(!e||-1!=s.indexOf(e)))return[i,s]}i=i.parentNode}return null},_locate:function(e){var i=Vt._is_scroll(e);if(i){Vt._scroll_mode=i[1];Vt._scroll_node=i[0];Vt._scroll_stat=Vt._get_sizes(i[0])}return i},_translate_event:function(e){callEvent(e,[Vt._start_context,Vt._current_context]);var i=Vt._get_event_view(e);i&&i.callEvent(e,[Vt._start_context,Vt._current_context])},_get_event_view:function(e,i){var s=$$(i?Vt._scroll_node:Vt._start_context);if(!s)return null;while(s){if(s.hasEvent&&s.hasEvent(e))return s;s=s.getParentView()}return null},_get_context:function(e){if(!e.touches[0]){var i=Vt._current_context;i.time=new Date;return i}return{target:e.target,x:e.touches[0].pageX,y:e.touches[0].pageY,time:new Date}},_get_context_m:function(e){return{target:e.target,x:e.pageX,y:e.pageY,time:new Date}}};function touchInit(){if(z.touch){Vt.$init();-1===document.body.className.indexOf("webix_full_screen")&&Vt.limit(true);z.isSafari&&CSS.supports("-webkit-overflow-scrolling: touch")&&addStyle(".webix_view{ -webkit-overflow-scrolling:touch; } .webix_scroll_cont{ transform:translateZ(0px); }")}}ready(touchInit);z.mouse={down:"mousedown",move:"mousemove",up:"mouseup",context:Vt._get_context_m};z.touch=z.touch&&{down:"touchstart",move:"touchmove",up:"touchend",context:Vt._get_context};var Nt={_drag_masters:_to_array(["dummy"]),
/*
    	register drop area
    	@param node 			html node or ID
    	@param ctrl 			options dnd master
    	@param master_mode 		true if you have complex drag-area rules
    */
addDrop:function(e,i,s){e=toNode(e);e.webix_drop=this._getCtrl(i);s&&(e.webix_master=true)},_getCtrl:function(i){i=i||Nt;var s=(this||e)._drag_masters.find(i);if(s<0){s=(this||e)._drag_masters.length;(this||e)._drag_masters.push(i);i.attachEvent&&i.attachEvent("onDestruct",(function(){return Nt.unlink(i)}))}return s},unlink:function(i){var s=(this||e)._drag_masters.find(i);if(s>-1){Nt._active&&Nt._active.webix_drag==s&&Nt._stopDrag();Nt._last&&Nt._last.webix_drop==s&&(Nt._last=null);(this||e)._drag_masters[s]=null}},_createTouchDrag:function(e,i){var s=Nt;var n=this._getActiveDragMaster();if(n&&n.$longTouchLimit){if(!s._html&&!s.createDrag(e,i))return;e.longtouch_drag=true;var r=pos(e);var a=s.$dragPos(r,e);var o=s._drag_context;s._html.style.top=r.y+s.top+(a||!o.y_offset?0:o.y_offset)+"px";s._html.style.left=r.x+s.left+(a||!o.x_offset?0:o.x_offset)+"px"}},
/*
    	register drag area
    	@param node 	html node or ID
    	@param ctrl 	options dnd master
    */
addDrag:function(i,s){var n=this||e;i=toNode(i);i.webix_drag=this._getCtrl(s);_event(i,"dragstart",preventEvent);_event(i,z.mouse.down,(function(e){return n._preStart(e,i,"mouse")}));z.touch&&_event(i,z.touch.down,(function(e){return n._preStart(e,i,"touch")}))},_preStart:function(e,i,s){if(Nt._active){if(Nt._saved_event==e)return;Nt._preStartFalse(e);Nt.destroyDrag(e)}Nt._active=i;var n=z[s].context(e);Nt._start_pos=n;Nt._saved_event=e;var r="touch"===s?{passive:false}:null;Nt._webix_drag_mm=event$1(document.body,z[s].move,(function(e){return Nt._startDrag(e,s)}),r);Nt._webix_drag_mu=event$1(document,z[s].up,Nt._preStartFalse);addCss(document.body,"webix_noselect",1)},_preStartFalse:function(e){Nt._clean_dom_after_drag();Nt._touch_animation=!e.cancelable},_startDrag:function(e,i){var s="touch"===i;Nt._touch_animation=!e.cancelable;if(s&&Nt._touch_animation){Nt._clean_dom_after_drag();return Nt.destroyDrag(e)}var n=z[i].context(e);var r=Nt._getActiveDragMaster();var a=s&&r&&r.$longTouchLimit&&!Vt._long_touched;if(!(a||Math.abs(n.x-Nt._start_pos.x)<5&&Math.abs(n.y-Nt._start_pos.y)<5)){if(!Nt._html&&!Nt.createDrag(Nt._saved_event,i))return Nt._clean_dom_after_drag();Nt._clean_dom_after_drag(true);Nt.sendSignal("start");if(s){Nt._webix_drag_mm=event$1(e.target,z[i].move,(function(e){return Nt._moveDrag(e,i)}),{passive:false});Nt._webix_drag_mu=event$1(e.target,z[i].up,Nt._stopDrag)}else{Nt._webix_drag_mm=event$1(document.body,z[i].move,(function(e){return Nt._moveDrag(e,i)}));Nt._webix_drag_mu=event$1(document,z[i].up,Nt._stopDrag)}Nt._moveDrag(e,i,true)}},_stopDrag:function(e){Nt._clean_dom_after_drag();Nt._saved_event=null;if(Nt._last&&e){Nt.$drop(Nt._active,Nt._last,e);Nt.$dragOut(Nt._active,Nt._last,null,e)}Nt.destroyDrag(e);Nt.sendSignal("stop")},_clean_dom_after_drag:function(i){(this||e)._webix_drag_mm=eventRemove((this||e)._webix_drag_mm);(this||e)._webix_drag_mu=eventRemove((this||e)._webix_drag_mu);i||removeCss(document.body,"webix_noselect")},_moveDrag:function(e,i,s){var n=Nt;var r=pos(e);var a=n.$dragPos(r,e);var o=n._drag_context;n._html.style.top=r.y+n.top+(a||!o.y_offset?0:o.y_offset)+"px";n._html.style.left=r.x+n.left+(a||!o.x_offset?0:o.x_offset)+"px";s&&(n._skip=false);if(n._skip)n._skip=false;else{var l=e;if("touch"===i){var h=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft;var _=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;var c=z[i].context(e);var d=document.elementFromPoint(c.x-h,c.y-_);l=new Proxy(e,{get:function(i,s){if("target"===s)return d;var n=i[s];return"function"===typeof n?n.bind(e):n}})}n._checkLand(l.target,l)}return preventEvent(e)},_checkLand:function(i,s){while(i&&"BODY"!=i.tagName){if(i.webix_drop){(this||e)._last&&((this||e)._last!=i||i.webix_master)&&this.$dragOut((this||e)._active,(this||e)._last,i,s);if(!(this||e)._last||(this||e)._last!=i||i.webix_master){(this||e)._last=null;(this||e)._landing=this.$dragIn(Nt._active,i,s);(this||e)._landing&&((this||e)._last=i);return}return}i=i.parentNode}(this||e)._last&&((this||e)._last=(this||e)._landing=this.$dragOut((this||e)._active,(this||e)._last,null,s))},sendSignal:function(e){Nt.active="start"==e;callEvent("onDragMode",[e])},getMaster:function(i){return(this||e)._drag_masters[i.webix_drag||i.webix_drop]},getContext:function(){return(this||e)._drag_context},getNode:function(){return(this||e)._html},createDrag:function(i,s){var n=Nt._active;Nt._drag_context={};var r=(this||e)._drag_masters[n.webix_drag];var a;if(r.$dragCreate){a=r.$dragCreate(n,i,s);if(!a)return false;this._setDragOffset(i);a.style.position="absolute"}else{var o=Nt.$drag(n,i,s);Nt._setDragOffset(i);if(!o)return false;a=document.createElement("DIV");a.innerHTML=o;a.className="webix_drag_zone";document.body.appendChild(a);var l=Nt._drag_context;if(l.html){l.x_offset=-Math.round(.5*a.offsetWidth);l.y_offset=-Math.round(.75*a.offsetHeight)}}a.style.zIndex=Math.max(a.style.zIndex,zIndex());Nt._skipDropH=event$1(a,z[s].move,Nt._skip_mark);Nt._drag_context.from||(Nt._drag_context={source:n,from:n});Nt._html=a;return true},_skip_mark:function(){Nt._skip=true},destroyDrag:function(i){var s=Nt._active;var n=(this||e)._drag_masters[s.webix_drag];Nt._skipDropH&&(Nt._skipDropH=eventRemove(Nt._skipDropH));n&&n.$dragDestroy?Nt._html&&n.$dragDestroy(s,Nt._html,i):remove(Nt._html);n&&n._auto_scroll_delay&&(n._auto_scroll_delay=window.clearTimeout(n._auto_scroll_delay));Nt._dropHTML&&remove(Nt._dropHTML);Nt._landing=Nt._active=Nt._last=Nt._html=Nt._dropHTML=null;Nt._drag_context=null},_getActiveDragMaster:function(){return Nt._drag_masters[Nt._active.webix_drag]},top:0,left:0,_setDragOffset:function(i){var s=Nt._start_pos;var n=Nt._drag_context;if("undefined"!=typeof n.x_offset&&"undefined"!=typeof n.y_offset)return null;n.x_offset=n.y_offset=0;var r=Nt._getActiveDragMaster();if(r._getDragItemPos&&r!==(this||e)){var a=r._getDragItemPos(s,i);if(a){n.x_offset=a.x-s.x;n.y_offset=a.y-s.y}}},$dragPos:function(i,s){var n=(this||e)._drag_masters[Nt._active.webix_drag];if(n.$dragPos&&n!=(this||e)){n.$dragPos(i,s,Nt._html);return true}},$dragIn:function(i,s,n){var r=(this||e)._drag_masters[s.webix_drop];if(r.$dragIn&&r!=(this||e))return r.$dragIn(i,s,n);s.className=s.className+" webix_drop_zone";return s},$dragOut:function(i,s,n,r){var a=(this||e)._drag_masters[s.webix_drop];if(a.$dragOut&&a!=(this||e))return a.$dragOut(i,s,n,r);s.className=s.className.replace("webix_drop_zone","");return null},$drop:function(i,s,n){var r=(this||e)._drag_masters[s.webix_drop];Nt._drag_context.from=Nt.getMaster(i);if(r.$drop&&r!=(this||e))return r.$drop(i,s,n);s.appendChild(i)},$drag:function(i,s,n){var r=(this||e)._drag_masters[i.webix_drag];return r.$drag&&r!=(this||e)?r.$drag(i,s,n):"<div style='"+i.style.cssText+"'>"+i.innerHTML+"</div>"}};attachEvent("onLongTouch",(function(e){Nt._active&&!Nt._touch_animation&&Nt._createTouchDrag(e,"touch")}));var Dt={move_setter:function(s){if(s){i.extend(this||e,Lt,true);Nt.addDrag((this||e)._headobj?(this||e)._headobj:(this||e).$view,this||e);delete(this||e).move_setter}return s}};var Lt={$dragCreate:function(i,s){if((this||e).config.move){var n=offset(i);var r=pos(s);Nt.top=n.y-r.y;Nt.left=n.x-r.x;return toNode((this||e)._viewobj)}},$dragDestroy:function(i,s){var n=this||e;if(n._settings){n._settings.top=parseInt(s.style.top,10);n._settings.left=parseInt(s.style.left,10)}Nt.top=Nt.left=0;this.callEvent("onViewMoveEnd",[])},$dragPos:function(e,i){this.callEvent("onViewMove",[e,i])}};var Bt={_modal_set:function(i){if(i){if(!(this||e)._modal_cover){(this||e)._modal_cover=create("div",{class:"webix_modal"});var s=(this||e)._modality=zIndex((this||e)._settings.zIndex);J._modality.push(s);(this||e)._modal_cover.style.zIndex=s-1;(this||e)._viewobj.style.zIndex=s;document.body.appendChild((this||e)._modal_cover);document.body.style.overflow="hidden";_event((this||e)._modal_cover,"click",bind((this||e)._ignore_clicks,this||e))}}else if((this||e)._modal_cover){remove((this||e)._modal_cover);(this||e)._modal_cover=null;var n=J._modality;n.splice(n.indexOf((this||e)._modality),1);n.length||(document.body.style.overflow="")}return i}};var Ft={resize_setter:function(i){i&&!(this||e)._resizeHandlers&&this._renderResizeHandler();return i},_renderResizeHandler:function(){var i=this||e;if(!(this||e)._rwHandle){var s=(this||e)._viewobj;if(s.firstChild){s=s.firstChild;s.style.position="relative"}(this||e)._rwHandle=create("DIV",{class:"webix_resize_handle",webix_disable_drag:"true"});s.appendChild((this||e)._rwHandle);_event((this||e)._rwHandle,z.mouse.down,(function(e){return i._wrDown(e,"mouse")}));z.touch&&_event((this||e)._rwHandle,z.touch.down,(function(e){return i._wrDown(e,"touch")}))}},_showResizeFrame:function(i,s){if(!(this||e)._resizeFrame){(this||e)._resizeFrame=create("div",{class:"webix_resize_frame"},"");document.body.appendChild((this||e)._resizeFrame);var n=offset((this||e)._viewobj);(this||e)._resizeFrame.style.left=n.x+"px";(this||e)._resizeFrame.style.top=n.y+"px";(this||e)._resizeFrame.style.zIndex=zIndex()}(this||e)._resizeFrame.style.width=i+"px";(this||e)._resizeFrame.style.height=s+"px"},_wrDown:function(i,s){var n=this||e;if((this||e).config.resize){addCss(document.body,"webix_noselect webix_resize_cursor");(this||e)._wsReady=offset((this||e)._viewobj);var r="touch"===s?{passive:false}:null;(this||e)._resizeHandlersMove=event$1(document.body,z[s].move,(function(e){return n._wrMove(e,s)}),r);(this||e)._resizeHandlersUp=event$1(document,z[s].up,(function(){return n._wrUp()}))}},_wrMove:function(i,s){if(false!==(this||e)._wsReady){var n=pos(i);var r={x:n.x-(this||e)._wsReady.x,y:n.y-(this||e)._wsReady.y};if((this||e).$resizeMove)this.$resizeMove(r);else{var a=(this||e).config;var o=a.minWidth||100;var l=a.minHeight||100;r.x<o?r.x=o:r.x>a.maxWidth&&(r.x=a.maxWidth);r.y<l?r.y=l:r.y>a.maxHeight&&(r.y=a.maxHeight)}(this||e)._wsProgress=r;this._showResizeFrame(r.x,r.y);"touch"===s&&preventEvent(i)}},_wrUp:function(){(this||e)._resizeFrame&&((this||e)._resizeFrame=remove((this||e)._resizeFrame));removeCss(document.body,"webix_resize_cursor");removeCss(document.body,"webix_noselect");eventRemove((this||e)._resizeHandlersMove);eventRemove((this||e)._resizeHandlersUp);if((this||e)._wsProgress)if((this||e).$resizeEnd)this.$resizeEnd((this||e)._wsProgress);else{(this||e).config.width=(this||e)._wsProgress.x;(this||e).config.height=(this||e)._wsProgress.y;this.resize()}(this||e)._wsReady=(this||e)._wsProgress=false;this.callEvent("onViewResize",[])}};var Rt={name:"window",$init:function(i){(this||e)._viewobj.innerHTML="<div class='webix_win_content'><div class='webix_win_head'></div><div class='webix_win_body'></div></div>";(this||e)._contentobj=(this||e)._viewobj.firstChild;(this||e)._headobj=(this||e)._contentobj.childNodes[0];(this||e)._dataobj=(this||e)._bodyobj=(this||e)._contentobj.childNodes[1];(this||e)._viewobj.className+=" webix_window";(this||e)._viewobj.setAttribute("role","dialog");(this||e)._viewobj.setAttribute("tabindex","0");(this||e)._head_cell=(this||e)._body_cell=null;(this||e)._settings._inner={top:false,left:false,right:false,bottom:false};i.id||(i.id=uid());_event((this||e)._contentobj,"click",(this||e)._ignore_clicks,{bind:this||e});_event((this||e)._contentobj,"click",(function(){!(this||e)._settings.zIndex&&(this||e)._settings.toFront&&((this||e)._viewobj.style.zIndex=zIndex())}),{bind:this||e,capture:true});i.modal&&((this||e)._modal=true);i.headHeight&&((this||e)._settings.headHeight=i.headHeight);i.close&&((this||e)._settings.close=i.close);this.attachEvent("onViewMoveEnd",(function(){(this||e)._settings.position&&delete(this||e)._settings.position}))},_ignore_clicks:function(i){var s=J._popups;var n=s.find(this||e);-1==n&&(n=s.length-1);i.click_view=n},getChildViews:function(){return(this||e)._head_cell?[(this||e)._head_cell,(this||e)._body_cell]:[(this||e)._body_cell]},zIndex_setter:function(i){(this||e)._viewobj.style.zIndex=i;return i},_remove:function(){this.body_setter()},_replace:function(i,s){s=s||(this||e)._body_cell;var n=s==(this||e)._body_cell;s.destructor();n?(this||e)._body_cell=i:(this||e)._head_cell=i;(n?(this||e)._bodyobj:(this||e)._headobj).appendChild(i._viewobj);var r=i._viewobj.style;var a={top:true,left:true,right:true,bottom:true};var o="0px";if(false===i.config.borderless){a=clone((this||e)._settings._inner);o="1px"}i._settings._inner=a;r.borderTopWidth=r.borderBottomWidth=r.borderLeftWidth=r.borderRightWidth=o;this.resize(true)},show:function(i,s,n){if(true===i){if(!(this||e)._settings.hidden)return;i=null}if(!this.callEvent("onBeforeShow",arguments))return false;(this||e)._settings.hidden=false;(this||e)._viewobj.style.zIndex=zIndex((this||e)._settings.zIndex);if((this||e)._settings.modal||(this||e)._modal){this._modal_set(true);(this||e)._modal=null}var r,a,o;s=s||{};s.pos||(s.pos=(this||e)._settings.relative);if(i){if("object"!=_typeof(i)||i.tagName){i=toNode(i);assert(i,"Not existing target for window:show");r=offset(i)}else if(i.target){r=pos(i);a=20;o=5}else r=i;var l=Math.max(window.innerWidth||0,document.body.offsetWidth);var h=Math.max(window.innerHeight||0,document.body.offsetHeight);a=a||i.offsetWidth||0;o=o||i.offsetHeight||0;var _=(this||e)._last_size;var c=r.x;var d=r.y;var u=0;var f=0;var g=0,v=0;var p=(this||e)._settings.autofit;if(p){var m="node"===p;var b=6,w=6,x=6;(this||e)._settings.point||(b=w=x=0);n="top";d=0;c=0;g=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft;l-r.x-a<_[0]&&"right"==s.pos&&!m&&(s.pos="left");if("right"==s.pos){c=r.x+b+a;w=-o;n="left";u=Math.round(r.y+o/2);f=c-x}else if("left"==s.pos){c=r.x-b-_[0]-1;w=-o;n="right";u=Math.round(r.y+o/2);f=c+_[0]+1}else{c=r.x<g?g:l+g-r.x>_[0]?r.x:l+g-b-_[0];f=Math.round(r.x+a/2);f=Math.min(f,c+_[0]-3*x)}v=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;if((!_[1]||h+v-o-r.y-w>_[1]||m)&&"top"!=s.pos){d=o+r.y+w-((this||e)._settings.point?4:0);if(!u){n="top";u=d-x}}else{d=r.y-w-_[1];if(d<0){d=0;"top"==n&&(n=false)}else if(!u){n="bottom";d--;u=d+_[1]+1}}}var y=s.x||0;var S=s.y||0;var $=this._checkFixedPosition();(this||e).$view.style.position=$?"fixed":"absolute";if($){d-=v;u-=v}this.setPosition(c+y,d+S);(this||e)._set_point&&(n&&(this||e)._settings.point?this._set_point(n,f+y,u+S,$):this._hide_point())}else this._setPosition((this||e)._settings.left,(this||e)._settings.top);(this||e)._viewobj.style.display="block";(this||e)._hide_timer=1;delay((function(){(this||e)._hide_timer=0}),this||e,[],z.fastClick?100:400);this._render_hidden_views();if((this||e).config.autofocus){(this||e)._prev_focus=ht.getFocus();ht.setFocus(this||e)}-1==J._popups.find(this||e)&&J._popups.push(this||e);this.callEvent("onShow",[])},_hide:function(i){if(!(this||e)._settings.hidden&&!(this||e)._settings.modal&&(this||e)._settings.escHide&&!(this||e)._hide_timer&&!(i&&i.showpopup&&(i.showpopup==(this||e)._settings.id||(this||e).getTopMenu&&this.getTopMenu()._settings.id==i.showpopup))&&!(i&&z.touch&&i.longtouch_drag)&&!(J._modality.length&&(this||e)._viewobj.style.zIndex<=Math.max.apply(Math,_toConsumableArray(J._modality)))){if(i){var s=i.click_view;s||0===s||(s=-1);var n=J._popups.find(this||e);if(n<=s)return}this._hide_single()}},hidden_setter:function(e){e?this.hide():this.show();return!!e},hide:function(){var e=this._hide_single();this._hide_sub_popups(e)},_hide_single:function(){if(!(this||e).$destructed&&!(this||e)._settings.hidden){(this||e)._settings.modal&&this._modal_set(false);this._hiding_process();if((this||e)._settings.autofocus){var i=document.activeElement;if(i&&(this||e)._viewobj&&((this||e)._viewobj.contains(i)||i===document.body)){ht.setFocus((this||e)._prev_focus);(this||e)._prev_focus=null}}var s=J._popups.find(this||e);s>-1&&J._popups.removeAt(s);return s}},_hiding_process:function(){"top"==(this||e)._settings.position?animate((this||e)._viewobj,{type:"slide",x:0,y:-((this||e)._content_height+20),duration:300,callback:(this||e)._hide_callback,master:this||e}):this._hide_callback()},_hide_sub_popups:function(e){if(e>-1){var i=J._popups;for(var s=i.length-1;s>=e;s--)i[s]._hide_point&&i[s]._hide_single()}},destructor:function(){this.hide();ct.destructor.apply(this||e,[])},_hide_callback:function(){if(!(this||e).$destructed){(this||e)._viewobj.style.display="none";(this||e)._settings.hidden=true;this.callEvent("onHide",[])}},close:function(){this.destructor()},_inner_body_set:function(e){"undefined"==typeof e.borderless&&(e.borderless=true)},body_setter:function(i){"object"!=_typeof(i)&&(i={template:i});this._inner_body_set(i);J._parent_cell=this||e;(this||e)._body_cell=ui._view(i);(this||e)._bodyobj.appendChild((this||e)._body_cell._viewobj);return i},head_setter:function(s){var n=this||e;if(false===s)return s;var r=(this||e)._settings.headHeight;var a="string"==typeof s;var o={height:r,padding:0,css:"webix_win_title",type:"header",borderless:true};if(a){(this||e)._viewobj.setAttribute("aria-label",s);s={template:s}}("template"==s.view||!s.view&&s.template)&&i.extend(s,o);a&&(this||e).config.close?s={padding:{left:Ht.inputHeight+2,right:2},cols:[s,{height:r,view:"icon",icon:"wxi-close",click:function(){n.hide()}}]}:i.extend(s,{borderless:true});J._parent_cell=this||e;(this||e)._head_cell=ui._view(s);var l=(this||e)._head_cell._viewobj.querySelector(".webix_win_title>div");l&&(l.style.lineHeight=r+"px");(this||e)._headobj.appendChild((this||e)._head_cell._viewobj);return s},getBody:function(){return(this||e)._body_cell},getHead:function(){return(this||e)._head_cell},adjust:function(){return this.resize()},resizeChildren:function(){(this||e)._body_cell&&this.resize()},resize:function(){wt.api.adjust.call(this||e);callEvent("onResize",[]);this.isVisible()&&this._setPosition((this||e)._settings.left,(this||e)._settings.top)},_checkFixedPosition:function(){if((this||e)._settings.master){var i=$$((this||e)._settings.master).getTopParentView().$view;return i&&"fixed"===i.style.position}return false},_setPosition:function(i,s){if((this||e)._settings.position||this._checkFixedPosition()){(this||e).$view.style.position="fixed";var n=(this||e)._content_width;var r=(this||e)._content_height;if(n<=0||r<=0)return;var a=window.innerWidth||document.documentElement.offsetWidth;var o=window.innerHeight||document.documentElement.offsetHeight;var l=Math.round((a-n)/2);var h=Math.round((o-r)/2);if("function"==typeof(this||e)._settings.position){var _={left:l,top:h,width:n,height:r,maxWidth:a,maxHeight:o};(this||e)._settings.position.call(this||e,_);_.width==n&&_.height==r||this.$setSize(_.width,_.height);this.setPosition(_.left,_.top)}else{"top"==(this||e)._settings.position&&(h=-1*r);if(!(this||e)._settings.position){l=(this||e)._settings.left||l;h=(this||e)._settings.top||h}this.setPosition(l,h)}"top"==(this||e)._settings.position&&animate((this||e)._viewobj,{type:"slide",x:0,y:r-2*((this||e)._settings.padding||0),duration:300,callback:(this||e)._topPositionCallback,master:this||e})}else this.setPosition(i,s)},_topPositionCallback:function(i){animate.clear(i);(this||e)._settings.top=-2*((this||e)._settings.padding||0);this.setPosition((this||e)._settings.left,(this||e)._settings.top)},setPosition:function(i,s){(this||e)._viewobj.style.top=s+"px";(this||e)._viewobj.style.left=i+"px";(this||e)._settings.left=i;(this||e)._settings.top=s},$getSize:function(i,s){var n=(this||e)._settings._inner;if(n){i+=(n.left?0:1)+(n.right?0:1);s+=(n.top?0:1)+(n.bottom?0:1)}(this||e)._settings.head&&(s+=1);var r=(this||e)._body_cell.$getSize(0,0);var a=0;if((this||e)._head_cell){var o=(this||e)._head_cell.$getSize(0,0);o[3]==o[2]&&((this||e)._settings.headHeight=o[3]);s+=(this||e)._settings.headHeight;a=o[0]}if((this||e)._settings.fullscreen){var l=window.innerWidth||document.body.clientWidth;var h=window.innerHeight||document.body.clientHeight;return[l,l,h,h]}var _=St.api.$getSize.call(this||e,0,0);a&&r[1]>1e5&&(r[0]=Math.max(a,r[0]));_[1]=Math.min(_[1],(r[1]>=1e5&&_[1]>=1e5?Math.max(r[0],_[0]):r[1])+i);_[3]=Math.min(_[3],(r[3]>=1e5&&_[3]>=1e5?Math.max(r[2],_[2]):r[3])+s);_[0]=Math.min(Math.max(_[0],r[0]+i),_[1]);_[2]=Math.min(Math.max(_[2],r[2]+s),_[3]);return _},$setSize:function(i,s){St.api.$setSize.call(this||e,i,s);i=(this||e)._content_width;s=(this||e)._content_height;if(false===(this||e)._settings.head){(this||e)._headobj.style.display="none";(this||e)._body_cell.$setSize(i,s)}else{(this||e)._head_cell.$setSize(i,(this||e)._settings.headHeight);(this||e)._body_cell.$setSize(i,s-(this||e)._settings.headHeight)}},$skin:function(){(this||e).defaults.headHeight=Ht.barHeight},defaults:{top:0,left:0,autofit:true,relative:"bottom",body:"",head:"",hidden:true,autofocus:true,minWidth:300,minHeight:200,escHide:true}};attachEvent("onLongTouch",(function(e){if(e&&e.target){var i=$$(e.target);if(i){i=i.queryView((function(e){return!e.getParentView()}),"parent")||i;var s=J._popups;var n=s.find(i);-1!==n&&(e.click_view=n)}}}));var Ot=i.protoUI(Rt,St.view,Dt,Bt,f,Ft);var Wt={api:Rt,view:Ot};var Ut={defaults:{padding:"4",hidden:true},body_setter:function(i){i=Wt.api.body_setter.call(this||e,i);(this||e)._body_cell._viewobj.style.borderWidth="0px";return i},attachTo:function(i){assert(i,"Invalid target for Context::attach");var s;s=i.on_context?i.attachEvent("onAfterContextMenu",bind((this||e)._show_at_ui,this||e)):event$1(i,"contextmenu",(this||e)._show_at_node,{bind:this||e});this.attachEvent("onDestruct",(function(){i.callEvent?i.detachEvent(s):eventRemove(s);i=null}))},getContext:function(){return(this||e)._area},setContext:function(i){(this||e)._area=i},_show_at_node:function(i){(this||e)._area=toNode(i);return this._show_at(i)},_show_at_ui:function(i,s){(this||e)._area={obj:$$(s),id:i};return this._show_at(s)},_show_at:function(e){var i=this.show(e,null,true);if(false===i)return i;var s=$$(e);if(s){var n=s.queryView((function(e){return!e.getParentView()}),"parent")||s;n._ignore_clicks&&n._ignore_clicks(e)}callEvent("onClick",[e]);return preventEvent(e)},_show_on_mouse_out:true,master_setter:function(e){this.attachTo(e);return null}};var Yt={_area:null,_blur_id:null,_ctrl:0,init:function(){if(null!==(this||e)._area)return(this||e)._area;J.destructors.push({obj:this||e});(this||e)._area=document.createElement("textarea");(this||e)._area.className="webix_clipbuffer";(this||e)._area.setAttribute("webixignore",1);(this||e)._area.setAttribute("spellcheck","false");(this||e)._area.setAttribute("autocapitalize","off");(this||e)._area.setAttribute("autocorrect","off");(this||e)._area.setAttribute("autocomplete","off");document.body.appendChild((this||e)._area);event$1(document.body,"keydown",bind((function(i){var s=i.which||i.keyCode;var n=!!(i.ctrlKey||i.metaKey);if(86===s&&n){(this||e)._area.value="";delay((this||e)._paste,this||e,[i],100)}}),this||e));return(this||e)._area},destructor:function(){(this||e)._area=null},set:function(i){this.init();i=""===i?"\n":i;(this||e)._area.value=i;this.focus()},focus:function(){if(!this._isSelectRange()){this.init();(this||e)._area.focus();(this||e)._area.select()}},_isSelectRange:function(){var e="";"undefined"!=typeof window.getSelection?e=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(e=document.selection.createRange().text);return!!e},_paste:function(i){var s=i.target;if(s===(this||e)._area){var n=(this||e)._area.value;var r=ht.getFocus();if(r&&(!r.getEditor||!r.getEditor())){r.callEvent("onPaste",[n]);(this||e)._area.select()}}}};var qt={escape:true,delimiter:{rows:"\n",cols:"\t"},parse:function(i,s){s=s||(this||e).delimiter;if(!(this||e).escape)return this._split_clip_data(i,s);var n=i.replace(/\n$/,"").split(s.rows);var r=0;while(r<n.length-1){if(this._substr_count(n[r],'"')%2===1){n[r]+=s.rows+n[r+1];delete n[r+1];r++}r++}var a=[];for(r=0;r<n.length;r++)if("undefined"!==typeof n[r]){var o=n[r];var l=0;var h=[];var _=false;for(var c=0;c<=o.length;c++){if(!_&&o[c]===s.cols||c===o.length){var d=o.substr(l,c-l);d[0]===d[d.length-1]&&'"'===d[0]&&(d=d.substr(1,d.length-2).replace('""','"'));h.push(d);l=c+1}'"'!==o[c]||(_=!_)}a.push(h)}return a},_split_clip_data:function(e,i){var s=e.split(i.rows);for(var n=0;n<s.length;n++)s[n]=s[n].split(i.cols);return s},_substr_count:function(e,i){var s=e.split(i);return s.length-1},stringify:function(i,s){s=s||(this||e).delimiter;if(!(this||e).escape){for(var n=0;n<i.length;n++)i[n]=i[n].join(s.cols);return i.join(s.rows)}var r=/\n|"|;|,/;for(var a=0;a<i.length;a++){for(var o=0;o<i[a].length;o++){var l=i[a][o];l instanceof Date?i[a][o]=u.parseFormatStr(l):r.test(l)&&(i[a][o]='"'+l.toString().replace(/"/g,'""')+'"')}i[a]=i[a].join(s.cols)}i=i.join(s.rows);return i}};var Xt={clipboard_setter:function(i){true!==i&&1!==i||(i="modify");this.attachEvent("onAfterSelect",(this||e)._sel_to_clip);this.attachEvent("onAfterEditStop",(function(e,i){var s=this.getSelectedId(true);1==s.length&&i.id==s[0]&&this._sel_to_clip()}));this.attachEvent("onPaste",(function(i){if(!isUndefined((this||e)._paste[(this||e)._settings.clipboard])){var s=qt.parse(i,(this||e)._settings.delimiter);(this||e)._paste[(this||e)._settings.clipboard].call(this||e,s)}}));this.attachEvent("onFocus",(function(){Yt.focus()}));this.attachEvent("onItemClick",(function(i){if(!(this||e)._selected||-1!==(this||e)._selected.find(i)){Yt.focus();ht.setFocus(this||e)}}));return i},_sel_to_clip:function(){var i=this||e;delay((function(){if(!i.$destructed&&(!i.getEditor||!i.getEditor())){var e=i.getSelectedId(true);var s=[];for(var n=0;n<e.length;n++){var r=e[n];var a=i.getItem(r);s.push([i.type.templateCopy(a)])}var o=1===s.length?s[0][0]:qt.stringify(s,i._settings.delimiter);Yt.set(o,i);Yt.focus();ht.setFocus(i)}}))},_paste:{insert:function(i){var s=this||e;i.forEach((function(e){return s.add({value:e})}))},modify:function(e){var i=this.getSelectedId(true);for(var s=0;s<i.length;s++){if(isUndefined(e[s]))return;this.getItem(i[s]).value=e[s];this.refresh(i[s])}},custom:function(){}},templateCopy_setter:function(i){(this||e).type.templateCopy=template(i)},type:{templateCopy:function(e){return this.template(e)}}};var Gt={$customPrint:function(e,i){if(this._prePrint(e,i))return true;var s=this._getTableArray(e);var n=this._getTableHTML(s,e);if(i)return n;var r=create("div",{class:"webix_ui_print"});r.appendChild(n);insertBefore(r,e.docFooter,document.body);window.print();remove(r)},_prePrint:function(s,n){if(!n&&("y"==(this||e).config.layout||s.scroll||(this||e).config.prerender||(this||e).config.autoheight))return true;"x"==(this||e).config.layout&&i.extend(s||{},{xCount:this.count(),nobreaks:true},true)},_getPageWidth:function(e){var i=e.size;var s=i["portrait"==e.mode?"width":"height"];return Math.min(s*z.printPPI-2*z.printMargin)},_getTableArray:function(i,s,n){var r="page"==i.fit?Infinity:this._getPageWidth(i);var a=i.xCount||this._getVisibleRange()._dx;var o=[];var l=[];var h=0;var _,c,d;n=n||0;s=s||[];for(var u=0;u<(this||e).data.order.length;){var f=(this||e).data.pull[(this||e).data.order[u]];c=parseInt(u/a);d=u-c*a;if(f&&d>=n){h+=(this||e).type.width;if(h>r&&d>n){_=l.length+n;o.push(l);u+=a-l.length;l=[];h=0;continue}var g=(this||e).type.template(f,(this||e).type);var v=(this||e)._itemClassName;var p={display:"table-cell",height:(this||e).type.height+"px",width:(this||e).type.width+"px"};l.push({txt:g,className:v+" "+(f.$css||""),style:p});if((u+1)%a===0){o.push(l);l=[];h=0}}u++}s.push(o);_&&this._getTableArray(i,s,_);return s},_getTableHTML:function(i,s){var n=create("div");i.forEach(bind((function(r,a){var o=create("table",{class:"webix_table_print "+(this||e).$view.className,style:"border-collapse:collapse"});r.forEach((function(e){var i=create("tr");e.forEach((function(e){var s=create("td");e.txt&&(s.innerHTML=e.txt);e.className&&(s.className=e.className);if(e.style){var n=Object.keys(e.style);n.forEach((function(i){e.style[i]&&(s.style[i]=e.style[i])}))}if(e.span){e.span.colspan>1&&(s.colSpan=e.span.colspan);e.span.rowspan>1&&(s.rowSpan=e.span.rowspan)}i.appendChild(s)}));o.appendChild(i)}));n.appendChild(o);if(!s.nobreaks&&a+1<i.length){var l=create("DIV",{class:"webix_print_pagebreak"});n.appendChild(l)}}),this||e));return n}};var Kt=null;var Jt={addCss:function(i,s,n){if(!(this||e).addRowCss&&!n&&!this.hasCss(i,s)){var r=this.getItemNode(i);if(r){r.className+=" "+s;n=true}}return(this||e).data.addMark(i,s,1,1,n)},removeCss:function(i,s,n){if(!(this||e).addRowCss&&!n&&this.hasCss(i,s)){var r=this.getItemNode(i);if(r){r.className=r.className.replace(s,"").replace("  "," ");n=true}}return(this||e).data.removeMark(i,s,1,n)},hasCss:function(i,s){return(this||e).data.getMark(i,s)},clearCss:function(i,s){return(this||e).data.clearMark(i,1,s)}};var Zt={copy:function(i,s,n,r){r=r||{};var a=r.newId||i;n=n||this||e;var o=this.getItem(i);assert(o,"Incorrect ID in DataMove::copy");n&&(o=n._externalData(o));return n.data.add(n._externalData(o,a),s,r.parent||0)},_next_move_index:function(i,s,n){if(s&&i){var r=this.getIndexById(i);return r+(n==(this||e)&&n.getIndexById(s)<r?0:1)}},move:function(i,s,n,r){r=r||{};var a=r.newId||i;n=n||this||e;assert(n.data,"moving attempt to component without datastore");if(n.data){if(!isArray(i)){var o=i;var l=this.getItem(i);assert(l,"Incorrect ID in DataMove::move");if(n&&n!=(this||e)){o=n.data.add(n._externalData(l,a),s,r.parent||0);(this||e).data.remove(i)}else{s<0&&(s=(this||e).data.order.length-1);(this||e).data.move(this.getIndexById(i),s);(this||e).data.callEvent("onDataMove",[i,s,null,(this||e).data.order[s+1]])}return o}i.length>3&&((this||e).$blockRender=n.$blockRender=true);for(var h=0;h<i.length;h++){var _=this.move(i[h],s,n,r);s=n._next_move_index(_,i[h+1],this||e)}(this||e).$blockRender=n.$blockRender=false;if(i.length>3){this.refresh();n!=(this||e)&&n.refresh()}}},moveUp:function(e,i){var s=this.getIndexById(e)-(i||1);return this.move(e,s<0?0:s)},moveDown:function(e,i){return this.moveUp(e,-1*(i||1))},moveTop:function(e){return this.move(e,0)},moveBottom:function(i){return this.move(i,(this||e).data.count()-1)},_externalData:function(s,n){var r=i.extend({},s);r.id=!n||(this||e).data.pull[n]?uid():n;r.$template=null;(this||e)._settings.externalData&&(r=(this||e)._settings.externalData.call(this||e,r,n,s));return r}};var Qt={$init:function(){(this||e)._events&&this.attachEvent("onChange",(this||e).clearValidation)},clearValidation:function(){if((this||e).elements)for(var i in(this||e).elements)this._clear_invalid(i)},validate:function(i,s){assert((this||e).callEvent,"using validate for eventless object");this.callEvent("onBeforeValidate",[]);var n=(this||e)._validate_details={};var r=true;var a=(this||e)._settings.rules;var o=(this||e).isVisible&&!this.isVisible();var l=i&&i.hidden;var h=i&&i.disabled;var _={},c={};for(var d in(this||e).elements){var u=(this||e).elements[d].config.name;(o||(this||e).elements[d].isVisible()||l)&&((this||e).elements[d].isEnabled()||h)?_[u]=(this||e).elements[d]:c[u]=true}(a||_)&&!s&&(this||e).getValues&&(s=this.getValues());if(a){a.$obj&&(r=this._validate(a.$obj,s,s,"")&&r);var f=a.$all;var g=s;(this||e)._settings.complexData&&(g=B.collapseNames(s,"",{},(function(e){return!a[e]})));if(f)for(var v in s)if(!c[v]){var p=this._validate(f,g[v],s,v);p||(n[v]=true);r=p&&r}for(var m in a)if(!c[m]&&0!==m.indexOf("$")&&!n[m]){assert(a[m],"Invalid rule for:"+m);var b=this._validate(a[m],g[m],s,m);b||(n[m]=true);r=b&&r}}if(_)for(var w in _)if(!n[w]){var x=_[w];if(x.validate){var y=x.validate();r=y&&r;y||(n[w]=true)}else{var S=x._settings;if(S){var $=S.validate;!$&&S.required&&($=a.isNotEmpty);if($){var C=this._validate($,s[w],s,w);C||(n[w]=true);r=C&&r}}}}this.callEvent("onAfterValidation",[r,(this||e)._validate_details]);return r},_validate:function(i,s,n,r){"string"==typeof i&&(i=at[i]);if(i.call(this||e,s,n,r)){this.callEvent("onValidationSuccess",[r,n])&&(this||e)._clear_invalid&&this._clear_invalid(r);return true}this.callEvent("onValidationError",[r,n])&&(this||e)._mark_invalid&&this._mark_invalid(r);return false}};var te={};function dp(i,s){"object"==_typeof(i)&&i._settings&&(i=i._settings.id);if(te[i]||s)return te[i];"string"!=typeof i&&"number"!=typeof i||(i={master:$$(i)});var n=new ee(i);var r=n._settings.master._settings.id;te[r]=n;$$(r).attachEvent("onDestruct",(function(){te[(this||e)._settings.id]=null;delete te[(this||e)._settings.id]}));return n}define("dp",dp);dp.$$=function(e){return te[e]};var ee=i.proto({defaults:{autoupdate:true,updateFromResponse:false,mode:"post",operationName:"webix_operation",trackMove:false},$init:function(){this.reset();(this||e)._ignore=false;(this||e).name="DataProcessor";(this||e).$ready.push((this||e)._after_init_call)},reset:function(){(this||e)._updates=[]},url_setter:function(e){var i="";if("string"==typeof e){var s=e.split("->");if(s.length>1){e=s[1];i=s[0]}}else if(e&&e.mode){i=e.mode;e=e.url}return i?proxy$5(i,e):e},master_setter:function(i){var s=i;"DataStore"!=i.name&&(s=i.data);(this||e)._settings.store=s;return i},_promise:function(i){var s=(this||e)._waitSave;(this||e)._waitSave=[];i();var n=Promise.all((this||e)._waitSave);(this||e)._waitSave=s;s&&s.push(n);return n},_after_init_call:function(){var i=(this||e)._settings.store;if(i){i.attachEvent("onStoreUpdated",bind((this||e)._onStoreUpdated,this||e));i.attachEvent("onDataMove",bind((this||e)._onDataMove,this||e))}},ignore:function(i,s){var n=(this||e)._ignore;(this||e)._ignore=true;i.call(s||this||e);(this||e)._ignore=n},off:function(){(this||e)._ignore=true},on:function(){(this||e)._ignore=false},_copy_data:function(e){var i={};for(var s in e)0!==s.indexOf("$")&&(i[s]=e[s]);return i},save:function(e,i,s){i=i||"update";return this._save_inner(e,s,i,true)},_save_inner:function(i,s,n,r){"object"==_typeof(i)&&(i=i.toString());if(i&&true!==(this||e)._ignore&&n&&"paint"!=n){var a=(this||e)._settings.store;if(a){s=s||(this||e)._settings.store.getItem(i);a._scheme_serialize&&(s=a._scheme_serialize(s))}var o={id:i,data:this._copy_data(s),operation:n};isUndefined(s.$parent)||(o.data.parent=s.$parent);if("delete"!=o.operation){var l=(this||e)._settings.master;l&&l.data&&l.data.getMark&&l.data.getMark(i,"webix_invalid")&&(o._invalid=true);this.validate(null,o.data)||(o._invalid=true)}this._check_unique(o)&&(this||e)._updates.push(o);return(this||e)._settings.autoupdate||r?this._sendData(i):void 0}},_onDataMove:function(i,s,n,r){if((this||e)._settings.trackMove){var a=copy((this||e)._settings.store.getItem(i));a.webix_move_index=s;a.webix_move_id=r;a.webix_move_parent=n;this._save_inner(i,a,"order")}},_onStoreUpdated:function(e,i,s){switch(s){case"save":s="update";break;case"update":s="update";break;case"add":s="insert";break;case"delete":s="delete";break;default:return true}return this._save_inner(e,i,s)},_check_unique:function(i){for(var s=0;s<(this||e)._updates.length;s++){var n=(this||e)._updates[s];if(n.id==i.id&&!n._in_progress){"delete"==i.operation&&("insert"==n.operation?(this||e)._updates.splice(s,1):n.operation="delete");n.data=i.data;n._invalid=i._invalid;return false}}return true},send:function(){return this._sendData()},_sendData:function(i){if((this||e)._settings.url){var s;var n=(this||e)._updates;var r=[];var a=(this||e)._settings.url;for(var o=0;o<n.length;o++){var l=n[o];if(!l._in_progress&&!l._invalid){var h=l.id;if((this||e)._settings.autoupdate||!i||i==h){var _=l.operation;var c=proxy$5.$parse("object"!=_typeof(a)||a.$proxy?a:a[_]);var d=c&&(c.$proxy||"function"===typeof c);if(c){var u=(this||e)._settings.store;u&&u._scheme_save&&u._scheme_save(l.data);if(this.callEvent("onBefore"+_,[h,l])){l._in_progress=true;if(!this.callEvent("onBeforeDataSend",[l]))return;l.data=this._updatesData(l.data);var f=void 0;if(c.$proxy){c.save&&(f=c.save((this||e).config.master,l,this||e));r.push(l)}else{"insert"==_&&delete l.data.id;if(d)f=c.call((this||e).config.master,l.id,l.operation,l.data);else{l.data[(this||e)._settings.operationName]=_;f=this._send(c,l.data,(this||e)._settings.mode)}}if(f){f=this._proxy_on_save(f,{id:l.id,status:l.operation});i&&h===i&&(s=f)}this.callEvent("onAfterDataSend",[l])}}}}}if(a.$proxy&&a.saveAll&&r.length){var g=a.saveAll((this||e).config.master,r,this||e);if(g){g=this._proxy_on_save(g,null);s||(s=g)}}return s}},_proxy_on_save:function(i,s){var n=this||e;if(i){i.then||(i=Deferred.resolve(i));i=i.then((function(e){e&&"function"==typeof e.json&&(e=e.json());var i;i=null===s?n._processResult(e):n._processResult(s,"",e,-1);if(!i)throw i;return i}),(function(e){n._processError(s,"",null,e);throw e}));(this||e)._waitSave&&(this||e)._waitSave.push(i);return i}},
/*! process updates list to POST and GET params according dataprocessor protocol
     *	@param updates
     *		list of objects { id: "item id", data: "data hash", operation: "type of operation"}
     *	@return
     *		object { post: { hash of post params as name: value }, get: { hash of get params as name: value } }
     **/
_updatesData:function(e){var i={};for(var s in e)0!==s.indexOf("$")&&(i[s]=e[s]);return i},
/*! send dataprocessor query to server
     *	and attach event to process result
     *	@param url
     *		server url
     *	@param get
     *		hash of get params
     *	@param post
     *		hash of post params
     *	@mode
     *		'post' or 'get'
     **/
_send:function(e,i,s){assert(e,"url was not set for DataProcessor");return ajax()[s](e,i)},attachProgress:function(e,i,s){this.attachEvent("onBeforeDataSend",e);this.attachEvent("onAfterSync",i);this.attachEvent("onAfterSaveError",s);this.attachEvent("onLoadError",s)},_processError:function(i,s,n,r){if(i)this._innerProcessResult(true,i.id,false,i.status,false,{text:s,data:n,loader:r});else{this.callEvent("onLoadError",arguments);callEvent("onLoadError",[s,n,r,this||e])}},_innerProcessResult:function(i,s,n,r,a,o){var l=(this||e)._settings.master;var h=this.getItemState(s);h._in_progress=false;if(!i){this.setItemState(s,false);var _=(this||e)._settings.store;if(_&&_.exists(s)){n&&s!=n&&_.changeId(s,n);a&&"delete"!=r&&(this||e)._settings.updateFromResponse&&this.ignore((function(){_.updateItem(n||s,a)}))}(this||e)._settings.undoOnError&&l._settings.undo&&l.removeUndo(n||s);this.callEvent("onAfterSave",[a,s,o]);this.callEvent("onAfter"+r,[a,s,o]);return a||{}}if(this.callEvent("onBeforeSaveError",[s,r,a,o])){h._invalid=true;if((this||e)._settings.undoOnError&&l._settings.undo){this.ignore((function(){l.undo(s)}));this.setItemState(s,false)}this.callEvent("onAfterSaveError",[s,r,a,o])}},processResult:function(e,i,s){var n=i&&("error"==i.status||"invalid"==i.status);var r=!!i&&(i.newid||i.id);return this._innerProcessResult(n,e.id,r,e.status,i,s)},_processResult:function(i,s,n,r){var a=this||e;var o;this.callEvent("onBeforeSync",[i,s,n,r]);if(isArray(i)){o=[];i.forEach((function(e){o.push(a.processResult(e,e,{}))}))}else if(-1===r)o=this.processResult(i,n,{});else{var l=(this||e)._settings.url;if(l.$proxy&&l.result)o=l.result(i,(this||e)._settings.master,this||e,s,n,r)||{};else{var h;if(s){h=n.json();!s||null!==h&&"undefined"!=typeof h||(h={status:"error"})}o=this.processResult(i,h,{text:s,data:n,loader:r})}}this.callEvent("onAfterSync",[i,s,n,r]);return o},
/*! if it's defined escape function - call it
     *	@param value
     *		value to escape
     *	@return
     *		escaped value
     **/
escape:function(i){return(this||e)._settings.escape?(this||e)._settings.escape(i):encodeURIComponent(i)},getState:function(){if(!(this||e)._updates.length)return false;for(var i=(this||e)._updates.length-1;i>=0;i--)if((this||e)._updates[i]._in_progress)return"saving";return true},getItemState:function(i){var s=this._get_stack_index(i);return(this||e)._updates[s]||null},setItemState:function(i,s){if(s)this._save_inner(i,null,"update");else{var n=this._get_stack_index(i);n>-1&&(this||e)._updates.splice(n,1)}},_get_stack_index:function(i){var s=-1;for(var n=0;n<(this||e)._updates.length;n++)if((this||e)._updates[n].id==i){s=n;break}return s}},_t,f,Qt);function DataStore(){(this||e).name="DataStore";i.extend(this||e,f);this.setDriver("json");(this||e).pull={};(this||e).order=_to_array();(this||e)._marks={}}DataStore.prototype={setDriver:function(i){assert(N[i],"incorrect DataDriver");(this||e).driver=N[i]},_parse:function(i){this.callEvent("onParse",[(this||e).driver,i]);(this||e)._filter_order&&this.filter();var s=(this||e).driver.getInfo(i);s.config&&this.callEvent("onServerConfig",[s.config]);var n=(this||e).driver.getOptions(i);n&&this.callEvent("onServerOptions",[n]);var r=(this||e).driver.getRecords(i);this._inner_parse(s,r);(this||e)._scheme_group&&(this||e)._group_processing&&!(this||e)._not_grouped_order&&this._group_processing((this||e)._scheme_group);if((this||e)._scheme_sort){this.blockEvent();this.sort((this||e)._scheme_sort);this.unblockEvent()}this.callEvent("onStoreLoad",[(this||e).driver,i]);this.refresh()},_inner_parse:function(s,n){var r=s.from;var a=true;var o=false;if(!r&&0!==r&&(this||e).order[0]){if((this||e)._removeMissed){o={};for(var l=0;l<(this||e).order.length;l++)o[(this||e).order[l]]=true}a=false;r=(this||e).order.length}else r=1*(r||0);var h=0;for(var _=0;_<n.length;_++){var c=(this||e).driver.getDetails(n[_]);var d=this.id(c);if((this||e).pull[d])a&&(this||e).order[h+r]&&h++;else{(this||e).order[h+r]=d;h++}if((this||e).pull[d]){i.extend((this||e).pull[d],c,true);(this||e)._scheme_update&&this._scheme_update((this||e).pull[d]);o&&delete o[d]}else{(this||e).pull[d]=c;(this||e)._scheme_init&&this._scheme_init(c)}}if(o){this.blockEvent();for(var u in o)this.remove(u);this.unblockEvent()}var f=1*s.size;if(f){(this||e).order[f-1]||((this||e).order[f-1]=void 0);f<(this||e).order.length&&((this||e).order=_to_array((this||e).order.slice(0,f)))}},id:function(e){return e.id||(e.id=uid())},changeId:function(i,s){if(i!=s){(this||e).pull[i]&&((this||e).pull[s]=(this||e).pull[i]);(this||e).pull[s].id=s;(this||e).order[(this||e).order.find(i)]=s;(this||e)._filter_order&&((this||e)._filter_order[(this||e)._filter_order.find(i)]=s);if((this||e)._marks[i]){(this||e)._marks[s]=(this||e)._marks[i];delete(this||e)._marks[i]}this.callEvent("onIdChange",[i,s]);(this||e)._render_change_id&&this._render_change_id(i,s);delete(this||e).pull[i]}},getItem:function(i){return(this||e).pull[i]},updateItem:function(s,n,r){"object"===_typeof(s)&&(s=s.toString());var a=this.getItem(s);var o=null;var l=this.hasEvent("onDataUpdate");assert(a,"Invalid ID for updateItem");assert(!n||!n.id||n.id==s,"Attempt to change ID in updateItem");if(!isUndefined(n)&&a!==n){l&&(o=copy(a));s=a.id;i.extend(a,n,true);a.id=s}(this||e)._scheme_update&&this._scheme_update(a);this.callEvent("onStoreUpdated",[s,a,r||"update"]);l&&this.callEvent("onDataUpdate",[s,a,o])},refresh:function(i){(this||e)._skip_refresh||(i?this.exists(i)&&this.callEvent("onStoreUpdated",[i,(this||e).pull[i],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(i,s){(this||e)._skip_refresh=true;i.call(s||this||e);(this||e)._skip_refresh=false},getRange:function(i,s){i=i?this.getIndexById(i):(this||e).$min||(this||e).startOffset||0;if(s)s=this.getIndexById(s);else{s=0===(this||e).$max?0:Math.min((this||e).$max?(this||e).$max-1:(this||e).endOffset||Infinity,this.count()-1);s<0&&(s=0)}if(i>s){var n=s;s=i;i=n}return this.getIndexRange(i,s)},getIndexRange:function(i,s){s=Math.min(0===s?0:s||Infinity,this.count()-1);var n=_to_array();for(var r=i||0;r<=s;r++)n.push(this.getItem((this||e).order[r]));return n},count:function(){return(this||e).order.length},exists:function(i){return!!(this||e).pull[i]},move:function(i,s){assert(i>=0&&s>=0,"DataStore::move","Incorrect indexes");if(i!=s){var n=this.getIdByIndex(i);var r=this.getItem(n);(this||e)._filter_order&&this._move_inner((this||e)._filter_order,0,0,this.getIdByIndex(i),this.getIdByIndex(s));this._move_inner((this||e).order,i,s);this.callEvent("onStoreUpdated",[n,r,"move"])}},_move_inner:function(e,i,s,n,r){if(n||r){i=s=-1;for(var a=0;a<e.length;a++){e[a]==n&&i<0&&(i=a);e[a]==r&&s<0&&(s=a)}}var o=e[i];e.removeAt(i);e.insertAt(o,Math.min(e.length,s))},scheme:function(i){(this||e)._scheme={};(this||e)._scheme_save=i.$save;(this||e)._scheme_init=i.$init||i.$change;(this||e)._scheme_update=i.$update||i.$change;(this||e)._scheme_serialize=i.$serialize;(this||e)._scheme_group=i.$group;(this||e)._scheme_sort=i.$sort;(this||e)._scheme_export=i.$export;for(var s in i)"$"!=s.substr(0,1)&&((this||e)._scheme[s]=i[s])},importData:function(i,s){var n=i?i.data||i:[];(this||e)._filter_order=null;if("function"==typeof n.serialize){(this||e).order=_to_array([].concat(n.order));if((this||e)._make_full_copy){(this||e)._make_full_copy=false;var r=(this||e).pull;(this||e).pull={};for(var a in n.pull){var o=r[a];(this||e).pull[a]=copy(n.pull[a]);o&&o.open&&((this||e).pull[a].open=true)}}else{(this||e).pull={};for(var l in n.pull)(this||e).pull[l]=n.pull[l]}if(n.branch&&(this||e).branch){(this||e).branch=copy(n.branch);(this||e)._filter_branch=null}}else{(this||e).order=_to_array();(this||e).pull={};var h,_;if(isArray(i))for(var c=0;c<i.length;c++){_=h=i[c];"object"==_typeof(_)?_.id=_.id||uid():_={id:h,value:h};(this||e).order.push(_.id);(this||e)._scheme_init&&this._scheme_init(_);(this||e).pull[_.id]=_}else for(var d in n){(this||e).order.push(d);(this||e).pull[d]={id:d,value:n[d]}}}if((this||e)._extraParser&&!n.branch){(this||e).branch={0:[]};(this||e)._datadriver_child||this._set_child_scheme("data");for(var u=0;u<(this||e).order.length;u++){var f=(this||e).order[u];this._extraParser((this||e).pull[f],0,0,false)}}this.callEvent("onStoreLoad",[]);s||this.callEvent("onStoreUpdated",[])},sync:function(i,s,n){this.unsync();var r=_typeof(i);"string"==r&&(i=$$(i));if("function"!=r&&"object"!=r){n=s;s=null}if("DataStore"!=i.name&&"TreeStore"!=i.name){if(!i.data||"DataStore"!==i.data.name&&"TreeStore"!==i.data.name){(this||e)._sync_source=i;return callEvent("onSyncUnknown",[this||e,i,s])}i=i.data}var a=bind((function(r,a,o){if(!(this||e)._skip_next_sync){s&&(this||e).branch&&((this||e)._make_full_copy=true);this.importData(i,true);s&&this.silent(s);(this||e)._on_sync&&this._on_sync();r&&a&&o||this.count()||((this||e)._marks={});"delete"==o&&(this||e)._marks[r]&&delete(this||e)._marks[r];this.callEvent("onSyncApply",[]);n?n=false:this.refresh()}}),this||e);(this||e)._sync_events=[i.attachEvent("onStoreUpdated",a),i.attachEvent("onIdChange",bind((function(e,i){this.changeId(e,i);this.refresh(i)}),this||e))];(this||e)._sync_source=i;(this||e)._back_sync_handler=this.attachEvent("onStoreUpdated",(function(s,n,r){if("update"==r||"save"==r){(this||e)._skip_next_sync=1;i.updateItem(s,n);(this||e)._skip_next_sync=0}}));a()},unsync:function(){if((this||e)._sync_source){var i=(this||e)._sync_source;if("DataStore"==i.name||"TreeStore"==i.name||i.data&&"DataStore"==i.data.name&&"TreeStore"==i.data.name){for(var s=0;s<(this||e)._sync_events.length;s++)i.detachEvent((this||e)._sync_events[s]);this.detachEvent((this||e)._back_sync_handler)}else callEvent("onUnSyncUnknown",[this||e,i]);(this||e)._sync_source=null}},destructor:function(){this.unsync();(this||e).pull=(this||e).order=(this||e)._marks=null;(this||e)._evs_events=(this||e)._evs_handlers={}},add:function(i,s){if((this||e)._scheme)for(var n in(this||e)._scheme)isUndefined(i[n])&&(i[n]=(this||e)._scheme[n]);(this||e)._scheme_init&&this._scheme_init(i);var r=this.id(i);var a=arguments[2]||(this||e).order;var o=a.length;(isUndefined(s)||s<0)&&(s=o);if(s>o){assert(0,"Warning","DataStore:add","Index of out of bounds");s=Math.min(a.length,s)}if(false===this.callEvent("onBeforeAdd",[r,i,s]))return false;assert(!this.exists(r),"Not unique ID");(this||e).pull[r]=i;a.insertAt(r,s);if((this||e)._filter_order){var l=(this||e)._filter_order.length;(this||e).order.length&&(l=Math.min(s||0,l));(this||e)._filter_order.insertAt(r,l)}this.callEvent("onStoreUpdated",[r,i,"add"]);this.callEvent("onAfterAdd",[r,s]);return i.id},remove:function(i){if(isArray(i))for(var s=0;s<i.length;s++)this.remove(i[s]);else{if(false===this.callEvent("onBeforeDelete",[i]))return false;assert(this.exists(i),"Not existing ID in remove command"+i);var n=this.getItem(i);(this||e).order.remove(i);(this||e)._filter_order&&(this||e)._filter_order.remove(i);delete(this||e).pull[i];(this||e)._marks[i]&&delete(this||e)._marks[i];this.callEvent("onStoreUpdated",[i,n,"delete"]);this.callEvent("onAfterDelete",[i])}},clearAll:function(i){(this||e).pull={};(this||e)._marks={};(this||e).order=_to_array();(this||e)._filter_order=null;i||((this||e).url=null);this.callEvent("onClearAll",[i]);this.refresh()},getIdByIndex:function(i){assert(i>=0,"DataStore::getIdByIndex Incorrect index");return(this||e).order[i]},getIndexById:function(i){return(this||e).pull[i]?(this||e).order.find(i):-1},getNextId:function(i,s){return(this||e).order[this.getIndexById(i)+(s||1)]},getFirstId:function(){return(this||e).order[0]},getLastId:function(){return(this||e).order[(this||e).order.length-1]},getPrevId:function(i,s){return(this||e).order[this.getIndexById(i)-(s||1)]},sort:function(i,s,n){var r=this||e;var a;var o=i;if(isArray(o)){o=o.map((function(e){return r._sort_init(e)}));a=[o]}else{o=this._sort_init(i,s,n);a=[o.by,o.dir,o.as,o]}if(this.callEvent("onBeforeSort",a)){var l=(this||e).sorting.create(o);(this||e).order=this._sort_core(l,(this||e).order);(this||e)._filter_order&&((this||e)._filter_order=this._sort_core(l,(this||e)._filter_order));this.refresh();this.callEvent("onAfterSort",a)}},_sort_init:function(e,i,s){var n=e;"function"==typeof e?n={as:e,dir:i}:"string"==typeof e&&(n={by:e,dir:i,as:s});"string"==typeof n.by&&(n.by=n.by.replace(/#/g,""));return n},_sort_core:function(i,s){if((this||e).order.length){var n=s.splice(0,(this||e).$freeze);var r=_to_array();for(var a=s.length-1;a>=0;a--)r[a]=(this||e).pull[s[a]];r.sort(i);return _to_array(n.concat(r.map((function(e){assert(e,"Client sorting can't be used with dynamic loading");return this.id(e)}),this||e)))}return s},_filter_reset:function(i){if((this||e)._filter_order&&!i){(this||e).order=(this||e)._filter_order;delete(this||e)._filter_order}},_filter_core:function(i,s,n){var r=_to_array();var a=(this||e).$freeze||0;for(var o=0;o<(this||e).order.length;o++){var l=(this||e).order[o];(o<a||i(this.getItem(l),s))&&r.push(l)}n&&(this||e)._filter_order||((this||e)._filter_order=(this||e).order);(this||e).order=r},find:function(i,s){var n=[];for(var r in(this||e).pull){var a=(this||e).pull[r];var o=true;if("object"==_typeof(i)){for(var l in i)if(a[l]!=i[l]){o=false;break}}else i(a)||(o=false);o&&n.push(a);if(s&&n.length)return n[0]}return s?null:n},filter:function(i,s,n){if((i||(this||e)._filter_order||(this||e)._filter_branch)&&this.callEvent("onBeforeFilter",[i,s])){this._filter_reset(n);if((this||e).order.length){if(i){var r=i;s=s||"";if("string"==typeof i){i=i.replace(/#/g,"");if("function"==typeof s)r=function(e){return s(e[i])};else{s=s.toString().toLowerCase();r=function(e,s){assert(e,"Client side filtering can't be used with dynamic loading");return-1!=(e[i]||"").toString().toLowerCase().indexOf(s)}}}this._filter_core(r,s,n,(this||e)._filterMode)}this.refresh();this.callEvent("onAfterFilter",[])}}},_obj_array:function(){var i=[];for(var s=(this||e).order.length-1;s>=0;s--)i[s]=(this||e).pull[(this||e).order[s]];return i},each:function(i,s,n){var r=(this||e).order;n&&(r=(this||e)._filter_order||r);for(var a=0;a<r.length;a++)r[a]&&i.call(s||this||e,this.getItem(r[a]),a)},_methodPush:function(e,i){return function(){return e[i].apply(e,arguments)}},provideApi:function(i,s){s&&this.mapEvent({onbeforesort:i,onaftersort:i,onbeforeadd:i,onafteradd:i,onbeforedelete:i,onafterdelete:i,ondataupdate:i});var n=["sort","add","remove","exists","getIdByIndex","getIndexById","getItem","updateItem","refresh","count","filter","find","getNextId","getPrevId","clearAll","getFirstId","getLastId","serialize","sync"];for(var r=0;r<n.length;r++)i[n[r]]=this._methodPush(this||e,n[r])},addMark:function(i,s,n,r,a){var o=(this||e)._marks[i]||{};(this||e)._marks[i]=o;if(!o[s]){o[s]=r||true;if(n){var l=o.$css||"";o.$css=l+" "+s}a||this.refresh(i)}return o[s]},removeMark:function(i,s,n,r){var a=(this||e)._marks[i];if(a){a[s]&&delete a[s];if(n){var o=a.$css;o&&(a.$css=o.replace(s,"").replace("  "," "))}r||this.refresh(i)}},getMark:function(i,s){var n=(this||e)._marks[i];return!!n&&n[s]},clearMark:function(i,s,n){for(var r in(this||e)._marks){var a=(this||e)._marks[r];if(a[i]){delete a[i];s&&a.$css&&(a.$css=a.$css.replace(i,"").replace("  "," "));n||this.refresh(r)}}},serialize:function(i){var s=(this||e).order;i&&(this||e)._filter_order&&(s=(this||e)._filter_order);var n=[];for(var r=0;r<s.length;r++){var a=(this||e).pull[s[r]];if((this||e)._scheme_serialize){a=this._scheme_serialize(a);if(false===a)continue}n.push(a)}return n},sorting:{create:function(e){return isArray(e)?this._multi(e):this._dir(e.dir,this._by(e.by,e.as))},as:{server:function(){return false},date:function(e,i){e-=0;i-=0;return isNaN(i)?1:isNaN(e)?-1:e>i?1:e<i?-1:0},int:function(e,i){e*=1;i*=1;return isNaN(i)?1:isNaN(e)?-1:e>i?1:e<i?-1:0},string_strict:function(e,i){if(!i)return 1;if(!e)return-1;e=e.toString();i=i.toString();return e>i?1:e<i?-1:0},string:function(e,i){if(!i)return 1;if(!e)return-1;e=e.toString().toLowerCase();i=i.toString().toLowerCase();return e>i?1:e<i?-1:0},raw:function(e,i){return e>i?1:e<i?-1:0}},_multi:function(i){var s=this||e;i=i.map((function(e){return s._dir(e.dir,s._by(e.by,e.as))}));return function(e,s){var n,r=0;do{n=i[r](e,s)}while(!n&&i[++r]);return n}},_by:function(i,s){if(!i)return s;"function"!=typeof s&&(s=(this||e).as[s||"string"]);assert(s,"Invalid sorting method");return function(e,n){return s(e[i],n[i])}},_dir:function(e,i){return"asc"!=e&&e?function(e,s){return-1*i(e,s)}:i}}};var ie=i.proto({$init:function(i){i=i||"";(this||e)._feed_last={};(this||e)._data_generation=0;(this||e).data=new DataStore;(this||e).data.attachEvent("onClearAll",bind((this||e)._call_onclearall,this||e));(this||e).data.attachEvent("onServerConfig",bind((this||e)._call_on_config,this||e));this.attachEvent("onDestruct",(this||e)._call_onclearall);(this||e).data.feed=(this||e)._feed;(this||e).data.owner=i.id},_feed:function(i,s,n,r,a){if((this||e)._load_count){r=Deferred.defer();(this||e)._load_count=[i,s,n,r,a];return r}(this||e)._load_count=true;(this||e)._feed_last.from=i;(this||e)._feed_last.count=s;return(this||e)._feed_common.call(this||e,i,s,n,r,false,a)},_feed_common:function(i,s,n,r,a,o){var l=this||e;var h=(this||e).data.url;i<0&&(i=0);a||(a={start:i,count:s});this.count()&&(a.continue="true");var _=(this||e).getState?this.getState():null;if(h&&"string"!=typeof h){if(_){_.sort&&(a.sort=_.sort);_.filter&&(a.filter=_.filter)}return this.load(h,0,a,o).then((function(e){return l._feed_on_load(e,n,r)}),(function(){return l._feed_callback()}))}h+=-1==h.indexOf("?")?"?":"&";var c=[];for(var d in a)c.push(d+"="+a[d]);if(_){if(_.sort){var u=isArray(_.sort)?_.sort:[_.sort];for(var f=0;f<u.length;f++)c.push("sort["+u[f].id+"]="+encodeURIComponent(u[f].dir))}if(_.filter)for(var g in _.filter){var v=_.filter[g];"object"==_typeof(v)&&(v=ajax().stringify(v));c.push("filter["+g+"]="+encodeURIComponent(v))}}h+=c.join("&");if((this||e)._feed_last.url!==h){(this||e)._feed_last.url=h;return this.load(h,0,null,o).then((function(e){return l._feed_on_load(e,n,r)}),(function(){return l._feed_callback()}))}(this||e)._load_count=false;return Deferred.reject()},_feed_on_load:function(i,s,n){var r=this||e;delay((function(){return r._feed_callback()}),"","",100);s&&ajax.$callback(this||e,s,i);n&&n.resolve(i);return i},_feed_callback:function(){var i=(this||e)._load_count;(this||e)._load_count=false;"object"==_typeof(i)&&(this||e).data.feed.apply(this||e,i)},load:function(i){i=proxy$5.$parse(i);var s=L.load.apply(this||e,arguments);(this||e).data.url||((this||e).data.url=i);return s},loadNext:function(i,s,n,r,a,o){var l=(this||e)._settings;if(l.datathrottle&&!a){(this||e)._throttle_request&&window.clearTimeout((this||e)._throttle_request);var h=Deferred.defer();(this||e)._throttle_request=delay((function(){h.resolve(this.loadNext(i,s,n,r,true,o))}),this||e,0,l.datathrottle);return h}s||0===s||(s=this.count());i||(i=l.datafetch||this.count());(this||e).data.url=r||(this||e).data.url;return this.callEvent("onDataRequest",[s,i,n,r])&&(this||e).data.url?(this||e).data.feed.call(this||e,s,i,n,false,o):Deferred.reject()},_maybe_loading_already:function(i,s){var n=(this||e)._feed_last;return!!((this||e)._load_count&&n.url&&n.from<=s&&n.count+n.from>=i+s)},removeMissed_setter:function(i){return(this||e).data._removeMissed=i},_init_dataprocessor:function(){var s=(this||e)._settings.save;true===s&&(s=(this||e)._settings.save=(this||e)._settings.url);var n={master:this||e};s&&s.url?i.extend(n,s):n.url=s;dp(n)},save_setter:function(i){i&&(this||e).$ready.push((this||e)._init_dataprocessor);return i},waitSave:function(i){var s=this||e;return dp(this||e)._promise((function(){i.call(s)})).then((function(e){return 1==e.length?e[0]:e}))},scheme_setter:function(i){(this||e).data.scheme(i)},dataFeed_setter:function(i){i=proxy$5.$parse(i);(this||e).data.attachEvent("onBeforeFilter",bind((function(i,s){var n=this||e;var r;if("function"==typeof i)return true;if((this||e)._settings.dataFeed&&(i||s)){i=i||"id";s&&"object"==_typeof(s)&&(s=s.id);var a=(this||e)._settings.dataFeed;if("string"==typeof a){var o="filter["+i+"]="+encodeURIComponent(s);r=this._fetch(a+(a.indexOf("?")<0?"?":"&")+o,(this||e)._settings.datatype)}else{var l={};l[i]=s;"function"==typeof a?r=a.call(this||e,s,l):a.$proxy&&a.load&&(r=a.load(this||e,{filter:l}))}if(r){r.then||(r=Deferred.resolve(r));r.then((function(e){n._onLoad(e,true);n.data.callEvent("onAfterFilter",[])}),(function(e){return n._onLoadError(e)}))}return false}}),this||e));return i},_call_onready:function(){if((this||e)._settings.ready&&!(this||e)._ready_was_used){var i=toFunctor((this||e)._settings.ready,(this||e).$scope);i&&delay(i,this||e,arguments);(this||e).callEvent&&delay((this||e).callEvent,this||e,["onReady",[]]);(this||e)._ready_was_used=true}},_call_onclearall:function(i){(this||e)._data_generation++;if(!i){(this||e)._load_count=false;(this||e)._feed_last={};(this||e).waitData=Deferred.defer()}},_call_on_config:function(e){this._parseSeetingColl(e)}},L);var se={getState:function(){var i=this||e;var s=(this||e).config.columns.length;var n=(this||e).config.columns;var r={ids:[],size:[],select:this.getSelectedId(true),scroll:this.getScrollState()};for(var a=0;a<s;a++){var o=n[a];r.ids.push(o.id);r.size.push(o.fillspace||o.adjust?-1:o.width)}r.order=[].concat((this||e)._hidden_column_order.length?(this||e)._hidden_column_order:r.ids);if((this||e)._last_order.length){var l=(this||e)._last_order.map((function(e){return{id:e,dir:i._last_sorted[e].dir}}));r.sort=1==l.length?l[0]:l}if((this||e)._filter_elements&&(this||e)._dtable_fully_ready){var h={};var _=0;for(var c in(this||e)._filter_elements)if(!(this||e)._hidden_column_hash[c]){var d=(this||e)._filter_elements[c];d[1].value=h[c]=d[2].getValue(d[0]);_=1}_&&(r.filter=h)}r.hidden=[];for(var u in(this||e)._hidden_column_hash)r.hidden.push(u);return r},setState:function(i){var s=this||e;var n=(this||e).config.columns;if(i){this.markSorting();(this||e)._last_order=[];(this||e)._last_sorted={};this.blockEvent();if(i.order&&i.order.length){(this||e)._hidden_column_order=_to_array([].concat(i.order));var r=i.order.length-(this||e)._settings.rightSplit;(this||e)._hidden_split=[(this||e)._settings.leftSplit,r,(this||e)._settings.rightSplit]}if(i.hidden){var a={};for(var o=0;o<i.hidden.length;o++){a[i.hidden[o]]=true;(this||e)._hidden_column_order.length||this.hideColumn(i.hidden[o])}if((this||e)._hidden_column_order.length)for(var l=0;l<(this||e)._hidden_column_order.length;l++){var h=(this||e)._hidden_column_order[l];!!a[h]==!(this||e)._hidden_column_hash[h]&&this.hideColumn(h,{},false,!!a[h])}}if(i.ids){var _=false;for(var c=0;c<n.length;c++)n[c].id!=i.ids[c]&&(_=true);if(_){for(var d=0;d<i.ids.length;d++)n[d]=this.getColumnConfig(i.ids[d])||n[d];this.refreshColumns()}}if(i.size){var u=Math.min(i.size.length,n.length);for(var f=0;f<u;f++){var g=n[f];if(g&&i.size[f]>0&&g.width!=i.size[f]){delete g.fillspace;delete g.adjust;this._setColumnWidth(f,i.size[f],true)}}}this.unblockEvent();var v=!((this||e)._settings.leftSplit||(this||e)._settings.rightSplit);this._updateColsSizeSettings(v);this.callEvent("onStructureUpdate",[]);var p=(this||e)._skip_server_op={};if(i.sort){var m=i.sort,b=true;if(!isArray(m)){m=[m];b=false}for(var w=0;w<m.length;w++){var x=this.getColumnConfig(m[w].id);if(x){this._sort(x.id,m[w].dir,x.sort,b);"server"==x.sort&&(p.sort=true)}}}if(i.filter){var y=(this||e).filterByAll;(this||e).filterByAll=function(){};for(var S in i.filter){var $=i.filter[S];var C=(this||e)._filter_elements[S];if($&&C){C[2].setValue(C[0],$);var k=C[1].contentId;k&&((this||e)._active_headers[k].value=$)}}for(var I in(this||e)._filter_elements)if(!i.filter[I]){var M=(this||e)._filter_elements[I];M[2].setValue(M[0],"")}(this||e).filterByAll=y;this.filterByAll()}delete(this||e)._skip_server_op;(p.sort||p.filter)&&this.loadNext(0,0,0,0,true,true).then((function(){p.sort&&s._on_after_sort(p.$params);p.filter&&s._on_after_filter()}));if(i.select&&(this||e).select){var T=i.select;this.unselect();for(var E=0;E<T.length;E++)T[E].row&&!this.exists(T[E].row)||this._select(T[E],true)}i.scroll&&this.scrollTo(i.scroll.x,i.scroll.y)}}};var ne={_initHandlers:function(i,s,n){s||Nt.addDrop(i._contentobj,i,true);n||Nt.addDrag(i._contentobj,i);this.attachEvent("onDragOut",(function(e,i){this.$dragMark(e,i)}));this.attachEvent("onBeforeAutoScroll",(function(){var i=Nt.getContext();return!!(Nt._active&&i&&(i.to===(this||e)||(this||e)._auto_scroll_force))}))},drag_setter:function(s){if(s){i.extend(this||e,G,true);"order"!=s&&"move"!=s||i.extend(this||e,use("DragOrder"),true);"inner"!=s&&"order"!=s||((this||e)._inner_drag_only=true);this._initHandlers(this||e,"source"==s,"target"==s);delete(this||e).drag_setter}return s},$dragIn:function(i,s,n){var r=this.locate(n)||null;var a=Nt._drag_context;if(((this||e)._inner_drag_only||a.from._inner_drag_only)&&a.from!==(this||e))return false;var o=Nt.getMaster(s);var l=this.getItemNode(r,n)||(this||e)._dataobj;if(l==Nt._landing)return l;a.target=r;a.to=o;(this||e)._auto_scroll_delay&&((this||e)._auto_scroll_delay=window.clearTimeout((this||e)._auto_scroll_delay));var h=(this||e)._touch_scroll&&!(this||e)._settings.prerender;false===(this||e)._settings.dragscroll||h||((this||e)._auto_scroll_delay=delay((function(e,i){this._drag_pause(i);this._auto_scroll(e,i)}),this||e,[pos(n),r],250));if(!this.$dropAllow(a,n)||!this.callEvent("onBeforeDragIn",[a,n])){a.to=a.target=null;(this||e)._auto_scroll_delay&&((this||e)._auto_scroll_delay=window.clearTimeout((this||e)._auto_scroll_delay));return null}this.$dragMark(a,n);return l},$dropAllow:function(){return true},_drag_pause:function(){},_target_to_id:function(e){return e&&"object"===_typeof(e)?e.toString():e},$dragOut:function(i,s,n,r){var a=((this||e)._viewobj.contains(n)?this.locate(r):null)||null;var o=Nt._drag_context;if((o.target||"").toString()==(a||"").toString())return null;(this||e)._auto_scroll_delay&&((this||e)._auto_scroll_delay=window.clearTimeout((this||e)._auto_scroll_delay));o.target=o.to=null;this.callEvent("onDragOut",[o,r]);return null},$drop:function(i,s,n){var r=Nt._drag_context;r.to=this||e;this._define_index(i,s,r);this.$dragMark({},n);if((!r.from||r.from==r.to||!r.from.callEvent||r.from.callEvent("onBeforeDropOut",[r,n]))&&this.callEvent("onBeforeDrop",[r,n])){this._context_to_move(r,n);this.callEvent("onAfterDrop",[r,n])}},_define_index:function(i,s,n){var r=this._target_to_id(n.target);if((this||e).getBranchIndex)if(r){n.parent=this.getParentId(r);n.index=this.getBranchIndex(r)}else n.index=-1;else n.index=r?this.getIndexById(r):this.count()},_context_to_move:function(e){assert(e.from,"Unsopported d-n-d combination");if(e.from&&e.from.move){var i={parent:e.parent,mode:e.pos};e.from.move(e.source,e.index,e.to,i)}},$longTouchLimit:true,_getDragItemPos:function(i,s){if((this||e).getItemNode){var n=this.locate(s,true);var r=n?this.getItemNode(n):null;return r?offset(r):r}},$drag:function(i,s){var n=this.locate(s,true);if(n){var r=[n];if((this||e).getSelectedId){var a=this.getSelectedId(true,true);if(a&&a.length>1&&-1!=d.find.call(a,n)){var o={};r=[];for(var l=0;l<a.length;l++)o[a[l]]=true;for(var h=0;h<(this||e).data.order.length;h++){var _=(this||e).data.order[h];o[_]&&r.push(_)}}}var c=Nt._drag_context={source:r,start:n};c.from=this||e;if(this.callEvent("onBeforeDrag",[c,s])){Vt._start_context&&delay((function(){Vt._start_context=null}));return c.html||this.$dragHTML(this.getItem(n),s,c)}}return null},$dragHTML:function(e,i,s){var n=this._toHTML(e);isArray(s.source)&&s.source.length>1&&(n=this._toMultipleHTML(n,s.source.length));return n},_toMultipleHTML:function(e,i){e="<div class='webix_drag_main'>"+e+"</div>";var s="<div class='webix_drag_multiple'></div>";i>2&&(s="<div class='webix_drag_multiple_last'></div>"+s);return s+e+"<span class='webix_badge'>"+i+"</span>"},$dragMark:function(i){var s=null;i.target&&(s=this._target_to_id(i.target));if((this||e)._marked&&(this||e)._marked!=s){this._remove_css([(this||e)._marked],"webix_drag_over",true);(this||e)._marked=null}if(!(this||e)._marked&&s){(this||e)._marked=s;this._add_css([s],"webix_drag_over",true);return s}return!!i.to},_add_css:function(e,i){for(var s=0;s<e.length;s++)this.addCss(e[s],i)},_remove_css:function(e,i){for(var s=0;s<e.length;s++)this.removeCss(e[s],i)},$dropHTML:function(){return""},_set_drop_area:function(e,i){var s=this.getItemNode(e);s?s.parentNode.insertBefore(Nt._dropHTML[0],s):i.children[0].appendChild(Nt._dropHTML[0])}};var re={$drag:function(i,s){var n=ne.$drag.apply(this||e,arguments);if(!n)return n;var r=Nt._drag_context;(this||e)._close_branches&&this._close_branches(r);(this||e)._inner_drag_only&&(this||e).getBranchIndex&&((this||e)._drag_order_stored_left=(this||e)._drag_order_complex?20*(this.getItem(r.start).$level+1)+8:0);if(isArray(r.source)){Nt._setDragOffset(s);this._add_css(r.source,"webix_invisible")}return n},$dragIn:function(i,s,n){var r=ne.$dragIn.apply(this||e,arguments);if(!r)return r;Nt._dropHTML||(Nt._dropHTML=this._init_drop_area());var a=Nt._drag_context;var o="$webix-last";a.target&&(o=this._target_to_id(a.target));if("$webix-last"!=o&&"$webix-drop"!=o){var l={direction:(this||e)._settings.layout||(this||e)._drag_direction||"y",x:"width",y:"height"};var h=offset(r);var _=pos(n)[l.direction]-h[l.direction];2*_>h[l[l.direction]]&&(o=this.getNextId(o)||"$webix-last")}if(o==(this||e)._marked_item_id||"$webix-drop"==o)return r;(this||e)._marked_item_id=o;this._set_drop_area(o,s);return r},$dragPos:function(i){if((this||e)._inner_drag_only){var s=offset((this||e).$view);var n="x"==(this||e)._settings.layout;if(n){s.x-=12;i.y=s.y-8;i.x=i.x-18;if(i.x<s.x)i.x=s.x;else{var r=s.x+s.width;i.x>r&&(i.x=r)}}else{s.y+=((this||e)._header_height||0)-12;i.x=s.x+8+((this||e)._drag_order_stored_left||0);i.y=i.y-18;if(i.y<s.y)i.y=s.y;else{var a=s.y+s.height-((this||e)._header_height||0);i.y>a&&(i.y=a)}}}else{var o=Nt._drag_context;i.y+=o.y_offset;i.x+=o.x_offset}},$dragOut:function(i,s,n){if(s!=n){(this||e)._remove_drop_area?this._remove_drop_area():remove(Nt._dropHTML);(this||e)._marked_item_id=Nt._dropHTML=null}return ne.$dragOut.apply(this||e,arguments)},_define_index:function(i,s,n){var r="$webix-last"==(this||e)._marked_item_id?null:(this||e)._marked_item_id;if((this||e).getBranchIndex)if(r){n.parent=this.getParentId(r);n.index=this.getBranchIndex(r);i==s&&this.getParentId(n.start)==n.parent&&this.getBranchIndex(n.start)<n.index&&(n.index-=1)}else n.index=-1;else{n.index=r?this.getIndexById(r):this.count();n.index-=i==s&&this.getIndexById(n.start)<n.index?1:0}},$dragDestroy:function(){var i=Nt._drag_context;isArray(i.source)&&this._remove_css(i.source,"webix_invisible");(this||e)._settings.dynamic&&this.render(null,null,"drag-end");remove(Nt._html)},_init_drop_area:function(){var i=document.createElement("div");i.className="webix_drop_area";i.style.width=(this||e).type.width+"px";i.style.height=(this||e).type.height+"px";i.innerHTML=this.$dropHTML();i.setAttribute((this||e)._id,"$webix-drop");return[i]},$dragMark:function(){return false}};define("DragOrder",re);var ae={$init:function(){(this||e)._undoHistory=i.extend([],d,true);(this||e)._undoCursor=-1},undo_setter:function(i){if(i){this._init_undo();(this||e)._init_undo=function(){}}return i},_init_undo:function(){var i=this||e;this.attachEvent("onBeforeDrop",(function(s){if(s.from==s.to){var n=i._draggedItem=copy(this.getItem(s.start));(this||e).data.branch?n.$index=this.getBranchIndex(n.id):n.$index=this.getIndexById(n.id)}}));(this||e).data.attachEvent("onDataMove",(function(e){if(i._draggedItem&&i._draggedItem.id==e){var s=i._draggedItem;i._draggedItem=null;i._addToHistory(e,s,"move")}}));(this||e).data.attachEvent("onBeforeDelete",(function(s){if(this.getItem(s)){var n=i._deletedItem=copy(this.getItem(s));if((this||e).branch){n.$index=this.getBranchIndex(s);(this||e).branch[s]&&(n.$branch=copy(this.serialize(s)))}else n.$index=this.getIndexById(s)}}));(this||e).data.attachEvent("onDataUpdate",(function(e,s,n){i._addToHistory(e+"",n,"update")}));(this||e).data.attachEvent("onStoreUpdated",(function(e,s,n){var r=null;if(e){"add"==n?r=copy(s):"delete"==n&&(r=i._deletedItem);r&&i._addToHistory(e,r,n)}}));(this||e).data.attachEvent("onIdChange",(function(e,s){"object"==_typeof(e)&&(e=e.row);for(var n=0;n<i._undoHistory.length;n++)i._undoHistory[n].id==e&&(i._undoHistory[n].id=s)}))},_addToHistory:function(i,s,n){if(!(this||e)._skipHistory&&(this||e)._settings.undo){(this||e)._undoHistory.push({id:i,action:n,data:s});20==(this||e)._undoHistory.length&&(this||e)._undoHistory.splice(0,1);(this||e)._skipCursorInc||((this||e)._undoCursor=(this||e)._undoHistory.length-1)}},ignoreUndo:function(i,s){(this||e)._skipHistory=true;i.call(s||this||e);(this||e)._skipHistory=false},removeUndo:function(i){for(var s=(this||e)._undoHistory.length-1;s>=0;s--)if((this||e)._undoHistory[s].id==i){"id"==(this||e)._undoHistory[s].action&&(i=(this||e)._undoHistory[s].data);(this||e)._undoHistory.removeAt(s)}(this||e)._undoCursor=(this||e)._undoHistory.length-1},undo:function(i){if(i)this.ignoreUndo((function(){var s,n;for(n=(this||e)._undoHistory.length-1;!s&&n>=0;n--)(this||e)._undoHistory[n].id==i&&(s=(this||e)._undoHistory[n]);if(s){this._undoAction(s);(this||e)._undoHistory.removeAt(n+1);(this||e)._undoCursor=(this||e)._undoHistory.length-1}}));else{var s=(this||e)._undoHistory[(this||e)._undoCursor];if(s){this.ignoreUndo((function(){this._undoAction(s);(this||e)._undoHistory.removeAt((this||e)._undoCursor)}));(this||e)._undoCursor--}}},_undoAction:function(i){if("delete"==i.action){var s=null,n=i.data.$parent;if(i.data.$branch){s={parent:i.id,data:copy(i.data.$branch)};delete i.data.$branch;n&&!(this||e).data.pull[n]&&(n=0)}this.add(i.data,i.data.$index,n);s&&this.parse(s)}else"add"==i.action?this.remove(i.id):"update"==i.action?this.updateItem(i.id,i.data):"move"==i.action&&(i.data.$parent?this.getItem(i.data.$parent)&&this.move(i.id,i.data.$index,null,{parent:i.data.$parent}):this.move(i.id,i.data.$index))}};function init_suggest(e,i){var s=e.config.suggest;if(s){var n=e.config.suggest=create_suggest(s);var r=$$(n);r&&i&&r.linkInput(i);return r}}function attach_editend(e){if(e&&e.setMasterValue&&!e._editor_initialized){e._editor_initialized=true;e.attachEvent("onValueSuggest",(function(){delay((function(){callEvent("onEditEnd",[])}))}))}}function create_suggest(e){if("string"==typeof e)return e;if(e.linkInput)return e._settings.id;if("object"==_typeof(e)){isArray(e)&&(e={data:e});e.view=e.view||"suggest"}else true===e&&(e={view:"suggest"});var i=ui(e);return i.config.id}function getLabel(e){var i=e.header&&e.header[0]?e.header[0].text:e.editValue||e.label;return(i||"").toString().replace(/<[^>]*>/g,"")}var oe={text:{focus:function(){this.getInputNode((this||e).node).focus();this.getInputNode((this||e).node).select()},getValue:function(){return this.getInputNode((this||e).node).value},setValue:function(i){var s=this.getInputNode((this||e).node);s.value=i;var n=init_suggest(this||e,s);attach_editend(n)},getInputNode:function(){return(this||e).node.firstChild},render:function(){return create("div",{class:"webix_dt_editor"},"<input type='text' aria-label='"+getLabel((this||e).config)+"'>")}},"inline-checkbox":{render:function(){return{}},getValue:function(){return(this||e).node.checked},setValue:function(){},focus:function(){(this||e).node.focus()},getInputNode:function(){},$inline:true},"inline-text":{render:function(){return{}},getValue:function(){return(this||e).node.value},setValue:function(){},focus:function(){(this||e).node.focus();(this||e).node.select()},getInputNode:function(){},$inline:true},checkbox:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().checked},setValue:function(e){this.getInputNode().checked=!!e},getInputNode:function(){return(this||e).node.firstChild.firstChild},render:function(){return create("div",{class:"webix_dt_editor"},"<div><input type='checkbox' aria-label='"+getLabel((this||e).config)+"'></div>")}},select:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().value},setValue:function(e){this.getInputNode().value=e},getInputNode:function(){return(this||e).node.firstChild},render:function(){var i="";var s=(this||e).config.options||(this||e).config.collection;assert(s,"options not defined for select editor");if(s.data&&s.data.each)s.data.each((function(e){i+="<option value='"+e.id+"'>"+e.value+"</option>"}));else if(isArray(s))for(var n=0;n<s.length;n++){var r=s[n];var a=isUndefined(r.id);var o=a?r:r.id;var l=a?r:r.value;i+="<option value='"+o+"'>"+l+"</option>"}else for(var h in s)i+="<option value='"+h+"'>"+s[h]+"</option>";return create("div",{class:"webix_dt_editor"},"<select aria-label='"+getLabel((this||e).config)+"'>"+i+"</select>")}},popup:{focus:function(){this.getInputNode().focus()},destroy:function(){this.getPopup().hide()},getValue:function(){return this.getInputNode().getValue()||""},setValue:function(i){this.getPopup().show((this||e).node);this.getInputNode().setValue(i)},getInputNode:function(){return this.getPopup().getChildViews()[0]},getPopup:function(){(this||e).config.$popup||((this||e).config.$popup=this.createPopup());return $$((this||e).config.$popup)},createPopup:function(){var i=(this||e).config.popup||(this||e).config.suggest;if(i){var s;if("object"!=_typeof(i)||i.name)s=$$(i);else{i.view=i.view||"suggest";s=ui(copy(i))}if(!s._linked){s.linkInput?s.linkInput(document.body):(this||e).linkInput&&this.linkInput(document.body);s._linked=true}attach_editend(s);return s}var n=oe.$popup[(this||e).popupType];if("string"!=typeof n&&!n.name){n=oe.$popup[(this||e).popupType]=ui(n);this.popupInit(n);n.linkInput||this.linkInput(document.body)}return n._settings.id},linkInput:function(i){_event(toNode(i),"keydown",bind((function(i){if((this||e).config.$popup){var s=i.which||i.keyCode,n=this.getInputNode();if(n.isVisible())if(n.moveSelection&&s<41&&s>32){var r;33==s&&(r="pgup");34==s&&(r="pgdown");35==s&&(r="bottom");36==s&&(r="top");37==s&&(r="left");38==s&&(r="up");39==s&&(r="right");40==s&&(r="down");n.moveSelection(r)}else 13!==s||"TEXTAREA"===i.target.nodeName&&i.shiftKey||callEvent("onEditEnd",[])}}),this||e))},popupInit:function(){},popupType:"text",render:function(){return{}},$inline:true}};oe.color=i.extend({focus:function(){},popupType:"color",popupInit:function(e){e.getChildViews()[0].attachEvent("onItemClick",(function(e){callEvent("onEditEnd",[e])}))}},oe.popup);oe.date=i.extend({focus:function(){},popupType:"date",setValue:function(i){(this||e)._is_string=(this||e).config.stringResult||i&&"string"==typeof i;oe.popup.setValue.call(this||e,i)},getValue:function(){return this.getInputNode().getValue((this||e)._is_string?u.parseFormatStr:"")||""},popupInit:function(e){e.getChildViews()[0].attachEvent("onAfterDateSelect",(function(e){callEvent("onEditEnd",[e])}))}},oe.popup);oe.combo=i.extend({_create_suggest:function(i){var s,n;if((this||e).config.popup){s=(this||e).config.popup;n=s.config.id}else if(i){n=create_suggest(i);s=$$(n)}else n=this._shared_suggest(i);attach_editend(s);return n},_shared_suggest:function(){var e=oe.combo;return e._suggest=e._suggest||this._create_suggest(true)},render:function(){var i=create("div",{class:"webix_dt_editor"},"<input type='text' role='combobox' aria-label='"+getLabel((this||e).config)+"'>");var s=(this||e).config.suggest=this._create_suggest((this||e).config.suggest);if(s){$$(s).linkInput(i.firstChild,true);_event(i.firstChild,"click",bind((this||e).showPopup,this||e))}return i},getPopup:function(){return $$((this||e).config.suggest)},showPopup:function(){var i=this.getPopup();var s=i.getList();var n=this.getInputNode();var r=(this||e)._initial_value;i.show(n);n.setAttribute("aria-expanded","true");if(r){assert(s.exists(r),"Option with ID "+r+" doesn't exist");if(s.exists(r)){s.select(r);s.showItem(r)}}else{s.unselect();s.showItem(s.getFirstId())}i._last_input_target=n},afterRender:function(){this.showPopup()},setValue:function(i){(this||e)._initial_value=i;if((this||e).config.suggest){var s=$$((this||e).config.suggest);var n=(this||e).config.collection||(this||e).config.options;n&&s.getList().data.importData(n);this.getInputNode((this||e).node).value=s.getItemText(i)}},getValue:function(){var i=this.getInputNode().value;if((this||e).config.suggest){var s=$$((this||e).config.suggest),n=s.getList();(i||n.getSelectedId&&n.getSelectedId())&&(i=s.getSuggestion(i))}return i}},oe.text);oe.richselect=i.extend({focus:function(){},getValue:function(){return this.getPopup().getValue()},setValue:function(i){var s=(this||e).config.collection||(this||e).config.options;this.getInputNode();s&&this.getPopup().getList().data.importData(s);this.getPopup().show((this||e).node);this.getPopup().setValue(i)},getInputNode:function(){return this.getPopup().getList()},popupInit:function(e){e.linkInput(document.body);attach_editend(e)},popupType:"richselect"},oe.popup);oe.password=i.extend({render:function(){var i=this||e;var s=create("div",{class:"webix_dt_editor webix_password_editor"},"<input type='password' aria-label='"+getLabel((this||e).config)+"'><span class='webix_icon wxi-eye'></span>");var n=s.querySelector(".webix_icon");_event(n,"click",(function(){i.toggleInput();i.getInputNode(i.node).focus()}));return s},toggleInput:function(){var i=this.getInputNode((this||e).node);var s="password"===i.getAttribute("type");i.setAttribute("type",s?"text":"password");var n=i.nextSibling;n.className="webix_icon wxi-eye".concat(s?"-slash":"")}},oe.text);oe.$popup={text:{view:"popup",width:250,height:150,body:{view:"textarea"}},color:{view:"popup",body:{view:"colorboard"}},date:{view:"popup",width:250,height:250,padding:0,body:{view:"calendar",icons:true,borderless:true}},richselect:{view:"suggest",body:{view:"list",select:true}},multiselect:{view:"multisuggest",suggest:{button:true}}};var le={defaults:{editaction:"click"},$init:function(s){(this||e)._editors={};(this||e)._in_edit_mode=0;(this||e)._edit_open_time=0;(this||e)._contentobj.style.position="relative";s&&(s.onDblClick=s.onDblClick||{});this.attachEvent("onAfterRender",(this||e)._refocus_inline_editor);(this||e)._settings.editable&&this._init_edit_events_once();i.extend(this||e,ae)},_refocus_try:function(e){try{if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if("undefined"!=typeof e.createTextRange){var i=e.createTextRange();i.collapse(false);i.select()}}catch(e){}},_refocus_inline_editor:function(){var e=this.getEditor();if(e&&e.$inline&&!e.getPopup){var i=this._locateInput(e);if(i&&i!=e.node){var s=e.node.value;e.node=i;i.value=s;i.focus();this._refocus_try(i)}else this.editStop()}},editable_setter:function(e){e&&this._init_edit_events_once();return e},_init_edit_events_once:function(){var i=attachEvent("onEditEnd",bind((function(){(this||e)._in_edit_mode&&this.editStop()}),this||e));var s=attachEvent("onClick",bind((function(i){(this||e)._in_edit_mode&&new Date-(this||e)._edit_open_time>200&&((this||e)._last_editor&&!(this||e)._last_editor.popupType&&i&&(this||e)._last_editor.node&&(this||e)._last_editor.node.contains(i.target)||this.editStop())}),this||e));this.attachEvent("onDestruct",(function(){detachEvent(i);detachEvent(s)}));(this||e).data.attachEvent&&(this||e).data.attachEvent("onIdChange",bind((function(e,i){this._changeEditorId(e,i)}),this||e));this.attachEvent("onItemClick",(function(i){(this||e)._settings.editable&&"click"==(this||e)._settings.editaction&&this.edit(i)}));this.attachEvent("onItemDblClick",(function(i){(this||e)._settings.editable&&"dblclick"==(this||e)._settings.editaction&&this.edit(i)}));(this||e)._reset_active_editor=bind((function(){(this||e)._edit_open_time=new Date}),this||e);(this||e)._init_edit_events_once=function(){};(this||e)._component_specific_edit_init&&this._component_specific_edit_init()},_handle_live_edits:function(){delay((function(){var e=this.getEditor();if(e&&e.config.liveEdit){var i={value:e.getValue(),old:e.value};if(i.value==i.old)return;e.value=i.value;this._set_new_value(e,i.value,false);this.callEvent("onLiveEdit",[i,e])}}),this||e)},_show_editor_form:function(i){var s=(this||e)._settings.form;"string"!=typeof s&&((this||e)._settings.form=s=ui(s).config.id);s=$$(s);var n=s.setValues?s:s.getChildViews()[0];n.setValues(this.getItem(i.row||i),false,"auto");s.config.master=(this||e).config.id;s.show(this.getItemNode(i));var r=n.getChildViews()[0];r.focus&&r.focus()},edit:function(s,n,r){if((this||e)._settings.editable&&this.callEvent("onBeforeEditStart",[s])){if((this||e)._settings.form)return this._show_editor_form(s);var a=this._get_editor_type(s);if(a){if(this.getEditor(s))return;n||this.editStop();assert(oe[a],"Invalid editor type: "+a);var o=i.extend({},oe[a]);var l=this._init_editor(s,o,r);o.config.liveEdit&&((this||e)._live_edits_handler=this.attachEvent("onKeyPress",(this||e)._handle_live_edits));var h=o.getPopup?o.getPopup(l)._viewobj:l;h&&_event(h,"click",(this||e)._reset_active_editor);l&&_event(l,"input",(this||e)._on_editor_change,{bind:{view:this||e,id:s}});false!==r&&o.focus();(this||e).$fixEditor&&this.$fixEditor(o);(this||e)._edit_open_time=J.edit_open_time=new Date;ht.setFocus(this||e,true);this.callEvent("onAfterEditStart",[s]);return o}return null}},getEditor:function(i){return i?(this||e)._editors[i]:(this||e)._last_editor},_changeEditorId:function(i,s){var n=(this||e)._editors[i];if(n){(this||e)._editors[s]=n;n.id=s;delete(this||e)._editors[i]}},_on_editor_change:function(){(this||e).view.hasEvent("onEditorChange")&&(this||e).view.callEvent("onEditorChange",[(this||e).id,(this||e).view.getEditorValue((this||e).id)])},_get_edit_config:function(){return(this||e)._settings},_init_editor:function(i,s,n){s.config=this._get_edit_config(i);var r=s.render();s.$inline&&(r=this._locateInput(i));s.node=r;var a=this.getItem(i);var o=a[(this||e)._settings.editValue||"value"];isUndefined(o)&&(o="");s.setValue(o,a);s.value=o;this._addEditor(i,s);false!==n&&this.showItem(i);s.$inline||this._sizeToCell(i,r,true);s.afterRender&&s.afterRender();return r},_locate_cell:function(e){return this.getItemNode(e)},_locateInput:function(e){var i=this._locate_cell(e);i&&(i=i.getElementsByTagName("input")[0]||i);return i},_get_editor_type:function(){return(this||e)._settings.editor},_addEditor:function(i,s){s.id=i;(this||e)._editors[i]=(this||e)._last_editor=s;(this||e)._in_edit_mode++},_removeEditor:function(i){(this||e)._last_editor==i&&((this||e)._last_editor=0);i.destroy&&i.destroy();delete i.popup;delete i.node;delete(this||e)._editors[i.id];(this||e)._in_edit_mode--},focusEditor:function(){var i=(this||e).getEditor.apply(this||e,arguments);i&&i.focus&&i.focus()},editCancel:function(){this.editStop(null,null,true)},_applyChanges:function(e){if(e){var i=this.getEditor();if(i&&i.getPopup&&i.getPopup()==e.getTopParentView())return}this.editStop()},editStop:function(i){if(!(this||e)._edit_stop){(this||e)._edit_stop=1;var s=arguments[2];var n=1;i?n=this._editStop((this||e)._editors[i],s):this._for_each_editor((function(e){n*=this._editStop(e,s)}));(this||e)._edit_stop=0;return n}},_cellPosition:function(i){var s=this.getItemNode(i);return{left:s.offsetLeft,top:s.offsetTop,height:s.offsetHeight,width:s.offsetWidth,parent:(this||e)._contentobj}},_sizeToCell:function(e,i,s){if(i.style){var n=this._cellPosition(e,null,true);i.style.top=n.top+"px";i.style.left=n.left+"px";i.style.width=n.width-1+"px";i.style.height=n.height-1+"px";i.top=n.top;s&&n.parent.appendChild(i);return n}},_for_each_editor:function(i){for(var s in(this||e)._editors)i.call(this||e,(this||e)._editors[s])},_editStop:function(i,s){if(i&&!J._final_destruction){var n={value:this._get_new_value(i),old:i.value};if(this.callEvent("onBeforeEditStop",[n,i,s])){if(!s){var r=n.old;"string"==typeof n.value&&(r+="");if(r!=n.value||i.config.liveEdit){var a=this._set_new_value(i,n.value,true);this.updateItem(i.row||i.id,a)}}i.$inline?i.node=null:remove(i.node);var o=i.config.suggest;o&&"string"==typeof o&&$$(o).hide();this._removeEditor(i);(this||e)._live_edits_handler&&this.detachEvent((this||e)._live_edits_handler);this.callEvent("onAfterEditStop",[n,i,s]);return 1}return 0}},validateEditor:function(i){var s=true;if((this||e)._settings.rules){var n=this.getEditor(i);var r=n.column||(this||e)._settings.editValue||"value";var a=(this||e)._settings.rules[r];var o=(this||e)._settings.rules.$all;var l=n.getInputNode();if((a||o)&&!l._viewobj){var h=(this||e).data.getItem(n.row||n.id);var _=n.getValue();a&&(s=a.call(this||e,_,h,r));o&&(s=o.call(this||e,_,h,r)&&s);s?removeCss(l,"webix_invalid"):addCss(l,"webix_invalid");callEvent("onLiveValidation",[n,s,h,_])}}return s},getEditorValue:function(i){var s;s=0===arguments.length?(this||e)._last_editor:this.getEditor(i);if(s)return s.getValue()},getEditState:function(){return(this||e)._last_editor||false},editNext:function(i,s){i=false!==i;if(1==(this||e)._in_edit_mode||s){var n=this._find_cell_next((this||e)._last_editor||s,(function(e){return!!this._get_editor_type(e)}),i);if(this.editStop()){if(n){this.edit(n);this._after_edit_next(n)}return false}}},_after_edit_next:function(){},_find_cell_next:function(i,s,n){var r=this.getIndexById(i.id);var a=(this||e).data.order;if(n){for(var o=r+1;o<a.length;o++)if(s.call(this||e,a[o]))return a[o]}else for(var l=r-1;l>=0;l--)if(s.call(this||e,a[l]))return a[l];return null},_get_new_value:function(e){return e.getValue()},_set_new_value:function(i,s,n){var r=n?{}:this.getItem(i.id);r[(this||e)._settings.editValue||"value"]=s;return r}};var he={$init:function(){(this||e).$view.className+=" webix_flexlayout"},_fix_vertical_layout:function(){},_beforeResetBorders:function(){},_afterResetBorders:function(){},$getSize:function(){debug_size_box_start(this||e,true);var i=0,s=0,n=(this||e)._settings.gravity;(this||e)._sizes=[];for(var r=0;r<(this||e)._cells.length;r++){var a=(this||e)._cells[r].$getSize(0,0);(this||e)._sizes.push(a);i=Math.max(i,a[0]);s=Math.max(s,a[2])}i+=(this||e)._padding.left+(this||e)._padding.right;s+=(this||e)._padding.top+(this||e)._padding.bottom;(this||e)._settings.width&&(i=Math.max(i,(this||e)._settings.width));(this||e)._settings.height&&(s=Math.max(s,(this||e)._settings.height));var o=[i,1e5,s,1e5,n];debug_size_box_end(this||e,o);return o},render:function(){this.resize()},_set_child_size:function(){if(this.isVisible((this||e)._settings.id)){var i=(this||e).$view.style;var s=Math.round((this||e)._margin/2);i.paddingTop=(this||e)._padding.top-s+"px";i.paddingBottom=(this||e)._padding.bottom-s+"px";i.paddingLeft=(this||e)._padding.left-s+"px";i.paddingRight=(this||e)._padding.right-s+"px";for(var n=0;n<(this||e)._cells.length;n++)if(!(this||e)._cells[n]._settings.hidden){var r=(this||e)._cells[n].$view;var a=(this||e)._sizes[n];var o=(this||e)._cells[n]._settings;if(r){r.style.minWidth=a[0]+"px";a[1]<1e5&&a[1]!=a[0]&&(r.style.maxWidth=a[1]+"px");r.style.flexBasis=o.flexBasis||a[0]+"px";r.style.flexGrow=o.flexGrow||(a[1]!=a[0]?a[4]:0);r.style.height=a[3]!=a[2]?"auto":a[2]+"px";r.style.minHeight=a[2]+"px";a[3]<1e5&&a[3]!=a[2]&&(r.style.maxHeight=a[3]+"px");r.style.margin=s+"px"}}var l=[];for(var h=0;h<(this||e)._cells.length;h++)if(!(this||e)._cells[h]._settings.hidden){var _=(this||e)._cells[h].$view;l[h]=[_.offsetWidth,_.offsetHeight]}for(var c=0;c<(this||e)._cells.length;c++)if(!(this||e)._cells[c]._settings.hidden){var d=(this||e)._cells[c];var u=d.$view;if(u){d._settings.flex=true;var f=(this||e)._sizes[c];var g=f[2]==f[3]?f[2]:l[c][1];d.$setSize(l[c][0],g);d._settings.flex=false}}(this||e).$view.style.height="";(this||e).$height=(this||e)._content_height=(this||e).$view.scrollHeight;(this||e).$view.style.height=(this||e)._content_height+"px"}}};var _e={sum:function(i,s){s=s||this||e;var n=0;for(var r=0;r<s.length;r++){var a=parseFloat(i(s[r]),10);isNaN(a)||(n+=a)}return n},min:function(i,s){s=s||this||e;var n=Infinity;for(var r=0;r<s.length;r++){var a=parseFloat(i(s[r]),10);isNaN(a)||a<n&&(n=a)}return Infinity===n?0:1*n},max:function(i,s){s=s||this||e;var n=-Infinity;for(var r=0;r<s.length;r++){var a=parseFloat(i(s[r]),10);isNaN(a)||a>n&&(n=a)}return-Infinity===n?0:1*n},count:function(e,i){var s=0;for(var n=0;n<i.length;n++){var r=e(i[n]);null!==r&&"undefined"!==typeof r&&s++}return s},any:function(e,i){return e(i[0])},string:function(e){return e.$name}};var ce={$init:function(){var i=this||e;this.attachEvent("onClearAll",(function(){return i._not_grouped_order=null}));this.attachEvent("onSyncApply",(function(){return i._not_grouped_order=null}))},ungroup:function(i){if((this||e).getBranchIndex){if(!this._ungroupLevel(i))return}else{if(!(this||e)._not_grouped_order)return;(this||e).order=(this||e)._not_grouped_order;(this||e).pull=(this||e)._not_grouped_pull}this.callEvent("onStoreUpdated",[])},_ungroupLevel:function(i){var s=this||e;var n=i||0;var r="0"==n?1:this.getItem(n).$level+1;var a=false;var o=(this||e).branch[n];var l=[];for(var h=0;h<o.length;h++){var _=o[h];if((this||e).pull[_].$group){a=true;var c=(this||e).branch[_];c&&((this||e).branch[_]=c.filter((function(e){if(!s.pull[e].$footer)return e;s._unregisterItem(e)})));l=l.concat((this||e).branch[_]||[]);this._unregisterItem(_)}else l.push(_)}if(!a)return false;(this||e).branch[n]=l;this._fix_group_levels((this||e).branch[n],n,r);"undefined"===typeof i&&this._ungroupLevel();return true},_unregisterItem:function(i){delete(this||e).pull[i];delete(this||e).branch[i]},_group_processing:function(e){this.blockEvent();this.group(e);this.unblockEvent()},_group_prop_accessor:function(e){if("function"==typeof e)return e;var acc=function(i){return i[e]};acc.$name=e;return acc},group:function(i,s){assert(i,"Empty config");var n;if("string"===typeof i){n=i;i={by:this._group_prop_accessor(i),map:{}}}else if("function"===typeof i)i={by:i,map:{}};else if("string"===typeof i.by){n=i.by;i.by=this._group_prop_accessor(i.by)}i.map=i.map||{};n&&!i.map[n]&&(i.map[n]=[n]);i.missing=void 0===i.missing||i.missing;if((this||e).getBranchIndex)return this._group_tree(i,s);if(!(this||e)._not_grouped_order){(this||e)._not_grouped_order=(this||e).order;(this||e)._not_grouped_pull=(this||e).pull}var r={};var a=[];var o=[];var l=i.missing;this.each((function(e){var s=i.by(e);if(!s&&0!==s){if(false===l)return;if(true===l){o.push(e);return}s=l}if(!r[s]){a.push({id:s,value:s,$group:true,$row:i.row});r[s]=_to_array()}r[s].push(e)}));for(var h=0;h<a.length;h++){var _=a[h];this._map_group(i.map,_,r[a[h].id]);this.hasEvent("onGroupCreated")&&this.callEvent("onGroupCreated",[_.id,_.value,r[a[h].id]])}(this||e).order=_to_array();(this||e).pull={};this._fill_pull(a);this._fill_pull(o);this.callEvent("onStoreUpdated",[])},_fill_pull:function(i){for(var s=0;s<i.length;s++){var n=this.id(i[s]);(this||e).pull[n]&&(n=i[s].id=uid());(this||e).pull[n]=i[s];(this||e).order.push(n);(this||e)._scheme_init&&this._scheme_init(i[s])}},_map_group:function(i,s,n){for(var r in i){var a=i[r][1]||"any";var o=this._group_prop_accessor(i[r][0]);if("function"!=typeof a){assert(_e[a],"Unknown grouping rule: "+a);a=_e[a]}s[r]=a.call(this||e,o,n)}},_group_tree:function(i,s){var n=0;s?n=this.getItem(s).$level:s=0;var r=[];var a=[];var o=[];var l=(this||e).branch[s];var h={};for(var _=0;_<l.length;_++){var c=this.getItem(l[_]);var d=i.by(c);if(!d&&0!==d){if(false===i.missing)continue;if(true===i.missing){o.push(c.id);continue}d=i.missing}var u=h[d];if(!u){var f=uid();var g=(this||e).pull[f]={id:f,value:d,$group:true,$row:i.row};(this||e)._scheme_init&&this._scheme_init(g);a.push(g);u=h[d]=(this||e).branch[f]=[];u._formath=[];r.push(f)}u.push(c.id);u._formath.push(c)}(this||e).branch[s]=r.concat(o);for(var v=0;v<a.length;v++){var p=a[v];this._map_group(i.map,p,(this||e).branch[a[v].id]._formath);this.hasEvent("onGroupCreated")&&this.callEvent("onGroupCreated",[p.id,p.value,(this||e).branch[p.id]._formath]);if(i.footer){var m="footer$"+p.id;var b=(this||e).pull[m]={id:m,$footer:true,value:p.value,$level:n,$count:0,$parent:p.id,$row:i.footer.row};this._map_group(i.footer,b,(this||e).branch[a[v].id]._formath);(this||e).branch[p.id].push(b.id);this.callEvent("onGroupFooter",[b.id,b.value,(this||e).branch[p.id]._formath])}delete(this||e).branch[p.id]._formath}this._fix_group_levels((this||e).branch[s],s,n+1);this.callEvent("onStoreUpdated",[])},_fix_group_levels:function(i,s,n){s&&(this.getItem(s).$count=i.length);for(var r=0;r<i.length;r++){var a=(this||e).pull[i[r]];a.$level=n;a.$parent=s;var o=(this||e).branch[a.id];o&&this._fix_group_levels(o,a.id,n+1)}}};var de={$init:function(){i.extend((this||e).data,ce)},group:function(i,s){if(!s&&0!==s){(this||e).$blockRender=true;(this||e).data.ungroup();(this||e).$blockRender=false}(this||e).data.group(i,s)},ungroup:function(i){(this||e).data.ungroup(i)}};var ue={$init:function(){var i=this||e;(this||e).$ready.push((function(){i.customRadio_setter&&!i.config.customRadio||_event(i.$view,"keydown",i._moveSelection,{bind:i})}))},_focus:function(){if(!ht.canFocus(this||e))return false;var i=this._getInputNode();if(i)for(var s=0;s<i.length;s++)if("0"==i[s].getAttribute("tabindex"))return i[s].focus()},_blur:function(){var e=this._getInputNode();if(e)for(var i=0;i<e.length;i++)if("0"==e[i].getAttribute("tabindex"))return e[i].blur()},_moveSelection:function(e){var i=e.which||e.keyCode;if(i>34&&i<41){var s=this._getInputNode();var n=false;if(!s.length)return;preventEvent(e);var r=37===i||38===i||35===i?-1:1;if(35===i)n=s.length-1;else if(36===i)n=0;else for(var a=0;a<s.length;a++)if("0"==s[a].getAttribute("tabindex")){n=a+r;break}if(false!==n){var o=n;do{o>=s.length&&(o=0);o<0&&(o=s.length-1);if(s[o].getAttribute("webix_disabled"))o+=r;else{var l=s[o].getAttribute("button_id");this.setValue(l,"user");s[o].focus();o="success"}}while("success"!==o&&o!==n)}}},_get_tooltip_data:function(e,i){var s,n=i.target;while(n&&!n.webix_tooltip){s=n.getAttribute("webix_t_id");if(s)return this.getOption(s);n=n.parentNode}return null},optionIndex:function(i){var s=(this||e)._settings.options;for(var n=0;n<s.length;n++)if(s[n].id==i)return n;return-1},getOption:function(i){var s=this.optionIndex(i);return-1!==s?(this||e)._settings.options[s]:null},addOption:function(i,s,n,r){var a=i;if("object"!=_typeof(i)){s=s||i;a={id:i,value:s}}else{i=a.id;r=n;n=s}if(-1===this.optionIndex(i)){d.insertAt.call((this||e)._settings.options,a,r);this.refresh();this.callEvent("onOptionAdd",[i,a])}if(n){1===(this||e)._settings.options.length&&((this||e)._settings.value="");this.setValue(i,"auto")}},removeOption:function(i){var s=this.optionIndex(i);if(-1!==s){var n=(this||e)._settings.options;d.removeAt.call(n,s);this.refresh();(this||e)._settings.value==i&&this._setNextVisible(n,s);this.callEvent("onOptionRemove",[i,(this||e)._settings.value])}},_setNextVisible:function(i,s){var n=i.length;if(n&&!(this||e).customRadio_setter){s=Math.min(s,n-1);for(var r=s;r<n;r++)if(!i[r].hidden)return this.setValue(i[r].id,"auto");for(var a=s;a>=0;a--)if(!i[a].hidden)return this.setValue(i[a].id,"auto")}this.setValue("","auto")},_getFirstActive:function(i){var s=(this||e)._settings.options;if(s.length){for(var n=0;n<s.length;n++)if(!s[n].hidden&&!s[n].disabled)return s[n].id;if(i)return s[0].id}return""},_filterOptions:function(e){var i=[];for(var s=0;s<e.length;s++)e[s].hidden||i.push(e[s]);return i},_setOptionState:function(i,s,n){var r=(this||e)._settings.options;var a=this.optionIndex(i);if(r[a]&&n!=!!r[a][s]){r[a][s]=n;n&&"hidden"===s&&(this||e)._settings.value==i&&this._setNextVisible(r,a);this.refresh()}},hideOption:function(e){this._setOptionState(e,"hidden",true)},showOption:function(e){this._setOptionState(e,"hidden",false)},disableOption:function(e){this._setOptionState(e,"disabled",true)},enableOption:function(e){this._setOptionState(e,"disabled",false)}};var fe=i.proto({$init:function(i){(this||e)._id="map_"+uid();(this||e)._key=i;(this||e)._map=[];(this||e)._areas=[]},addRect:function(e,i,s){this._createMapArea(e,"RECT",i,s)},addPoly:function(e,i,s){this._createMapArea(e,"POLY",i,s)},_createMapArea:function(i,s,n,r){var a="";4==arguments.length&&(a="userdata='"+r+"'");(this||e)._map.push("<area "+(this||e)._key+"='"+i+"' shape='"+s+"' coords='"+n.join()+"' "+a+"></area>");(this||e)._areas.push({index:r,points:n})},addSector:function(e,i,s,n,r,a,o,l){var h=[];h.push(n);h.push(Math.floor(r*o));for(var _=i;_<s;_+=Math.PI/18){h.push(Math.floor(n+a*Math.cos(_)));h.push(Math.floor((r+a*Math.sin(_))*o))}h.push(Math.floor(n+a*Math.cos(s)));h.push(Math.floor((r+a*Math.sin(s))*o));h.push(n);h.push(Math.floor(r*o));return this.addPoly(e,h,l)},hide:function(e,i,s){if(e.querySelectorAll){var n=e.querySelectorAll('area[userdata="'+i+'"]');for(var r=0;r<n.length;r++){var a=n[r];if(s){if(a.getAttribute("coords")){a.coordsdis=a.getAttribute("coords");a.setAttribute("coords","");a.coords=""}}else if(!s&&a.coordsdis){a.setAttribute("coords",a.coordsdis);a.coords=a.coordsdis;a.coordsdis=""}n[r].style.display=s?"none":""}}},render:function(i){var s=create("DIV");s.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;";i.appendChild(s);s.innerHTML='\n\t\t\t<map id="'.concat((this||e)._id,'" name="').concat((this||e)._id,'">').concat((this||e)._map.join("\n"),'</map>\n\t\t\t<img class="webix_map_img" usemap="#').concat((this||e)._id,'">');i._htmlmap=s;(this||e)._map=[]}});var ge={$init:function(){(this||e)._elements={};(this||e)._translate_ids={};(this||e).getTopParentView=(this||e)._get_self=bind((function(){return this||e}),this||e);this._run_inner_init_logic();(this||e).$ready.push((this||e)._run_after_inner_init_logic)},$$:function(i){return(this||e)._elements[i]},innerId:function(i){return(this||e)._translate_ids[i]},_run_inner_init_logic:function(){(this||e)._prev_global_col=J._global_collection;J._global_collection=this||e},_run_after_inner_init_logic:function(){for(var i in(this||e)._elements){var s=(this||e)._elements[i];(this||e).callEvent&&s.mapEvent&&!s._evs_map.onitemclick&&s.mapEvent({onitemclick:this||e});s.getTopParentView=(this||e)._get_self}J._global_collection=(this||e)._prev_global_col;(this||e)._prev_global_col=0},_destroy_child:function(i){delete(this||e)._elements[i]},ui:function(){this._run_inner_init_logic();var i=ui.apply(this||e,arguments);this._run_after_inner_init_logic();return i}};var ve={$init:function(){(this||e).getSelectedId&&this.attachEvent("onAfterRender",(this||e)._set_focusable_item);(this||e).moveSelection&&this.attachEvent("onTabFocus",(this||e)._set_item_focus)},_set_item_focus:function(){if((this||e).getSelectedId){var i=this.getSelectedId(true);i.length&&this.getItemNode(i[0])||this.moveSelection("down")}},_set_focusable_item:function(){var i=this.getSelectedId(true);if(!i.length||!this.getItemNode(i[0])){var s=(this||e)._dataobj.querySelector("["+(this||e)._id+"]");s&&s.setAttribute("tabindex","0")}},_navigation_helper:function(e){return function(i,s){var n=s.target;if(!n.getAttribute("webixignore")){var r=n.tagName;if("INPUT"==r||"TEXTAREA"==r||"SELECT"==r)return true}if(i&&i.moveSelection&&i.config.navigation&&!i._in_edit_mode){preventEvent(s);return i.moveSelection(e,{shift:s.shiftKey,ctrl:s.ctrlKey,e:s})}}},moveSelection:function(i,s,n){var r=(this||e)._settings;if(!r.disabled){if("right"!=i&&"left"!=i||!(this||e)._parent_menu){var a=this.getSelectedId(true);var o=(this||e).count&&("x"==r.layout||r.xCount>1);var l=true;if(!a.length&&this.count()){if("down"==i||"right"==i&&o)i="top";else{if(!("up"==i||"left"==i&&o))return;i="bottom"}a=[this.getFirstId()];l=false}if(1==a.length){a=a[0];l=true===l?a:null;if("left"==i){if((this||e).close&&!(this||e)._ignore_clicks)return this.close(a);if((this||e)._level_up&&this._level_up(a))return this.render()}else if("right"==i){if((this||e).open)return this.open(a);if((this||e)._level_down&&this._level_down(a))return this.render()}if("top"==i)a=this.getFirstId();else if("bottom"==i)a=this.getLastId();else if("up"==i||"left"==i||"pgup"==i){var h=this.getIndexById(a);var _="pgup"==i?10:1;a=this.getIdByIndex(Math.max(0,h-_))}else{if("down"!=i&&"right"!=i&&"pgdown"!=i){assert(false,"Not supported selection moving mode");return}var c=this.getIndexById(a);var d="pgdown"==i?10:1;a=this.getIdByIndex(Math.min(this.count()-1,c+d))}var u="up"==i||"left"==i||"pgdown"==i||"bottom"==i?-1:1;if((this||e)._skip_item){a=this._skip_item(a,l,u);if(!a)return}this.showItem(a);this.select(a);(this||e).getSubMenu&&this.getSubMenu(a)&&this._mouse_move_activation(a,this.getItemNode(a));if(!r.clipboard&&false!==n){var f=this.getItemNode(a);f&&f.focus()}}return false}var g=$$((this||e)._parent_menu);g._hide_sub_menu(true);"x"===g.config.layout?g.moveSelection(i):ht.setFocus(g)}},navigation_setter:function(e){if(e&&!ht._global_nav_grid_hotkeys){ht._global_nav_grid_hotkeys=true;ht.addHotKey("up",this._navigation_helper("up"));ht.addHotKey("down",this._navigation_helper("down"));ht.addHotKey("right",this._navigation_helper("right"));ht.addHotKey("left",this._navigation_helper("left"));ht.addHotKey("shift+up",this._navigation_helper("up"));ht.addHotKey("shift+down",this._navigation_helper("down"));ht.addHotKey("shift+right",this._navigation_helper("right"));ht.addHotKey("shift+left",this._navigation_helper("left"));ht.addHotKey("ctrl+shift+up",this._navigation_helper("up"));ht.addHotKey("ctrl+shift+down",this._navigation_helper("down"));ht.addHotKey("ctrl+shift+right",this._navigation_helper("right"));ht.addHotKey("ctrl+shift+left",this._navigation_helper("left"));ht.addHotKey("pageup",this._navigation_helper("pgup"));ht.addHotKey("pagedown",this._navigation_helper("pgdown"));ht.addHotKey("home",this._navigation_helper("top"));ht.addHotKey("end",this._navigation_helper("bottom"))}return e}};var pe={$init:function(){(this||e).$ready.push((this||e)._create_scheme_init);this.attachEvent("onStructureUpdate",(this||e)._create_scheme_init);this.attachEvent("onStructureLoad",(function(){(this||e)._scheme_init_order.length||this._create_scheme_init()}))},_create_scheme_init:function(){var i=(this||e)._scheme_init_order=[];var s=(this||e)._settings;s.columns&&this._build_data_map(s.columns);(this||e)._settings.map&&this._process_field_map(s.map);i.length&&((this||e).data._scheme_init=function(e){for(var s=0;s<i.length;s++)i[s](e)})},_process_field_map:function(i){for(var s in i)(this||e)._scheme_init_order.push(this._process_single_map(s,i[s]))},_process_single_map:function(e,i,s){var n=i.replace(/^(\s|)\((date|number)\)/,"");var r;if(""===n)r=function(i){return i[e]};else{-1===n.indexOf("#")&&-1===n.indexOf("{")&&(n="#"+n+"#");r=template(n)}if(0===i.indexOf("(date)")){s&&!s.format&&(s.format=u.dateFormatStr);return function(i){var s=(r(i)||"").toString();i[e]=u.parseFormatDate(s)}}return 0===i.indexOf("(number)")?function(i){i[e]=1*r(i)}:function(i){i[e]=r(i)||""}},_build_data_map:function(i){for(var s=0;s<i.length;s++){var n=i[s];if(!n.id){n.id="i"+uid();n.header||(n.header="")}n.map&&(this||e)._scheme_init_order.push(this._process_single_map(n.id,n.map,i[s]));this._map_options(i[s])}},_create_collection:function(i){if("string"===typeof i){var s=$$(i);if(s)i=s;else{i=new(use("DataCollection"))({url:i});(this||e)._destroy_with_me.push(i)}i.getBody&&(i=s.getBody())}else if("function"===typeof i||i.$proxy){i=new(use("DataCollection"))({url:i});(this||e)._destroy_with_me.push(i)}else if(!i.loadNext){var n=isArray(i);var r=[];if(n&&"object"!==_typeof(i[0])){for(var a=0;a<i.length;a++)r.push({id:i[a],value:i[a]});i=r}else if(!n){for(var o in i)r.push({id:o,value:i[o]});i=r}i=new(use("DataCollection"))({data:i});(this||e)._destroy_with_me.push(i)}return i},_map_options:function(e){var i=e.options||e.collection;if(i){i=this._create_collection(i);this._bind_collection(i,e)}if(e.header){this._map_header_options(e.header);this._map_header_options(e.footer)}},_map_header_options:function(i){var s=this||e;i=i||[];var _loop=function(e){var n=i[e];if(n&&n.options){var r=n.options;r.loadNext||(r=n.options=s._create_collection(r));var a=r.data.attachEvent("onStoreUpdated",(function(){s.refreshFilter&&s.refreshFilter(n.columnId)}));s.attachEvent("onDestruct",(function(){r.$destructed||r.data.detachEvent(a)}))}};for(var n=0;n<i.length;n++)_loop(n)},_bind_collection:function(i,s){var n=this||e;if(s){delete s.options;s.collection=i;s.template=s.template||this._bind_template(s.optionslist);var r=i.data.attachEvent("onStoreUpdated",(function(){n.refresh();n.refreshFilter&&n.refreshFilter(s.id)}));this.attachEvent("onDestruct",(function(){i.$destructed||i.data.detachEvent(r)}))}},_bind_template:function(e){if(e){var i="string"===typeof e?e:",";return function(e,s,n,r){if(!n)return"";var a=n.toString().split(i);for(var o=0;o<a.length;o++){var l=r.collection.data.pull[a[o]];a[o]=l&&l.value||""}return a.join(", ")}}return function(e,i,s,n){var r=n.collection.data.pull[s];return r&&(r.value||0===r.value)?r.value:""}}};var me={$init:function(i){i=i||{};(this||e)._clickstamp=0;(this||e)._dbl_sensetive=z.touch?500:300;(this||e)._item_clicked=null;this._mouse_action_extend(i.onClick,"on_click");this._mouse_action_extend(i.onContext,"on_context");this._mouse_action_extend(i.onDblClick,"on_dblclick");this._mouse_action_extend(i.onMouseMove,"on_mouse_move");(this||e).on_click&&_event((this||e)._contentobj,"click",(this||e)._onClick,{bind:this||e});(this||e).on_context&&_event((this||e)._contentobj,"contextmenu",(this||e)._onContext,{bind:this||e});(this||e).on_mouse_move&&this._enable_mouse_move()},_enable_mouse_move:function(){if(!(this||e)._mouse_move_enabled){(this||e).on_mouse_move=(this||e).on_mouse_move||{};_event((this||e)._contentobj,"mousemove",(this||e)._onMouse,{bind:this||e});_event((this||e)._contentobj,"mouseout",(this||e)._onMouse,{bind:this||e});(this||e)._mouse_move_enabled=1;this.attachEvent("onDestruct",(function(){(this||e)._mouse_move_timer&&window.clearTimeout((this||e)._mouse_move_timer)}))}},_mouse_action_extend:function(s,n){if(s){var r=(this||e)[n];var a=r?i.extend({},r):{};(this||e)[n]=i.extend(a,s)}},_onClick:function(i){var s=this||e;if(!this.isEnabled())return false;ht._focus_action(this||e);if((this||e).on_dblclick&&(this||e).locate){if((this||e)._clickHandler&&(this||e)._item_clicked+""==this.locate(i)+""){clearTimeout((this||e)._clickHandler);(this||e)._clickHandler=null;return this._onDblClick(i)}(this||e)._item_clicked=this.locate(i);(this||e)._clickHandler=delay((function(){s._clickHandler=null;return s._mouseEvent(i,s.on_single_click,"ItemSingleClick")}),null,[i],(this||e)._dbl_sensetive)}return this._mouseEvent(i,(this||e).on_click,"ItemClick")},_onDblClick:function(i){return this._mouseEvent(i,(this||e).on_dblclick,"ItemDblClick")},_onContext:function(i){this._mouseEvent(i,(this||e).on_context,"BeforeContextMenu","AfterContextMenu")},_onMouse:function(i){if(!(this||e).$destructed){document.createEventObject&&(i=document.createEventObject(event));(this||e)._mouse_move_timer&&window.clearTimeout((this||e)._mouse_move_timer);this.callEvent("onMouseMoving",[i]);(this||e)._mouse_move_timer=delay((function(e){"mousemove"==e.type?this._onMouseMove(e):this._onMouseOut(e)}),this||e,[i],(this||e)._settings.mouseEventDelay||500)}},_onMouseMove:function(i){this._mouseEvent(i,(this||e).on_mouse_move,"MouseMove")||this._onMouseOut(i)},_onMouseOut:function(e){this.callEvent("onMouseOut",[e])},_mouseEvent:function(i,s,n,r){if(!i.processed&&(this||e)._viewobj){i.processed=true;var a=i.target;var o="";var l=null;var h=false;while(a&&a.parentNode&&(this||e)._viewobj&&a!=(this||e)._viewobj.parentNode){if(!h&&a.getAttribute){l=a.getAttribute((this||e)._id);if(l){if(a.getAttribute("webix_disabled")){(this||e)._item_clicked=null;return}(this||e)._item_clicked=l;if((this||e).callEvent){if(!this.callEvent("on"+n,[l,i,a]))return;r&&this.callEvent("on"+r,[l,i,a])}h=true}}o=_getClassName(a);if(s&&o){o=o.toString().split(" ");for(var _=0;_<o.length;_++)if(s[o[_]]){var c=toFunctor(s[o[_]],(this||e).$scope);var d=c.call(this||e,i,l||locate(i,(this||e)._id),a);if(false===d)return h}}a=a.parentNode}return h}}};var be={$init:function(){(this||e).$ready.push((function(){this.attachEvent("onKeyPress",(this||e)._onKeyPress)}))},_moveActive:function(i,s){if(37===i||39===i){preventEvent(s);this._showNavItem(37===i?-1:1);var n=(this||e)._navPanel.querySelector("[tabindex='0']");n&&n.focus()}},_renderPanel:function(){remove((this||e)._navPanel);(this||e)._navPanel=create("DIV",{class:"webix_nav_panel webix_nav_panel_"+(this||e)._settings.navigation.type,role:"tablist"},"");(this||e)._viewobj.appendChild((this||e)._navPanel);this._renderNavItems();this._renderNavButtons();this._setLinkEventHandler()},_setLinkEventHandler:function(){var i=[];(this||e)._navPanel&&(i[0]=event$1((this||e)._navPanel,"click",bind((function(i){var s=i.target;var n=false;while(s!=(this||e)._navPanel&&!n){var r=s.getAttribute((this||e)._linkAttr);if(r){n=true;this._showPanelBind(r)}s=s.parentNode}}),this||e)));(this||e)._prevNavButton&&(i[1]=event$1((this||e)._prevNavButton,"click",bind((function(){this._showNavItem(-1)}),this||e)));(this||e)._nextNavButton&&(i[1]=event$1((this||e)._nextNavButton,"click",bind((function(){this._showNavItem(1)}),this||e)));this.attachEvent("onDestruct",(function(){for(var e=0;e<i.length;e++)this.detachEvent(i[e]);i=null}))},_showNavItem:function(i){if((this||e)._cells){var s=(this||e)._active_cell+i;(s>=(this||e)._cells.length||s<0)&&(s=s<0?(this||e)._cells.length-1:0);this.setActiveIndex(s)}},_showPanelBind:function(i){(this||e)._cells&&$$(i).show()},_renderNavItems:function(){var i,s;s=(this||e)._settings.navigation;if(s.items){(this||e)._linkAttr=s.linkAttr||"bind_id";(this||e)._navPanel?this._clearPanel():this._renderPanel();var n=(this||e)._cells?(this||e)._cells:(this||e).data.order;if(n.length>1)for(var r=0;r<n.length;r++){i=create("DIV",{class:"webix_nav_item webix_nav_"+(r==(this||e)._active_cell?"active":"inactive"),role:"tab",tabindex:r==(this||e)._active_cell?"0":"-1"});var a=(this||e)._cells?(this||e)._cells[r]._settings.id:n[r];a&&i.setAttribute((this||e)._linkAttr,a);(this||e)._navPanel.appendChild(i)}}},_clearPanel:function(){if((this||e)._navPanel){var i=(this||e)._navPanel.childNodes;for(var s=i.length-1;s>=0;s--)remove(i[s])}},_renderNavButtons:function(){var i=(this||e)._settings.navigation;if(i.buttons){(this||e)._prevNavButton&&remove((this||e)._prevNavButton);(this||e)._prevNavButton&&remove((this||e)._nextNavButton);(this||e)._prevNavButton=create("DIV",{class:"webix_nav_button_"+i.type+" webix_nav_button_prev "},'<div role="button" tabindex="0" aria-label="'+u.aria.prevTab+'" class="webix_nav_button_inner"></div>');(this||e)._viewobj.appendChild((this||e)._prevNavButton);(this||e)._nextNavButton=create("DIV",{class:"webix_nav_button_"+i.type+" webix_nav_button_next "},'<div role="button" tabindex="0" aria-label="'+u.aria.prevTab+'" class="webix_nav_button_inner"></div>');(this||e)._viewobj.appendChild((this||e)._nextNavButton)}}};var we={showOverlay:function(i){if((this||e)._overlay)(this||e)._overlay.innerHTML=i;else{(this||e)._overlay=create("DIV",{class:"webix_overlay"},i||"");insertBefore((this||e)._overlay,(this||e)._viewobj.firstChild,(this||e)._viewobj);(this||e)._viewobj.style.position="relative"}},hideOverlay:function(){if((this||e)._overlay){remove((this||e)._overlay);(this||e)._overlay=null}}};var xe={pager_setter:function(i){if("string"==typeof i){var s=$$(i);if(!s){(this||e).$blockRender=true;delay((function(){var s=$$(i);(this||e)._settings.pager=this.pager_setter(s);var n=s._settings;n.count=(this||e).data._count_pager_total(n.level);s.refresh();(this||e).$blockRender=false;this.render()}),this||e);return null}i=s}function check_pager_sizes(s){(this||e).config.topSplit&&((this||e).config.topSplit=0);if(i.config.autosize&&(this||e).getVisibleCount){var n=this.getVisibleCount();if(isNaN(n)){i.config.size=1;delay(check_pager_sizes,this||e,[true])}else if(n!=i.config.size){i.config.size=n;i.refresh();true===s&&this.refresh()}}var r=(this||e)._settings.pager;if(-1==r.page)return false;(this||e).data.$min=this._count_pager_index(0,r.page*r.size);(this||e).data.$max=this._count_pager_index((this||e).data.$min,r.size);(this||e).data.$pagesize=(this||e).data.$max-(this||e).data.$min;return true}this.attachEvent("onBeforeRender",check_pager_sizes);if(!i.$view){i.view="pager";i=ui(i)}(this||e)._pager=i;i.$master=this||e;(this||e).data.attachEvent("onStoreUpdated",(function(){var e=i._settings;e.count=this._count_pager_total(e.level);i.refresh()}));(this||e).data._count_pager_total=(this||e)._count_pager_total;return i._settings},_count_pager_total:function(i){var s=this||e;var n=0;i&&(this||e).order.forEach((function(e){e&&1!=s.getItem(e).$level&&n++}));return this.count()-n},_count_pager_index:function(i,s){if((this||e)._settings.pager.level){var n=(this||e).data.order;if(n.length)for(var r=i;r<=i+s;r++){var a=n[r];a&&1!=this.getItem(a).$level&&s++}else s=0}return i+s},setPage:function(i){(this||e)._pager&&(this||e)._pager.select(i)},getPage:function(){return(this||e)._pager._settings.page},getPager:function(){return(this||e)._pager}};var ye={$init:function(){var i=this||e;if(isUndefined((this||e)._progress)&&(this||e).attachEvent){this.attachEvent("onBeforeLoad",(function(){return i.showProgress()}));this.attachEvent("onAfterLoad",(function(){return i.hideProgress()}));(this||e)._progress=null}},showProgress:function(s){var n;if(!(this||e)._progress){s=i.extend({position:0,delay:2e3,type:"icon",icon:"wxi-sync",hide:false},s||{},true);var r="icon"==s.type?s.icon+" webix_spin":"";(this||e)._progress=create("DIV",{class:"webix_progress_"+s.type,role:"progressbar","aria-valuemin":"0","aria-valuemax":"100",tabindex:"0"},"<div class='webix_progress_state "+r+"'></div>");(this||e).setPosition||((this||e)._viewobj.style.position="relative");insertBefore((this||e)._progress,(this||e)._viewobj.firstChild,(this||e)._viewobj);(this||e)._viewobj.setAttribute("aria-busy","true");if(!(this||e)._touch_scroll&&(this||e).getScrollState){var a=this.getScrollState();(this||e)._viewobj.scrollWidth!=(this||e).$width&&((this||e)._progress.style.left=a.x+"px");(this||e)._viewobj.scrollHeight!=(this||e).$height&&("bottom"!=s.type?(this||e)._progress.style.top=a.y+"px":(this||e)._progress.style.top=a.y+(this||e).$height-(this||e)._progress.offsetHeight+"px")}(this||e)._progress_animate="icon"!=s.type}if(s){if((this||e)._progress_animate){var o=s.position||1;if(s.delay){n=(this||e)._viewobj.firstChild.offsetWidth;(this||e)._progress.firstChild.style[z.transitionDuration]=s.delay+"ms"}(this||e)._progress.firstChild.style.width=100*o+"%"}(this||e)._progress_hide&&clearTimeout((this||e)._progress_hide);s.hide&&((this||e)._progress_hide=delay((this||e).hideProgress,this||e,[true],s.delay));return n}},hideProgress:function(i){if((this||e)._progress)if(i||!(this||e)._progress_animate){remove((this||e)._progress);(this||e)._progress=null;(this||e)._viewobj.removeAttribute("aria-busy")}else this.showProgress({position:1.1,delay:300,hide:true})}};var Se={$init:function(){assert((this||e).data,"RenderStack :: Component doesn't have DataStore");assert(template,"template :: template is not accessible");(this||e)._html=document.createElement("DIV");(this||e).data.attachEvent("onIdChange",bind((this||e)._render_change_id,this||e));this.attachEvent("onItemClick",(this||e)._call_onclick);if(!(this||e).types){(this||e).types={default:(this||e).type};(this||e).type.name="default"}(this||e).type=clone((this||e).type)},customize:function(i){type(this||e,i)},item_setter:function(e){return this.type_setter(e)},type_setter:function(s){if((this||e).types[s]){(this||e).type=clone((this||e).types[s]);(this||e).type.css&&((this||e)._contentobj.className+=" "+(this||e).type.css)}else this.customize(s);(this||e).type.on_click&&i.extend((this||e).on_click,(this||e).type.on_click);return s},template_setter:function(i){(this||e).type.template=template(i)},_toHTML:function(i){var s=(this||e).data._marks[i.id];assert(!i.$template||(this||e).type["template"+i.$template],"RenderStack :: Unknown template: "+i.$template);this.callEvent("onItemRender",[i]);return(this||e).type.templateStart(i,(this||e).type,s)+(i.$template?(this||e).type["template"+i.$template]:(this||e).type.template)(i,(this||e).type,s)+(this||e).type.templateEnd(i,(this||e).type,s)},_toHTMLObject:function(i){(this||e)._html.innerHTML=this._toHTML(i);return(this||e)._html.firstChild},_render_change_id:function(i,s){var n=this.getItemNode(i);if(n){n.setAttribute((this||e)._id,s);(this||e)._htmlmap[s]=(this||e)._htmlmap[i];delete(this||e)._htmlmap[i]}},_call_onclick:function(){if((this||e)._settings.click){var i=toFunctor((this||e)._settings.click,(this||e).$scope);i&&i.call&&i.apply(this||e,arguments)}},getItemNode:function(i){if((this||e)._htmlmap)return(this||e)._htmlmap[i];(this||e)._htmlmap={};var s=(this||e)._dataobj.childNodes;for(var n=0;n<s.length;n++){var r=s[n].getAttribute((this||e)._id);r&&((this||e)._htmlmap[r]=s[n])}return this.getItemNode(i)},locate:function(i){return locate(i,(this||e)._id)},showItem:function(i){var s=this.getItemNode(i);if(s&&(this||e).scrollTo){var n=s.offsetLeft;var r=n+s.offsetWidth;var a=s.offsetTop;var o=a+s.offsetHeight;var l=this.getScrollState();var h=l.x;(h>n||h+(this||e)._content_width<r)&&(h=n);var _=l.y;(_>a||_+(this||e)._content_height<o)&&(_=a);this.scrollTo(h,_);(this||e)._setItemActive&&this._setItemActive(i)}},render:function(i,s,n){if(this.isVisible((this||e)._settings.id)&&!(this||e).$blockRender)if(i){var r=this.getItemNode(i);switch(n){case"paint":case"update":if(!r)return;var a=(this||e)._htmlmap[i]=this._toHTMLObject(s);insertBefore(a,r);remove(r);break;case"delete":if(!r)return;remove(r);delete(this||e)._htmlmap[i];break;case"add":var o=(this||e)._htmlmap[i]=this._toHTMLObject(s);insertBefore(o,this.getItemNode((this||e).data.getNextId(i)),(this||e)._dataobj);break;case"move":insertBefore(this.getItemNode(i),this.getItemNode((this||e).data.getNextId(i)),(this||e)._dataobj);break;default:assert(0,"Unknown render command: "+n);break}}else if(this.callEvent("onBeforeRender",[(this||e).data])){((this||e)._renderobj||(this||e)._dataobj).innerHTML=(this||e).data.getRange().map((this||e)._toHTML,this||e).join("");(this||e)._htmlmap=null;this.callEvent("onAfterRender",[])}}};var $e={$init:function(i){if(i&&!i.scroll&&(this||e)._one_time_scroll)return(this||e)._dataobj=(this||e)._dataobj||(this||e)._contentobj;((this||e)._dataobj||(this||e)._contentobj).appendChild(create("DIV",{class:"webix_scroll_cont"},""));(this||e)._dataobj=((this||e)._dataobj||(this||e)._contentobj).firstChild;(this||e).callEvent&&!(this||e).$hasYScroll&&_event((this||e)._viewobj,"scroll",(function(){delay((function(){this.callEvent("onAfterScroll",[])}),this||e)}),{bind:this||e})},scroll_setter:function(i){if(!i)return false;var s="auto"===i;var n="x"==i?"x":"xy"==i||s?"xy":"y";z.$customScroll&&Kt.enable(this||e,n);var r=(this||e)._dataobj.parentNode.style;if(s&&!z.$customScroll)r.overflowX=r.overflowY="auto";else{if(-1!==n.indexOf("x")){(this||e)._scroll_x=true;r.overflowX="scroll"}if(-1!==n.indexOf("y")){(this||e)._scroll_y=true;r.overflowY="scroll"}}return n},_onoff_scroll:function(i,s){if(!!(this||e)._settings.scroll!=!!i){if(!z.$customScroll){var n=(this||e)._dataobj.parentNode.style;n["x"===s?"overflowX":"overflowY"]=i?"auto":"hidden"}"x"===s?(this||e)._scroll_x=i:(this||e)._scroll_y=i;(this||e)._settings.scroll=!!i&&s}},getScrollState:function(){return{x:(this||e)._dataobj.parentNode.scrollLeft,y:(this||e)._dataobj.parentNode.scrollTop}},scrollTo:function(i,s){(this||e)._dataobj.parentNode.scrollLeft=i;(this||e)._dataobj.parentNode.scrollTop=s}};var Ce={$init:function(){(this||e)._selected=_to_array();assert((this||e).data,"SelectionModel :: Component doesn't have DataStore");(this||e).data.attachEvent("onStoreUpdated",bind((this||e)._data_updated,this||e));(this||e).data.attachEvent("onStoreLoad",bind((this||e)._data_loaded,this||e));(this||e).data.attachEvent("onAfterFilter",bind((this||e)._data_filtered,this||e));(this||e).data.attachEvent("onSyncApply",bind((this||e)._select_check,this||e));(this||e).data.attachEvent("onIdChange",bind((this||e)._id_changed,this||e));(this||e).$ready.push((this||e)._set_noselect)},_set_noselect:function(){("multiselect"==(this||e)._settings.select||(this||e)._settings.multiselect||"area"==(this||e)._settings.select)&&_event((this||e).$view,"mousedown",(function(i){if(i.shiftKey||z.isIE&&i.ctrlKey){var s=z.isIE?document.body:this||e;J._noselect_element=s;addCss(s,"webix_noselect",true)}}))},_id_changed:function(i,s){for(var n=(this||e)._selected.length-1;n>=0;n--)(this||e)._selected[n]==i&&((this||e)._selected[n]=s)},_data_filtered:function(){for(var i=(this||e)._selected.length-1;i>=0;i--)if((this||e).data.getIndexById((this||e)._selected[i])<0){var s=(this||e)._selected[i];this.removeCss(s,"webix_selected",true);(this||e)._selected.splice(i,1);this.callEvent("onSelectChange",[s])}},_data_updated:function(i,s,n){"delete"==n?(this||e).loadBranch?this._select_check():(this||e)._selected.remove(i):i||(this||e).data.count()||(this||e).data._filter_order||(this||e).data._filter_branch||((this||e)._selected=_to_array())},_data_loaded:function(){(this||e)._settings.select&&(this||e).data.each((function(e){e&&e.$selected&&this.select(e.id)}),this||e)},_select_check:function(){for(var i=(this||e)._selected.length-1;i>=0;i--)this.exists((this||e)._selected[i])||(this||e)._selected.splice(i,1)},_select_mark:function(i,s,n,r){var a=s?"onBeforeSelect":"onBeforeUnSelect";if(!this.callEvent(a,[i,s]))return false;if(r){(this||e)._silent_selection=true;this.unselectAll();(this||e)._silent_selection=false}s?this.addCss(i,"webix_selected",true):this.removeCss(i,"webix_selected",true);if(n)n.push(i);else{s?(this||e)._selected.push(i):(this||e)._selected.remove(i);this._refresh_selection(i)}var o=s?"onAfterSelect":"onAfterUnSelect";this.callEvent(o,[i]);return true},select:function(i,s){var n=arguments[2];var r=arguments[3];if(!i)return this.selectAll();if(isArray(i))for(var a=0;a<i.length;a++)this.select(i[a],a?1:s,n,r);else{assert((this||e).data.exists(i),"Incorrect id in select command: "+i);if(r&&(this||e)._selected.length)return this.selectAll((this||e)._selected[(this||e)._selected.length-1],i);var o=false;n||s||1==(this||e)._selected.length&&(this||e)._selected[0]==i||(o=true);o||!this.isSelected(i)?this._select_mark(i,true,null,o):n&&this.unselect(i)}},unselect:function(e){if(!e)return this.unselectAll();this.isSelected(e)&&this._select_mark(e,false)},selectAll:function(i,s){var n;var r=[];n=i||s?(this||e).data.getRange(i||null,s||null):(this||e).data.getRange();n.each((function(i){if(!(this||e).data.getMark(i.id,"webix_selected")){(this||e)._selected.push(i.id);this._select_mark(i.id,true,r)}}),this||e);this._refresh_selection(r)},unselectAll:function(){var i=[];(this||e)._selected.each((function(e){this._select_mark(e,false,i)}),this||e);(this||e)._selected=_to_array();this._refresh_selection(i)},isSelected:function(i){return-1!=(this||e)._selected.find(i)},getSelectedId:function(i){switch((this||e)._selected.length){case 0:return i?[]:"";case 1:return i?[(this||e)._selected[0]]:(this||e)._selected[0];default:return[].concat((this||e)._selected)}},getSelectedItem:function(e){var i=this.getSelectedId(true);if(i.length>1||e){for(var s=i.length-1;s>=0;s--)i[s]=this.getItem(i[s]);return i}if(i.length)return this.getItem(i[0])},_is_mass_selection:function(i){return i.length>100||i.length>(this||e).data.count/2},_refresh_selection:function(i){"object"!=_typeof(i)&&(i=[i]);if(i.length){if(this._is_mass_selection(i))(this||e).data.refresh();else for(var s=0;s<i.length;s++)this.render(i[s],(this||e).data.getItem(i[s]),"update");(this||e)._silent_selection||this.callEvent("onSelectChange",[i])}}};ready((function(){event$1(document.body,"mouseup",(function(){if(J._noselect_element){removeCss(J._noselect_element,"webix_noselect");J._noselect_element=null}}))}));var ke={_toHex:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],toHex:function(i,s){i=parseInt(i,10);var n="";while(i>0){n=(this||e)._toHex[i%16]+n;i=Math.floor(i/16)}while(n.length<s)n="0"+n;return n},rgbToHex:function(e){var i=[];"string"===typeof e?e.replace(/[\d+.]+/g,(function(e){i.push(parseFloat(e))})):isArray(e)&&(i=e);return 0===i[3]?"":i.slice(0,3).map((function(e){return ke.toHex(Math.floor(e),2)})).join("")},hexToDec:function(e){return parseInt(e,16)},toRgb:function(e){var i,s,n,r;if("string"!=typeof e){i=e[0];s=e[1];n=e[2]}else if(-1!=e.indexOf("rgb")){r=e.substr(e.indexOf("(")+1,e.lastIndexOf(")")-e.indexOf("(")-1).split(",");i=r[0];s=r[1];n=r[2]}else{"#"==e.substr(0,1)&&(e=e.substr(1));i=this.hexToDec(e.substr(0,2));s=this.hexToDec(e.substr(2,2));n=this.hexToDec(e.substr(4,2))}i=parseInt(i,10)||0;s=parseInt(s,10)||0;n=parseInt(n,10)||0;(i<0||i>255)&&(i=0);(s<0||s>255)&&(s=0);(n<0||n>255)&&(n=0);return[i,s,n]},hsvToRgb:function(e,i,s){var n,r,a,o,l,h,_,c;n=Math.floor(e/60)%6;r=e/60-n;a=s*(1-i);o=s*(1-r*i);l=s*(1-(1-r)*i);h=0;_=0;c=0;switch(n){case 0:h=s;_=l;c=a;break;case 1:h=o;_=s;c=a;break;case 2:h=a;_=s;c=l;break;case 3:h=a;_=o;c=s;break;case 4:h=l;_=a;c=s;break;case 5:h=s;_=a;c=o;break;default:break}h=Math.floor(255*h);_=Math.floor(255*_);c=Math.floor(255*c);return[h,_,c]},rgbToHsv:function(e,i,s){var n,r,a,o,l,h,_,c;n=e/255;r=i/255;a=s/255;o=Math.min(n,r,a);l=Math.max(n,r,a);_=0;h=0===l?0:1-o/l;c=l;l==o?_=0:l==n&&r>=a?_=60*(r-a)/(l-o)+0:l==n&&r<a?_=60*(r-a)/(l-o)+360:l==r?_=60*(a-n)/(l-o)+120:l==a&&(_=60*(n-r)/(l-o)+240);return[_,h,c]}};function joinAttributes(e){var i=" ";if(e)for(var s in e)i+=s+'="'+e[s]+'" ';return i}var Ie={};Ie.draw=function(e,i,s,n){var r={xmlns:"http://www.w3.org/2000/svg",version:"1.1",height:"100%",width:"100%",viewBox:"0 0 "+i+" "+s,class:n||""};return"<svg "+joinAttributes(r)+">"+e+"</svg>"};Ie.styleMap={lineColor:"stroke",color:"fill"};Ie.group=function(e){return"<g>"+e+"</g>"};Ie._handlers={M:function(e){return" M "+e.x+" "+e.y},L:function(e){return" L "+e.x+" "+e.y},C:function(e,i,s){return" C "+e.x+" "+e.y+" "+i.x+" "+i.y+" "+s.x+" "+s.y},A:function(e,i,s,n){var r=e.x+Math.cos(n)*i;var a=e.y+Math.sin(n)*i;var o=n-s>=Math.PI;return" A "+i+" "+i+" 0 "+(o?1:0)+" 1 "+r+" "+a}};Ie.definePath=function(i,s){var n="";for(var r=0;r<i.length;r++){assert(i[r][0]&&"string"==typeof i[r][0],"Path type must be a string");var a=i[r][0].toUpperCase();assert((this||e)._handlers[a],"Incorrect path type");n+=(this||e)._handlers[a].apply(this||e,i[r].slice(1))}s&&(n+=" Z");return n};Ie._linePoints=function(e){var i=[];for(var s=0;s<e.length;s++)i.push([s?"L":"M",e[s]]);return i};Ie.setOpacity=function(e,i){var s=ke.toRgb(e);s.push(i);return"rgba("+s.join(",")+")"};Ie._curvePoints=function(e){var i=[];for(var s=0;s<e.length;s++){var n=e[s];s||i.push(["M",n[0]]);i.push(["C",n[1],n[2],n[3]])}return i};Ie.getPath=function(e,i,s){s=joinAttributes(s);return'<path class="'+i+'" vector-effect="non-scaling-stroke" d="'+e+'" '+s+"/>"};Ie.getSector=function(e,i,s,n,r,a){a=joinAttributes(a);var o=e.x+Math.cos(s)*i;var l=e.y+Math.sin(s)*i;var h=[["M",e],["L",{x:o,y:l}],["A",e,i,s,n],["L",e]];return'<path class="'+r+'" vector-effect="non-scaling-stroke" d="'+Ie.definePath(h,true)+'" '+a+"/>"};Ie.getCurve=function(e,i,s){s=joinAttributes(s);var n=this.definePath(this._curvePoints(e));return'<path fill="none" class="'+i+'" vector-effect="non-scaling-stroke" d="'+n+'" '+s+"/>"};Ie.getLine=function(e,i,s,n){return this.getPath(this.definePath(this._linePoints([e,i]),true),s,n)};Ie.getCircle=function(e,i,s,n){n=joinAttributes(n);return'<circle class="'+s+'" cx="'+e.x+'" cy="'+e.y+'" r="'+i+'" '+n+"/>"};Ie.getRect=function(e,i,s,n,r,a){a=joinAttributes(a);return'<rect class="'+r+'" rx="0" ry="0" x="'+e+'" y="'+i+'" width="'+s+'" height="'+n+'" '+a+"/>"};var Me={paddingX:6,paddingY:6,radius:2,minHeight:4,eventRadius:8};function Line(s){(this||e).config=i.extend(copy(Me),s||{},true)}Line.prototype.draw=function(i,s,n){var r=this.getPoints(i,s,n);var a=(this||e).config;var o=Ie;var l=a.color?this._applyColor(o,a.color):null;var h=o.definePath(this._getLinePoints(r));var _=o.group(o.getPath(h,"webix_sparklines_line"+(l?" "+l.line:"")));_+=this._drawItems(o,r,a.radius,"webix_sparklines_item"+(l?" "+l.item:""));var c=Math.min(i.length?(s-2*(a.paddingX||0))/i.length:0,a.eventRadius);_+=this._drawEventItems(o,r,c);return o.draw(_,s,n,"webix_sparklines_line_chart"+(a.css?" "+a.css:""))};Line.prototype._applyColor=function(e,i){var s={line:{},item:{}},n=e.styleMap;if(i){s.line[n.lineColor]=i;s.item[n.color]=i;for(var r in s)s[r]=createCss(s[r])}return s};Line.prototype._drawItems=function(e,i,s,n,r){var a=[];for(var o=0;o<i.length;o++)a.push(e.getCircle(i[o],s,n,r));return e.group(a.join(""))};Line.prototype._drawEventItems=function(e,i,s){var n=[];for(var r=0;r<i.length;r++)n.push(e.getCircle(i[r],s,"webix_sparklines_event_area",{webix_area:r}));return e.group(n.join(""))};Line.prototype._getLinePoints=function(e){var i,s,n=[];for(i=0;i<e.length;i++){s=i?"L":"M";n.push([s,e[i]])}return n};Line.prototype.getPoints=function(i,s,n){var r=(this||e).config;var a=Math.min.apply(null,i);"undefined"!==typeof r.origin&&(a=Math.min(r.origin,a));var o=Math.max.apply(null,i);var l=[];var h=r.paddingX||0;var _=r.paddingY||0;s=(s||100)-2*h;var c=r.minHeight||0;n=(n||100)-2*_;if(i.length)if(1==i.length)l.push({x:s/2+h,y:n/2+h});else{var d=s/(i.length-1);var u=r.scale||o-a;var f=(n-c)/(u||1);u||(n/=2);for(var g=0;g<i.length;g++)l.push({x:Math.ceil(d*g)+h,y:n-Math.ceil(f*(i[g]-a))+_-c})}return l};var Te={paddingX:3,paddingY:4,radius:1,minHeight:4,eventRadius:8};function Area(s){(this||e).config=i.extend(copy(Te),s||{},true)}Area.prototype.draw=function(i,s,n){var r,a,o,l,h,_=(this||e).config,c=Line.prototype,d=Ie;l=this.getPoints(i,s,n);o=d.definePath(c._getLinePoints(l),true);_.color&&(h=this._applyColor(d,_.color));a=d.group(d.getPath(o,"webix_sparklines_area"+(h?" "+h.area:"")));l.splice(l.length-3,3);o=d.definePath(c._getLinePoints(l));a+=d.group(d.getPath(o,"webix_sparklines_line"+(h?" "+h.line:"")));a+=c._drawItems(d,l,_.radius,"webix_sparklines_item"+(h?" "+h.item:""));r=Math.min(i.length?(s-2*(_.paddingX||0))/i.length:0,_.eventRadius);a+=c._drawEventItems(d,l,r);return d.draw(a,s,n,"webix_sparklines_area_chart"+(_.css?" "+_.css:""))};Area.prototype._applyColor=function(e,i){var s={area:{},line:{},item:{}},n=e.styleMap;if(i){s.area[n.color]=e.setOpacity(i,.2);s.line[n.lineColor]=i;s.item[n.color]=i;for(var r in s)s[r]=createCss(s[r])}return s};Area.prototype.getPoints=function(i,s,n){var r=Line.prototype;var a=r.getPoints.call(this||e,i,s,n);var o=(this||e).config.paddingX||0;var l=(this||e).config.paddingY||0;a.push({x:s-o,y:n-l},{x:o,y:n-l},{x:o,y:a[0].y});return a};var Ee={paddingX:3,paddingY:4,width:20,margin:4,minHeight:4,eventRadius:8,origin:0,itemCss:function(i){return i<((this||e).config.origin||0)?" webix_sparklines_bar_negative":""}};function Bar(s){(this||e).config=i.extend(copy(Ee),s||{},true)}Bar.prototype.draw=function(i,s,n){var r,a,o,l,h,_=(this||e).config,c="",d=[],u=this.getPoints(i,s,n),f=Ie;for(r=0;r<u.length;r++){a="function"==typeof _.itemCss?_.itemCss.call(this||e,i[r]):_.itemCss||"";_.negativeColor&&i[r]<_.origin?a+=" "+this._applyColor(f,_.negativeColor):_.color&&(a+=" "+this._applyColor(f,_.color));o=u[r];d.push(f.getRect(o.x,o.y,o.width,o.height,"webix_sparklines_bar "+a))}c+=f.group(d.join(""));l=parseInt(this._getOrigin(i,s,n),10)+.5;h=_.paddingX||0;c+=f.group(f.getLine({x:h,y:l},{x:s-h,y:l},"webix_sparklines_origin"));var g=this._getEventPoints(i,s,n);var v=[];for(r=0;r<g.length;r++){o=g[r];v.push(f.getRect(o.x,o.y,o.width,o.height,"webix_sparklines_event_area ",{webix_area:r}))}c+=f.group(v.join(""));return f.draw(c,s,n,"webix_sparklines_bar_chart"+(_.css?" "+_.css:""))};Bar.prototype._applyColor=function(e,i){var s={},n=e.styleMap;i&&(s[n.color]=i);return createCss(s)};Bar.prototype._getOrigin=function(i,s,n){var r=(this||e).config;var a=r.paddingY||0;n=(n||100)-2*a;var o=a+n;if(false!==r.origin){var l=Math.min.apply(null,i);var h=Math.max.apply(null,i);var _=r.origin||-1e-6;if(_>=h)o=a;else if(_>l){var c=n/(h-l);o-=c*(_-l)}}return o};Bar.prototype._getEventPoints=function(i,s,n){var r=[];var a=(this||e).config.paddingX||0;var o=(this||e).config.paddingY||0;s=(s||100)-2*a;n=(n||100)-2*o;if(i.length){var l=s/i.length;for(var h=0;h<i.length;h++)r.push({x:Math.ceil(l*h)+a,y:o,height:n,width:l})}return r};Bar.prototype.getPoints=function(i,s,n){var r=(this||e).config;var a=Math.min.apply(null,i);r.origin<a&&(a=r.origin);var o=Math.max.apply(null,i);var l=[];var h=r.paddingX;var _=r.paddingY;var c=r.margin;var d=r.width||20;var u=this._getOrigin(i,s,n);s=(s||100)-2*h;n=(n||100)-2*_;if(i.length){var f=s/i.length;var g=r.scale||o-a;d=Math.min(f-c,d);c=f-d;var v=0;var p=a;false!==r.origin&&r.origin>a?p=r.origin||0:v=r.minHeight;var m=(n-v)/(g||1);for(var b=0;b<i.length;b++){var w=Math.ceil(m*(i[b]-p));l.push({x:Math.ceil(f*b)+h+c/2,y:u-(i[b]>=p?w:0)-v,height:Math.abs(w)+v,width:d})}}return l};var Ae={paddingY:2};function Pie(s){(this||e).config=i.extend(Ae,s||{},true)}Pie.prototype._defColorsCursor=0;Pie.prototype._defColors=["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"];Pie.prototype._getColor=function(i,s){var n=s.length;var r=(this||e)._defColors.length;if(r>n){i&&(i=i<r-n?(this||e)._defColorsCursor+2:(this||e)._defColorsCursor+1);(this||e)._defColorsCursor=i}else i%=r;return(this||e)._defColors[i]};Pie.prototype.draw=function(i,s,n){var r,a,o,l,h=(this||e).config,_=h.color||(this||e)._getColor,c=this.getAngles(i),d=Ie,u=h.paddingY||0,f=n/2-u,g=s/2,v=n/2;"function"!=typeof _&&(_=function(){return _});l="";for(o=0;o<c.length;o++){r={};r[d.styleMap.color]=_.call(this||e,o,i,(this||e)._context);l+=d.getSector({x:g,y:v},f,c[o][0],c[o][1],"webix_sparklines_sector",r)}a=d.group(l);l="";for(o=0;o<c.length;o++)l+=d.getSector({x:g,y:v},f,c[o][0],c[o][1],"webix_sparklines_event_area",{webix_area:o});a+=d.group(l);return d.draw(a,s,n,"webix_sparklines_pie_chart"+(h.css?" "+h.css:""))};Pie.prototype.getAngles=function(e){var i,s,n=-Math.PI/2,r=[];var a=this._getRatios(e);for(s=0;s<e.length;s++){i=-Math.PI/2+a[s]-1e-4;r.push([n,i]);n=i}return r};Pie.prototype._getTotalValue=function(e){var i=0;for(var s=0;s<e.length;s++)i+=1*e[s];return i};Pie.prototype._getRatios=function(e){var i,s,n=[],r=0,a=this._getTotalValue(e);for(i=0;i<e.length;i++){s=1*e[i];n[i]=2*Math.PI*(a?(s+r)/a:1/e.length);r+=s}return n};var ze={paddingX:3,paddingY:6,radius:2,minHeight:4,eventRadius:8};function Spline(s){(this||e).config=i.extend(copy(ze),s||{},true)}Spline.prototype.draw=function(i,s,n){var r=(this||e).config,a="",o=Line.prototype,l=this.getPoints(i,s,n),h=Ie,_=r.color?this._applyColor(h,r.color):null;a+=h.group(h.getCurve(l,"webix_sparklines_line"+(_?" "+_.line:"")));var c=o.getPoints.call(this||e,i,s,n);a+=o._drawItems(h,c,r.radius,"webix_sparklines_item"+(_?" "+_.item:""));var d=Math.min(i.length?(s-2*(r.paddingX||0))/i.length:0,r.eventRadius);a+=o._drawEventItems(h,c,d);return h.draw(a,s,n,"webix_sparklines_line_chart"+(r.css?" "+r.css:""))};Spline.prototype._applyColor=function(e,i){var s={line:{},item:{}},n=e.styleMap;if(i){s.line[n.lineColor]=i;s.item[n.color]=i;for(var r in s)s[r]=createCss(s[r])}return s};Spline.prototype.getPoints=function(i,s,n){var r,a,o,l,h=[],_=[],c=[],d=Line.prototype;a=d.getPoints.call(this||e,i,s,n);for(r=0;r<a.length;r++){_.push(a[r].x);c.push(a[r].y)}o=this._getControlPoints(_);l=this._getControlPoints(c);for(r=0;r<a.length-1;r++)h.push([a[r],{x:o[0][r],y:l[0][r]},{x:o[1][r],y:l[1][r]},a[r+1]]);return h};Spline.prototype._getControlPoints=function(e){var i,s,n=[],r=[],a=[],o=[],l=[],h=[],_=e.length-1;n[0]=0;r[0]=2;a[0]=1;o[0]=e[0]+2*e[1];for(i=1;i<_-1;i++){n[i]=1;r[i]=4;a[i]=1;o[i]=4*e[i]+2*e[i+1]}n[_-1]=2;r[_-1]=7;a[_-1]=0;o[_-1]=8*e[_-1]+e[_];for(i=1;i<_;i++){s=n[i]/r[i-1];r[i]=r[i]-s*a[i-1];o[i]=o[i]-s*o[i-1]}l[_-1]=o[_-1]/r[_-1];for(i=_-2;i>=0;--i)l[i]=(o[i]-a[i]*l[i+1])/r[i];for(i=0;i<_-1;i++)h[i]=2*e[i+1]-l[i+1];h[_-1]=.5*(e[_]+l[_-1]);return[l,h]};var He={paddingX:3,paddingY:6,radius:1,minHeight:4,eventRadius:8};function SplineArea(s){(this||e).config=i.extend(copy(He),s||{},true)}SplineArea.prototype=copy(Spline.prototype);SplineArea.prototype.draw=function(i,s,n){var r=(this||e).config,a=Line.prototype,o=Ie,l=r.color?this._applyColor(o,r.color):null;var h=this.getPoints(i,s,n);var _=h.splice(h.length-3,3);var c=o._linePoints(_);c[0][0]="L";var d=o._curvePoints(h).concat(c);var u=o.group(o.getPath(o.definePath(d),"webix_sparklines_area"+(l?" "+l.area:""),true));u+=o.group(o.getPath(o.definePath(o._curvePoints(h)),"webix_sparklines_line"+(l?" "+l.line:"")));var f=a.getPoints.call(this||e,i,s,n);u+=a._drawItems(o,f,r.radius,"webix_sparklines_item"+(l?" "+l.item:""));var g=Math.min(i.length?(s-2*(r.paddingX||0))/i.length:0,r.eventRadius);u+=a._drawEventItems(o,f,g);return o.draw(u,s,n,"webix_sparklines_splinearea_chart"+(r.css?" "+r.css:""))};SplineArea.prototype._applyColor=function(e,i){var s={area:{},line:{},item:{}},n=e.styleMap;if(i){s.area[n.color]=e.setOpacity(i,.2);s.line[n.lineColor]=i;s.item[n.color]=i;for(var r in s)s[r]=createCss(s[r])}return s};SplineArea.prototype.getPoints=function(i,s,n){var r=Spline.prototype.getPoints.call(this||e,i,s,n);var a=(this||e).config.paddingX||0;var o=(this||e).config.paddingY||0;r.push({x:s-a,y:n-o},{x:a,y:n-o},{x:a,y:r[0][0].y});return r};function Sparklines(){}function getData(e){var i=[];for(var s=e.length-1;s>=0;s--){var n=e[s];i[s]="object"===_typeof(n)?n.value:n}return i}Sparklines.types={};Sparklines.getTemplate=function(s){var n=s||{};"string"==typeof s&&(n={type:s});i.extend(n,{type:"line"});var r=(this||e).types[n.type];assert(r,"Unknown sparkline type");return bind((this||e)._template,new r(n))};Sparklines._template=function(e,i,s,n){return n?this.draw(getData(s),n.width,33):this.draw(e.data||e,i.width,i.height)};attachEvent("onDataTable",(function(e){e.type.sparklines=Sparklines.getTemplate()}));Sparklines.types.area=Area;Sparklines.types.bar=Bar;Sparklines.types.line=Line;Sparklines.types.pie=Pie;Sparklines.types.spline=Spline;Sparklines.types.splineArea=SplineArea;var je={clipboard_setter:function(i){true!==i&&1!==i||(i="block");Yt.init();this.attachEvent("onSelectChange",(this||e)._sel_to_clip);this.attachEvent("onAfterEditStop",(function(e,i){var s=this.getSelectedId(true);1==s.length&&i.row==s[0].row&&this._sel_to_clip()}));this.attachEvent("onItemClick",(function(){if(document.activeElement&&(this||e).$view.contains(document.activeElement)){Yt.focus();ht.setFocus(this||e)}}));this.attachEvent("onPaste",(this||e)._clip_to_sel);return i},templateCopy_setter:template,_sel_to_clip:function(){var i=this||e;delay((function(){if(!i.$destructed&&(!i.getEditor||!i.getEditor())){var e=i._get_sel_text();Yt.set(e);ht.setFocus(i)}}))},_get_sel_text:function(){var i=[];var s=(this||e)._settings.templateCopy;this.mapSelection((function(e,n,r,a){i[a]||(i[a]=[]);var o=s?s(e,n,r):e;i[a].push(o);return e}));var n=1===i.length&&1===i[0].length?i[0][0]:qt.stringify(i,(this||e)._settings.delimiter);return n},_clip_to_sel:function(i){if(!isUndefined((this||e)._paste[(this||e)._settings.clipboard])){var s=qt.parse(i,(this||e)._settings.delimiter);(this||e)._paste[(this||e)._settings.clipboard].call(this||e,s)}},_paste:{block:function(e){var i=this.mapSelection(null);if(i){this.mapCells(i.row,i.column,e.length,null,(function(i,s,n,r,a){return e[r]&&e[r].length>a?e[r][a]:i}));this.render()}},selection:function(e){this.mapSelection((function(i,s,n,r,a){return e[r]&&e[r].length>a?e[r][a]:i}));this.render()},repeat:function(e){this.mapSelection((function(i,s,n,r,a){s=e[r%e.length];i=s[a%s.length];return i}));this.render()},custom:function(){}}};var Pe={open:function(i,s){if(i){var n=this.getItem(i);assert(n,"Incorrect ID to open: "+i);if(n.$count&&!n.open){if(this.callEvent("onBeforeOpen",[i])){n.open=true;(this||e).data.callEvent("onStoreUpdated",[i,0,"branch"]);this.callEvent("onAfterOpen",[i])}s&&"0"!=i&&this.open(this.getParentId(i),s)}}},close:function(i){if(i){var s=this.getItem(i);if(s.open&&this.callEvent("onBeforeClose",[i])){s.open=false;(this||e).data.callEvent("onStoreUpdated",[i,0,"branch"]);this.callEvent("onAfterClose",[i])}}},openAll:function(i){(this||e).data.eachSubItem(i||0,(function(e,i){i&&(e.open=true)}));(this||e).data.refresh()},closeAll:function(i){(this||e).data.eachSubItem(i||0,(function(e,i){i&&(e.open=false)}));(this||e).data.refresh()},_tree_check_uncheck:function(i,s,n){if((this||e)._settings.threeState)return this._tree_check_uncheck_3(i,null!==s?s:"");var r,a=this.getItem(i),o=n?n.target:null;r=o&&"checkbox"==o.type?!!o.checked:null!==s?s:!a.checked;a.checked=r;this.callEvent("onItemCheck",[i,a.checked,n])},isBranchOpen:function(e){if("0"==e)return true;var i=this.getItem(e);return!!i.open&&this.isBranchOpen(i.$parent)},getOpenItems:function(){var i=[];for(var s in(this||e).data.branch)this.exists(s)&&this.getItem(s).open&&i.push(s);return i},getState:function(){return{open:this.getOpenItems(),select:this.getSelectedId(true)}},_repeat_set_state:function(i,s){var n=(this||e).data.attachEvent("onStoreLoad",(function(){i.setState.call(i,s);i.data.detachEvent(n);i=null}))},setState:function(i){if(i.open){this.closeAll();var s=i.open;for(var n=0;n<s.length;n++){var r=this.getItem(s[n]);if(r&&r.$count){r.open=true;if(-1==r.$count){this._repeat_set_state(this||e,i);this.refresh();return 0}}}this.refresh()}if(i.select&&(this||e).select){var a=i.select;this.unselect();for(var o=0;o<a.length;o++)this.exists(a[o])&&this.select(a[o],true)}return 1}};var Ve={webix_tree_open:function(e,i){this.close(i);return false},webix_tree_close:function(e,i){this.open(i);return false},webix_tree_checkbox:function(e,i){this._tree_check_uncheck(i,null,e);return false}};var Ne={$init:function(){(this||e).data.attachEvent("onStoreUpdated",bind((this||e)._sync_hierarchy,this||e),null,true);(this||e)._feed_common=(this||e)._feed_commonA},_feed_commonA:function(i,s,n,r,a,o){a=0===s?{parent:encodeURIComponent(i)}:null;return ie.prototype._feed_common.call(this||e,i,s,n,r,a,o)},loadBranch:function(i,s,n){i=i||0;(this||e).data.url=n||(this||e).data.url;return this.callEvent("onDataRequest",[i,s,(this||e).data.url])&&(this||e).data.url?(this||e).data.feed.call(this||e,i,0,s):Deferred.reject()},_sync_hierarchy:function(i,s,n){n&&"add"!=n&&"delete"!=n&&"branch"!=n||(this||e).data._sync_to_order(this||e)}};var De={$init:function(){assert((this||e).data,"DataMove :: Component doesn't have DataStore")},copy:function(e,i,s,n){n=n||{};n.copy=true;return this.move(e,i,s,n)},_next_move_index:function(i,s,n){if(s&&i){var r=this.getBranchIndex(i);return r+(n==(this||e)&&this.getParentId(i)==this.getParentId(s)&&n.getBranchIndex(s)<r?0:1)}},_check_branch_child:function(i,s){var n=(this||e).data.branch[i];if(n&&n.length)for(var r=0;r<n.length;r++){if(n[r]==s)return true;if(this._check_branch_child(n[r],s))return true}return false},_remove_childs:function(e){for(var i=0;i<e.length;i++){var s=e[i];while(this.getParentId(s)){s=this.getParentId(s);if(-1==d.find.call(e,s));else{e.splice(i,1);i--}}}return e},move:function(i,s,n,r){r=r||{};s=s||0;var a=r.newId||i;var o=r.parent||0;n=n||this||e;assert(n.data,"moving attempt to component without datastore");if(n.data){if(!isArray(i)){if((this||e)!=n||r.copy){a=n.data.add(n._externalData(this.getItem(i),a),s,o||0);if((this||e).data.branch[i]&&n.getBranchIndex){var l=(this||e).data._scheme_serialize;(this||e).data._scheme_serialize=function(e){var i=copy(e);delete i.$parent;delete i.$level;delete i.$child;n.data.pull[i.id]&&(i.id=uid());return i};var h={data:this.serialize(i,true),parent:a};(this||e).data._scheme_serialize=l;n.parse(h)}r.copy||(this||e).data.remove(i)}else{if(i==o||this._check_branch_child(i,o))return;var _=this.getItem(i);var c=(this||e).data.branch[o];c||(c=(this||e).data.branch[o]=[]);var u=(this||e).data.branch[_.$parent];var f=d.find.call(u,i);s<0&&(s=c.length);if(u===c&&s===f)return a;d.removeAt.call(u,f);d.insertAt.call(c,i,Math.min(c.length,s));u.length||delete(this||e).data.branch[_.$parent];_.$parent&&"0"!=_.$parent&&this.getItem(_.$parent).$count--;if(o&&"0"!=o){var g=n.getItem(o);g.$count++;this._set_level_rec(_,g.$level+1)}else this._set_level_rec(_,1);_.$parent=o;n.data.callEvent("onDataMove",[i,s,o,c[s+1]])}this.refresh();return a}this._remove_childs(i);for(var v=0;v<i.length;v++){var p=this.move(i[v],s,n,r);s=n._next_move_index(p,i[v+1],this||e)}}},_set_level_rec:function(i,s){i.$level=s;var n=(this||e).data.branch[i.id];if(n)for(var r=0;r<n.length;r++)this._set_level_rec(this.getItem(n[r]),s+1)},_drag_pause:function(e){e&&!e.header&&this.exists(e)&&this._target_to_id(e)!=Nt._drag_context.start&&this.open(e)},$dropAllow:function(e){if(e.from!=e.to)return true;for(var i=0;i<e.source.length;i++)if(this._check_branch_child(e.source,e.target))return false;return true},_externalData:function(i,s){var n=Zt._externalData.call(this||e,i,s);delete n.open;return n}};var Le={$init:function(){assert((this||e).render,"TreeRenderStack :: Object must use RenderStack first")},_toHTMLItem:function(i){var s=(this||e).data._marks[i.id];this.callEvent("onItemRender",[i]);return(this||e).type.templateStart(i,(this||e).type,s)+(i.$template?(this||e).type["template"+i.$template](i,(this||e).type,s):(this||e).type.template(i,(this||e).type,s))+(this||e).type.templateEnd()},_toHTMLItemObject:function(i){(this||e)._html.innerHTML=this._toHTMLItem(i);return(this||e)._html.firstChild},_toHTML:function(i){assert(!i.$template||(this||e).type["template"+i.$template],"RenderStack :: Unknown template: "+i.$template);var s="<div role='presentation' class='webix_tree_branch_"+i.$level+"'>"+this._toHTMLItem(i);i.open&&(s+=this._toHTMLLevel(i.id));s+="</div>";return s},_toHTMLLevel:function(i){var s="";var n=(this||e).data.branch[i];if(n){s+="<div role='presentation' class='webix_tree_leaves'>";var r=n.length-1;for(var a=0;a<=r;a++){var o=this.getItem(n[a]);var l=(this||e).type._tree_branch_render_state;0!==l&&(l[o.$level]=a==r);s+=this._toHTML(o)}s+="</div>"}return s},render:function(i,s,n){Le._obj=this||e;if(this.isVisible((this||e)._settings.id)&&!(this||e).$blockRender){if(i){var r,a;var o=this.getItem(i);if("add"!=n){r=this.getItemNode(i);if(!r)return}switch(n){case"branch":var l=r.parentNode;a=this._toHTMLObject(o);insertBefore(a,l);remove(l);(this||e)._htmlmap=null;break;case"paint":case"update":a=(this||e)._htmlmap[i]=this._toHTMLItemObject(o);insertBefore(a,r);remove(r);break;case"delete":remove(r.parentNode);break;case"add":var h;if(0==o.$parent)h=(this||e)._dataobj.firstChild;else if(this.getItem(o.$parent).open){h=this.getItemNode(o.$parent);if(h){if(!h.nextSibling){var _=create("DIV",{class:"webix_tree_leaves"},"");h.parentNode.appendChild(_)}h=h.nextSibling}}if(h){var c=(this||e).data.getNextSiblingId(i);c=this.getItemNode(c);c&&(c=c.parentNode);a=this._toHTMLObject(o);(this||e)._htmlmap[i]=a.firstChild;insertBefore(a,c,h)}break;default:return false}this.callEvent("onPartialRender",[i,s,n])}else if(this.callEvent("onBeforeRender",[(this||e).data])){(this||e).type._tree_branch_render_state=[];(this||e)._dataobj.innerHTML=this._toHTMLLevel(0);(this||e)._htmlmap=null;this.callEvent("onAfterRender",[])}(this||e).type._tree_branch_render_state=0;Le._obj=null;return true}},getItemNode:function(i){if((this||e)._htmlmap)return(this||e)._htmlmap[i];(this||e)._htmlmap={};var s=(this||e)._dataobj.getElementsByTagName("DIV");for(var n=0;n<s.length;n++){var r=s[n].getAttribute((this||e)._id);r&&((this||e)._htmlmap[r]=s[n])}return this.getItemNode(i)},_branch_render_supported:1};var Be={_init_render_tree_state:function(){if((this||e)._branch_render_supported){var i=(this||e).render;(this||e).render=function(s,n){var r=i.apply(this||e,arguments);(this||e)._settings.threeState&&r&&"checkbox"!=n&&(this||e)._setThirdState.apply(this||e,arguments)};(this||e)._init_render_tree_state=function(){}}},threeState_setter:function(e){e&&this._init_render_tree_state();return e},_setThirdState:function(i){var s,n,r,a,o;r=[];o=this||e;i&&!o.data.pull[i]&&(i=0);if(!i||o.data.pull[i].$count){n=this._getAllLeaves(i);n.sort((function(e,i){return o.data.pull[i].$level-o.data.pull[e].$level}));for(s=0;s<n.length;s++)s&&o.data.pull[n[s]].$parent==o.data.pull[n[s-1]].$parent||(r=r.concat(o._setParentThirdState(n[s])))}else r=r.concat(o._setParentThirdState(i));a={};for(s=0;s<r.length;s++)if(!a[r[s]]){a[r[s]]=1;this._setCheckboxIndeterminate(r[s])}o=null},_setCheckboxIndeterminate:function(e){var i,s;s=this.getItemNode(e);if(s){this.render(e,"checkbox","update");if(this.getItem(e).indeterminate){s=this.getItemNode(e);i=s.getElementsByTagName("input")[0];i&&(i.indeterminate=this.getItem(e).indeterminate)}}},_setParentThirdState:function(i){var s,n,r,a,o,l,h;a=this.getParentId(i);o=[];while(a&&"0"!=a){l=0;n=0;(this||e).data.eachChild(a,(function(e){e.indeterminate?l++:e.checked&&n++}));s=r=h=false;var _=this.getItem(a);n==_.$count?s=true:(n>0||l>0)&&(r=true);(r||r!=_.indeterminate)&&(h=true);_.indeterminate=r;(s||_.checked!=s)&&(h=true);_.checked=s;if(h){o.push(a);a=this.getParentId(a)}else a=0}return o},getChecked:function(){var i=[];var s=this||e;(this||e).data.eachSubItem(0,(function(e){s.isChecked(e.id)&&i.push(e.id)}));return i},_tree_check_uncheck_3:function(i,s){var n=this.getItem(i);if(n){""===s&&(s=!n.checked);if(n.checked!=s||n.indeterminate){n.checked=s;this._correctThreeState(i);var r=this._setParentThirdState(i);if((this||e)._branch_render_supported&&r.length<5)for(var a=0;a<r.length;a++)this._setCheckboxIndeterminate(r[a]);else this.refresh();this.callEvent("onItemCheck",[i,s])}}},checkItem:function(e){this._tree_check_uncheck(e,true);this.updateItem(e)},uncheckItem:function(e){this._tree_check_uncheck(e,false);this.updateItem(e)},_checkUncheckAll:function(i,s,n){var r=s?"checkItem":"uncheckItem";i?this[r](i):i=0;(this||e)._settings.threeState?i||(this||e).data.eachChild(0,(function(e){this[r](e.id)}),this||e,n):(this||e).data.each((function(e){this[r](e.id)}),this||e,n,i)},checkAll:function(e,i){this._checkUncheckAll(e,true,i)},uncheckAll:function(e,i){this._checkUncheckAll(e,false,i)},_correctThreeState:function(i){var s;var n=this.getItem(i);n.indeterminate=false;s=n.checked;(this||e).data.eachSubItem(i,(function(e){e.indeterminate=false;e.checked=s}));(this||e)._branch_render_supported&&this.isBranchOpen(n.$parent)&&this.render(i,0,"branch")},isChecked:function(e){return this.getItem(e).checked},_getAllLeaves:function(i){var s=[];(this||e).data.eachSubItem(i,(function(e,i){i||s.push(e.id)}));return s}};var Fe={name:"TreeStore",$init:function(){(this||e)._filterMode={showSubItems:true};(this||e).branch={0:[]};this.attachEvent("onParse",(function(e){this._set_child_scheme(e.child)}));this.attachEvent("onClearAll",bind((function(){(this||e)._filter_branch=null}),this||e))},filterMode_setter:function(s){return i.extend((this||e)._filterMode,s,true)},_filter_reset:function(i){if((this||e)._filter_branch&&!i){(this||e).branch=(this||e)._filter_branch;(this||e).order=_to_array(copy((this||e).branch[0]));for(var s in(this||e).branch)"0"!=s&&(this.getItem(s).$count=(this||e).branch[s].length);delete(this||e)._filter_branch}},_filter_core:function(i,s,n,r){if(!n||!(this||e)._filter_branch){(this||e)._filter_branch=(this||e).branch;(this||e).branch=clone((this||e).branch)}(this||e).branch[0]=this._filter_branch_rec(i,s,(this||e).branch[0],1,r||{})},_filter_branch_rec:function(i,s,n,r,a){var o=[];var l=a.level&&a.level!=r;for(var h=0;h<n.length;h++){var _=n[h];var c=this.getItem(_);var d=false;var u=(this||e).branch[_];if(l)d=true;else if(i(this.getItem(_),s)){o.push(_);if(false!==a.openParents){var f=this.getParentId(_);while(f&&"0"!=f){this.getItem(f).open=1;f=this.getParentId(f)}}if(a.level||a.showSubItems)continue}else d=true;if((l||!a.level)&&u){var g=(this||e).branch[_]=this._filter_branch_rec(i,s,u,r+1,a);c.$count=g.length;d&&g.length&&o.push(_)}}return o},count:function(){if((this||e).order.length)return(this||e).order.length;var i=0;this.eachOpen((function(){i++}));return i},_change_branch_id:function(e,i,s,n){if(e[s]){var r=e[n]=e[s];for(var a=0;a<r.length;a++)this.getItem(r[a]).$parent=n;delete e[s]}if(e[i]){var o=d.find.call(e[i],s);o>=0&&(e[i][o]=n)}},changeId:function(i,s){if(i!=s){var n=this.getItem(i).$parent;this._change_branch_id((this||e).branch,n,i,s);(this||e)._filter_branch&&this._change_branch_id((this||e)._filter_branch,n,i,s);return DataStore.prototype.changeId.call(this||e,i,s)}},clearAll:function(i){(this||e).branch={0:[]};DataStore.prototype.clearAll.call(this||e,i)},getPrevSiblingId:function(i){var s=(this||e).branch[this.getItem(i).$parent];var n=d.find.call(s,i)-1;return n>=0?s[n]:null},getNextSiblingId:function(i){var s=(this||e).branch[this.getItem(i).$parent];var n=d.find.call(s,i)+1;return n<s.length?s[n]:null},getParentId:function(e){return this.getItem(e).$parent},getFirstChildId:function(i){var s=(this||e).branch[i];return s&&s.length?s[0]:null},isBranch:function(i){return!!(this||e).branch[i]},getBranchIndex:function(i){var s=(this||e).branch[(this||e).pull[i].$parent];return d.find.call(s,i)},_set_child_scheme:function(i){(this||e)._datadriver_child="string"==typeof i?function(e){var s=e[i];s&&delete e[i];return s}:i},_inner_parse:function(s,n){var r=s.parent||0;for(var a=0;a<n.length;a++){var o=(this||e).driver.getDetails(n[a]);var l=this.id(o);var h=!!(this||e).pull[l];if(h){o=i.extend((this||e).pull[l],o,true);(this||e)._scheme_update&&this._scheme_update(o)}else{(this||e)._scheme_init&&this._scheme_init(o);(this||e).pull[l]=o}this._extraParser(o,r,0,h,s.from?1*s.from+a:0)}var _=(this||e).pull[r]||{};var c=(this||e).branch[r]||[];_.$count=c.length;delete _.webix_kids;s.size&&s.size!=c.length&&(c[s.size-1]=void 0)},_extraParser:function(s,n,r,a,o){s.$count=0;s.$parent="0"!=n?n:0;s.$level=r||("0"!=n?(this||e).pull[n].$level+1:1);var l=(this||e).branch[s.$parent];l||(l=(this||e).branch[s.$parent]=[]);(this||e)._filter_branch&&((this||e)._filter_branch[s.$parent]=l);if(!a){var h=o||l.length;l[h]=s.id}var _=this._datadriver_child(s);if(s.webix_kids)return s.$count=-1;if(!_)return s.$count=0;isArray(_)||(_=[_]);for(var c=0;c<_.length;c++){var d=N.json.getDetails(_[c]);var u=this.id(d);a=!!(this||e).pull[u];if(a){d=i.extend((this||e).pull[u],d,true);(this||e)._scheme_update&&this._scheme_update(d)}else{(this||e)._scheme_init&&this._scheme_init(d);(this||e).pull[u]=d}this._extraParser(d,s.id,s.$level+1,a)}var f=(this||e).branch[s.id];f&&(s.$count=f.length)},_sync_to_order:function(i){(this||e).order=_to_array();this._sync_each_child((this||e).order,0,i)},_sync_each_child:function(i,s,n){var r=(this||e).branch[s];for(var a=0;a<r.length;a++){var o=r[a];i.push(o);var l=(this||e).pull[o];l&&l.open&&(-1==l.$count?n.loadBranch(o):l.$count&&this._sync_each_child(i,o,n))}},provideApi:function(i,s){var n=["getPrevSiblingId","getNextSiblingId","getParentId","getFirstChildId","isBranch","getBranchIndex","filterMode_setter"];for(var r=0;r<n.length;r++)i[n[r]]=this._methodPush(this||e,n[r]);i.getIndexById||DataStore.prototype.provideApi.call(this||e,i,s)},getTopRange:function(){return _to_array([].concat((this||e).branch[0])).map((function(e){return this.getItem(e)}),this||e)},eachChild:function(i,s,n,r){var a=(this||e).branch;r&&(this||e)._filter_branch&&(a=(this||e)._filter_branch);var o=a[i];if(o)for(var l=0;l<o.length;l++)o[l]&&s.call(n||this||e,this.getItem(o[l]))},each:function(i,s,n,r){this.eachChild(r||0,(function(r){var a=(this||e).branch;i.call(s||this||e,r);n&&(this||e)._filter_branch&&(a=(this||e)._filter_branch);r&&a[r.id]&&this.each(i,s,n,r.id)}),this||e,n)},eachOpen:function(i,s,n){this.eachChild(n||0,(function(n){i.call(s||this||e,n);(this||e).branch[n.id]&&n.open&&this.eachOpen(i,s,n.id)}))},eachSubItem:function(i,s){var n=(this||e).branch[i||0];if(n)for(var r=0;r<n.length;r++){var a=n[r];if((this||e).branch[a]){s.call(this||e,this.getItem(a),true);this.eachSubItem(a,s)}else s.call(this||e,this.getItem(a),false)}},eachLeaf:function(i,s){var n=(this||e).branch[i||0];if(n)for(var r=0;r<n.length;r++){var a=n[r];(this||e).branch[a]?this.eachLeaf(a,s):s.call(this||e,this.getItem(a),false)}},_sort_core:function(i,s){for(var n in(this||e).branch){var r=(this||e).branch[n];var a=[];for(var o=0;o<r.length;o++)a.push((this||e).pull[r[o]]);a.sort(i);for(var l=0;l<r.length;l++)a[l]=a[l].id;(this||e).branch[n]=a}return s},add:function(i,s,n){var r=false;var a=this.getItem(n||0);if(a){(this||e).branch[a.id]||(r=true);a.$count++;a.$count||(a.$count=1)}(this||e).branch[n||0]=(this||e).order=_to_array((this||e).branch[n||0]);i.$count=i.webix_kids?-1:0;i.$level=a?a.$level+1:1;i.$parent=a?a.id:0;if((this||e)._filter_branch){var o=(this||e)._filter_branch[n||0];o||(o=(this||e)._filter_branch[n]=(this||e).order);if((this||e).order!==o){var l=o.length;!s&&(this||e).branch[n||0].length&&(l=0);o=_to_array(o);i.id=i.id||uid();o.insertAt(i.id,l)}}var h=DataStore.prototype.add.call(this||e,i,s);r&&this.refresh(n);return h},_rec_remove:function(i){var s=(this||e).pull[i];if((this||e).branch[s.id]&&(this||e).branch[s.id].length>0){var n=(this||e).branch[i];for(var r=0;r<n.length;r++)this._rec_remove(n[r],true)}delete(this||e).branch[i];(this||e)._filter_branch&&delete(this||e)._filter_branch[i];delete(this||e).pull[i];(this||e)._marks[i]&&delete(this||e)._marks[i]},_filter_removed:function(e,i,s){var n=e[i];1==n.length&&n[0]==s&&i?delete e[i]:_to_array(n).remove(s)},remove:function(i){if(isArray(i))for(var s=0;s<i.length;s++)this.remove(i[s]);else{assert(this.exists(i),"Not existing ID in remove command"+i);var n=(this||e).pull[i];var r=n.$parent||0;if(false===this.callEvent("onBeforeDelete",[i]))return false;this._rec_remove(i);this.callEvent("onAfterDelete",[i]);var a=(this||e).pull[r];this._filter_removed((this||e).branch,r,i);(this||e)._filter_branch&&this._filter_removed((this||e)._filter_branch,r,i);var o=0;if(a){a.$count--;if(a.$count<=0){a.$count=0;a.open=0;o=1}}this.callEvent("onStoreUpdated",[i,n,"delete"]);o&&this.refresh(a.id)}},getBranch:function(i){var s=[];var n=((this||e)._filter_branch||(this||e).branch)[i];if(n)for(var r=0;r<n.length;r++)s[r]=(this||e).pull[n[r]];return s},serialize:function(i,s){var n=(this||e).branch;s&&(this||e)._filter_branch&&(n=(this||e)._filter_branch);var r=n[i||0];var a=[];for(var o=0;o<r.length;o++){var l=(this||e).pull[r[o]];var h;if((this||e)._scheme_serialize){h=this._scheme_serialize(l);if(false===h)continue}else h=copy(l);n[l.id]&&(h.data=this.serialize(l.id,s));a.push(h)}return a}};var Re={insert:function(i){var s=this.getSelectedId(true,true);for(var n=0;n<i.length;n++){var r={};for(var a=0;a<(this||e)._settings.columns.length;a++)r[(this||e)._settings.columns[a].id]=i[n][a]||"";!isUndefined(r.id)&&this.exists(r.id)&&(r.id=uid());this.add(r,null,s[0])}}};var Oe={space:function(e){var i="";for(var s=1;s<e.$level;s++)i+="<div class='webix_tree_none'></div>";return i},icon:function(e){return e.$count?e.open?"<div class='webix_tree_open'></div>":"<div class='webix_tree_close'></div>":"<div class='webix_tree_none'></div>"},checkbox:function(e){return e.nocheckbox?"":"<input type='checkbox' class='webix_tree_checkbox' "+(e.checked?"checked":"")+(e.disabled?" disabled":"")+">"},folder:function(e){return e.icon?"<div class='webix_tree_file webix_tree_"+e.icon+"'></div>":e.$count?e.open?"<div class='webix_tree_folder_open'></div>":"<div class='webix_tree_folder'></div>":"<div class='webix_tree_file'></div>"}};var We={$render:function(){if((this||e)._upload_area)(this||e)._contentobj.firstChild.appendChild((this||e)._upload_area);else{(this||e).files.attachEvent("onBeforeDelete",(this||e)._stop_file);var i={type:"file",class:"webix_hidden_upload",tabindex:-1};(this||e)._settings.accept&&(i.accept=(this||e)._settings.accept);(this||e)._settings.multiple&&(i.multiple="true");if((this||e)._settings.directory){i.webkitdirectory="true";i.mozdirectory="true";i.directory="true"}var s=create("input",i);(this||e)._upload_area=(this||e)._contentobj.firstChild.appendChild(s);_event((this||e)._viewobj,"drop",bind((function(e){this.$drop(e);preventEvent(e)}),this||e));_event(s,"change",bind((function(){this._add_files(s.files);if(z.isIE){var i=document.createElement("form");i.appendChild((this||e)._upload_area);i.reset();(this||e)._contentobj.firstChild.appendChild(s)}else s.value=""}),this||e));_event((this||e)._viewobj,"click",bind((function(){var i=new Date;i-((this||e)._upload_timer_click||0)>250&&this.fileDialog()}),this||e));_event((this||e)._viewobj,"dragenter",preventEvent);_event((this||e)._viewobj,"dragexit",preventEvent);_event((this||e)._viewobj,"dragover",preventEvent)}},_directoryEntry:function(e){return e.isDirectory},_directoryDrop:function(e,i,s){if(e.isFile)e.file((function(e){i.addFile(e,null,null,{name:s+"/"+e.name})}));else if(e.isDirectory){var n=e.createReader();n.readEntries((function(n){for(var r=0;r<n.length;r++)i._directoryDrop(n[r],i,(s?s+"/":"")+e.name)}))}},$drop:function(i){var s=i.dataTransfer.files;var n=i.dataTransfer.items;if(s.length){if(this.callEvent("onBeforeFileDrop",[s,i])){n=n||s;for(var r=0;r<n.length;r++){var a=n[r];if(a.webkitGetAsEntry){a=a.webkitGetAsEntry();if(a.isDirectory){this._directoryDrop(a,this||e,"");continue}}this.addFile(s[r])}}this.callEvent("onAfterFileDrop",[s,i])}},fileDialog:function(i){(this||e)._upload_timer_click=new Date;(this||e)._last_file_context=i;var s=(this||e)._viewobj.getElementsByTagName("INPUT");s[s.length-1].click()},send:function(s){if("function"==typeof s){(this||e)._last_assigned_upload_callback=s;s=0}if(s){var n=(this||e).files.getItem(s);if("client"!==n.status)return false;assert((this||e)._settings.upload,"You need to define upload url for uploader component");n.status="transfer";var r=new FormData;r.append((this||e).config.inputName,n.file,n.name);r.append((this||e).config.inputName+"_fullpath",n.name);var a={};var o=(this||e)._settings.formData||{};"function"===typeof o&&(o=o.call(this||e));var l=i.extend(n.formData||{},o);var h=new XMLHttpRequest;var _=this._get_active_url(n);if(callEvent("onBeforeAjax",["POST",_,l,h,a,r])){for(var c in l)r.append(c,l[c]);n.xhr=h;h.upload.addEventListener("progress",bind((function(e){this.$updateProgress(s,e.loaded/e.total*100)}),this||e),false);h.onload=bind((function(){h.aborted||this._file_complete(s)}),this||e);h.open("POST",_,true);for(var d in a)h.setRequestHeader(d,a[d]);h.send(r)}this.$updateProgress(s,0);return true}var u=(this||e).files.data.order;var f=true;if(u.length)for(var g=0;g<u.length;g++)f=!this.send(u[g])&&f;f&&this._upload_complete()},_file_complete:function(i){var s=(this||e).files.getItem(i);if(s){var n=null;if(s.xhr.status<400){var r=N[(this||e)._settings.datatype||"json"];n=r.toObject(s.xhr.responseText);n&&(n=r.getDetails(n))}if(n&&"error"!=n.status){assert(!n.status||"server"==n.status,"Not supported status value, use 'error' or 'server'");this._complete(i,n)}else{s.status="error";delete s.percent;(this||e).files.updateItem(i);this.callEvent("onFileUploadError",[s,n])}delete s.xhr}},stopUpload:function(i){bind((this||e)._stop_file,(this||e).files)(i)},_stop_file:function(e){var i=this.getItem(e);if("undefined"!==typeof i.xhr){i.xhr.aborted=true;i.xhr.abort();delete i.xhr;i.status="client"}}};var Ue={_validate_init_once:function(){(this||e).data.attachEvent("onStoreUpdated",bind((function(e,i,s){!e||"add"!=s&&"update"!=s&&"save"!=s||this.validate(e)}),this||e));(this||e).data.attachEvent("onClearAll",bind((this||e).clearValidation,this||e));(this||e)._validate_init_once=function(){}},rules_setter:function(e){e&&this._validate_init_once();return e},clearValidation:function(){(this||e).data.clearMark("webix_invalid",true)},validate:function(i){var s=true;if(i){(this||e)._validate_details={};var n=this.getItem(i);s=Qt.validate.call(this||e,null,n);s?this.callEvent("onValidationSuccess",[i,n])&&this._clear_invalid(i):this.callEvent("onValidationError",[i,n,(this||e)._validate_details])&&this._mark_invalid(i,(this||e)._validate_details)}else for(var r in(this||e).data.pull)s=this.validate(r)&&s;return s},_validate:function(i,s,n,r){"string"==typeof i&&(i=at[i]);var a=i.call(this||e,s,n,r);a||((this||e)._validate_details[r]=true);return a},_clear_invalid:function(i){(this||e).data.removeMark(i,"webix_invalid",true)},_mark_invalid:function(i){(this||e).data.addMark(i,"webix_invalid",true)}};var Ye={$init:function(){(this||e).elements={}},focus:function(i){if(i){assert((this||e).elements[i],"unknown input name: "+i);this._focus((this||e).elements[i])}else for(var s in(this||e).elements)if(false!==this._focus((this||e).elements[s]))return true;return false},_focus:function(e){return!(!e||!e.focus)&&e.focus()},setValues:function(i,s,n){var r=this||e;(this||e)._settings.complexData&&(i=B.collapseNames(i,"",{},(function(e){return!r.elements[e]})));this._inner_setValues(i,s,n)},_inner_setValues:function(i,s,n){(this||e)._is_form_dirty=s;this.blockEvent();s&&(this||e)._values||((this||e)._values={});for(var r in i)(this||e).elements[r]||((this||e)._values[r]=i[r]);for(var a in(this||e).elements){var o=(this||e).elements[a];if(o){isUndefined(i[a])?!s&&o.$allowsClear&&o.setValue("",n):o.setValue(i[a],n);(this||e)._values[a]=o.getValue()}}this.unblockEvent();this.callEvent("onValues",[])},isDirty:function(){return!!(this||e)._is_form_dirty||true===this.getDirtyValues(true)},setDirty:function(i){(this||e)._is_form_dirty=i;i||((this||e)._values=this._inner_getValues())},getDirtyValues:function(){var i={};if((this||e)._values)for(var s in(this||e).elements){var n=(this||e).elements[s];var r=n.getValue();var a=(this||e)._values[s];var o=n.$compareValue?!n.$compareValue(a,r):a!=r;if(o){i[s]=r;if(arguments[0])return true}}return i},getCleanValues:function(){return(this||e)._values},getValues:function(i){var s=this._inner_getValues(i);(this||e)._settings.complexData&&(s=B.expandNames(s));return s},_inner_getValues:function(i){var s,n=null,r=(this||e)._values?copy((this||e)._values):{};for(var a in(this||e).elements){n=(this||e).elements[a];s=true;if(i)if("object"==_typeof(i)){false===i.hidden&&(s=n.isVisible());s&&false===i.disabled&&(s=n.isEnabled())}else s=i.call(this||e,n);s?r[a]=n.getValue():delete r[a]}return r},clear:function(i){(this||e)._is_form_dirty=false;var s={};for(var n in(this||e).elements)(this||e).elements[n].$allowsClear&&(s[n]="");this._inner_setValues(s,false,i)},markInvalid:function(i,s){if(false===s)this._clear_invalid(i);else{if("string"==typeof s){var n=(this||e).elements[i];n&&(n._settings.invalidMessage=s)}(this||e)._validate_details&&((this||e)._validate_details[i]=true);this._mark_invalid(i)}},_mark_invalid:function(i){var s=(this||e).elements[i];if(s&&!s._settings.invalid){addCss(s._viewobj,"webix_invalid",true);s._settings.invalid=true;var n=s._settings.invalidMessage;"string"===typeof n&&s.setBottomText&&s.setBottomText()}},_clear_invalid:function(i){var s=(this||e).elements[i];if(s&&s._settings.invalid){removeCss(s._viewobj,"webix_invalid");s._settings.invalid=false;var n=s._settings.invalidMessage;"string"===typeof n&&s.setBottomText&&s.setBottomText()}}};var qe={$init:function(){assert((this||e).render,"VirtualRenderStack :: Object must use RenderStack first");(this||e)._htmlmap={};_event((this||e)._viewobj,"scroll",bind((this||e)._render_visible_rows,this||e));(this||e)._unrendered_area=[]},getItemNode:function(i){return(this||e)._htmlmap[i]},showItem:function(i){var s=this._getVisibleRange();var n=(this||e).data.getIndexById(i);var r=Math.floor(n/s._dx)*s._y;var a=this.getScrollState();(r<a.y||r+(this||e)._settings.height>=a.y+(this||e)._content_height)&&this.scrollTo(0,r)},render:function(i,s,n){if(this.isVisible((this||e)._settings.id)&&!(this||e).$blockRender)if(i){var r=this.getItemNode(i);switch(n){case"update":if(!r)return;var a=(this||e)._htmlmap[i]=this._toHTMLObject(s);insertBefore(a,r);remove(r);break;default:this._render_delayed();break}}else if(this.callEvent("onBeforeRender",[(this||e).data])){(this||e)._htmlmap={};this._render_visible_rows(null,true);(this||e)._wait_for_render=false;this.callEvent("onAfterRender",[])}},_render_delayed:function(){if(!(this||e)._wait_for_render){(this||e)._wait_for_render=true;window.setTimeout(bind((function(){this.render()}),this||e),1)}},_create_placeholder:function(e){z.maxHTMLElementSize&&(e=Math.min(z.maxHTMLElementSize,e));var i=document.createElement("DIV");i.style.cssText="height:"+e+"px; width:100%; overflow:hidden;";return i},_render_visible_rows:function(i,s){(this||e)._unrendered_area=[];var n=this._getVisibleRange();if(!(this||e)._dataobj.firstChild||s){(this||e)._dataobj.innerHTML="";(this||e)._dataobj.appendChild(this._create_placeholder(n._max));(this||e)._htmlrows=[(this||e)._dataobj.firstChild]}var r=n._from;while(r<=n._height){while((this||e)._htmlrows[r]&&(this||e)._htmlrows[r]._filled&&r<=n._height)r++;if(r>n._height)break;var a=r;while(!(this||e)._htmlrows[a])a--;var o=(this||e)._htmlrows[a];var l=r*n._dx+((this||e).data.$min||0);if(l>((this||e).data.$max||Infinity))break;var h=Math.min(l+n._dx-1,(this||e).data.$max?(this||e).data.$max-1:Infinity);var _=this._create_placeholder(n._y);var c=(this||e).data.getIndexRange(l,h);if(!c.length)break;var d={$template:"Loading"};for(var u=0;u<c.length;u++){c[u]||(this||e)._unrendered_area.push(l+u);c[u]=this._toHTML(c[u]||d)}_.innerHTML=c.join("");for(var f=0;f<c.length;f++)(this||e)._htmlmap[(this||e).data.getIdByIndex(l+f)]=_.childNodes[f];var g=parseFloat(o.style.height,10);var v=(r-a)*n._y;var p=g-v-n._y;insertBefore(_,v?o.nextSibling:o,(this||e)._dataobj);(this||e)._htmlrows[r]=_;_._filled=true;if(v<=0&&p>0){o.style.height=p+"px";(this||e)._htmlrows[r+1]=o}else{v<0?remove(o):o.style.height=v+"px";if(p>0){var m=(this||e)._htmlrows[r+1]=this._create_placeholder(p);insertBefore(m,_.nextSibling,(this||e)._dataobj)}}r++}if((this||e)._unrendered_area.length){var b=(this||e)._unrendered_area[0];var w=(this||e)._unrendered_area.pop()+1;if(w>b){var x=w-b;if(this._maybe_loading_already(x,b))return;x=Math.max(x,(this||e)._settings.datafetch||(this||e)._settings.loadahead||0);this.loadNext(x,b)}}},_getVisibleRange:function(){var i=this.getScrollState();var s=Math.max(0,i.y);var n=(this||e)._tilesPadding||0;var r=(this||e)._content_width-n;var a=(this||e)._content_height-n/2;var o=(this||e).type;var l=Math.floor(r/o.width)||1;var h=Math.floor(s/o.height);var _=Math.ceil((a+s)/o.height)-1;var c=(this||e).data.$max?(this||e).data.$max-(this||e).data.$min:(this||e).data.count();var d=Math.ceil(c/l)*o.height;return{_from:h,_height:_,_top:s,_max:d,_y:o.height,_dx:l}},_cellPosition:function(i){var s=this.getItemNode(i);if(!s){this.showItem(i);this._render_visible_rows();s=this.getItemNode(i)}return{left:s.offsetLeft,top:s.offsetTop,height:s.offsetHeight,width:s.offsetWidth,parent:(this||e)._contentobj}}};var Xe={$init:function(){(this||e)._htmlmap={};_event((this||e)._viewobj,"scroll",bind((function(){this.render(null,null,"paint")}),this||e))},getItemNode:function(i){return(this||e)._htmlmap&&(this||e)._htmlmap[i]},showItem:function(i){var s=(this||e).data.getIndexById(i);if(s>-1){var n=s*(this||e).type.height;var r=n+(this||e).type.height;var a=this.getScrollState();var o=offset((this||e).$view);n<a.y?this.scrollTo(0,n):r>a.y+o.height&&this.scrollTo(0,r-o.height)}},render:function(i,s,n){if(this.isVisible((this||e)._settings.id)&&!(this||e).$blockRender){var r=(this||e)._renderobj||(this||e)._dataobj;if(!i||"paint"!=n&&"update"!=n){var a,o,l=(this||e)._marked_item_id;if(Nt.active&&"drag-end"!=n){var h=Nt.getContext();a=(this||e)._init_drop_area&&h.from===(this||e);o=a&&_to_array(copy(h.source||[]))}if("paint"!=n||a){(this||e)._htmlmap={};r.innerHTML=""}if(this.callEvent("onBeforeRender",[(this||e).data])){var _=(this||e).data.count();var c=this.getScrollState();var d=offset((this||e)._viewobj);var u=Math.floor(c.y/(this||e).type.height)-2;var f=Math.ceil((c.y+d.height)/(this||e).type.height)+2;u=Math.max(0,u);f=Math.min(_-1,f+(a?o.length-1:0));var g=[];for(var v=u;v<=f;v++){var p=(this||e).data.order[v];if(a&&-1!==o.find(p))p==l&&(l=(this||e).data.order[v+1]);else if((this||e)._htmlmap[p])g.push('<div webix_skip="true" '.concat((this||e)._id,'="').concat(p,'"></div>'));else{var m=(this||e).data.getItem(p);if(!m){this._run_load_next({count:f-v+((this||e)._settings.loadahead||0),start:v});break}g.push(this._toHTML(m))}}(this||e)._html.innerHTML=g.join("");if((this||e)._init_drop_area&&"drag-in"==n){var b=(this||e)._html.querySelector("[".concat((this||e)._id,'="').concat(l,'"]'));b?(this||e)._html.insertBefore(Nt._dropHTML[0],b):(this||e)._html.appendChild(Nt._dropHTML[0])}r.style.position="relative";r.style.height=_*(this||e).type.height+"px";var w=(this||e)._html.childNodes;for(var x=w.length-1;x>=0;x--){var y=w[x];if(!y.getAttribute("webix_skip")){var S=y.getAttribute((this||e)._id);if(S){y.style.position="absolute";y.style.top=(u+x)*(this||e).type.height+"px";y.style.left=0;y.style.width="100%";r.appendChild(y);(this||e)._htmlmap[S]=y}}}this.callEvent("onAfterRender",[])}}else{var $=this.getItemNode(i);if($){var C=(this||e)._htmlmap[i]=this._toHTMLObject(s);C.style.top=$.style.top;C.style.position="absolute";C.style.left=0;C.style.width="100%";insertBefore(C,$);remove($);return}}}},$setSize:function(){St.api.$setSize.apply(this||e,arguments)&&this.render(null,null,"paint")},_run_load_next:function(i){var s=Math.max(i.count,(this||e)._settings.datafetch||(this||e)._settings.loadahead||0);this._maybe_loading_already(i.count,i.start)||this.loadNext(s,i.start)},_set_drop_area:function(){this.render(null,null,"drag-in")},_remove_drop_area:function(){remove(Nt._dropHTML);this.render(null,null,"drag-out")}};var Ge="9.2.3";var Ke="core";var Je="non-existing view for export";function getDataHelper(e,i,s){return!s&&i.format?function(s){return i.format(s[e])}:function(i){return i[e]}}function getHeaderText(e,i){var s=i.text;if(i.contentId){var n=e.getHeaderContent(i.contentId);n&&!n.type.$icon&&(s=n.getValue(true))}return(s||"").toString().replace(/<[^>]*>/gi,"")}function getStyles(e,i,s){return s[e]&&s[e][i]?s[e][i]:{}}function getExportScheme(e,s){var n=[];var r=0,a=0;var o=e.getColumnConfig;var l=s.columns;var h=!!s.rawValues;var _="TreeStore"==e.data.name;var c=s.treeLines;(true===c||isUndefined(c))&&(c="value");n.heights={};if(s.hidden||s.hide){n.hiddenCols={};n.hiddenRows={}}if(l){if(!l.length){var d=[];for(var u in l)d.push(i.extend({id:u},i.extend({},l[u])));l=d}}else{l=[];if(o){var f=e._hidden_column_order;if(s.hidden&&f.length)for(var g=0;g<f.length;g++){var v=e.getColumnConfig(f[g]);e.isColumnVisible(v.id)||(n.hiddenCols[v.id]=1);l.push(v)}else l=l.concat(e._columns)}else{var p=e.data.pull[e.data.order[0]];for(var m in p)"id"!==m&&"$"!=m[0]&&l.push({id:m,isTree:_&&m===c})}}if(s.ignore)for(var b=l.length-1;b>=0;b--)s.ignore[l[b].id]&&l.splice(b,1);s.id&&n.push({id:"id",width:50,header:" ",template:function(e){return e.id}});s.flatTree&&function(){var e=s.flatTree.id;var i=[].concat(s.flatTree.columns);var n=[];var r=!!s.flatTree.fill;for(var a=1;a<=i.length;a++)i[a-1].template=function(i){return function(s){return s.$level==i?n[i]=s[e]:r&&i<s.$level?n[i]:""}}(a);var o=0;for(var h=l.length-1;h>=0;h--)l[h].id===e&&(o=h);l=[].concat(l.slice(0,o)).concat(i).concat(l.slice(o+1))}();var w;for(var x=0;x<l.length;x++){var y=l[x];var S=y.id;if(!y.noExport){var $=h&&o;if(o){var C=e.getColumnConfig(S);!y.template||C&&C.template==y.template||($=false);C&&(y=i.extend(i.extend({},y),C))}var k={id:y.id,template:$||!y.template?getDataHelper(S,y,h):y.template,width:(y.width||200)*("excel"===s.export_mode?8.43/70:1),header:false!==y.header?y.header||S:""};y.collection&&(k.collection=y.collection);_&&S===c&&(k.isTree=w=true);if("excel"===s.export_mode){i.extend(k,{type:y.exportType||"",format:y.exportFormat||""});if(y.hidden){n.hiddenCols||(n.hiddenCols={});n.hiddenCols[y.id]=1}}"string"===typeof k.header?k.header=[{text:k.header}]:k.header=[].concat(k.header);for(var I=0;I<k.header.length;I++)k.header[I]=k.header[I]?getHeaderText(e,k.header[I]):"";r=Math.max(r,k.header.length);if(e.config.footer){var M=y.footer||"";M="string"==typeof M?[{text:M}]:[].concat(M);for(var T=0;T<M.length;T++)M[T]=M[T]?getHeaderText(e,M[T]):"";k.footer=M;a=Math.max(a,k.footer.length)}n.push(k)}}!w&&_&&s.treeLines!=c&&n[0]&&(n[0].isTree=true);for(var E=0;E<n.length;E++){var A=r-n[E].header.length;for(var z=0;z<A;z++)n[E].header.push("");if(e.config.footer){A=a-n[E].footer.length;for(var H=0;H<A;H++)n[E].footer.push("")}}return n}function getFileName(e,i){e&&(e=e.replace(/[/?\\<>:*|"]/g,"").substring(0,150));return"".concat(e||"Data",".").concat(i)}function getExportData(i,s,n){var r=!!s.filterHTML;var a=/<[^>]*>/gi;var o=[];var l,h;var _=s.export_mode;if(("excel"===_||"csv"==_)&&s.docHeader){o=[[(s.docHeader.text||s.docHeader).toString()],[""]];"excel"===_&&s.docHeader.height&&(n.heights[0]=s.docHeader.height)}if(false!==s.header&&n.length)for(var c=0;c<n[0].header.length;c++){h=[];for(var d=0;d<n.length;d++){l="";if(n[d].header[c]){l=n[d].header[c];r&&(l=n[d].header[c]=l.replace(a,""))}h.push(l)}"excel"!=_||!i._columns||false===s.heights||i._headers[c]===Ht.barHeight&&"all"!=s.heights||(n.heights[o.length]=i._headers[c]);"pdf"!==_&&(o[o.length]=h)}s.yCorrection=(s.yCorrection||0)-o.length;var u=s.flatTree||s.plainOutput?"":"-";i.data.each((function(l,h){if(!s.filter||s.filter(l)){var c=s.hidden&&i.data._filter_order&&-1==i.getIndexById(l.id);if(s.hide&&s.hide(l)||c){var d=(s.docHeader?2:0)+(false===s.header?0:n[0].header.length);n.hiddenRows[d+h]=1}(this||e).data._scheme_export&&(l=i.data._scheme_export(l));var f=[];for(var g=0;g<n.length;g++){var v=n[g],p=null,m=void 0;i.$getExportValue?p=i.$getExportValue(l.id,v.id,s):s.math&&l["$"+v.id]&&"="==l["$"+v.id].charAt(0)&&("excel"==_?m=l["$"+v.id]:p=l["$"+v.id]);if((this||e)._spans_pull){var b=this.getSpan(l.id,v.id);if(b&&b[4]&&b[0]==l.id&&b[1]==v.id){p=b[4];r&&"string"===typeof p&&(p=p.replace(a,""))}}if(!p){p=v.template(l,i.type,l[v.id],v,g);p||0===p||(p="");v.isTree&&u&&(p=" "+Array(l.$level).join(u)+" "+p);r&&"string"===typeof p&&(p=p.replace(a,""));"string"===typeof p&&"csv"===_&&(p=p.trim());"string"!==typeof p||"excel"!==_&&"csv"!==_||(p=p.replace(/<br\s*\/?>/gm,"\n"))}m&&(p={formula:m,value:p});f.push(p)}"excel"==_&&i._columns&&false!==s.heights&&(l.$height&&l.$height!==Ht.rowHeight||"all"==s.heights)&&(n.heights[o.length]=l.$height||(this||e).config.rowHeight);o.push(f)}}),i,s.hidden);if(false!==s.footer){var f=n[0].footer?n[0].footer.length:0;for(var g=0;g<f;g++){var v=[];for(var p=0;p<n.length;p++){var m=n[p].footer[g];r&&(m=n[p].footer[g]=m.toString().replace(a,""));v.push(m)}"excel"!=_||!i._columns||false===s.heights||i._footers[g]===Ht.barHeight&&"all"!=s.heights||(n.heights[o.length]=i._footers[g]);"pdf"!==_&&o.push(v)}}if("excel"===_&&s.docFooter){o=o.concat([[],[(s.docFooter.text||s.docFooter).toString()]]);s.docFooter.height&&(n.heights[o.length-1]=s.docFooter.height)}return o}var toPNG=function(e,i){var s=Deferred.defer();return require(z.cdn+"/extras/html2canvas-1.0.min.js").then((function(){"string"===typeof i&&(i={filename:i});i=i||{};i.export_mode="png";var n=$$(e);n&&n.$exportView&&(n=n.$exportView(i));assert(n,Je);if(!n)return s.reject(Je);var r=n?n.$view:toNode(e);var a=getFileName(i.filename,"png");window.html2canvas(r,{background:"#fff",logging:false,useCORS:true}).then((function(e){var callback=function(e){false!==i.download&&download(e,a);s.resolve(e)};e.msToBlob?callback(e.msToBlob()):e.toBlob(callback,"image/png")}));return s}))};var toCSV=function(e,s){s=s||{};var n=$$(e);n&&n.$exportView&&(n=n.$exportView(s));assert(n,Je);if(!n)return Deferred.reject(Je);s.export_mode="csv";i.extend(s,{filterHTML:true});var r=getExportScheme(n,s);var a=getExportData(n,s,r);var o=getCsvData(a,r);var l=getFileName(s.filename,"csv");var h=new Blob(["\ufeff"+o],{type:"text/csv"});false!==s.download&&download(h,l);return Deferred.resolve(h)};function getCsvData(e){return qt.stringify(e)}var Ze={};var toPDF=function(e,s){s=s||{};s.export_mode="pdf";i.extend(s,{fontName:"pt-sans.regular",boldFontName:"pt-sans.bold"});e=isArray(e)?e:[e];var n=[];for(var r=0;r<e.length;r++){e[r].id||(e[r]={id:e[r]});var a=$$(e[r].id);if(a){var o=i.extend(e[r].options||{},s);var l=o.display||"table";"image"==o.display&&delete o.styles;a.$exportView&&(a=a.$exportView(o));if(isArray(a)){n=n.concat(a);s.autowidth&&getAutowidth(o,s)}else{if(("table"==l||"all"==l)&&a.data&&a.data.pull){var h=getExportScheme(a,o);n.push({scheme:h,exportData:getExportData(a,o,h),viewOptions:o});s.autowidth&&getAutowidth(a,s,h)}if("image"==l||"all"==l){var _=o._hidden?cloneNodeWithStyles(a.$view):a.$view;n.push({node:_,viewOptions:o});s.autowidth&&getAutowidth(a,s)}}}assert(a,Je)}return s.dataOnly?n:require([z.cdn+"/extras/pdfjs.js",z.cdn+"/extras/html2canvas-1.0.min.js"]).then((function(){if(0==n.length)return Deferred.reject(Je);if(Ze[s.fontName]&&Ze[s.boldFontName]){s._export_font=Ze[s.fontName];s._export_font_bold=Ze[s.boldFontName];return getPdfData(n,s).then((function(e){return getBlob(e,s)}))}var e=Deferred.defer();pdfjs.load(s.fontURL||z.cdn+"/extras/"+s.fontName+".ttf",(function(i,r){if(i)return e.reject(i);pdfjs.load(s.boldFontURL||z.cdn+"/extras/"+s.boldFontName+".ttf",(function(i,a){s._export_font=Ze[s.fontName]=new pdfjs.TTFFont(r);s._export_font_bold=Ze[s.boldFontName]=i?null:new pdfjs.TTFFont(a);e.resolve(getPdfData(n,s).then((function(e){return getBlob(e,s)})))}))}));return e}))};function getBlob(e,i){var s=getFileName(i.filename,"pdf");var n=new Blob([e.toString()],{type:"application/pdf"});false!==i.download&&download(n,s);return n}function getPdfData(e,i){var s=addPDFDoc(i);var n=[];for(var r=0;r<e.length;r++)e[r].node?n.push(getPDFImage(e[r].node)):n.push(Deferred.resolve());return Deferred.all(n).then((function(r){for(var a=0;a<n.length;a++){var o=e[a].viewOptions;o.textBefore&&addText(s,"before",o.textBefore);if(r[a])s.image(r[a],{align:"center"});else{o._export_font_bold=i._export_font_bold;addPDFTable(e[a],s)}o.textAfter&&addText(s,"after",o.textAfter);a!=e.length-1&&s.pageBreak()}return addPDFHeader(s,i)}))}function addText(e,i,s){"after"==i&&e.text().br();"string"==typeof s&&(s={text:s});e.text(s.text,s.options||{});"before"==i&&e.text().br()}function getPDFImage(e){var i=!document.body.contains(e);if(i){document.body.appendChild(e);e.style.position="absolute";e.style.left="-9999px"}return window.html2canvas(e,{background:"#fff",logging:false,useCORS:true}).then((function(e){var i=e.toDataURL("image/jpeg");var s=window.atob(i.split("base64,")[1]);var n=s.length;var r=new Uint8Array(n);for(var a=0;a<n;a++)r[a]=s.charCodeAt(a);return new pdfjs.Image(r.buffer)})).finally((function(){i&&document.body.removeChild(e)}))}function getAutowidth(e,i,s){var n=i.orientation&&"landscape"==i.orientation?"height":"width";var r;if(s){r=80;for(var a=0;a<s.length;a++)r+=s[a].width}else r=e.$width?e.$width:e[n];i[n]=Math.max(i[n]||0,r||0)}function addPDFDoc(e){var i=e.width||595.296,s=e.height||841.896;e.orientation&&"landscape"===e.orientation&&(s=[i,i=s][0]);return new pdfjs.Document({padding:40,font:e._export_font,threshold:256,width:i,height:s})}function addPDFTable(e,s){var n=e.scheme;var r=e.exportData;var a=e.viewOptions;var o=e.styles;a.header=isUndefined(a.header)||true===a.header?{}:a.header;a.footer=isUndefined(a.footer)||true===a.footer?{}:a.footer;a.table=a.table||{};var l=false===a.header?0:n[0].header.length;var h=false!==a.footer&&n[0].footer?n[0].footer.length:0;var _=[];for(var c=0;c<n.length;c++)_[c]=n[c].width;var d=i.extend(a.table,{borderWidth:1,height:20,lineHeight:1.1,borderColor:15658734,backgroundColor:16777215,color:6710886,textAlign:"left",paddingRight:10,paddingLeft:10,headerRows:l,widths:_.length?_:["100%"]});var u=s.table(d);var f=a._export_font_bold;if(l){var g=i.extend(a.header,{borderRightColor:11587299,borderBottomColor:11587299,color:4868682,backgroundColor:13820911,height:27,lineHeight:1.2});for(var v=0;v<l;v++){var p=u.tr(g);for(var m=0;m<n.length;m++){var b=o?getStyles(v,m,o):{};f&&b.bold&&(b.font=f);p.td(n[m].header[v].toString(),b)}}}for(var w=0;w<r.length;w++){var x=u.tr({});for(var y=0;y<r[w].length;y++){var S=o?getStyles(w+l,y,o):{};f&&S.bold&&(S.font=f);x.td(r[w][y],S)}}if(h){var $=i.extend(a.footer,{borderRightColor:15658734,borderBottomColor:15658734,backgroundColor:16448250,color:6710886,height:27,lineHeight:1.2});for(var C=0;C<h;C++){var k=l+r.length;var I=u.tr($);for(var M=0;M<n.length;M++){var T=o?getStyles(C+k,M,o):{};f&&T.bold&&(T.font=f);I.td(n[M].footer[C].toString(),T)}}}}function addPDFHeader(e,s){if(false!==s.docFooter){s.docFooter=i.extend(s.docFooter||{},{color:6710886,textAlign:"center"});e.footer().text(s.docFooter).append(u.dataExport.page||"Page").pageNumber().append("  "+(u.dataExport.of||"of")+"  ").pageCount()}var n={text:0,image:1};if(s.docHeader){"string"==typeof s.docHeader&&(s.docHeader={text:s.docHeader});i.extend(s.docHeader,{color:6710886,textAlign:"right",order:0});n.text=s.docHeader.order}if(s.docHeaderImage){"string"==typeof s.docHeaderImage&&(s.docHeaderImage={url:s.docHeaderImage});i.extend(s.docHeaderImage,{align:"right",order:1});n.image=s.docHeaderImage.order}s.docHeader&&n.image>n.text&&e.header({paddingBottom:10}).text(s.docHeader.text,s.docHeader);if(s.docHeaderImage){var r=Deferred.defer();pdfjs.load(s.docHeaderImage.url,(function(i,a){if(!i){var o=new pdfjs.Image(a);e.header({paddingBottom:10}).image(o,s.docHeaderImage);s.docHeader&&n.image<n.text&&e.header({paddingBottom:10}).text(s.docHeader.text,s.docHeader)}r.resolve(e.render())}));return r}return Deferred.resolve(e.render())}function cloneNodeWithStyles(e){var i=e.cloneNode(false);if(e.tagName){var s=window.getComputedStyle(e);i.style.cssText=s.cssText}for(var n=0;n<e.childNodes.length;n++)i.appendChild(cloneNodeWithStyles(e.childNodes[n]));return i}var toExcel=function(e,s){s=s||{};s.export_mode="excel";e=isArray(e)?e:[e];var n=[];for(var r=0;r<e.length;r++){e[r].id||(e[r]={id:e[r]});var a=$$(e[r].id);var o=i.extend(e[r].options||{},s);a&&a.$exportView&&(a=a.$exportView(o));assert(a,Je);if(isArray(a))n=n.concat(a);else if(a.data&&a.data.pull){var l=getExportScheme(a,o);n.push({scheme:l,exportData:getExportData(a,o,l),spans:o.spans?getSpans(a,o):[],viewOptions:o})}}if(s.dataOnly)return n;var h=Deferred.defer();return require(z.cdn+"/extras/xlsx.core.styles.min.js").then((function(){if(!n.length)return h.reject(Je);var e={SheetNames:[],Sheets:{},Workbook:{WBProps:{},Names:[]}};for(var i=0;i<n.length;i++){var r=n[i].viewOptions;var a=n[i].scheme;var o=n[i].exportData;var l=n[i].spans;var _=n[i].ranges||[];var c=n[i].styles||[];var d=getExcelData(o,a,l,c,r);var u=(r.name||"Data"+(i+1)).replace(/[*?:[\]\\/]/g,"").replace(/&/g,"&amp;").substring(0,31);var f=i;while(-1!=e.SheetNames.indexOf(u))u="Data"+ ++f;e.SheetNames.push(u);e.Sheets[u]=d;e.Workbook.Names=e.Workbook.Names.concat(_)}var g=XLSX.write(e,{bookType:"xlsx",bookSST:false,type:"binary"});var v=getFileName(s.filename,"xlsx");var p=new Blob([str2array(g)],{type:"application/xlsx"});false!==s.download&&download(p,v);h.resolve(p);return h}))};function str2array(e){var i=new ArrayBuffer(e.length);var s=new Uint8Array(i);for(var n=0;n!=e.length;++n)s[n]=255&e.charCodeAt(n);return i}var Qe={number:"n",date:"n",string:"s",boolean:"b"};var ti="_table";function getExcelData(e,i,s,n,r){var a={};var o={s:{c:1e7,r:1e7},e:{c:0,r:0}};for(var l=0;l!=e.length;++l)for(var h=0;h!=e[l].length;++h){o.s.r>l&&(o.s.r=l);o.s.c>h&&(o.s.c=h);o.e.r<l&&(o.e.r=l);o.e.c<h&&(o.e.c=h);var _={v:e[l][h]};if(null!==_.v){var c=XLSX.utils.encode_cell({c:h,r:l});var d="object"==_typeof(_.v);var u=(d?_.v.value:_.v).toString();if(n){var f=getStyles(l,h,n);if(f.format){_.z=f.format;delete f.format}if(f.type){_.t=Qe[f.type];delete f.type}_.s=f}var g=(r.docHeader?2:0)+i[0].header.length;if(l>=g&&!d){var v=i[h];v.type&&!_.t&&(_.t=Qe[v.type]||"");v.format&&!_.z&&(_.z=v.format)}if(r.stubCells&&!u)_.t="z";else if(_.v instanceof Date){_.t=_.t||"n";_.z=_.z||XLSX.SSF[ti][14];_.v=excelDate(_.v)}else if(d){_.t||(_.t=isNaN(u)?"s":"n");_.f=_.v.formula.substring(1);_.v=u}else if(!_.t)if("boolean"===typeof _.v)_.t="b";else if("number"===typeof _.v||parseFloat(_.v)==_.v){_.v=1*_.v;_.t="n"}else{_.v=u;_.t="s"}a[c]=_}}o.s.c<1e7&&(a["!ref"]=XLSX.utils.encode_range(o));a["!rows"]=getRowHeights(i);a["!cols"]=getColumnsWidths(i);s.length&&(a["!merges"]=s);return a}function getRowHeights(e){var i=e.heights;for(var s in i)i[s]={hpx:i[s],hpt:.75*i[s]};var n=e.hiddenRows;if(n)for(var r in n){i[r]||(i[r]={});i[r].hidden=1}return i}function getSpans(e,i){var s=e.getColumnConfig;var n=e._spans_pull;var r=[];if(s){false!==i.header&&(r=getHeaderSpans(e,i,"header",r));if(n){var a=i.xCorrection||0;var o=i.yCorrection||0;for(var l in n){var h=n[l];for(var _ in h){var c=e.getColumnIndex(_);var d=e.getItem(l).id;var u=e.getIndexById(d);if(i.hidden){var f=e._hidden_column_order;if(f.length){var g=e.getColumnConfig(_).id;c=f.indexOf(g)}var v=e.data._filter_order;v&&v.length&&(u=v.indexOf(d))}var p=c-a;var m=u-o;if(!(p<0||m<0)){var b=p+h[_][0]-1;var w=m+(h[_][1]-1);r.push({s:{c:p,r:m},e:{c:b,r:w}})}}}}false!==i.footer&&(r=getHeaderSpans(e,i,"footer",r))}return r}function getHeaderSpans(e,i,s,n){var r=e.config.columns;var a=(i.docHeader?2:0)+("header"==s?0:(false!==i.header?e._headers.length:0)+e.count());for(var o=0;o<r.length;o++){var l=r[o][s];for(var h=0;h<l.length;h++)l[h]&&(l[h].colspan||l[h].rowspan)&&n.push({s:{c:o,r:h+a},e:{c:o+(l[h].colspan||1)-1,r:h+(l[h].rowspan||1)-1+a}})}return n}function excelDate(e){var i=25569+(e.getTime()-60*e.getTimezoneOffset()*1e3)/864e5;return i.toString().substr(0,20)}function getColumnsWidths(e){var i=[];for(var s=0;s<e.length;s++){var n=e[s];i.push({wch:n.width,hidden:e.hiddenCols?e.hiddenCols[n.id]:0})}return i}function editStop(){callEvent("onEditEnd",[])}var ei={groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2,dateFormat:"%m/%d/%Y",timeFormat:"%h:%i %A",longDateFormat:"%d %F %Y",fullDateFormat:"%m/%d/%Y %h:%i %A",am:["am","AM"],pm:["pm","PM"],price:"${obj}",priceSettings:{groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2},fileSize:["b","Kb","Mb","Gb","Tb","Pb","Eb"],calendar:{monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hours:"Hours",minutes:"Minutes",done:"Done",clear:"Clear",today:"Today"},dataExport:{page:"Page",of:"of"},PDFviewer:{of:"of",automaticZoom:"Automatic Zoom",actualSize:"Actual Size",pageFit:"Page Fit",pageWidth:"Page Width",pageHeight:"Page Height",enterPassword:"Enter password",passwordError:"Wrong password"},aria:{calendar:"Calendar",increaseValue:"Increase value",decreaseValue:"Decrease value",navMonth:["Previous month","Next month"],navYear:["Previous year","Next year"],navDecade:["Previous decade","Next decade"],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Hours: %h %A",minuteFormat:"Minutes: %i",removeItem:"Remove item",pages:["First page","Previous page","Next page","Last page"],page:"Page",headermenu:"Header menu",openGroup:"Open column group",closeGroup:"Close column group",closeTab:"Close tab",showTabs:"Show more tabs",resetTreeMap:"Reset tree map",navTreeMap:"Level up",nextTab:"Next tab",prevTab:"Previous tab",multitextSection:"Add section",multitextextraSection:"Remove section",showChart:"Show chart",hideChart:"Hide chart",resizeChart:"Resize chart"},richtext:{underline:"Underline",bold:"Bold",italic:"Italic"},combo:{select:"Select",selectAll:"Select all",unselectAll:"Unselect all"},message:{ok:"OK",cancel:"Cancel"},comments:{send:"Send",confirmMessage:"The comment will be removed. Are you sure?",edit:"Edit",remove:"Remove",placeholder:"Type here..",moreComments:"More comments"},filter:{less:"less",lessOrEqual:"less or equal",greater:"greater",greaterOrEqual:"greater or equal",contains:"contains",notContains:"not contains",equal:"equal",notEqual:"not equal",beginsWith:"begins with",notBeginsWith:"not begins with",endsWith:"ends with",notEndsWith:"not ends with",between:"between",notBetween:"not between"},timeboard:{seconds:"Seconds"}};var ii={startOnMonday:false,toFixed:function(e,i){e<10&&(e="0"+e);i&&e<100&&(e="0"+e);return e},weekStart:function(i){i=this.copy(i);var s=i.getDay();(this||e).startOnMonday&&(0===s?s=6:s--);return this.datePart(this.add(i,-1*s,"day"))},monthStart:function(e){e=this.copy(e);e.setDate(1);return this.datePart(e)},yearStart:function(e){e=this.copy(e);e.setMonth(0);return this.monthStart(e)},dayStart:function(e){return this.datePart(e,true)},dateToStr:function(e,i){if("function"==typeof e)return e;if(z.strict)return function(i){if(!i)return"";i.getMonth||(i=u.parseFormatDate(i));var s="";var n=0;e.replace(/%[a-zA-Z]/g,(function(r,a){s+=e.slice(n,a);var fn=function(e){if("%d"==r)return ii.toFixed(e.getDate());if("%m"==r)return ii.toFixed(e.getMonth()+1);if("%j"==r)return e.getDate();if("%n"==r)return e.getMonth()+1;if("%y"==r)return ii.toFixed(e.getFullYear()%100);if("%Y"==r)return e.getFullYear();if("%D"==r)return u.calendar.dayShort[e.getDay()];if("%l"==r)return u.calendar.dayFull[e.getDay()];if("%M"==r)return u.calendar.monthShort[e.getMonth()];if("%F"==r)return u.calendar.monthFull[e.getMonth()];if("%h"==r)return ii.toFixed((e.getHours()+11)%12+1);if("%g"==r)return(e.getHours()+11)%12+1;if("%G"==r)return e.getHours();if("%H"==r)return ii.toFixed(e.getHours());if("%i"==r)return ii.toFixed(e.getMinutes());if("%a"==r)return e.getHours()>11?u.pm[0]:u.am[0];if("%A"==r)return e.getHours()>11?u.pm[1]:u.am[1];if("%s"==r)return ii.toFixed(e.getSeconds());if("%S"==r)return ii.toFixed(e.getMilliseconds(),true);if("%W"==r)return ii.toFixed(Date.getISOWeek(e));if("%c"==r){var i=e.getFullYear();i+="-"+ii.toFixed(e.getMonth()+1);i+="-"+ii.toFixed(e.getDate());i+="T";i+=ii.toFixed(e.getHours());i+=":"+ii.toFixed(e.getMinutes());i+=":"+ii.toFixed(e.getSeconds());return i}return r};s+=fn(i);n=a+2}));s+=e.slice(n,e.length);return s};e=e.replace(/%[a-zA-Z]/g,(function(e){switch(e){case"%d":return'"+wDate.toFixed(date.getDate())+"';case"%m":return'"+wDate.toFixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+wDate.toFixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+i18n.calendar.dayShort[date.getDay()]+"';case"%l":return'"+i18n.calendar.dayFull[date.getDay()]+"';case"%M":return'"+i18n.calendar.monthShort[date.getMonth()]+"';case"%F":return'"+i18n.calendar.monthFull[date.getMonth()]+"';case"%h":return'"+wDate.toFixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+wDate.toFixed(date.getHours())+"';case"%i":return'"+wDate.toFixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?i18n.pm[0]:i18n.am[0])+"';case"%A":return'"+(date.getHours()>11?i18n.pm[1]:i18n.am[1])+"';case"%s":return'"+wDate.toFixed(date.getSeconds())+"';case"%S":return'"+wDate.toFixed(date.getMilliseconds(), true)+"';case"%W":return'"+wDate.toFixed(wDate.getISOWeek(date))+"';case"%c":var s='"+date.getFullYear()+"';s+='-"+wDate.toFixed((date.getMonth()+1))+"';s+='-"+wDate.toFixed(date.getDate())+"';s+="T";s+='"+wDate.toFixed(date.getHours())+"';s+=':"+wDate.toFixed(date.getMinutes())+"';s+=':"+wDate.toFixed(date.getSeconds())+"';true===i&&(s+="Z");return s;default:return e}}));true===i&&(e=e.replace(/date\.get/g,"date.getUTC"));var s=new Function("date","i18n","wDate","if (!date) return ''; if (!date.getMonth) date=i18n.parseFormatDate(date);  return \""+e+'";');return function(e){return s(e,u,ii)}},strToDate:function(e,i){if("function"==typeof e)return e;var s=e.match(/%[a-zA-Z]/g);var n="var temp=date.split(/[\\s\\./\\-\\:\\,]+/g); if(!temp.join('')){return ''}";var r,a,o;if(!u.calendar.monthShort_hash){o=u.calendar.monthShort;a=u.calendar.monthShort_hash={};for(r=0;r<o.length;r++)a[o[r]]=r;o=u.calendar.monthFull;a=u.calendar.monthFull_hash={};for(r=0;r<o.length;r++)a[o[r]]=r}if(z.strict)return function(e){if(!e)return"";if("object"==_typeof(e))return e;var n=e.split(/[\s./\-:,]+/g);if(!n.join(""))return"";var a=[0,0,1,0,0,0,0];for(r=0;r<s.length;r++){var o=s[r];if("%y"==o)a[0]=1*n[r]+(n[r]>30?1900:2e3);else if("%Y"==o){a[0]=1*(n[r]||0);a[0]<30&&(a[0]+=2e3)}else if("%n"==o||"%m"==o)a[1]=(n[r]||1)-1;else if("%M"==o)a[1]=u.calendar.monthShort_hash[n[r]]||0;else if("%F"==o)a[1]=u.calendar.monthFull_hash[n[r]]||0;else if("%j"==o||"%d"==o)a[2]=n[r]||1;else if("%g"==o||"%G"==o||"%h"==o||"%H"==o)a[3]=n[r]||0;else if("%a"==o)a[3]=a[3]%12+((n[r]||"")==u.am[0]?0:12);else if("%A"==o)a[3]=a[3]%12+((n[r]||"")==u.am[1]?0:12);else if("%i"==o)a[4]=n[r]||0;else if("%s"==o)a[5]=n[r]||0;else if("%S"==o)a[6]=n[r]||0;else if("%c"==o){var l=/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)(\+.*|)/g;var h=l.exec(e);a[0]=1*(h[1]||0);a[0]<30&&(a[0]+=2e3);a[1]=(h[2]||1)-1;a[2]=h[3]||1;a[3]=h[4]||0;a[4]=h[5]||0;a[5]=h[6]||0}}return i?new Date(Date.UTC(a[0],a[1],a[2],a[3],a[4],a[5],a[6])):new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])};for(r=0;r<s.length;r++)switch(s[r]){case"%j":case"%d":n+="set[2]=temp["+r+"]||1;";break;case"%n":case"%m":n+="set[1]=(temp["+r+"]||1)-1;";break;case"%y":n+="set[0]=temp["+r+"]*1+(temp["+r+"]>30?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":n+="set[3]=temp["+r+"]||0;";break;case"%i":n+="set[4]=temp["+r+"]||0;";break;case"%Y":n+="set[0]=(temp["+r+"]||0)*1; if (set[0]<30) set[0]+=2000;";break;case"%a":n+="set[3]=set[3]%12+(temp["+r+"]==i18n.am[0]?0:12);";break;case"%A":n+="set[3]=set[3]%12+(temp["+r+"]==i18n.am[1]?0:12);";break;case"%s":n+="set[5]=temp["+r+"]||0;";break;case"%S":n+="set[6]=temp["+r+"]||0;";break;case"%M":n+="set[1]=i18n.calendar.monthShort_hash[temp["+r+"]]||0;";break;case"%F":n+="set[1]=i18n.calendar.monthFull_hash[temp["+r+"]]||0;";break;case"%c":n+="var res = date.split('T');";n+="if(res[0]){ var d = res[0].split('-');";n+="set[0]= (d[0]||0)*1; if (set[0]<30) set[0]+=2000;";n+="set[1]= (d[1]||1)-1;";n+="set[2]= d[2]||1;}";n+="if(res[1]){ var t = res[1].split(':');";n+="set[3]= t[0]||0;";n+="set[4]= t[1]||0;";n+="set[5]= parseInt(t[2])||0;}";break;default:break}var l="set[0],set[1],set[2],set[3],set[4],set[5],set[6]";i&&(l=" Date.UTC("+l+")");var h=new Function("date","i18n","if (!date) return ''; if (typeof date == 'object') return date; var set=[0,0,1,0,0,0,0]; "+n+" return new Date("+l+");");return function(e){return h(e,u)}},getISOWeek:function(e){if(!e)return false;var i=e.getDay();0===i&&(i=7);var s=new Date(e.valueOf());s.setDate(e.getDate()+(4-i));var n=s.getFullYear();var r=Math.floor((s.getTime()-new Date(n,0,1).getTime())/864e5);var a=1+Math.floor(r/7);return a},getUTCISOWeek:function(e){return this.getISOWeek(e)},_correctDate:function(e,i,s,n){if(s){var r=n(e,i);if(r){var a=s>0?1:-1;while(r){e.setHours(e.getHours()+a);r=n(e,i);a+=s>0?1:-1}}}},add:function(e,i,s,n){n&&(e=this.copy(e));var r=ii.copy(e);switch(s){case"day":e.setDate(e.getDate()+i);this._correctDate(e,r,i,(function(e,i){return ii.datePart(i,true).valueOf()==ii.datePart(e,true).valueOf()}));break;case"week":e.setDate(e.getDate()+7*i);this._correctDate(e,r,7*i,(function(e,i){return ii.datePart(i,true).valueOf()==ii.datePart(e,true).valueOf()}));break;case"month":e.setMonth(e.getMonth()+i);this._correctDate(e,r,i,(function(e,i){return i.getMonth()==e.getMonth()&&i.getYear()==e.getYear()}));break;case"quarter":e.setMonth(e.getMonth()+3*i);this._correctDate(e,r,i,(function(e,i){return i.getMonth()==e.getMonth()&&i.getYear()==e.getYear()}));break;case"year":e.setYear(e.getFullYear()+i);this._correctDate(e,r,i,(function(e,i){return i.getFullYear()==e.getFullYear()}));break;case"hour":e.setHours(e.getHours()+i);this._correctDate(e,r,i,(function(e,i){return i.getHours()==e.getHours()&&Date.datePart(i,true)==Date.datePart(e,true)}));break;case"minute":e.setMinutes(e.getMinutes()+i);break;default:ii.add[s](e,i,s);break}return e},datePart:function(e,i){i&&(e=this.copy(e));var s=this.copy(e);s.setHours(0);s.getDate()!=e.getDate()?e.setHours(1):e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);return e},timePart:function(e,i){i&&(e=this.copy(e));return(e.valueOf()/1e3-60*e.getTimezoneOffset())%86400},copy:function(e){return new Date(e.valueOf())},equal:function(e,i){return!(!e||!i)&&e.valueOf()===i.valueOf()},isHoliday:function(e){e=e.getDay();if(0===e||6==e)return"webix_cal_event"}};var si={getConfig:function(e){var i={decimalSize:0,groupSize:999,prefix:"",sufix:""};var s=e.split(/[0-9].*[0-9]/g);s[0].length&&(i.prefix=s[0]);s[1].length&&(i.sufix=s[1]);(i.prefix||i.sufix)&&(e=e.substr(i.prefix.length,e.length-i.prefix.length-i.sufix.length));var n=e.indexOf("1");if(n>0){i.prefix=e.substr(0,n);e=e.substr(n)}var r=e.indexOf("0");if(r>0){i.decimalSize=e.length-r;i.decimalDelimiter=e[r-1];e=e.substr(0,r-1)}var a=e.match(/[^0-9]/);if(a){i.groupSize=e.length-a.index-1;i.groupDelimiter=e[a.index]}return i},parse:function(e,i){if(!e||"string"!==typeof e)return e;i.prefix&&(e=e.toLowerCase().replace(i.prefix.toLowerCase()||"",""));i.sufix&&(e=e.toLowerCase().replace(i.sufix.toLowerCase()||"",""));var s="";if(i.decimalDelimiter){var n=e.indexOf(i.decimalDelimiter);if(n>-1){s=e.substr(n+1).replace(/[^0-9]/g,"");s=s.substr(0,Math.min(s.length,i.decimalSize));e=e.substr(0,n)}}var r="-"===e[0]?-1:1;e=e.replace(/[^0-9]/g,"");e||(e="0");s&&(e+="."+s);return parseFloat(e)*r},format:function(e,i){if(""===e||"undefined"===typeof e)return e;i=i||u;e=parseFloat(e);var s=e<0?"-":"";e=Math.abs(e);i.decimalOptional||(e=e.toFixed(i.decimalSize));var n=e.toString();n=n.split(".");var r="";if(i.groupSize){var a=i.groupSize;var o=n[0].length;do{o-=a;var l=o>0?n[0].substr(o,a):n[0].substr(0,a+o);r=l+(r?i.groupDelimiter+r:"")}while(o>0)}else r=n[0];n=i.decimalSize?s+r+(n[1]?i.decimalDelimiter+n[1]:""):s+r;return i.prefix||i.sufix?i.prefix+n+i.sufix:n},numToStr:function(e){return function(i){return si.format(i,e)}}};function extend(e,i){for(var s in i)if("object"!=_typeof(i[s])||isArray(i[s]))e[s]=i[s];else{e[s]||(e[s]={});extend(e[s],i[s])}}var ni=["fullDateFormat","timeFormat","dateFormat","longDateFormat","parseFormat","parseTimeFormat"];u.setLocale=function(e){"string"==typeof e&&(e=u.locales[e]);if(e){var i=copy(ei);e.priceSettings=copy(e.priceSettings||e);extend(i,e);extend(u,i);delete u.calendar.monthShort_hash;delete u.calendar.monthFull_hash}for(var s=0;s<ni.length;s++){var n=ni[s];var r=u[n+"UTC"];u[n+"Str"]=ii.dateToStr(u[n],r);u[n+"Date"]=ii.strToDate(u[n],r)}var a=template(u.price);var o=u.priceSettings||u;u.intFormat=si.numToStr({groupSize:u.groupSize,groupDelimiter:u.groupDelimiter,decimalSize:0});u.priceFormat=function(e){return a(si.format(e,o))};u.numberFormat=si.format};u.locales={"en-US":ei};u.setLocale("en-US");var ri={};ri.prefix=function(e,i){e+=".";return{put:function(s,n){return i.put(e+s,n)},get:function(s){return i.get(e+s)},remove:function(s){return i.remove(e+s)}}};ri.local={put:function(e,i){e&&window.JSON&&window.localStorage&&window.localStorage.setItem(e,stringify(i))},get:function(e){if(e&&window.JSON&&window.localStorage){var i=window.localStorage.getItem(e);return i?N.json.toObject(i):null}return null},remove:function(e){e&&window.JSON&&window.localStorage&&window.localStorage.removeItem(e)},clear:function(){window.localStorage.clear()}};ri.session={put:function(e,i){e&&window.JSON&&window.sessionStorage&&window.sessionStorage.setItem(e,stringify(i))},get:function(e){if(e&&window.JSON&&window.sessionStorage){var i=window.sessionStorage.getItem(e);return i?N.json.toObject(i):null}return null},remove:function(e){e&&window.JSON&&window.sessionStorage&&window.sessionStorage.removeItem(e)},clear:function(){window.sessionStorage.clear()}};ri.cookie={put:function(e,i,s,n){e&&window.JSON&&(document.cookie=e+"="+escape(stringify(i))+(n&&n instanceof Date?";expires="+n.toUTCString():"")+(s?";domain="+s:"")+(z.https?";secure":""))},getRaw:function(e){var i=document.cookie.split(";");var s="";var n="";var r="";var a=false;for(var o=0;o<i.length;o++){s=i[o].split("=");n=s[0].replace(/^\s+|\s+$/g,"");if(n==e){a=true;s.length>1&&(r=unescape(s[1].replace(/^\s+|\s+$/g,"")));return r}s=null;n=""}return a,null},get:function(e){if(e&&window.JSON){var i=this.getRaw(e);return i?N.json.toObject(unescape(i)):null}return null},remove:function(e,i){e&&this.getRaw(e)&&(document.cookie=e+"="+(i?";domain="+i:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")},clear:function(e){var i=document.cookie.split(";");for(var s=0;s<i.length;s++)document.cookie=/^[^=]+/.exec(i[s])[0]+"="+(e?";domain="+e:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}};z.printPPI=96;z.printMargin=.75*z.printPPI;var ai={a4:"A4",a3:"A3",letter:"letter"};var oi={page:true,data:true};var li={portrait:true,landscape:true};var hi={A3:{width:11.7,height:16.5},A4:{width:8.27,height:11.7},letter:{width:8.5,height:11}};var print=function(e,i){var s=$$(e);s&&s.$printView&&(s=s.$printView());assert(s,"non-existing view for printing");if(s){s.callEvent&&s.callEvent("onBeforePrint",[i]);i=_checkOptions(i);_beforePrint(i);var n;if(s.$customPrint){n=s.$customPrint(i);if(n){if(n.then)return n.then((function(){return _afterPrint(i)}));_print(s,i)}}else _print(s,i);_afterPrint(i)}};function _checkOptions(e){e=e||{};e.paper=ai[(e.paper||"").toLowerCase()]||"A4";e.mode=li[e.mode]?e.mode:"portrait";e.fit=oi[e.fit]?e.fit:"page";e.scroll=e.scroll||false;e.size=hi[e.paper];e.margin=e.margin||0===e.margin?e.margin:{};var i=isNaN(1*e.margin)?z.printMargin:e.margin;e.margin={top:e.margin.top||0===e.margin.top?e.margin.top:i,bottom:e.margin.bottom||0===e.margin.bottom?e.margin.bottom:i,right:e.margin.right||0===e.margin.right?e.margin.right:i,left:e.margin.left||0===e.margin.left?e.margin.left:i};return e}function _beforePrint(e){addCss(document.body,"webix_print");e.docHeader&&_getHeaderFooter("Header",e);e.docFooter&&_getHeaderFooter("Footer",e);var i="@media print { @page{ size:"+e.paper+" "+e.mode+";margin-top:"+e.margin.top+"px;margin-bottom:"+e.margin.bottom+"px;margin-right:"+e.margin.right+"px;margin-left:"+e.margin.left+"px;}}";addStyle(i,"print")}function _afterPrint(e){removeCss(document.body,"webix_print");removeStyle("print");e.docHeader&&remove(e.docHeader);e.docFooter&&remove(e.docFooter)}function _print(e,i){var s=e.$view.cloneNode(true);var n=e.$view.getElementsByTagName("canvas");if(n.length)for(var r=n.length-1;r>=0;r--){var a=s.getElementsByTagName("canvas")[r].getContext("2d");a.drawImage(n[r],0,0)}insertBefore(s,i.docFooter,document.body);addCss(s,"webix_ui_print");!i.scroll&&(e._dataobj&&e.data&&e.data.pull||e.getBody)&&addCss(s,"webix_print_noscroll");window.print();remove(s)}function _getHeaderFooter(e,i){var s=create("div",{class:"webix_view webix_print_"+e.toLowerCase(),style:"height:0px;visibility:hidden;"},i["doc"+e]);"Header"===e?insertBefore(s,document.body.firstChild):document.body.appendChild(s);i["doc"+e]=s}var _i={number:{greater:function(e,i){return e>i},less:function(e,i){return e<i},greaterOrEqual:function(e,i){return e>=i},lessOrEqual:function(e,i){return e<=i},equal:function(e,i){return e==i},notEqual:function(e,i){return e!=i},contains:function(e,i){return-1!==e.toString().toLowerCase().indexOf(i.toString().toLowerCase())},notContains:function(e,i){return-1===e.toString().toLowerCase().indexOf(i.toString().toLowerCase())}},text:{equal:function(e,i){return e.toLowerCase()===i.toLowerCase()},notEqual:function(e,i){return e.toLowerCase()!==i.toLowerCase()},contains:function(e,i){return-1!==e.toLowerCase().indexOf(i.toLowerCase())},notContains:function(e,i){return-1===e.toLowerCase().indexOf(i.toLowerCase())},beginsWith:function(e,i){return 0===e.toLowerCase().lastIndexOf(i.toLowerCase(),0)},notBeginsWith:function(e,i){return 0!==e.toLowerCase().lastIndexOf(i.toLowerCase(),0)},endsWith:function(e,i){return-1!==e.toLowerCase().indexOf(i.toLowerCase(),e.length-i.length)},notEndsWith:function(e,i){return-1===e.toLowerCase().indexOf(i.toLowerCase(),e.length-i.length)}},date:{greater:function(e,i){return e>i},less:function(e,i){return e<i},greaterOrEqual:function(e,i){return e>=i},lessOrEqual:function(e,i){return e<=i},equal:function(e,i){return!(!e||!i)&&e.valueOf()===i.valueOf()},notEqual:function(e,i){return!e||!i||e.valueOf()!==i.valueOf()},between:function(e,i){return(!i.start||e>i.start)&&(!i.end||e<i.end)},notBetween:function(e,i){return!i.start||e<=i.start||!i.end||e>=i.end}}};var ci={phone:{mask:"+# (###) ###-####",allow:/[0-9]/g},card:{mask:"#### #### #### ####",allow:/[0-9]/g},date:{mask:"####-##-## ##:##",allow:/[0-9]/g}};var di="__webix_remote_error";function RemoteContext(i,s){(this||e)._proxy={};(this||e)._queue=[];(this||e)._url=i;(this||e)._key="";s?this._process(s):(this||e)._ready=ajax(i).then((function(e){return e.text()})).then(bind((function(i){i=i.split("/*api*/")[1];this._process(JSON.parse(i));return(this||e)._proxy}),this||e))}RemoteContext.prototype={_process:function(i){i.$key&&((this||e)._key=i.$key);if(i.$vars)for(var s in i.$vars)(this||e)._proxy[s]=i.$vars[s];this._parse(i,(this||e)._proxy,"")},_parse:function(i,s,n){for(var r in i)if("$key"!==r&&"$vars"!==r){var a=i[r];if("object"==_typeof(a)){var o=s[r]={};this._parse(a,o,n+r+".")}else s[r]=this._proxy_call(this||e,n+r)}},_call:function(i,s){var n=this._deffer(this||e,i,s);(this||e)._queue.push(n);this._start_queue();return n},_start_queue:function(){(this||e)._timer||((this||e)._timer=setTimeout(bind((this||e)._run_queue,this||e),1))},_run_queue:function(){var i=[],s=(this||e)._queue;for(var n=0;n<(this||e)._queue.length;n++){var r=(this||e)._queue[n];if(r.$sync){s.splice(n,1);n--}else i.push({name:r.$name,args:r.$args})}if(s.length){var a=ajax();var o=this._pack(i);callEvent("onBeforeRemoteCall",[a,o,{}]);var l=a.post((this||e)._url,o).then((function(e){var i=e.json();var n=i.data;for(var r=0;r<n.length;r++){var a=n[r];var o=n[r]&&n[r][di];if(o){callEvent("onRemoteError",[o]);s[r].reject(o)}else s[r].resolve(a)}}),(function(e){for(var i=0;i<s.length;i++)s[i].reject(e);throw e}));callEvent("onAfterRemoteCall",[l])}(this||e)._queue=[];(this||e)._timer=null},_sync:function(){var i=null;(this||e).$sync=true;var s=[{name:(this||e).$name,args:(this||e).$args}];try{var n=ajax();var r=(this||e).$context._pack(s);callEvent("onBeforeRemoteCall",[n,r,{sync:true}]);var a=n.sync().post((this||e).$context._url,r);callEvent("onAfterRemoteCall",[null]);i=JSON.parse(a.responseText).data[0];i[di]&&(i=null)}catch(e){}return i},_deffer:function(i,s,n){var r=Deferred.defer();r.sync=i._sync;r.$name=s;r.$args=n;r.$context=this||e;return r},_proxy_call:function(e,i){return function(){return e._call(i,[].slice.call(arguments))}},_getProxy:function(){return(this||e)._ready||(this||e)._proxy},_pack:function(i){return{key:(this||e)._key,payload:i}}};function getApi(e,i){var s=new RemoteContext(e,i);var n=s._getProxy();for(var r in n)remote[r]=n[r];return n}var remote=function(e,i){if("object"===_typeof(e)){var s=document.getElementsByTagName("script");i=e;e=s[s.length-1].src;return getApi(e,i)}return getApi(e,i)};function send(e,i,s,n){var r=create("FORM",{target:n||"_self",action:e,method:s||"POST"},"");for(var a in i){var o=create("INPUT",{type:"hidden",name:a,value:i[a]},"");r.appendChild(o)}r.style.display="none";document.body.appendChild(r);r.submit();document.body.removeChild(r)}function animate$1(e,i,s){var n=$$(i);if(n){var r=s||{type:"slide",direction:"left"};var a=n._viewobj.cloneNode(true);var o=ui(e,i);o._viewobj.parentNode.appendChild(a);var l=animate.formLine(o._viewobj,a,r);r.callback=function(){animate.breakLine(l)};animate(l,r);return o}}function animateView(i,s,n){i=$$(i);if(i){n=n||{type:"slide",direction:"left"};var getHTML=function(e){var i=e._viewobj;var s=i.className;var n=i.innerHTML;return"<div class='"+s+"' style='width:"+i.offsetWidth+"px;height:"+i.offsetHeight+"px;'>"+n+"</div>"};var r=[];for(var a=0;a<i._viewobj.childNodes.length;a++){var o=i._viewobj.childNodes[a];var l=o.currentStyle?o.currentStyle.display:getComputedStyle(o,null).display;r.push(l||"")}var h=getHTML(i);"function"==typeof s&&s.call(this||e);var _=getHTML(i);var c=i._viewobj.insertBefore(create("DIV",{class:"webix_view_animate",style:"width:"+i._viewobj.offsetWidth+"px;height:"+i._viewobj.offsetHeight+"px;"},_+h),i._viewobj.firstChild);for(var d=1;d<i._viewobj.childNodes.length;d++)i._viewobj.childNodes[d].style.display="none";var u=animate.formLine(c.childNodes[0],c.childNodes[1],n);n.callback=function(){if(c){i._viewobj.removeChild(c);c=null;for(var e=0;e<i._viewobj.childNodes.length;e++)i._viewobj.childNodes[e].style.display=r[e]}};animate(u,n);return i}}function get_orientation(){var e=window.screen.orientation?window.screen.orientation.angle:window.orientation;return!!(e%180)}function orientation_handler(){var e=get_orientation();if(J.orientation!==e){J.orientation=e;callEvent("onRotate",[e])}}if(z.mobile){J.orientation=get_orientation();event$1(window,"resize",orientation_handler)}function fullScreen(){if(z.mobile){addMeta("viewport","initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no");z.fastClick=true;if(z.isMac)addMeta("apple-mobile-web-app-capable","yes");else{addMeta("mobile-web-app-capable","yes");addStyle("body.webix_full_screen{ overflow-y: auto; }")}var fix=function(){var e=window.innerWidth;var i=window.innerHeight;if(i){document.body.style.height=i+"px";document.body.style.width=e+"px"}J._freeze_resize=false;resize()};var onrotate=function(){J._freeze_resize=true;delay(fix,null,[],50)};attachEvent("onRotate",onrotate);orientation_handler();delay(onrotate)}}var fi={textWaitDelay:500,summColumn:{getValue:function(e){return e.innerText},setValue:function(){},refresh:function(e,i,s){var n=0;e.mapCells(null,s.columnId,null,1,(function(e){e*=1;isNaN(e)||(n+=e)}),true);s.format&&(n=s.format(n));s.template&&(n=s.template({value:n}));i.innerHTML=n},trackCells:true,render:function(e,i){i.template&&(i.template=template(i.template));return""}},masterCheckbox:{getValue:function(){},setValue:function(){},getHelper:function(e,i){return{check:function(){i.checked=false;e.onclick()},uncheck:function(){i.checked=true;e.onclick()},isChecked:function(){return i.checked}}},refresh:function(e,i,s){i.onclick=function(){this.getElementsByTagName("input")[0].checked=s.checked=!s.checked;var i=e.getColumnConfig(s.columnId);var n=s.checked?i.checkValue:i.uncheckValue;e.data.each((function(i){i[s.columnId]=n;e.callEvent("onCheck",[i.id,s.columnId,n]);this.callEvent("onStoreUpdated",[i.id,i,"save"])}));e.refresh()}},render:function(e,i){return"<input type='checkbox' "+(i.checked?"checked='1'":"")+">"}},textFilter:{getInputNode:function(e){return e.querySelector("input")||{value:null}},getValue:function(e){return this.getInputNode(e).value},setValue:function(e,i){this.getInputNode(e).value=i},refresh:function(i,s,n){s.component=i._settings.id;i.registerFilter(s,n,this||e);s._comp_id=i._settings.id;n.value&&this.getValue(s)!=n.value&&this.setValue(s,n.value);s.onclick=preventEvent;_event(s,"keydown",(this||e)._on_key_down)},render:function(i,s){(this||e).init&&this.init(s);s.css=(s.css||"")+" webix_ss_filter";return"<input "+(s.placeholder?'placeholder="'+s.placeholder+'" ':"")+"type='text'>"},_on_key_down:function(i){var s=(this||e)._comp_id;if(9!=(i.which||i.keyCode)){(this||e)._filter_timer&&window.clearTimeout((this||e)._filter_timer);(this||e)._filter_timer=window.setTimeout((function(){var e=$$(s);e&&e.filterByAll()}),fi.textWaitDelay)}}},selectFilter:{getInputNode:function(e){return e.querySelector("select")||{value:null}},getValue:function(e){return this.getInputNode(e).value},setValue:function(e,i){this.getInputNode(e).value=i},refresh:function(i,s,n){n.compare=n.compare||function(e,i){return e==i};s.component=i._settings.id;i.registerFilter(s,n,this||e);var r=fi._get_data(i,n);false!==n.emptyOption&&r.unshift({id:"",value:n.emptyOption||""});var a=document.createElement("select");for(var o=0;o<r.length;o++){var l=document.createElement("option");l.value=r[o].id;l.text=r[o].value;a.add(l)}s.innerHTML="";s.appendChild(a);n.value&&this.setValue(s,n.value);s.onclick=preventEvent;a._comp_id=i._settings.id;_event(a,"change",(this||e)._on_change)},render:function(i,s){(this||e).init&&this.init(s);s.css=(s.css||"")+" webix_ss_filter";return""},_on_change:function(){$$((this||e)._comp_id).filterByAll()}},_get_data:function(e,i){var s;var n=i.options;s=n?e._collectValues.call(n,"id","value"):e.collectValues(i.columnId,i.collect);return s}};fi.serverFilter=i.extend({$server:true,_on_key_down:function(i){var s=(this||e)._comp_id,n=i.which||i.keyCode;if(!(9==n||n>=33&&n<=40)){(this||e)._filter_timer&&window.clearTimeout((this||e)._filter_timer);(this||e)._filter_timer=window.setTimeout((function(){$$(s).filterByAll()}),fi.textWaitDelay)}}},fi.textFilter);fi.serverSelectFilter=i.extend({$server:true,_on_change:function(){var i=(this||e)._comp_id;$$(i).filterByAll()}},fi.selectFilter);fi.numberFilter=i.extend({init:function(i){i.prepare=function(s){var n=this||e;var r=-1!=s.indexOf("=");var a=this.format(s);if(""===a)return"";var o;-1!=s.indexOf(">")?o=(this||e)._greater:-1!=s.indexOf("<")&&(o=(this||e)._lesser);i.compare=o&&r?function(e,i){return n._equal(e,i)||o(e,i)}:o||(this||e)._equal;return a}},format:function(e){return e.replace(/[^\-.0-9]/g,"")},_greater:function(e,i){return 1*e>i},_lesser:function(e,i){return""!==e&&1*e<i},_equal:function(e,i){return""!==e&&1*e==i}},fi.textFilter);fi.dateFilter=i.extend({format:function(e){if(""===e)return"";var i=new Date;if(-1!=e.indexOf("today"))i=ii.dayStart(i);else if(-1==e.indexOf("now")){var s=e.match(/[0-9]+/g);if(!s||!s.length)return"";if(s.length<3){s.reverse();i=new Date(s[0],(s[1]||1)-1,1)}else i=u.dateFormatDate(e.replace(/^[>< =]+/,""))}return i.valueOf()}},fi.numberFilter);(z.mobile||z.$customScroll)&&(z.scrollSize=0);ready((function(){z.scrollSize=_detectScrollSize()}));function _detectScrollSize(){var e=create("div");e.className="webix_skin_mark";e.style.cssText="position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;";document.body.appendChild(e);var i=e.offsetWidth-e.clientWidth;var s={200:"flat",210:"compact",230:"contrast",240:"material",250:"mini"}[10*Math.floor(e.offsetHeight/10)];document.body.removeChild(e);s&&set$1(s);return z.$customScroll?0:i}var gi=false;function _fixHeight(){if(!gi){addStyle("html, body{ height:100%; }");document.body.className+=" webix_full_screen";Vt.limit(false);gi=true}}define("_fixHeight",_fixHeight);ui.animate=animate$1;ui.animateView=animateView;ui.freeze=freeze;ui.resize=resize;ui.zIndex=zIndex;ui.datafilter=fi;ui.fullScreen=fullScreen;var vi={groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d.%n.%Y",timeFormat:"%H:%i",longDateFormat:"%j. %F %Y",fullDateFormat:"%j. %F %Y %H:%i",am:null,pm:null,price:"{obj} ",priceSettings:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2},calendar:{monthFull:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthShort:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayFull:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayShort:["So","Mo","Di","Mi","Do","Fr","Sa"],hours:"Stunden",minutes:"Minuten",done:"Fertig",clear:"Entfernen",today:"Heute"},dataExport:{page:"Seite",of:"von"},PDFviewer:{of:"von",automaticZoom:"Automatisch Zoom",actualSize:"Aktuelles Ausma",pageFit:"Seite Ausma",pageWidth:"Seite Breite",pageHeight:"Seite Hhe",enterPassword:"Passwort eingeben",passwordError:"Falsches passwort"},aria:{calendar:"Kalender",increaseValue:"Wert erhhen",decreaseValue:"Wert verringern",navMonth:["Vorheriger Monat","Nchsten Monat"],navYear:["Vorheriges Jahr","Nchstes Jahr"],navDecade:["Zurck Jahrzehnt","Als nchstes Jahrzehnt"],dateFormat:"%j. %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Stunden: %H",minuteFormat:"Minuten: %i",removeItem:"Element entfernen",pages:["Erste Seite","Vorherige Seite","Folgeseite","Letzte Seite"],page:"Seite",headermenu:"Titelmen",openGroup:"ffnen Spaltengruppe ",closeGroup:"Schlieen Spaltengruppe ",closeTab:"Tab schlieen",showTabs:"Weitere Tabs",resetTreeMap:"Zurck zur ursprnglichen Ansicht",navTreeMap:"Aufleveln",nextTab:"Weiter tab",prevTab:"Zurck tab",multitextSection:"Element hinzufgen",multitextextraSection:"Element entfernen",showChart:"Chart anzeigen",hideChart:"Chart verstecken",resizeChart:"Chart Gre ndern"},richtext:{underline:"Unterstreichen",bold:"Fettgedruckt",italic:"Kursiv"},combo:{select:"Auswhlen",selectAll:"Alles auswhlen",unselectAll:"Alles widerrufen"},message:{ok:"OK",cancel:"Abbrechen"},comments:{send:"Absenden",confirmMessage:"Der Kommentar wird entfernt. Sind Sie sicher?",edit:"Redigieren",remove:"Lschen",placeholder:"Geben Sie hier ein..",moreComments:"Mehr Kommentare"},filter:{less:"weniger",lessOrEqual:"weniger oder gleich",greater:"mehr",greaterOrEqual:"grer oder gleich",contains:"enthlt",notContains:"nicht enthlt",equal:"gleich",notEqual:"ungleich",beginsWith:"beginnt mit",notBeginsWith:"nicht beginnt mit",endsWith:"endet mit",notEndsWith:"nicht endet mit",between:"zwischen",notBetween:"nicht zwischen"},timeboard:{seconds:"Sekunden"}};var pi={groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%n/%Y",timeFormat:"%G:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d %F %Y %G:%i",am:null,pm:null,price:"{obj} ",priceSettings:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2},calendar:{monthFull:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],dayFull:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],dayShort:["dom","lun","mar","mi","jue","vie","sb"],hours:"Horas",minutes:"Minutos",done:"Listo",clear:"Reinicio",today:"Hoy"},dataExport:{page:"Pgina",of:"de"},PDFviewer:{of:"de",automaticZoom:"Zoom automtico",actualSize:"Tamao real",pageFit:"Tamao de pgina",pageWidth:"Ancho de pgina",pageHeight:"Altura de la pgina",enterPassword:"Introduzca la contrasea",passwordError:"Contrasea incorrecta"},aria:{calendar:"alendario",increaseValue:"Aumentar el valor",decreaseValue:"Disminuye el valor",navMonth:["Mes anterior","Prximo mes"],navYear:["Ao anterior","Prximo ao"],navDecade:["Dcada anterior","Prxima dcada"],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Horas: %G",minuteFormat:"Minutos: %i",removeItem:"Retire el elemento",pages:["Primera pgina","Pagina anterior","Siguiente pgina","ltima pgina"],page:"Pgina",headermenu:"Men de ttulos",openGroup:"Grupo de columnas abiertas",closeGroup:"Primer grupo de columnas",closeTab:"Cerrar tab",showTabs:"Mostrar ms tabs",resetTreeMap:"Volver a la vista original",navTreeMap:"Elevar a mismo nivel",nextTab:"Siguiente tab",prevTab:"Tab anterior",multitextSection:"Aadir elemento",multitextextraSection:"Retire el elemento",showChart:"Espectculo chart",hideChart:"Esconder chart",resizeChart:"Cambiar el tamao el chart"},richtext:{underline:"Subrayar",bold:"Negrita",italic:"Itlico"},combo:{select:"Seleccionar",selectAll:"Seleccionar todo",unselectAll:"Deselecciona todo"},message:{ok:"OK",cancel:"Cancelar"},comments:{send:"Enviar",confirmMessage:"El comentario ser eliminado. Ests seguro?",edit:"Corregir",remove:"Suprimir",placeholder:"Escriba aqu..",moreComments:"Ms comentarios"},filter:{less:"menos",lessOrEqual:"menor o igual",greater:"mayor",greaterOrEqual:"mayor o igual",contains:"contiene",notContains:"not contiene",equal:"igual",notEqual:"no es igual",beginsWith:"comienza con",notBeginsWith:"no comienza con",endsWith:"termina con",notEndsWith:"no termina con",between:"entre",notBetween:"no entre"},timeboard:{seconds:"segundos"}};var mi={groupDelimiter:" ",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",price:"{obj} ",priceSettings:null,calendar:{monthFull:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],monthShort:["Jan","Fv","Mar","Avr","Mai","Juin","Juil","Au","Sep","Oct","Nov","Dc"],dayFull:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],hours:"Heures",minutes:"Minutes",done:"Fini",clear:"Effacer",today:"Aujourd'hui"},dataExport:{page:"Page",of:"sur"},PDFviewer:{of:"sur",automaticZoom:"Zoom automatique",actualSize:"Taille actuelle",pageFit:"Taille de la page",pageWidth:"Largeur de la page",pageHeight:"Hauteur de page",enterPassword:"Entrez le mot de passe",passwordError:"Mauvais mot de passe"},aria:{calendar:"alendrier",increaseValue:"Augmenter la valeur",decreaseValue:"Diminution de la valeur",navMonth:["Le mois prcdent","Le mois prochain"],navYear:["Anne prcdente","L'anne prochaine"],navDecade:["Dcennie prcdente","Suivant dcennie"],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Heures: %H",minuteFormat:"Minutes: %i",removeItem:"Retirer l'lment",pages:["Premire page","Page prcdente","Page suivante","Dernire page"],page:"Page",headermenu:"Menu de titre",openGroup:"Ouvrir groupe de colonnes ",closeGroup:"Fermer groupe de colonnes",closeTab:"Fermer tab",showTabs:"Montrer plus tabs",resetTreeMap:"Revenir  la vue originale",navTreeMap:"Niveau suprieur",nextTab:"Prochain tab",prevTab:"Prcdent tab",multitextSection:"Ajouter l'lment",multitextextraSection:"Retirer l'lment",showChart:"Montrer chart",hideChart:"Cacher chart",resizeChart:"Redimensionner chart"},richtext:{underline:"Souligner",bold:"Gras",italic:"Italique"},combo:{select:"Slectionner",selectAll:"Tout slectionner",unselectAll:"Tout dselectionner"},message:{ok:"OK",cancel:"Annuler"},comments:{send:"Envoyer",confirmMessage:"Le commentaire sera supprim. tes-vous sr?",edit:"Modifier",remove:"Effacer",placeholder:"crivez ici..",moreComments:"Plus de commentaires"},filter:{less:"moins",lessOrEqual:"infrieur ou gal",greater:"plus grand",greaterOrEqual:"suprieur ou gal",contains:"contient",notContains:"ne contient",equal:"gal",notEqual:"pas gal",beginsWith:"commence par",notBeginsWith:"ne commence par",endsWith:"se termine par",notEndsWith:"pas se termine par",between:"entre",notBetween:"pas entre"},timeboard:{seconds:"secondes"}};var bi={groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%H:%i",longDateFormat:"%j %F %Y",fullDateFormat:"%j %F %Y %H:%i",am:null,pm:null,price:" {obj}",priceSettings:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2},calendar:{monthFull:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],monthShort:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],dayFull:["domenica","luned","marted","mercoled","gioved","venerd","sabato"],dayShort:["dom","lun","mar","mer","gio","ven","sab"],hours:"Orario",minutes:"Minuti",done:"Pronto",clear:"Pulisci",today:"Oggi"},dataExport:{page:"Pagina",of:"di"},PDFviewer:{of:"di",automaticZoom:"Zoom automatico",actualSize:"Dimensione reale",pageFit:"Dimensioni della pagina",pageWidth:"Larghezza della pagina",pageHeight:"Altezza della pagina",enterPassword:"Inserisci la password",passwordError:"Password errata"},aria:{calendar:"Calendario",increaseValue:"Aumenta il valore",decreaseValue:"Riduci il valore",navMonth:["Il mese scorso","Il prossimo mese"],navYear:["L'anno scorso","L'anno prossimo"],navDecade:["Decennio precedente","Prossimo decennio"],dateFormat:"%j %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Orario: %H",minuteFormat:"Minuti: %i",removeItem:"Rimuovere l'elemento",pages:["Prima pagina","Pagina precedente","Pagina successiva","Ultima pagina"],page:"Pagina",headermenu:"Menu del titolo",openGroup:"Aperto gruppo di colonne",closeGroup:"Chiudi gruppo di colonne",closeTab:"Chiudi tab",showTabs:"Mostra pi tabs",resetTreeMap:"Tornare alla vista originale",navTreeMap:"Livello superiore",nextTab:"Tab successivo",prevTab:"Tab precedente",multitextSection:"Aggiungi elemento",multitextextraSection:"Rimuovere l'elemento",showChart:"Mostrare grafico",hideChart:"Nascondere grafico",resizeChart:"Ridimensionare grafico"},richtext:{underline:"Sottolineare",bold:"Grassetto",italic:"Corsivo"},combo:{select:"Selezionare",selectAll:"Seleziona tutto",unselectAll:"Deseleziona tutto"},message:{ok:"OK",cancel:"Annullare"},comments:{send:"Inviare",confirmMessage:"Il commento verr rimosso. Sei sicuro?",edit:"Correggere",remove:"Elimina",placeholder:"Digitare qui..",moreComments:"Altri commenti"},filter:{less:"meno",lessOrEqual:"minore o uguale",greater:"maggiore",greaterOrEqual:"maggiore o uguale",contains:"contiene",notContains:"non contiene",equal:"uguale",notEqual:"non uguale",beginsWith:"inizia con",notBeginsWith:"non inizia con",endsWith:"finisce con",notEndsWith:"non termina con",between:"tra",notBetween:"non tra"},timeboard:{seconds:"secondi"}};var wi={groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2,dateFormat:"%Y.%m.%d",timeFormat:"%H:%i",longDateFormat:"%Y%m%d",fullDateFormat:"%Y.%m.%d %H:%i",price:"{obj}",priceSettings:{groupSize:3,groupDelimiter:",",decimalDelimiter:"",decimalSize:0},calendar:{monthFull:["1","2","3","4","5","6","7","8","9","10","11","12"],monthShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayFull:["","","","","","",""],dayShort:["","","","","","",""],hours:"",minutes:"",done:"",clear:"",today:""},dataExport:{page:"",of:""},PDFviewer:{of:"",automaticZoom:"",actualSize:"",pageFit:"",pageWidth:"",pageHeight:"",enterPassword:"",passwordError:""},aria:{calendar:"",increaseValue:"",decreaseValue:"",navMonth:["",""],navYear:["",""],navDecade:["","10"],dateFormat:"%Y%m%d",monthFormat:"%Y%m",yearFormat:"%Y",hourFormat:": %H",minuteFormat:": %i",removeItem:"",pages:["","","",""],page:"",headermenu:"",openGroup:"",closeGroup:"",closeTab:"",showTabs:"",resetTreeMap:"",navTreeMap:"",nextTab:"",prevTab:"",multitextSection:"",multitextextraSection:"",showChart:"",hideChart:"",resizeChart:""},richtext:{underline:"",bold:"",italic:""},combo:{select:"",selectAll:"",unselectAll:""},message:{ok:"OK",cancel:""},comments:{send:"",confirmMessage:". ",edit:"",remove:"",placeholder:"..",moreComments:""},filter:{less:"",lessOrEqual:"",greater:"",greaterOrEqual:"",contains:"",notContains:"",equal:"",notEqual:"",beginsWith:"",notBeginsWith:"",endsWith:"",notEndsWith:"",between:"",notBetween:""},timeboard:{seconds:""}};var xi={groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%G:%i",longDateFormat:"%d de %F de %Y",fullDateFormat:"%d de %F de %Y %G:%i",am:null,pm:null,price:"R$ {obj}",priceSettings:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2},fileSize:["b","Kb","Mb","Gb","Tb","Pb","Eb"],calendar:{monthFull:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayFull:["Domingo","Segunda-Feira","Tera-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","Sbado"],dayShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],hours:"Horas",minutes:"Minutos",done:"Feito",clear:"Limpar",today:"Hoje"},dataExport:{page:"Pgina",of:"de"},PDFviewer:{of:"de",automaticZoom:"Zoom automtico",actualSize:"Tamanho atual",pageFit:"Tamanho da pgina",pageWidth:"Largura da pgina",pageHeight:"Altura da pgina",enterPassword:"Digite a senha",passwordError:"Senha incorreta"},aria:{calendar:"Calendrio",increaseValue:"Aumentar o valor",decreaseValue:"Diminuir o valor",navMonth:["Ms anterior","Prximo ms"],navYear:["Ano anterior","Prximo ano"],navDecade:["Dcada anterior","Prxima dcada"],dateFormat:"%d de %F de %Y",monthFormat:"%F de %Y",yearFormat:"%Y",hourFormat:"Horas: %G",minuteFormat:"Minutos: %i",removeItem:"Remover elemento",pages:["Primeira pgina","Pgina anterior","Prxima pgina","ltima pgina"],page:"Pgina",headermenu:"Menu de ttulos",openGroup:"Grupo coluna aberta",closeGroup:"Fechar grupo de colunas",closeTab:"Fechar tab",showTabs:"Mostre mais tabs",resetTreeMap:"oltar  vista original",navTreeMap:"Upar",nextTab:"Prximo tab",prevTab:"Anterior tab",multitextSection:"Adicionar elemento",multitextextraSection:"Remover elemento",showChart:"Exposio chart",hideChart:"Esconder chart",resizeChart:"Redimensionar chart"},richtext:{underline:"Sublinhado",bold:"Negrito",italic:"itlico"},combo:{select:"Selecionar",selectAll:"Selecionar tudo",unselectAll:"Desmarque todos"},message:{ok:"OK",cancel:"Cancelar"},comments:{send:"Enviar",confirmMessage:"Comentrio ser removido. Voc tem certeza?",edit:"Editar",remove:"Excluir",placeholder:"Digite aqui..",moreComments:"Mais comentrios"},filter:{less:"menos",lessOrEqual:"menor ou igual",greater:"maior",greaterOrEqual:"maior ou igual",contains:"contm",notContains:"no contm",equal:"igual",notEqual:"no  igual",beginsWith:"comea com",notBeginsWith:"no comea com",endsWith:"termina com",notEndsWith:"no termina com",between:"entre",notBetween:"no entre"},timeboard:{seconds:"segundos"}};var yi={groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2,dateFormat:"%Y/%m/%j",timeFormat:"%G:%i",longDateFormat:"%Y''%m''%j''",fullDateFormat:"%Y''%m''%j'' %G:%i",am:["",""],pm:["",""],price:"{obj}",priceSettings:{groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2},calendar:{monthFull:["","","","","","","","","","","",""],monthShort:["","","","","","","","","","","",""],dayFull:["","","","","","",""],dayShort:["","","","","","",""],hours:"",minutes:"",done:"",clear:"",today:""},dataExport:{page:"",of:""},PDFviewer:{of:"",automaticZoom:"",actualSize:"",pageFit:"",pageWidth:"",pageHeight:"",enterPassword:"",passwordError:""},aria:{calendar:"",increaseValue:"",decreaseValue:"",navMonth:["",""],navYear:["",""],navDecade:["",""],dateFormat:"%Y''%m''%j''",monthFormat:"%Y''%m'",yearFormat:"%Y'",hourFormat:": %G",minuteFormat:": %i",removeItem:"",pages:["","","",""],page:"",headermenu:"",openGroup:"",closeGroup:"",closeTab:"",showTabs:"",resetTreeMap:"",navTreeMap:"",nextTab:"",prevTab:"",multitextSection:"",multitextextraSection:"",showChart:"",hideChart:"",resizeChart:""},richtext:{underline:"",bold:"",italic:""},combo:{select:"",selectAll:"",unselectAll:""},message:{ok:"",cancel:""},comments:{send:"",confirmMessage:"?",edit:"",remove:"",placeholder:"..",moreComments:""},filter:{less:"",lessOrEqual:"",greater:"",greaterOrEqual:"",contains:"",notContains:"",equal:"",notEqual:"",beginsWith:"",notBeginsWith:"",endsWith:"",notEndsWith:"",between:"",notBetween:""},timeboard:{seconds:""}};var Si={groupDelimiter:" ",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d.%m.%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",price:"{obj} .",priceSettings:null,calendar:{monthFull:["","","","","Ma","","","","","O","",""],monthShort:["","","Ma","A","Ma","","","A","","","",""],dayFull:["","","","","","",""],dayShort:["","","","","","",""],hours:"",minutes:"",done:"oo",clear:"",today:""},dataExport:{page:"",of:""},PDFviewer:{of:"",automaticZoom:" ",actualSize:" ",pageFit:" ",pageWidth:" ",pageHeight:" ",enterPassword:" ",passwordError:" "},aria:{calendar:"",increaseValue:" ",decreaseValue:" ",navMonth:[" "," "],navYear:[" "," "],navDecade:["  ","  "],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:": %H",minuteFormat:": %i",removeItem:" ",pages:[" "," "," "," "],page:"",headermenu:"  ",openGroup:"  ",closeGroup:"  ",closeTab:" ",showTabs:"  ",resetTreeMap:"   ",navTreeMap:"   ",nextTab:" ",prevTab:" ",multitextSection:" ",multitextextraSection:" ",showChart:" ",hideChart:" ",resizeChart:"  "},richtext:{underline:"",bold:"",italic:""},combo:{select:"",selectAll:" ",unselectAll:" "},message:{ok:"OK",cancel:""},comments:{send:"",confirmMessage:"  .  ?",edit:"",remove:"",placeholder:" ..",moreComments:" "},filter:{less:"",lessOrEqual:"  ",greater:"",greaterOrEqual:"  ",contains:"",notContains:" ",equal:"",notEqual:" ",beginsWith:" ",notBeginsWith:"  ",endsWith:"",notEndsWith:" ",between:"",notBetween:" "},timeboard:{seconds:""}};var $i={groupDelimiter:" ",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d.%m.%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",price:"{obj} .",priceSettings:{groupSize:3,groupDelimiter:" ",decimalDelimiter:"",decimalSize:0},calendar:{monthFull:["","","","","","","","","","","",""],monthShort:["","","","","","","","","","","",""],dayFull:["","","","","","",""],dayShort:["","","","","","",""],hours:"",minutes:"",done:"",today:"C",clear:""},dataExport:{page:"",of:""},PDFviewer:{of:"",automaticZoom:" ",actualSize:" ",pageFit:" ",pageWidth:" ",pageHeight:" ",enterPassword:" ",passwordError:" "},aria:{calendar:"",increaseValue:" ",decreaseValue:" ",navMonth:[" "," "],navYear:[" "," "],navDecade:["  ","  "],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Hours: %h",minuteFormat:": %i",removeItem:" ",pages:[" "," "," "," "],page:"",headermenu:" ",openGroup:"  ",closeGroup:"  ",closeTab:" ",showTabs:"  ",resetTreeMap:"   ",navTreeMap:"   ",nextTab:" ",prevTab:" ",multitextSection:" ",multitextextraSection:" ",showChart:" ",hideChart:" ",resizeChart:"  "},richtext:{underline:"",bold:"",italic:""},combo:{select:"",selectAll:" ",unselectAll:" "},message:{ok:"",cancel:""},comments:{send:"",confirmMessage:"  .  ?",edit:"",remove:"",placeholder:" ..",moreComments:" "},filter:{less:"",lessOrEqual:"  ",greater:"",greaterOrEqual:"  ",contains:"",notContains:" ",equal:"",notEqual:" ",beginsWith:" ",notBeginsWith:"  ",endsWith:"",notEndsWith:" ",between:"",notBetween:" "},timeboard:{seconds:""}};u.locales["de-DE"]=vi;u.locales["es-ES"]=pi;u.locales["fr-FR"]=mi;u.locales["it-IT"]=bi;u.locales["ja-JP"]=wi;u.locales["pt-BR"]=xi;u.locales["zh-CN"]=yi;u.locales["ru-RU"]=Si;u.locales["be-BY"]=$i;var Ci={name:"baselayout",restore:function(i,s,n){var r=this._restore(copy(i),s);if(n)return r;ui(r.cols||r.rows,this||e)},_restore:function(i,s){if(!i.$layout)return s.call(this||e,i);var n=i.cols||i.rows;for(var r=0;r<n.length;r++)n[r]=this._restore(n[r],s);return i},serialize:function(i){var s=[];var n=this.getChildViews();for(var r=0;r<n.length;r++){var a=n[r];if(a.movePortlet){var o=a.getChildViews();s.push(i.call(this||e,o[o.length-1]))}else a.serialize?s.push(a.serialize(i,true)):s.push(i.call(this||e,a))}var l={$layout:true,type:(this||e).config.type};(this||e).config.rows?l.rows=s:l.cols=s;return l},$init:function(s){(this||e).$ready.push((this||e)._parse_cells);(this||e)._dataobj=(this||e)._contentobj;(this||e)._layout_sizes=[];(this||e)._responsive=[];(this||e)._padding={top:0,left:0,right:0,bottom:0};if(s.$topView){s.borderless=true;s._inner={top:true,left:true,bottom:true,right:true}}s.isolate&&i.extend(this||e,ge)},rows_setter:function(i){(this||e)._vertical_orientation=1;(this||e)._collection=i;return true},cols_setter:function(i){(this||e)._vertical_orientation=0;(this||e).$view.style.whiteSpace="nowrap";(this||e)._collection=i;return true},_remove:function(i){var s=d.find.call((this||e)._cells,i);(this||e)._beforeRemoveView&&this._beforeRemoveView(s);d.removeAt.call((this||e)._cells,s);this._fix_hidden_cells(true)},_fix_hidden_cells:function(i){(this||e)._hiddencells=0;for(var s=0;s<(this||e)._cells.length;s++){var n=(this||e)._cells[s];(n._settings.hidden||n.$nospace)&&(this||e)._hiddencells++}i&&this.resizeChildren(true)},_replace:function(i,s){if(isUndefined(s)){for(var n=0;n<(this||e)._cells.length;n++)(this||e)._cells[n].destructor();(this||e)._collection=i;this._parse_cells()}else{var r;if("number"==typeof s){(s<0||s>(this||e)._cells.length)&&(s=(this||e)._cells.length);d.insertAt.call((this||e)._cells,i,s);i._settings.hidden||this._insertBeforeView(i,(this||e)._cells[s])}else{r=$$(s);s=d.find.call((this||e)._cells,r);assert(-1!=s,"Attempt to replace the non-existing view");i._settings.hidden||this._insertBeforeView(i,r);r.destructor();(this||e)._cells[s]=i}(this||e)._vertical_orientation||this._fix_vertical_layout(i)}this._fix_hidden_cells(true);var a=(this||e).elements?this||e:this.getFormView();a&&!(this||e)._fill_data&&a._recollect_elements();callEvent("onReconstruct",[this||e])},_fix_vertical_layout:function(e){e._viewobj.style.display="inline-block";e._viewobj.style.verticalAlign="top"},addView:function(i,s){isUndefined(s)&&(s=(this||e)._cells.length);var n=(this||e).$$?this||e:this.getTopParentView();J._parent_cell=this||e;var r=n&&n.ui?n.ui(i,this||e,s):ui(i,this||e,s);J._parent_cell=null;return r._settings.id},removeView:function(i){var s;s="object"!=_typeof(i)?$$(i)||((this||e).$$?this.$$(i):null):i;var n=d.find.call((this||e)._cells,s);if(n>=0){(this||e)._beforeRemoveView&&this._beforeRemoveView(n,s);var r=(this||e).elements?this||e:this.getFormView();(this||e)._cells.splice(n,1);r&&_each(s,(function(e){e.name&&delete r.getCleanValues()[e.config.name]}),r,true);s.destructor();this._fix_hidden_cells(true);r&&r._recollect_elements()}else assert(false,"Attemp to remove not existing view: "+i);callEvent("onReconstruct",[this||e])},reconstruct:function(){(this||e)._hiddencells=0;this._replace((this||e)._collection)},_hide:function(i,s,n){if(!i._settings.hidden){i._settings.hidden=true;remove(i._viewobj);(this||e)._hiddencells++;n||J._ui_creation||this.resizeChildren(true)}},_signal_hidden_cells:function(e){e.callEvent&&e.callEvent("onViewShow",[])},resizeChildren:function(){if(!J._freeze_resize&&(this||e)._layout_sizes){var i=this.getParentView();if(i)return i.resizeChildren?i.resizeChildren():i.resize();var s=this.$getSize(0,0);var n,r,a,o;a=n=(this||e)._layout_sizes[0]||0;o=r=(this||e)._layout_sizes[1]||0;if((s[1]>=1e5||s[3]>=1e5)&&(this||e)._viewobj.parentNode){a=n=Math.max(s[0],(this||e)._settings.width||(this||e)._viewobj.parentNode.offsetWidth||n||0);o=r=Math.max(s[2],(this||e)._settings.height||(this||e)._viewobj.parentNode.offsetHeight||r||0)}if(i)this._set_child_size(n,r);else{s[0]>n&&(a=s[0]);s[2]>r&&(o=s[2]);var l=(this||e)._viewobj.parentNode==document.body&&!(this||e).setPosition;!l&&n>s[1]&&(a=s[1]);!l&&r>s[3]&&(o=s[3]);this.$setSize(a,o)}if(J._responsive_exception){J._responsive_exception=false;this.resizeChildren()}callEvent("onResize",[])}},getChildViews:function(){return(this||e)._cells},index:function(i){i._settings&&(i=i._settings.id);for(var s=0;s<(this||e)._cells.length;s++)if((this||e)._cells[s]._settings.id==i)return s;return-1},_insertBeforeView:function(i,s){if(s)if(s._settings.hidden||i===s){var n=this.index(s)+1;while((this||e)._cells[n]&&(this||e)._cells[n]._settings.hidden)n++;s=(this||e)._cells[n]?(this||e)._cells[n]._viewobj:null}else s=s._viewobj;insertBefore(i._viewobj,s,(this||e)._dataobj||(this||e)._viewobj)},_show:function(i,s,n){if(i._settings.hidden){this._insertBeforeView(i,i);i._settings.hidden=false;(this||e)._hiddencells--;if(!n){this.resizeChildren(true);i.refresh&&i.refresh()}if(i.callEvent){i.callEvent("onViewShow",[]);_each(i,(this||e)._signal_hidden_cells)}}},showBatch:function(i,s){var n="undefined"!=typeof s;s=false!==s;if(n)(this||e)._settings.visibleBatch="";else{if((this||e)._settings.visibleBatch==i)return;(this||e)._settings.visibleBatch=i}var r=[];for(var a=0;a<(this||e)._cells.length;a++)(this||e)._cells[a]._settings.batch||(this||e)._cells[a]._settings.hidden?(this||e)._cells[a]._settings.batch==i?s?r.push((this||e)._cells[a]):this._hide((this||e)._cells[a],null,true):n||this._hide((this||e)._cells[a],null,true):r.push((this||e)._cells[a]);for(var o=0;o<r.length;o++){this._show(r[o],null,true);r[o]._render_hidden_views()}this.resizeChildren(true)},_parse_cells:function(i){(this||e)._cells=[];assert(i,(this||e).name+" was incorrectly defined. <br><br> You have missed rows|cols|cells|elements collection");for(var s=0;s<i.length;s++){J._parent_cell=this||e;i[s]._inner||(i[s].borderless=true);(this||e)._cells[s]=ui._view(i[s],this||e);(this||e)._vertical_orientation||this._fix_vertical_layout((this||e)._cells[s]);(this||e)._settings.visibleBatch&&(this||e)._settings.visibleBatch!=(this||e)._cells[s]._settings.batch&&(this||e)._cells[s]._settings.batch&&((this||e)._cells[s]._settings.hidden=true);(this||e)._cells[s]._settings.hidden||((this||e)._dataobj||(this||e)._contentobj).appendChild((this||e)._cells[s]._viewobj)}this._fix_hidden_cells();(this||e)._parse_cells_ext_end&&this._parse_cells_ext_end(i)},_fix_container_borders:function(e,i){i.top&&(e.borderTopWidth="0px");i.left&&(e.borderLeftWidth="0px");i.right&&(e.borderRightWidth="0px");i.bottom&&(e.borderBottomWidth="0px")},_bubble_size:function(i,s,n){if((this||e)._vertical_orientation!=n)for(var r=0;r<(this||e)._cells.length;r++){(this||e)._cells[r]._settings[i]=s;(this||e)._cells[r]._bubble_size&&(this||e)._cells[r]._bubble_size(i,s,n)}},$getSize:function(i,s){debug_size_box_start(this||e,true);var n=0;var r=1e5;var a=1e5;var o=0;(this||e)._vertical_orientation?a=0:r=0;var l=0;var h=0;var _=0;(this||e)._sizes=[];for(var c=0;c<(this||e)._cells.length;c++)if(!(this||e)._cells[c]._settings.hidden){var d=(this||e)._sizes[c]=(this||e)._cells[c].$getSize(0,0);if((this||e)._cells[c].$nospace)h++;else if((this||e)._vertical_orientation){d[0]>n&&(n=d[0]);d[1]<r&&(r=d[1]);o+=d[2];a+=d[3];if(d[2]==d[3]&&-1!=d[2]){l+=d[2];h++}else _+=d[4]}else{d[2]>o&&(o=d[2]);d[3]<a&&(a=d[3]);n+=d[0];r+=d[1];if(d[0]==d[1]&&-1!=d[0]){l+=d[0];h++}else _+=d[4]}}o>a&&(a=o);n>r&&(r=n);(this||e)._master_size=[l,(this||e)._cells.length-h,_];(this||e)._desired_size=[n+i,o+s];var u=wt.api.$getSize.call(this||e,0,0);u[1]>=1e5&&(u[1]=0);u[3]>=1e5&&(u[3]=0);u[0]=(u[0]||n)+i;u[1]=Math.max(u[0],(u[1]||r)+i);u[2]=(u[2]||o)+s;u[3]=Math.max(u[2],(u[3]||a)+s);debug_size_box_end(this||e,u);!(this||e)._vertical_orientation&&(this||e)._settings.responsive&&(u[0]=0);return u},$setSize:function(i,s){(this||e)._layout_sizes=[i,s];debug_size_box_start(this||e);wt.api.$setSize.call(this||e,i,s);this._set_child_size(i,s);debug_size_box_end(this||e,[i,s])},_set_child_size_a:function(i,s,n){s=i[s];n=i[n];var r=s;if(s!=n){var a=(this||e)._set_size_delta*i[4]/(this||e)._set_size_gravity;if(a<s){r=s;(this||e)._set_size_gravity-=i[4];(this||e)._set_size_delta-=r}else{if(!(a>n))return-1;r=n;(this||e)._set_size_gravity-=i[4];(this||e)._set_size_delta-=r}}return r},_responsive_hide:function(i,s){var n=$$(s);if("hide"!==n&&n){n||(n=ui({view:"popup",body:[{}]}));i._responsive_width=i._settings.width;i._responsive_height=i._settings.height;i._responsive_marker=n._settings.id;i._settings.width=0;i._settings.height||(i._settings.autoheight=true);ui(i,n,(this||e)._responsive.length)}else{i.hide();i._responsive_marker="hide"}(this||e)._responsive.push(i)},_responsive_show:function(i){var s=i._responsive_marker;i._responsive_marker=0;if("hide"!==s&&s){i._settings.width=i._responsive_width;i._settings.height=i._responsive_height;delete i._settings.autoheight;var n=0;while((this||e)._cells[n]&&false===(this||e)._cells[n]._settings.responsiveCell)n++;ui(i,this||e,n)}else i.show();(this||e)._responsive.pop()},_responsive_cells:function(i){J._responsive_tinkery=true;if(i+(this||e)._padding.left+(this||e)._padding.right+(this||e)._margin*((this||e)._cells.length-1)<(this||e)._desired_size[0]){var s=(this||e)._cells.length-1;for(var n=0;n<s;n++){var r=(this||e)._cells[n];if(!r._responsive_marker){if(false!==r._settings.responsiveCell){this._responsive_hide(r,(this||e)._settings.responsive);callEvent("onResponsiveHide",[r._settings.id]);J._responsive_exception=true;break}s=(this||e)._cells.length}}}else if((this||e)._responsive.length){var a=(this||e)._responsive[(this||e)._responsive.length-1];var o="hide"==a._responsive_marker?0:a._responsive_width;var l=a.$getSize(o,0);if(l[0]+(this||e)._desired_size[0]+(this||e)._margin+20<=i){this._responsive_show(a);callEvent("onResponsiveShow",[a._settings.id]);J._responsive_exception=true}}J._responsive_tinkery=false},_set_child_size:function(i,s){J._child_sizing_active=(J._child_sizing_active||0)+1;!(this||e)._vertical_orientation&&(this||e)._settings.responsive&&this._responsive_cells(i,s);(this||e)._set_size_delta=((this||e)._vertical_orientation?s:i)-(this||e)._master_size[0];(this||e)._set_size_gravity=(this||e)._master_size[2];var n=i;var r=s;var a=[];for(var o=0;o<(this||e)._cells.length;o++)if(!(this||e)._cells[o]._settings.hidden&&(this||e)._sizes[o]){var l=(this||e)._sizes[o];if((this||e)._vertical_orientation){r=this._set_child_size_a(l,2,3);if(r<0){a.push({oldIndex:o,view:(this||e)._cells[o]});continue}}else{n=this._set_child_size_a(l,0,1);if(n<0){a.push({oldIndex:o,view:(this||e)._cells[o]});continue}}(this||e)._cells[o].$setSize(n,r)}for(var h=0;h<a.length;h++){var _=a[h].oldIndex;var c=(this||e)._sizes[_];var d=Math.round((this||e)._set_size_delta*c[4]/(this||e)._set_size_gravity);(this||e)._set_size_delta-=d;(this||e)._set_size_gravity-=c[4];(this||e)._vertical_orientation?r=d:n=d;a[h].view.$setSize(n,r)}J._child_sizing_active-=1},_next:function(i,s){var n=this.index(i);return-1==n?null:(this||e)._cells[n+s]},_first:function(){return(this||e)._cells[0]}};var ki=i.protoUI(Ci,f,wt.view);var Ii={api:Ci,view:ki};var Mi={name:"spacer",defaults:{borderless:true},$init:function(){(this||e)._viewobj.className+=" webix_spacer"}};i.protoUI(Mi,St.view);var Ti={name:"template",$init:function(s){var n=(this||e)._template_types[s.type];if(n){n.css&&s.css&&((this||e)._viewobj.className+=" "+n.css);i.extend(s,n);if(s.borderless){delete s._inner;this._set_inner(s)}}if((this||e)._dataobj==(this||e)._viewobj){(this||e)._dataobj=create("DIV");(this||e)._dataobj.className=" webix_template";(this||e)._viewobj.appendChild((this||e)._dataobj)}else(this||e)._dataobj.className+=" webix_template";this.attachEvent("onAfterRender",(this||e)._correct_height)},setValues:function(s,n){(this||e).data=n?i.extend((this||e).data,s,true):s;this.render()},getValues:function(){return(this||e).data},$skin:function(){(this||e)._template_types.header.height=Ht.barHeight-2*Ht.borderWidth;(this||e)._template_types.section.height=Ht.barHeight},_template_types:{header:{css:"webix_header"},section:{css:"webix_section",borderless:true},clean:{css:"webix_clean",borderless:true}},onClick_setter:function(s){(this||e).on_click=i.extend((this||e).on_click||{},s,true);(this||e)._onClick||i.extend(this||e,me);return s},defaults:{template:template.empty},_render_me:function(){(this||e)._not_render_me=false;this._probably_render_me();this.resize()},_probably_render_me:function(){if(!(this||e)._not_render_me){(this||e)._not_render_me=true;this.render()}},src_setter:function(i){(this||e)._not_render_me=true;if(!this.callEvent("onBeforeLoad",[]))return"";ajax(i,bind((function(i){(this||e)._settings.template=template(i);this._render_me();this.callEvent("onAfterLoad",[])}),this||e));return i},content_setter:function(i){if(i){(this||e)._not_render_me=true;(this||e).render=function(){};(this||e)._dataobj.appendChild(toNode(i));this._correct_height()}},refresh:function(){this.render()},setHTML:function(i){(this||e)._settings.template=function(){return i};this.refresh()},setContent:function(i){(this||e)._dataobj.innerHTML="";this.content_setter(i)},$setSize:function(i,s){if(St.api.$setSize.call(this||e,i,s)){this._probably_render_me();if((this||e)._settings.autoheight){var n=this.getTopParentView();clearTimeout(n._template_resize_timer);n._template_resize_timer=delay((this||e).resize,this||e)}return true}},$getSize:function(i,s){!(this||e)._settings.autoheight||(this||e)._settings.type&&"clean"!=(this||e)._settings.type||((this||e)._settings.height=this._get_auto_height());return St.api.$getSize.call(this||e,i,s)},_correct_height:function(){if((this||e)._settings.autoheight){(this||e)._last_size=null;this.resize()}},_get_auto_height:function(){var i;var s=Ht.layoutPadding.space;this._probably_render_me();if(this.isVisible()){(this||e)._dataobj.style.height="auto";i=(this||e)._dataobj.scrollHeight;(this||e)._dataobj.style.height=""}else i=getTextSize(this._toHTML((this||e).data)||(this||e)._dataobj.innerHTML,"webix_template",((this||e).$width||(this.getParentView()?this.getParentView().$width:0))-s).height;return i},_one_time_scroll:true};var Ei=i.protoUI(Ti,$e,kt,L,X,f,St.view);var Ai={api:Ti,view:Ei};var zi={name:"scrollview",defaults:{scroll:"y",scrollSpeed:"300ms"},$init:function(){(this||e)._viewobj.className+=" webix_scrollview"},body_setter:function(i){i.borderless=true;J._parent_cell=this||e;(this||e)._body_cell=ui._view(i);(this||e)._dataobj.appendChild((this||e)._body_cell._viewobj)},getChildViews:function(){return[(this||e)._body_cell]},getBody:function(){return(this||e)._body_cell},resizeChildren:function(){if((this||e)._body_cell){(this||e)._desired_size=(this||e)._body_cell.$getSize(0,0);this._resizeChildren();callEvent("onResize",[])}},_resizeChildren:function(){var i=Math.max((this||e)._content_width,(this||e)._desired_size[0]);var s=Math.max((this||e)._content_height,(this||e)._desired_size[2]);(this||e)._body_cell.$setSize(i,s);var n=this.getScrollState();var r=(this||e)._body_cell._content_height-(this||e)._content_height;r<n.y&&this.scrollTo(null,r);if(J._responsive_exception){J._responsive_exception=false;(this||e)._desired_size=(this||e)._body_cell.$getSize(0,0);this._resizeChildren()}},$getSize:function(i,s){var n=(this||e)._desired_size=(this||e)._body_cell.$getSize(0,0);var r=St.api.$getSize.call(this||e,i,s);var a=(this||e)._native_scroll||z.scrollSize;if("x"==(this||e)._settings.scroll){r[2]=Math.max(r[2],n[2])+a;r[3]=Math.min(r[3],n[3])+a}else if("y"==(this||e)._settings.scroll){r[0]=Math.max(r[0],n[0])+a;r[1]=Math.min(r[1],n[1])+a}return r},$setSize:function(i,s){var n=z.scrollSize;z.scrollSize=(this||e)._native_scroll||n;(St.api.$setSize.call(this||e,i,s)||J._force_resize)&&this._resizeChildren();z.scrollSize=n},scroll_setter:function(i){var s=z.$customScroll;if("string"==typeof i&&0===i.indexOf("native-")){(this||e)._native_scroll=17;i=i.replace("native-","");z.$customScroll=false}i=$e.scroll_setter.call(this||e,i);z.$customScroll=s;return i},_replace:function(i){(this||e)._body_cell.destructor();(this||e)._body_cell=i;(this||e)._dataobj.appendChild((this||e)._body_cell._viewobj);this.resizeChildren()},showView:function(e){var i=$$(e).$view.offsetTop-$$(e).$view.parentNode.offsetTop;this.scrollTo(0,i)}};i.protoUI(zi,$e,f,St.view);var Hi={name:"iframe",$init:function(){(this||e)._dataobj=(this||e)._contentobj;(this||e)._contentobj.innerHTML="<iframe style='width:100%; height:100%' frameborder='0' onload='var t = $$(this.parentNode.getAttribute(\"view_id\")); if (t) t.callEvent(\"onAfterLoad\",[]);' src='about:blank'></iframe>"},load:function(e){this.src_setter(e)},src_setter:function(e){if(!this.callEvent("onBeforeLoad",[]))return"";this.getIframe().src=e;return e},getIframe:function(){return(this||e)._contentobj.getElementsByTagName("iframe")[0]},getWindow:function(){return this.getIframe().contentWindow}};i.protoUI(Hi,St.view,f);var ji={name:"layout",$init:function(){(this||e)._hiddencells=0},defaults:{type:"line"},_parse_cells:function(){(this||e)._parse_cells_ext&&(s=this._parse_cells_ext(s));if(!(this||e)._parse_once){(this||e)._viewobj.className+=" webix_layout_"+((this||e)._settings.type||"");(this||e)._parse_once=1}void 0!==(this||e)._settings.margin&&((this||e)._margin=(this||e)._settings.margin);void 0!==(this||e)._settings.padding&&"object"!==_typeof((this||e)._settings.padding)&&((this||e)._padding.left=(this||e)._padding.right=(this||e)._padding.top=(this||e)._padding.bottom=(this||e)._settings.padding);void 0!==(this||e)._settings.paddingX&&((this||e)._padding.left=(this||e)._padding.right=(this||e)._settings.paddingX);void 0!==(this||e)._settings.paddingY&&((this||e)._padding.top=(this||e)._padding.bottom=(this||e)._settings.paddingY);"object"===_typeof((this||e)._settings.padding)&&i.extend((this||e)._padding,(this||e)._settings.padding,true);((this||e)._padding.left||(this||e)._padding.right||(this||e)._padding.top||(this||e)._padding.bottom)&&((this||e)._padding.defined=true);if(this._hasBorders()&&!(this||e)._settings.borderless){(this||e)._contentobj.style.borderWidth="1px";(this||e)._render_borders=true}var s=(this||e)._collection;(this||e)._settings.borderless&&((this||e)._settings._inner={top:true,left:true,right:true,bottom:true});this._beforeResetBorders(s);Ii.api._parse_cells.call(this||e,s);this._afterResetBorders(s)},$getSize:function(i,s){i=i||0;s=s||0;var n=(this||e)._margin*((this||e)._cells.length-(this||e)._hiddencells-1);if((this||e)._render_borders||this._hasBorders()){var r=(this||e)._settings._inner;if(r){i+=(r.left?0:1)+(r.right?0:1);s+=(r.top?0:1)+(r.bottom?0:1)}}(this||e)._settings.height||(s+=(this||e)._padding.top+(this||e)._padding.bottom+((this||e)._vertical_orientation?n:0));(this||e)._settings.width||(i+=(this||e)._padding.left+(this||e)._padding.right+((this||e)._vertical_orientation?0:n));return Ii.api.$getSize.call(this||e,i,s)},$setSize:function(i,s){(this||e)._layout_sizes=[i,s];debug_size_box_start(this||e);this._hasBorders()||(this||e)._render_borders?St.api.$setSize.call(this||e,i,s):wt.api.$setSize.call(this||e,i,s);s=(this||e)._content_height;i=(this||e)._content_width;var n=(this||e)._settings;if(n.scroll){s=Math.max(s,(this||e)._desired_size[1]);i=Math.max(i,(this||e)._desired_size[0])}this._set_child_size(i,s);debug_size_box_end(this||e,[i,s])},_set_child_size:function(i,s){var n=(this||e)._margin*((this||e)._cells.length-(this||e)._hiddencells-1);s-=(this||e)._padding.top+(this||e)._padding.bottom;i-=(this||e)._padding.left+(this||e)._padding.right;(this||e)._vertical_orientation?s-=n:i-=n;return Ii.api._set_child_size.call(this||e,i,s)},resizeChildren:function(i){if(i){(this||e)._last_size=null;var s=[];for(var n=0;n<(this||e)._cells.length;n++){var r=(this||e)._cells[n];s[n]=r._settings;var a=r._layout_sizes&&!r._render_borders||r._settings.borderless?"0px":"1px";r._viewobj.style.borderTopWidth=r._viewobj.style.borderBottomWidth=r._viewobj.style.borderLeftWidth=r._viewobj.style.borderRightWidth=a}this._beforeResetBorders(s);for(var o=0;o<s.length;o++)s[o].borderless&&(this||e)._cells[o]._set_inner&&(this||e)._cells[o]._set_inner(s[o]);this._afterResetBorders((this||e)._cells)}J._responsive_tinkery||Ii.api.resizeChildren.call(this||e)},_hasBorders:function(){return(this||e)._padding.defined&&(this||e)._margin>0&&!(this||e)._cleanlayout},_beforeResetBorders:function(i){if(!this._hasBorders()||(this||e)._settings.borderless&&"space"!=(this||e)._settings.type){for(var s=0;s<i.length;s++)i[s]._inner=clone((this||e)._settings._inner);var n=false;(this||e)._cleanlayout&&(n=true);var r=i.length;if((this||e)._vertical_orientation){for(var a=1;a<r-1;a++)i[a]._inner.top=i[a]._inner.bottom=n;if(r>1){"head"!=(this||e)._settings.type&&(i[0]._inner.bottom=n);while(i[r-1].hidden&&r>1)r--;r>0&&(i[r-1]._inner.top=n)}}else{for(var o=1;o<r-1;o++)i[o]._inner.left=i[o]._inner.right=n;if(r>1){"head"!=(this||e)._settings.type&&(i[0]._inner.right=n);i[r-1]._inner.left=n;while(r>1&&i[r-1].hidden)r--;r>0&&(i[r-1]._inner.left=n)}}}else for(var l=0;l<i.length;l++)i[l]._inner&&i[l].borderless||(i[l]._inner={top:false,left:false,right:false,bottom:false})},_afterResetBorders:function(i){var s=0;for(var n=0;n<i.length;n++){var r=(this||e)._cells[n];var a=r._settings._inner;if(r._settings.hidden&&(this||e)._cells[n+1]){var o=(this||e)._cells[n+1]._settings._inner;a.top||(o.top=false);a.left||(o.left=false);n==s&&s++}this._fix_container_borders(r._viewobj.style,r._settings._inner)}var l=(this||e)._vertical_orientation?"marginLeft":"marginTop";var h=(this||e)._vertical_orientation?"marginTop":"marginLeft";var _=(this||e)._vertical_orientation?(this||e)._padding.left:(this||e)._padding.top;var c=(this||e)._vertical_orientation?(this||e)._padding.top:(this||e)._padding.left;for(var d=0;d<i.length;d++)(this||e)._cells[d]._viewobj.style[l]=_+"px";(this||e)._cells.length&&((this||e)._cells[s]._viewobj.style[h]=c+"px");for(var u=s+1;u<i.length;u++)(this||e)._cells[u]._viewobj.style[h]=(this||e)._margin+"px"},type_setter:function(i){(this||e)._margin="undefined"!==typeof(this||e)._margin_set[i]?(this||e)._margin_set[i]:(this||e)._margin_set.line;(this||e)._padding.left=(this||e)._padding.right=(this||e)._padding.top=(this||e)._padding.bottom="undefined"!==typeof(this||e)._margin_set[i]?(this||e)._padding_set[i]:(this||e)._padding_set.line;(this||e)._cleanlayout="material"==i||"clean"==i;"material"==i&&((this||e)._settings.borderless=true);return i},$skin:function(){(this||e)._margin_set=Ht.layoutMargin;(this||e)._padding_set=Ht.layoutPadding}};var Pi=i.protoUI(ji,Ii.view);var Vi={api:ji,view:Pi};Pi.call(-1);var Ni={name:"accordion",defaults:{panelClass:"accordionitem",multi:false,collapsed:false},$init:function(){(this||e)._viewobj.setAttribute("role","tablist");(this||e)._viewobj.setAttribute("aria-multiselectable","true")},_replace:function(i){Vi.api._replace.apply(this||e,arguments);i.collapsed_setter&&i.refresh&&i.refresh()},_parse_cells:function(){var i=(this||e)._settings.panelClass;var s=(this||e)._collection;for(var n=0;n<s.length;n++){!s[n].body&&!s[n].header||s[n].view||s[n].align||(s[n].view=i);isUndefined(s[n].collapsed)&&(s[n].collapsed=(this||e)._settings.collapsed)}(this||e)._skin_render_collapse=true;Vi.api._parse_cells.call(this||e);(this||e)._skin_render_collapse=false;for(var r=0;r<(this||e)._cells.length;r++){(this||e)._cells[r].name==i&&(this||e)._cells[r].refresh();(this||e)._cells[r]._accLastChild=false}var a=false;for(var o=(this||e)._cells.length-1;o>=0&&!a;o--)if(!(this||e)._cells[o]._settings.hidden){(this||e)._cells[o]._accLastChild=true;a=true}},_afterOpen:function(i){if(false===(this||e)._settings.multi&&true!==(this||e)._skin_render_collapse)for(var s=0;s<(this||e)._cells.length;s++)i!=(this||e)._cells[s]&&!(this||e)._cells[s]._settings.collapsed&&(this||e)._cells[s].collapse&&(this||e)._cells[s].collapse();if(i.callEvent){i.callEvent("onViewShow",[]);_each(i,(this||e)._signal_hidden_cells)}},_canCollapse:function(i){if(true===(this||e)._settings.multi||(this||e)._skin_render_collapse)return true;for(var s=0;s<(this||e)._cells.length;s++)if(i!=(this||e)._cells[s]&&!(this||e)._cells[s]._settings.collapsed&&(this||e)._cells[s].isVisible()&&!(this||e)._cells[s].$nospace)return true;return false},$skin:function(){Vi.api.$skin.call(this||e);Ht.accordionType&&((this||e).defaults.type=Ht.accordionType)}};var Di=i.protoUI(Ni,Vi.view);var Li={api:Ni,view:Di};var Bi={name:"headerlayout",defaults:{type:"accordion",multi:"mixed",collapsed:false}};i.protoUI(Bi,Li.view);var Fi={name:"accordionitem",$init:function(i){(this||e)._viewobj.innerHTML="<div tabindex='0' webix_ai_id='"+i.id+"'  class='webix_accordionitem_header'><div class='webix_accordionitem_button' ></div><div class='webix_accordionitem_label' ></div></div><div class='webix_accordionitem_body'></div>";(this||e)._contentobj=(this||e)._viewobj;(this||e)._headobj=(this||e)._contentobj.childNodes[0];i.header||((this||e)._headobj.style.display="none");(this||e)._headlabel=(this||e)._contentobj.childNodes[0].childNodes[1];(this||e)._headbutton=(this||e)._contentobj.childNodes[0].childNodes[0];(this||e)._bodyobj=(this||e)._contentobj.childNodes[1];(this||e)._viewobj.className+=" webix_accordionitem";(this||e)._head_cell=(this||e)._body_cell=null;(this||e)._cells=true;(this||e)._bodyobj.setAttribute("role","tabpanel");(this||e)._headobj.setAttribute("role","tab");this.attachEvent("onKeyPress",(this||e)._onKeyPress)},_remove:function(){this.body_setter()},_replace:function(i){(this||e)._body_cell.destructor();(this||e)._body_cell=i;(this||e)._bodyobj.appendChild((this||e)._body_cell._viewobj);this.resize()},_id:"webix_ai_id",getChildViews:function(){return[(this||e)._body_cell]},body_setter:function(i){"object"!=_typeof(i)&&(i={template:i});i._inner={top:true,left:true,right:true,bottom:true};J._parent_cell=this||e;(this||e)._body_cell=ui._view(i);(this||e)._bodyobj.appendChild((this||e)._body_cell._viewobj);return i},header_setter:function(e){e&&(e=template(e));return e},headerAlt_setter:function(e){e&&(e=template(e));return e},$getSize:function(i,s){var n=(this||e)._body_cell.$getSize(0,0);var r=(this||e)._settings._inner;if(r){i+=(r.left?0:1)+(r.right?0:1);s+=(r.top?0:1)+(r.bottom?0:1)}var a=0;var o=wt.api.$getSize.call(this||e,0,0);o[0]=(o[0]||n[0])+i;o[1]>=1e5&&(o[1]=n[1]);o[1]+=i;o[2]=(o[2]||n[2])+s;var l=o[3]<1e5;l||(o[3]=n[3]);o[3]+=s;if(this.getParentView()._vertical_orientation)(this||e)._settings.collapsed?o[2]=o[3]=this._getHeaderSize()+s:(this||e)._settings.header&&(a=(this||e)._settings.headerHeight);else{(this||e)._settings.collapsed&&(o[0]=o[1]=this._getHeaderSize()+i);(this||e)._settings.header&&(a=(this||e)._settings.headerHeight)}if(!l){o[2]+=a;o[3]+=a}debug_size_box(this||e,o,true);return o},on_click:{webix_accordionitem_header:function(e){this._toggle(e);return false},webix_accordionitem_header_v:function(e){this._toggle(e);return false}},_toggle:function(){this.define("collapsed",!(this||e)._settings.collapsed)},collapsed_setter:function(i){if(false!==(this||e)._settings.header){var s=this.getParentView();if(s){if(i)if(s._canCollapse(this||e))this._collapse();else{var n=0;if(s._cells.length>1)for(var r=0;r<s._cells.length;r++){var a=s._cells[r];if((this||e)!=a&&a.isVisible()&&a.expand){a.expand();this._collapse();n=1;break}}if(!n)return}else this._expand();(this||e)._settings.collapsed=i;i||s._afterOpen(this||e);this.refresh();J._ui_creation||this.resize();s.callEvent("onAfter"+(i?"Collapse":"Expand"),[(this||e)._settings.id]);(this||e)._settings.$noresize=i}return i}},collapse:function(){this.define("collapsed",true);ht._moveChildFocus(this||e)},expand:function(){this.define("collapsed",false)},_show:function(){this.show()},_hide:function(){this.hide()},_expand:function(){(this||e)._bodyobj.style.display="";removeCss((this||e).$view,"collapsed");removeCss((this||e)._headobj,"collapsed");(this||e)._headobj.setAttribute("aria-expanded","true");this._childRefresh((this||e)._body_cell)},_childRefresh:function(i){var s=this||e;if(i.refresh)i.refresh();else if(i.getChildViews){var n=i.getChildViews();n.forEach((function(e){return s._childRefresh(e)}))}},_collapse:function(){(this||e)._settings.headerAlt&&((this||e)._headlabel.innerHTML=(this||e)._settings.headerAlt());(this||e)._bodyobj.style.display="none";addCss((this||e).$view,"collapsed");addCss((this||e)._headobj,"collapsed");(this||e)._headobj.setAttribute("aria-expanded","false")},refresh:function(){var i=(this||e)._settings[(this||e)._settings.collapsed?"headerAlt":"header"]||(this||e)._settings.header;if(i){(this||e)._headlabel.innerHTML=i();(this||e)._headbutton.setAttribute("aria-label",i())}var s=this.getParentView()._vertical_orientation?"vertical":"horizontal";(this||e)._viewobj.className.indexOf(" "+s)<0&&addCss((this||e)._viewobj,s)},_getHeaderSize:function(){return(this||e)._settings.collapsed?(this||e)._settings.headerAltHeight:(this||e)._settings.headerHeight},$setSize:function(i,s){if(St.api.$setSize.call(this||e,i,s)||this._getHeaderSize()!=(this||e)._last_set_header_size){i=(this||e)._content_width;s=(this||e)._content_height;var n=(this||e)._last_set_header_size=this._getHeaderSize();if((this||e)._settings.header){(this||e)._headobj.style.height=n+"px";(this||e)._headobj.style.width="auto";(this||e)._headobj.style[z.transform]="";(this||e)._headobj.style.borderBottomWidth=((this||e)._settings.collapsed?0:1)+"px";if(this.getParentView()._vertical_orientation||!(this||e)._settings.collapsed)s-=this._getHeaderSize();else if((this||e)._settings.collapsed){(this||e)._headobj.style.width=s+"px";(this||e)._headobj.style.height=i+3+"px";var r=Math.floor(s/2-i/2)+(i-(this||e)._settings.headerAltHeight)/2;(this||e)._headobj.style[z.transform]="rotate(90deg) translate("+r+"px, "+(r+1)+"px)"}}if(!(this||e)._settings.collapsed){(this||e)._body_cell.$setSize(i,s);(this||e)._last_size_y=s}}else if(!(this||e)._settings.collapsed){var a=(this||e)._body_cell;(this||e)._last_size_y&&a.$setSize((this||e)._content_width,(this||e)._last_size_y)}},$skin:function(){(this||e).defaults.headerAltHeight=(this||e).defaults.headerHeight=Ht.barHeight-2*Ht.borderWidth},defaults:{header:false,headerAlt:false,body:""}};i.protoUI(Fi,me,f,St.view);var Ri={name:"resizearea",defaults:{dir:"x"},$init:function(i){var s=this||e;var n=i.dir||"x";var r=toNode(i.container);var a="x"==n?"width":"height";var o=i.margin?i.margin+"px":0;(this||e)._key_property="x"==n?"left":"top";(this||e)._viewobj=create("DIV",{class:"webix_resize_area webix_dir_"+n});o&&(o="x"==n?o+" 0 "+o:"0 "+o+" 0 "+o);(this||e)._dragobj=create("DIV",{class:"webix_resize_handle_"+n,style:o?"padding:"+o:""},"<div class='webix_handle_content'></div>");(this||e)._originobj=create("DIV",{class:"webix_resize_origin_"+n});if(i[a]){(this||e)._originobj.style[a]=i[a]+(i.border?1:0)+"px";(this||e)._dragobj.style[a]=i[a]+"px"}i.cursor&&((this||e)._dragobj.style.cursor=(this||e)._originobj.style.cursor=(this||e)._viewobj.style.cursor=i.cursor);(this||e)._moveev=event$1(r,z.mouse.move,(this||e)._onmove,{bind:this||e});(this||e)._upev=event$1(document,z.mouse.up,(this||e)._onup,{bind:this||e});if(z.touch){(this||e)._moveev_t=event$1(r,z.touch.move,(function(e){return s._onmove(e,"touch")}),{passive:false});(this||e)._upev_t=event$1(document,z.touch.up,(this||e)._onup,{bind:this||e})}(this||e)._dragobj.style[(this||e)._key_property]=(this||e)._originobj.style[(this||e)._key_property]=i.start+"px";r.appendChild((this||e)._viewobj);r.appendChild((this||e)._dragobj);r.appendChild((this||e)._originobj)},_onup:function(){this.callEvent("onResizeEnd",[(this||e)._last_result]);eventRemove((this||e)._moveev);eventRemove((this||e)._upev);if(z.touch){eventRemove((this||e)._moveev_t);eventRemove((this||e)._upev_t)}remove((this||e)._viewobj);remove((this||e)._dragobj);remove((this||e)._originobj);(this||e)._viewobj=(this||e)._dragobj=(this||e)._originobj=null},_onmove:function(i,s){var n=pos(i);(this||e)._last_result=("x"==(this||e)._settings.dir?n.x:n.y)+(this||e)._settings.start-(this||e)._settings.eventPos;(this||e)._dragobj.style[(this||e)._key_property]=(this||e)._last_result+"px";this.callEvent("onResize",[(this||e)._last_result]);"touch"===s&&preventEvent(i)}};i.protoUI(Ri,f,_t);var Oi={name:"resizer",defaults:{width:7,height:7},$init:function(i){var s=this||e;assert(this.getParentView(),"Resizer can't be initialized outside a layout");(this||e)._viewobj.className+=" webix_resizer";var n=this.getParentView()._margin;_event((this||e)._viewobj,z.mouse.down,(function(e){return s._rsDown(e,"mouse")}));z.touch&&_event((this||e)._viewobj,z.touch.down,(function(e){return s._rsDown(e,"touch")}));var r=this._getResizeDir();(this||e)._rs_started=false;(this||e)._resizer_dir=r;(this||e)._resizer_dim="x"==r?"width":"height";"x"==r?i.height=0:i.width=0;if(n>0){(this||e)._viewobj.className+=" webix_resizer_v"+r;(this||e)._viewobj.style.marginRight="-"+n+"px";"x"==r?i.width=n:i.height=n;(this||e).$nospace=true}else(this||e)._viewobj.className+=" webix_resizer_"+r;(this||e)._viewobj.innerHTML="<div class='webix_resizer_content'></div>";"y"==r&&n>0&&((this||e)._viewobj.style.marginBottom="-"+(i.height||(this||e).defaults.height)+"px");(this||e)._viewobj.setAttribute("webix_disable_drag","true");(this||e)._viewobj.setAttribute("tabindex","-1");(this||e)._viewobj.setAttribute("aria-grabbed","false")},_rsDown:function(i,s){var n=this||e;var r=this._getResizerCells();if(r&&!(this||e)._settings.disabled){(this||e)._rs_started=true;(this||e)._rs_process=pos(i);(this||e)._rsLimit=[];(this||e)._viewobj.setAttribute("aria-grabbed","true");for(var a=0;a<2;a++)r[a].$view.setAttribute("aria-dropeffect","move");(this||e)._viewobj.setAttribute("aria-dropeffect","move");this._rsStart(i,r[0]);var o=event$1(document,z[s].up,(function(e){eventRemove(o);return n._rsUp(e)}))}},_rsUp:function(){(this||e)._rs_started=false;(this||e)._rs_process=false},_rsStart:function(i,s){var n,r,a,o,l;n=(this||e)._resizer_dir;this.getParentView()._viewobj.style.position="relative";a=offset((this||e)._viewobj);o=offset(this.getParentView()._viewobj);l=a[n]-o[n];r=offset(s.$view)[n]-offset(this.getParentView().$view)[n];(this||e)._rs_progress=[n,s,l,r];(this||e)._resizeStick=new ui.resizearea({container:this.getParentView()._viewobj,dir:n,eventPos:(this||e)._rs_process[n],start:l-1,height:(this||e).$height,width:(this||e).$width,border:1,margin:this.getParentView()._padding["x"===n?"left":"top"]});(this||e)._resizeStick.attachEvent("onResizeEnd",bind((this||e)._rsEnd,this||e));(this||e)._resizeStick.attachEvent("onResize",bind((this||e)._rsResizeHandler,this||e));addCss(document.body,"webix_noselect",1)},_getResizeDir:function(){return this.getParentView()._vertical_orientation?"y":"x"},_rsResizeHandler:function(){var i,s,n,r,a,o,l,h,_;if((this||e)._rs_progress){i=this._getResizerCells();r=(this||e)._rs_progress[0];n=(this||e)._resizeStick._last_result-(this||e)._rs_progress[2];h=this._rsGetDiffCellSizes(i,r,n);_=i[0]["$"+(this||e)._resizer_dim]+i[1]["$"+(this||e)._resizer_dim];for(a=0;a<2;a++){s=a?-n:n;o=i[a].$getSize(0,0);var c="y"==r?o[2]:o[0];var d="y"==r?o[3]:o[1];if(c===d){c=i[a]._settings["y"==r?"minHeight":"minWidth"]||3;d=i[a]._settings["y"==r?"maxHeight":"maxWidth"]||1e5}if(s>0&&d&&d<=h[a]||s<0&&c&&c>=h[a]){(this||e)._rsLimit[a]=s>0?d:c;l=this._rsGetLimitCellSizes(i,r);(this||e)._resizeStick._dragobj.style["y"==r?"top":"left"]=(this||e)._rs_progress[3]+l[0]+"px";return}h[a]<3?(this||e)._resizeStick._dragobj.style["y"==r?"top":"left"]=(this||e)._rs_progress[3]+a*_+1+"px":(this||e)._rsLimit[a]=null}}},_getResizerCells:function(){var i,s,n;i=this.getParentView()._cells;for(s=0;s<i.length;s++)if(i[s]==(this||e)){n=[this._getRsCell(i,s,1,-1),this._getRsCell(i,s,1,1)];n[0]&&n[1]||(n=null);return n}},_getRsCell:function(e,i,s,n){var r=e[i+n*s];return r&&r._settings.hidden?this._getRsCell(e,i,s+1,n):r&&r._settings.$noresize?null:r},_rsEnd:function(i){if("undefined"!=typeof i){var s,n,r,a;var o=this.getParentView()._vertical_orientation;(this||e)._resizerStick=null;if((this||e)._rs_progress){n=(this||e)._rs_progress[0];r=i-(this||e)._rs_progress[2];s=this._getResizerCells();if(s[0]&&s[1]){a=this._rsGetCellSizes(s,n,r);for(var l=0;l<2;l++){var h=s[l].$getSize(0,0);if(o?h[2]==h[3]:Math.abs(h[1]-h[0])<3){s[l]._settings[(this||e)._resizer_dim]=a[l];s[l]._bubble_size&&s[l]._bubble_size((this||e)._resizer_dim,a[l],o)}else{var _=s[l].$view[o?"offsetHeight":"offsetWidth"];s[l]._settings.gravity=a[l]/_*s[l]._settings.gravity}}s[0].resize();for(var c=0;c<2;c++){s[c].callEvent&&s[c].callEvent("onViewResize",[]);s[c].$view.removeAttribute("aria-dropeffect")}callEvent("onLayoutResize",[s])}(this||e)._rs_progress=false}(this||e)._rs_progress=false;(this||e)._rs_started=false;(this||e)._rsLimit=null;removeCss(document.body,"webix_noselect");(this||e)._viewobj.setAttribute("aria-grabbed","false");(this||e)._viewobj.removeAttribute("aria-dropeffect")}},_rsGetLimitCellSizes:function(i){var s,n,r;r=i[0]["$"+(this||e)._resizer_dim]+i[1]["$"+(this||e)._resizer_dim];if((this||e)._rsLimit[0]){s=(this||e)._rsLimit[0];n=r-s}else if((this||e)._rsLimit[1]){n=(this||e)._rsLimit[1];s=r-n}return[s,n]},_rsGetDiffCellSizes:function(i,s,n){var r=[];var a="height"==(this||e)._resizer_dim?"offsetHeight":"offsetWidth";for(var o=0;o<2;o++)r[o]=i[o].$view[a]+(o?-1:1)*n;return r},_rsGetCellSizes:function(i,s,n){var r,a,o;if((this||e)._rsLimit[0]||(this||e)._rsLimit[1])a=this._rsGetLimitCellSizes(i,s);else{a=this._rsGetDiffCellSizes(i,s,n);for(r=0;r<2;r++)if(a[r]<0){o=a[0]+a[1];a[r]=1;a[1-r]=o-1}}return a}};i.protoUI(Oi,me,ct,St.view);var Wi={name:"align",defaults:{borderless:true,left:0,top:0,right:0,bottom:0},$init:function(){(this||e)._viewobj.className+=" webix_view_align"},_remove:function(){this.body_setter({})},_replace:function(i){(this||e)._body_cell.destructor();(this||e)._body_cell=i;(this||e)._viewobj.appendChild((this||e)._body_cell._viewobj);this.resize()},getChildViews:function(){return[(this||e)._body_cell]},body_setter:function(i){i._inner={top:false,left:false,right:false,bottom:false};J._parent_cell=this||e;(this||e)._body_cell=ui._view(i);(this||e)._viewobj.appendChild((this||e)._body_cell._viewobj);return i},align_setter:function(i){"string"===typeof i&&(i=i.split(","));(this||e)._x_align=(this||e)._y_align=(this||e)._p_align="";for(var s=0;s<i.length;s++){var n=i[s];"center"!==n&&"left"!==n&&"right"!==n||((this||e)._x_align=n);"top"!==n&&"bottom"!==n&&"middle"!==n||((this||e)._y_align=n);"absolute"===n&&((this||e)._x_align=(this||e)._y_align=(this||e)._p_align="precise")}return i},getBody:function(){return(this||e)._body_cell},$setSize:function(i,s){St.api.$setSize.call(this||e,i,s);var n,r;if((this||e)._p_align){n=i-(this||e)._settings.left-(this||e)._settings.right;r=s-(this||e)._settings.top-(this||e)._settings.bottom}else{n=(this||e)._desired_size[0]||i;r=(this||e)._desired_size[2]||s}(this||e)._body_cell.$setSize(n,r);var a=(this||e)._body_cell._viewobj;"center"==(this||e)._x_align?a.style.marginLeft=Math.ceil((i-n)/2)+"px":"right"==(this||e)._x_align?a.style.marginLeft=i-n+"px":a.style.marginLeft=((this||e)._p_align?(this||e)._settings.left:0)+"px";"middle"==(this||e)._y_align?a.style.marginTop=Math.ceil((s-r)/2)+"px":"bottom"==(this||e)._y_align?a.style.marginTop=s-r+"px":a.style.marginTop=((this||e)._p_align?(this||e)._settings.top:0)+"px"},$getSize:function(i,s){var n=(this||e)._desired_size=(this||e)._body_cell.$getSize(0,0);var r=wt.api.$getSize.call(this||e,0,0);if((this||e)._p_align){i+=(this||e)._settings.left+(this||e)._settings.right;s+=(this||e)._settings.top+(this||e)._settings.bottom}if(!(this||e)._x_align||(this||e)._p_align){r[0]=n[0]+i;r[1]=n[1]+i}else{r[0]=(r[0]||n[0])+s;r[1]+=i}if(!(this||e)._y_align||(this||e)._p_align){r[2]=n[2]+s;r[3]=n[3]+s}else{r[2]=(r[2]||n[2])+s;r[3]+=s}return r}};i.protoUI(Wi,St.view);var Ui={name:"multiview",defaults:{animate:{}},setValue:function(e){$$(e).show()},getValue:function(){return this.getActiveId()},$init:function(){(this||e)._active_cell=0;(this||e)._vertical_orientation=1;(this||e)._viewobj.style.position="relative";(this||e)._viewobj.className+=" webix_multiview";(this||e)._back_queue=[]},_ask_render:function(e,i){var s=$$(e);if(!s._render_hash){s._render_queue=[];s._render_hash={}}if(!s._render_hash[i]){s._render_hash[i]=true;s._render_queue.push(i)}},_render_activation:function(i){var s=$$(i);(this||e)._settings.keepViews&&(s._viewobj.style.display="");if((this||e)._back_queue[(this||e)._back_queue.length-2]!=i){10==(this||e)._back_queue.length&&(this||e)._back_queue.splice(0,1);(this||e)._back_queue.push(i)}else(this||e)._back_queue.splice((this||e)._back_queue.length-1,1);if(s._render_hash){for(var n=0;n<s._render_queue.length;n++){var r=$$(s._render_queue[n]);r&&r.render()}s._render_queue=[];s._render_hash={}}},addView:function(i,s){var n=!isUndefined(s)&&s<=(this||e)._active_cell?1:0;var r=Ii.api.addView.apply(this||e,arguments);if((this||e)._cells.length>1){(this||e)._settings.keepViews?$$(r)._viewobj.style.display="none":remove($$(r)._viewobj);(this||e)._active_cell+=n}return r},_replace:function(i){if(!i._settings.borderless){var s=clone((this||e)._settings._inner);i._settings._inner=s;var n=i._viewobj.style;n.borderTopWidth=n.borderBottomWidth=n.borderLeftWidth=n.borderRightWidth="1px";this._fix_container_borders(n,s)}Ii.api._replace.apply(this||e,arguments)},_beforeRemoveView:function(i){if(i==(this||e)._active_cell){var s=i?i-1:1;if((this||e)._cells[s]){(this||e)._animation_promise=null;this._show((this||e)._cells[s],false)}}i<(this||e)._active_cell&&(this||e)._active_cell--},_hide:function(){},_parse_cells:function(i){i=i||(this||e)._collection;for(var s=0;s<i.length;s++)i[s]._inner=(this||e)._settings.borderless?{top:1,left:1,right:1,bottom:1}:(this||e)._settings._inner||{};Ii.api._parse_cells.call(this||e,i);for(var n=1;n<(this||e)._cells.length;n++)(this||e)._settings.keepViews?(this||e)._cells[n]._viewobj.style.display="none":remove((this||e)._cells[n]._viewobj);for(var r=0;r<i.length;r++){var a=(this||e)._cells[r];if(!a._cells||a._render_borders){this._fix_container_borders(a._viewobj.style,a._settings._inner);a._viewobj.setAttribute("role","tabpanel")}}this._render_activation(this.getActiveId())},cells_setter:function(i){assert(i&&i.length,"Multiview must have at least one view in 'cells'");(this||e)._collection=i},_getDirection:function(i,s){var n=((this||e)._settings.animate||{}).direction;var r="top"==n||"bottom"==n;return i<s?r?"bottom":"right":r?"top":"left"},_show:function(s,n){var r=this||e,a=arguments;var o=this.getParentView();if(o&&o.getTabbar){var l=o.getTabbar();l.blockEvent();l.setValue(s._settings.$id||s._settings.id);l.unblockEvent()}if((this||e)._animation_promise)return(this||e)._animation_promise.then((function(){return r._show.apply(r,a)}));var h=-1;for(var _=0;_<(this||e)._cells.length;_++)if((this||e)._cells[_]==s){h=_;break}if(!(h<0||h==(this||e)._active_cell)){var c=(this||e)._cells[(this||e)._active_cell];var d=(this||e)._cells[h];c.$getSize(0,0);if((n||isUndefined(n))&&(this||e)._settings.animate){var u=i.extend({},(this||e)._settings.animate);(this||e)._settings.keepViews&&(u.keepViews=true);u.direction=this._getDirection(h,(this||e)._active_cell);u=_t._mergeSettings(n||{},u);var f=animate.formLine(d._viewobj,c._viewobj,u);d.$getSize(0,0);d.$setSize((this||e)._content_width,(this||e)._content_height);var g=u.callback;u.callback=function(){animate.breakLine(f,(this||e)._settings.keepViews);(this||e)._animation_promise=null;u.wait_animation.resolve();g&&g.call(this||e);g=u.master=u.callback=null;this.resize()};u.master=this||e;(this||e)._active_cell=h;this._render_activation(this.getActiveId());animate(f,u);(this||e)._animation_promise=u.wait_animation=Deferred.defer()}else{if((this||e)._settings.keepViews)c._viewobj.style.display="none";else{remove(c._viewobj);(this||e)._viewobj.appendChild((this||e)._cells[_]._viewobj)}(this||e)._active_cell=h;this.resizeChildren();this._render_activation(this.getActiveId())}if(d.callEvent){d.callEvent("onViewShow",[]);_each(d,(this||e)._signal_hidden_cells)}this.callEvent("onViewChange",[c._settings.id,d._settings.id])}},$getSize:function(i,s){if(!(this||e)._cells.length)return wt.api.$getSize.call(this||e,0,0);debug_size_box_start(this||e,true);var n=(this||e)._cells[(this||e)._active_cell].$getSize(0,0);if((this||e)._settings.fitBiggest)for(var r=0;r<(this||e)._cells.length;r++)if(r!=(this||e)._active_cell){var a=(this||e)._cells[r].$getSize(0,0);for(var o=0;o<4;o++)n[o]=Math.max(n[o],a[o])}var l=wt.api.$getSize.call(this||e,0,0);l[1]>=1e5&&(l[1]=0);l[3]>=1e5&&(l[3]=0);l[0]=(l[0]||n[0])+i;l[1]=(l[1]||n[1])+i;l[2]=(l[2]||n[2])+s;l[3]=(l[3]||n[3])+s;debug_size_box_end(this||e,l);return l},$setSize:function(i,s){if((this||e)._cells.length){(this||e)._layout_sizes=[i,s];wt.api.$setSize.call(this||e,i,s);(this||e)._cells[(this||e)._active_cell].$setSize(i,s)}},isVisible:function(i,s){if(s&&s!=this.getActiveId()){i&&this._ask_render(s,i);return false}return St.api.isVisible.call(this||e,i,(this||e)._settings.id)},getActiveId:function(){return(this||e)._cells.length?(this||e)._cells[(this||e)._active_cell]._settings.id:null},back:function(i){i=i||1;if(this.callEvent("onBeforeBack",[this.getActiveId(),i])){if((this||e)._back_queue.length>i){var s=(this||e)._back_queue[(this||e)._back_queue.length-i-1];$$(s).show();return s}return null}return null},_insertBeforeView:function(i,s){!(this||e)._settings.keepViews&&s&&s!=(this||e)._cells[(this||e)._active_cell]||Ii.api._insertBeforeView.call(this||e,i,s)}};i.protoUI(Ui,Ii.view);var Yi={name:"tabview",setValue:function(i,s){(this||e)._cells[0].setValue(i,s)},getValue:function(){return(this||e)._cells[0].getValue()},getTabbar:function(){return(this||e)._cells[0]},getMultiview:function(){return(this||e)._cells[1]},addView:function(e){var i=this.getMultiview().addView(e.body);e.id=i;e.value=e.header;delete e.body;delete e.header;var s=this.getTabbar();s.addOption(e);return i},removeView:function(e){var i=this.getTabbar();i.removeOption(e);i.refresh()},$init:function(s){(this||e).$ready.push((this||e)._init_tabview_handlers);var n=s.cells;var r=[];assert(n&&n.length,"tabview must have cells collection");for(var a=n.length-1;a>=0;a--){var o=n[a].body||n[a];o.id||(o.id="view"+uid());r[a]={value:n[a].header,id:o.id,close:n[a].close,width:n[a].width,hidden:!!n[a].hidden};n[a]=o}var l={view:"tabbar",multiview:true};var h={view:"multiview",cells:n,animate:!!s.animate};s.value&&(l.value=s.value);s.tabbar&&i.extend(l,s.tabbar,true);s.multiview&&i.extend(h,s.multiview,true);l.options=l.options||r;s.rows=[l,h];delete s.cells;delete s.tabs},_init_tabview_handlers:function(){this.getTabbar().attachEvent("onOptionRemove",(function(e){var i=$$(e);if(i){var s=i.getParentView();s&&s.removeView(i)}}))}};i.protoUI(Yi,Vi.view);var qi={name:"carousel",defaults:{scrollSpeed:"300ms",type:"clean",navigation:{},animate:true},$init:function(){(this||e)._viewobj.className+=" webix_carousel";(this||e)._layout=null;(this||e)._dataobj=null;(this||e)._active_cell=0;(this||e).$ready.unshift((this||e)._initLayout);(this||e).$ready.push((this||e)._after_init_call)},addView:function(i,s){var n=(this||e)._layout.addView(i,s);this._fix_after_view_add();return n},removeView:function(i){(this||e)._layout.removeView(i);this._fix_after_view_add()},_replace:function(i,s){(this||e)._layout._replace(i,s);this._fix_after_view_add()},_fix_after_view_add:function(){(this||e)._cells=(this||e)._layout._cells;this._renderPanel();this.setActiveIndex(Math.min((this||e)._active_cell,(this||e)._cells.length-1))},_initLayout:function(){var s=this||e;(this||e)._layout&&(this||e)._layout.destructor&&(this||e)._layout.destructor();var n="";if((this||e).config.cols){n="cols";(this||e)._vertical_orientation=0}else{n="rows";(this||e)._vertical_orientation=1}var r={borderless:true,type:"clean"};r[n]=copy((this||e)._settings[n]);var a=["type","margin","marginX","marginY","padding","paddingX","paddingY"];var o={};for(var l=0;l<a.length;l++)(this||e)._settings[a[l]]&&(o[a[l]]=(this||e)._settings[a[l]]);i.extend(r,o,true);J._parent_cell=this||e;(this||e)._layout=ui._view(r);(this||e)._viewobj.appendChild((this||e)._layout._viewobj);(this||e)._cells=(this||e)._layout._cells;(this||e)._layout._show=bind(qi._show,this||e);(this||e)._layout.adjustScroll=bind(qi.adjustScroll,this||e);var h=attachEvent("onReconstruct",(function(e){e==s._layout&&s._setScroll()}));this.attachEvent("onDestruct",(function(){detachEvent(h)}));(this||e)._contentobj=(this||e)._viewobj.firstChild},_onKeyPress:function(i,s){(this||e)._settings.navigation.items&&"tab"===s.target.getAttribute("role")&&this._moveActive(i,s);wt.api._onKeyPress.call(this||e,i,s)},getChildViews:function(){return[(this||e)._layout]},getLayout:function(){return(this||e)._layout},_after_init_call:function(){(this||e)._contentobj.setAttribute("touch_scroll",(this||e)._vertical_orientation?"y":"x");(this||e)._layout.attachEvent("onAfterScroll",bind((function(){this.callEvent("onShow",[this.getActiveId()])}),this||e));_each((this||e)._layout,(function(e){e._viewobj.setAttribute("role","tabpanel")}))},adjustScroll:function(i){var s=(this||e)._vertical_orientation?(this||e)._content_height:(this||e)._content_width;var n;if((this||e)._vertical_orientation){n=Math.round(i.f/s);i.f=n*s}else{n=Math.round(i.e/s);i.e=n*s}(this||e)._active_cell=-n;(this||e)._settings.navigation&&this._renderNavItems();return true},_show:function(i){var s,n,r,a,o,l;r=-1;n=(this||e)._layout;for(s=0;s<n._cells.length;s++)if(n._cells[s]==i){r=s;break}if(!(r<0||r==(this||e)._active_cell)){(this||e)._active_cell=r;a=n._vertical_orientation?(this||e)._content_height:(this||e)._content_width;o=-(n._vertical_orientation?0:r*a);l=-(n._vertical_orientation?r*a:0);this.scrollTo(o,l);this.callEvent("onShow",[n._cells[(this||e)._active_cell]._settings.id]);(this||e)._settings.navigation&&this._renderPanel()}},scrollTo:function(i,s){if(Vt&&(this||e)._settings.animate)Vt._set_matrix((this||e)._contentobj,i,s,(this||e)._settings.scrollSpeed||"100ms");else{(this||e)._contentobj.style.marginLeft=i+"px";(this||e)._contentobj.style.marginTop=s+"px"}},navigation_setter:function(e){this._mergeSettings(e,{type:"corner",buttons:true,items:true});return e},showNext:function(){(this||e)._active_cell<(this||e)._layout._cells.length-1&&this.setActiveIndex((this||e)._active_cell+1)},showPrev:function(){(this||e)._active_cell>0&&this.setActiveIndex((this||e)._active_cell-1)},setActiveIndex:function(i){assert(i<(this||e)._layout._cells.length,"Not existing index in collection");var s=(this||e)._layout._cells[i]._settings.id;$$(s).show()},getActiveIndex:function(){return(this||e)._active_cell},$getSize:function(i,s){var n=(this||e)._layout.$getSize(0,0);var r=St.api.$getSize.call(this||e,i,s);if((this||e)._layout._vertical_orientation){r[0]=Math.max(r[0],n[0]);r[1]=Math.min(r[1],n[1])}else{r[2]=Math.max(r[2],n[2]);r[3]=Math.min(r[3],n[3])}return r},$setSize:function(i,s){var n=(this||e)._layout;var r=n._cells.length;var a=St.api.$setSize.call(this||e,i,s);var o=(this||e)._content_height*(n._vertical_orientation?r:1);var l=(this||e)._content_width*(n._vertical_orientation?1:r);if(a){(this||e)._contentobj.style.height=o+"px";(this||e)._contentobj.style.width=l+"px";n.$setSize(l,o);this._setScroll()}else n.$setSize(l,o)},_setScroll:function(){var i=(this||e)._layout;var s=(this||e)._active_cell||0;var n=i._vertical_orientation?(this||e)._content_height:(this||e)._content_width;var r=-(i._vertical_orientation?0:s*n);var a=-(i._vertical_orientation?s*n:0);this.scrollTo(r,a);(this||e)._settings.navigation&&this._renderPanel()},getActiveId:function(){var i=(this||e)._layout._cells[(this||e)._active_cell];return i?i._settings.id:null},setActive:function(e){$$(e).show()}};i.protoUI(qi,f,be,St.view);var Xi={name:"proxy",body_setter:function(i){J._parent_cell=this||e;(this||e)._body_cell=ui._view(i);(this||e)._viewobj.appendChild((this||e)._body_cell._viewobj);return i},getChildViews:function(){return[(this||e)._body_cell]},$setSize:function(i,s){St.api.$setSize.call(this||e,i,s);(this||e)._body_cell.$setSize((this||e).$width,(this||e).$height)},$getSize:function(i,s){var n=St.api.$getSize.call(this||e,i,s);var r=(this||e)._body_cell.$getSize(i,s);r[0]=Math.max(n[0],r[0]);r[1]=Math.min(n[1],r[1]);r[2]=Math.max(n[2],r[2]);r[3]=Math.min(n[3],r[3]);r[4]=Math.max(n[4],r[4]);return r},_replace:function(i){(this||e)._body_cell.destructor();(this||e)._body_cell=i;(this||e)._viewobj.appendChild(i._viewobj);this.resize()}};i.protoUI(Xi,St.view);i.protoUI({name:"portlet",defaults:{template:"GPL version doesn't support portlet <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"dashboard",defaults:{template:"GPL version doesn't support dashboard <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"panel",defaults:{template:"GPL version doesn't support panel <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"abslayout",defaults:{template:"GPL version doesn't support abslayout <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"gridlayout",defaults:{template:"GPL version doesn't support gridlayout <br> You need Webix PRO"}},Ai.view);var Gi={$init:function(){i.extend(this||e,he,true)},name:"flexlayout"};i.protoUI(Gi,Vi.view);i.protoUI({name:"flexdatalayout",defaults:{template:"GPL version doesn't support flexdatalayout <br> You need Webix PRO"}},Ai.view);var Ki={name:"popup",$init:function(){var i=this||e;(this||e)._settings.head=false;(this||e).$view.className+=" webix_popup";var s=attachEvent("onClick",(function(e){return i._hide(e)}));this.attachEvent("onDestruct",(function(){detachEvent(s)}));this.attachEvent("onHide",(this||e)._hide_point)},$skin:function(){Wt.api.$skin.call(this||e);(this||e).defaults.padding=Ht.popupPadding;(this||e).defaults.point=!Ht.popupNoPoint;(this||e).defaults.borderless=Ht.borderlessPopup},close:function(){remove((this||e)._point_element);Wt.api.close.call(this||e)},$getSize:function(i,s){return Wt.api.$getSize.call(this||e,i+2*(this||e)._settings.padding,s+2*(this||e)._settings.padding)},$setSize:function(i,s){St.api.$setSize.call(this||e,i,s);i=(this||e)._content_width-2*(this||e)._settings.padding;s=(this||e)._content_height-2*(this||e)._settings.padding;(this||e)._contentobj.style.padding=(this||e)._settings.padding+"px";(this||e)._headobj.style.display="none";(this||e)._body_cell.$setSize(i,s)},_inner_body_set:function(e){"undefined"==typeof e.borderless&&(e.borderless=false)},head_setter:function(){},_set_point:function(i,s,n,r){this._hide_point();document.body.appendChild((this||e)._point_element=create("DIV",{class:"webix_point_"+i},""));(this||e)._point_element.style.zIndex=(this||e)._viewobj.style.zIndex;(this||e)._point_element.style.position=r?"fixed":"absolute";(this||e)._point_element.style.top=n+"px";(this||e)._point_element.style.left=s+"px"},_hide_point:function(){(this||e)._point_element=remove((this||e)._point_element)}};var Ji=i.protoUI(Ki,Wt.view);var Zi={api:Ki,view:Ji};var Qi={name:"toolbar",defaults:{type:"toolbar"},_render_borders:true,_form_classname:"webix_toolbar",_form_vertical:false,$init:function(i){if(!i.borderless){(this||e)._contentobj.style.borderWidth="1px";(this||e)._settings._inner={top:false,left:false,right:false,bottom:false}}(this||e)._contentobj.className+=" "+(this||e)._form_classname;(this||e)._viewobj.setAttribute("role","toolbar")},_recollect_elements:function(){var i=this||e;i.elements={};_each(this||e,(function(e){if(e._settings.name&&e.getValue&&e.setValue){i.elements[e._settings.name]=e;e.mapEvent&&e.mapEvent({onbeforetabclick:i,onaftertabclick:i,onitemclick:i,onchange:i})}if(e.setValues||e._fill_data)return false}));var s=(this||e)._values;this.setDirty(false);if(s){var n=(this||e)._values;for(var r in i.elements)if(s[r]&&n[r]!=s[r]){n[r]=s[r];this.setDirty(true)}}},_parse_cells_ext_end:function(){this._recollect_elements()},_parse_cells_ext:function(i){var s=(this||e)._settings;if(s.elements&&!i){(this||e)._collection=i=s.elements;(this||e)._vertical_orientation=(this||e)._form_vertical;delete s.elements}(this||e)._settings.elementsConfig&&this._rec_apply_settings((this||e)._collection,s.elementsConfig);return i},_rec_apply_settings:function(e,s){for(var n=0;n<e.length;n++){var r=e[n];i.extend(r,s);var a=s;r.elementsConfig&&(a=i.extend(i.extend({},r.elementsConfig),s));var o;o=r.body?[r.body]:r.rows||r.cols||r.cells||r.body;o&&this._rec_apply_settings(o,a)}},$getSize:function(i,s){var n=Vi.api.$getSize.call(this||e,i,s);var r=this.getParentView();var a=(this||e)._vertical_orientation?3:1;r&&(this||e)._vertical_orientation!=r._vertical_orientation&&(n[a]+=1e5);debug_size_box(this||e,n,true);return n},render:function(){},refresh:function(){this.render()}};var ts=i.protoUI(Qi,$e,L,Ye,Vi.view,Qt);var es={api:Qi,view:ts};var is={name:"form",defaults:{type:"form",autoheight:true},_default_height:-1,_form_classname:"webix_form",_form_vertical:true,$init:function(){(this||e)._viewobj.setAttribute("role","form")},$getSize:function(i,s){(this||e)._scroll_y&&!(this||e)._settings.width&&(i+=z.scrollSize);var n=Vi.api.$getSize.call(this||e,i,s);if((this||e)._settings.scroll||!(this||e)._settings.autoheight){n[2]=(this||e)._settings.height||(this||e)._settings.minHeight||0;n[3]=(this||e)._settings.height||1e5}return n}};i.protoUI(is,es.view);var ss={name:"fieldset",defaults:{borderless:true,$cssName:"webix_fieldset",paddingX:18,paddingY:30},$init:function(i){i.body=i.body||{};var s=(this||e).defaults.$cssName;(this||e)._viewobj.className+=" "+s;(this||e)._viewobj.innerHTML="<fieldset><legend class='"+s+"_label"+(i.required?" webix_required":"")+"'></legend><div class='"+s+"_body'></div></fieldset>"},label_setter:function(i){(this||e)._viewobj.firstChild.childNodes[0].innerHTML=i;return i},getChildViews:function(){return[(this||e)._body_view]},body_setter:function(i){J._parent_cell=this||e;(this||e)._body_view=ui(i,(this||e)._viewobj.firstChild.childNodes[1]);return i},getBody:function(){return(this||e)._body_view},resizeChildren:function(){if((this||e)._body_view){var i=(this||e).$width-(this||e)._settings.paddingX;var s=(this||e).$height-(this||e)._settings.paddingY;var n=(this||e)._body_view.$getSize(0,0);n[0]>i&&(i=n[0]);n[2]>s&&(s=n[2]);(this||e)._body_view.$setSize(i,s);this.resize()}},$getSize:function(i,s){debug_size_box_start(this||e,true);i+=(this||e)._settings.paddingX;s+=(this||e)._settings.paddingY;var n=(this||e)._body_view.$getSize(i,s);var r=(this||e)._last_body_size=St.api.$getSize.call(this||e,i,s);r[0]<n[0]&&(r[0]=n[0]);r[2]<n[2]&&(r[2]=n[2]);r[1]>n[1]&&(r[1]=n[1]);r[3]>n[3]&&(r[3]=n[3]);r[1]<r[0]&&(r[1]=r[0]);r[3]<r[2]&&(r[3]=r[2]);debug_size_box_end(this||e,r);return r},$setSize:function(i,s){if(St.api.$setSize.call(this||e,i,s)){i=Math.min((this||e)._last_body_size[1],i);s=Math.min((this||e)._last_body_size[3],s);(this||e)._body_view.$setSize(i-(this||e)._settings.paddingX,s-(this||e)._settings.paddingY)}}};var ns=i.protoUI(ss,St.view);var rs={api:ss,view:ns};var as={name:"forminput",defaults:{$cssName:"webix_forminput",labelWidth:80,labelAlign:"left",paddingY:0,paddingX:0},setValue:function(i,s){(this||e)._body_view.setValue?(this||e)._body_view.setValue(i,s):(this||e)._body_view.setValues&&(this||e)._body_view.setValues(i,false,s)},focus:function(){return!!(this||e)._body_view.focus&&(this||e)._body_view.focus()},getValue:function(){return(this||e)._body_view.getValue?(this||e)._body_view.getValue():(this||e)._body_view.getValues?(this||e)._body_view.getValues():void 0},getBody:function(){return(this||e)._body_view},$skin:function(){(this||e)._inputPadding=Ht.inputPadding;(this||e)._inputSpacing=Ht.inputSpacing;(this||e)._labelTopHeight=Ht.labelTopHeight},$init:function(){(this||e).$ready.push((function(){var i=(this||e)._viewobj.firstChild.childNodes[0];var s=(this||e)._viewobj.firstChild.childNodes[1];var n=(this||e)._settings;if("top"!=n.labelPosition){n.labelWidth=n.label?this._getLabelWidth(n.labelWidth,n.label):0;n.paddingX=n.labelWidth+(this||e)._inputSpacing}else{n.paddingY=(this||e)._labelTopHeight;n.paddingX=(this||e)._inputSpacing}if(n.label&&(n.labelWidth||"top"==n.labelPosition)){if("top"==n.labelPosition){i.style.lineHeight=(this||e)._labelTopHeight-(this||e)._inputPadding+"px";i.className+=" "+(this||e).defaults.$cssName+"_label_top";s.style.padding="0 "+(this||e)._inputSpacing/2+"px"}else i.style.width=n.paddingX-(this||e)._inputSpacing/2+"px";i.style.textAlign=n.labelAlign;n.value&&this.setValue(n.value,"auto")}else{i.style.display="none";s.style.padding="0 "+(this||e)._inputSpacing/2+"px";n.paddingX=(this||e)._inputSpacing;n.paddingY=0}}))},_getLabelWidth:function(e,i){"auto"==e&&(e=getTextSize(i,"webix_inp_label").width);return e?Math.max(e,Ht.dataPadding):0},setBottomText:function(i){var s=(this||e)._settings;if("undefined"!=typeof i){if(s.bottomLabel==i)return;s.bottomLabel=i}var n=(s.invalid?s.invalidMessage:"")||s.bottomLabel;(this||e)._invalidMessage&&remove((this||e)._invalidMessage);if(n){(this||e).$view.style.position="relative";(this||e)._invalidMessage=create("div",{class:"webix_inp_bottom_label",role:s.invalid?"alert":"","aria-relevant":"all",style:"position:absolute; bottom:0px; padding:2px 0; background:"+Ht.backColor+"; left:"+((this||e)._inputSpacing/2+(s.label?s.labelWidth:0))+"px; "},n);(this||e)._viewobj.appendChild((this||e)._invalidMessage)}}};i.protoUI(as,rs.view);function _tagname(e){return e.tagName?e.tagName.toLowerCase():null}function _attribute(e,i){if(!e.getAttribute)return null;var s=e.getAttribute(i);return s?s.toLowerCase():null}function _get_html_value(){var i=_tagname(this||e);return os[i]?os[i](this||e):os.other(this||e)}var os={radio:function(e){for(var i=0;i<e.length;i++)if(e[i].checked)return e[i].value;return""},input:function(e){var i=_attribute(e,"type");return"checkbox"===i?e.checked:e.value},textarea:function(e){return e.value},select:function(e){var i=e.selectedIndex;return e.options[i].value},other:function(e){return e.innerHTML}};function _set_html_value(i){var s=_tagname(this||e);return ls[s]?ls[s](this||e,i):ls.other(this||e,i)}var ls={radio:function(e,i){for(var s=0;s<e.length;s++)e[s].checked=e[s].value==i},input:function(e,i){var s=_attribute(e,"type");"checkbox"===s?e.checked=!!i:e.value=i},textarea:function(e,i){e.value=i},select:function(e,i){e.value=i;-1===e.selectedIndex&&(e.value=e.firstElementChild.value)},other:function(e,i){e.innerHTML=i}};var hs={name:"htmlform",$init:function(i){(this||e).elements={};(this||e)._default_values=false;i.content&&(i.container==i.content||!i.container&&i.content==document.body)&&((this||e)._copy_inner_content=true)},content_setter:function(i){i=toNode(i);if((this||e)._copy_inner_content)while(i.childNodes.length>1)(this||e)._viewobj.childNodes[0].appendChild(i.childNodes[0]);else(this||e)._viewobj.childNodes[0].appendChild(i);this._parse_inputs();return true},render:function(){Ai.api.render.apply(this||e,arguments);this._parse_inputs()},_parse_inputs:function(){var i=(this||e)._viewobj.querySelectorAll("[name]");(this||e).elements={};for(var s=0;s<i.length;s++){var n=i[s];var r=_attribute(n,"name");if(r){var a="button"===_tagname(n);var o=_attribute(n,"type");var l=a||"button"===o||"submit"===o;if("radio"===o){var h=(this||e).elements[r]||[];h.tagName="radio";h.push(n);n=h}(this||e).elements[r]=n;n.getValue=_get_html_value;n.setValue=_set_html_value;n.$allowsClear=!l}}return(this||e).elements},_mark_invalid:function(i,s){this._clear_invalid(i,s);var n=(this||e)._viewobj.querySelector('[name="'+i+'"]');n&&addCss(n,"invalid")},_clear_invalid:function(i){var s=(this||e)._viewobj.querySelector('[name="'+i+'"]');s&&removeCss(s,"invalid")},focus:function(i){if(!i&&(this||e).$view.contains(document.activeElement))return false;Ye.focus.apply(this||e,arguments)}};i.protoUI(hs,Ai.view,Ye);var _s={name:"property",$init:function(){(this||e)._contentobj.className+=" webix_property";(this||e)._contentobj.setAttribute("role","listbox");(this||e)._destroy_with_me=[];this.attachEvent("onAfterEditStart",(function(e){var i=this.getItemNode(e);addCss(i,"webix_focused")}));this.attachEvent("onAfterEditStop",(function(e,i){var s=this.getItemNode(i.config.id);removeCss(s,"webix_focused")}))},defaults:{nameWidth:100,editable:true},on_render:{password:function(e){return e||0===e?"&bull;".repeat(e.toString().length):""},checkbox:function(e){return"<input type='checkbox' class='webix_property_check' "+(e?"checked":"")+">"},color:function(e){return"<div class='webix_property_col_ind' style='background-color:"+(e||"#FFFFFF")+";'></div>"+e}},on_edit:{label:false},_id:"webix_f_id",on_click:{webix_property_check:function(e){var i=this.locate(e);var s=this.getItem(i);this.callEvent("onCheck",[i,s.value=!s.value]);return false}},on_dblclick:{},registerType:function(i,s){isUndefined(s.template)||((this||e).on_render[i]=s.template);isUndefined(s.editor)||((this||e).on_edit[i]=s.editor);if(!isUndefined(s.click))for(var n in s.click)(this||e).on_click[n]=s.click[n]},elements_setter:function(i){(this||e)._idToLine={};for(var s=0;s<i.length;s++){var n=i[s];"multiselect"==n.type&&(n.optionslist=true);n.id=n.id||uid();n.label=n.label||"";n.value=n.value||"";(this||e)._idToLine[n.id]=s;this._map_options(i[s])}return i},showItem:function(i){Se.showItem.call(this||e,i)},locate:function(){return locate(arguments[0],(this||e)._id)},getItemNode:function(i){return(this||e)._dataobj.childNodes[(this||e)._idToLine[i]]},getItem:function(i){return(this||e)._settings.elements[(this||e)._idToLine[i]]},_get_editor_type:function(i){var s=this.getItem(i).type;if("checkbox"==s)return"inline-checkbox";var n=(this||e).on_edit[s];return false!==n&&(n||s)},_get_edit_config:function(e){return this.getItem(e)},_find_cell_next:function(i,s,n){var r=(this||e)._idToLine[i.id];var a=(this||e)._settings.elements;if(n){for(var o=r+1;o<a.length;o++)if(s.call(this||e,a[o].id))return a[o].id}else for(var l=r-1;l>=0;l--)if(s.call(this||e,a[l].id))return a[l].id;return null},updateItem:function(e,s){var n=this.getItem(e);n&&i.extend(n,s||{},true);this.refresh()},_cellPosition:function(i){var s=this.getItemNode(i);return{left:s.offsetLeft+(this||e)._settings.nameWidth,top:s.offsetTop,height:s.firstChild.offsetHeight,width:(this||e)._data_width,parent:(this||e)._contentobj}},_clear:function(){var i=(this||e)._settings.elements;for(var s=0;s<i.length;s++)i[s].value=""},clear:function(){this._clear();(this||e)._props_dataset={};this.refresh()},setValues:function(i,s){var n=this||e;(this||e)._settings.complexData&&(i=B.collapseNames(i,"",{},(function(e){return isUndefined(n._idToLine[e])})));s||this._clear();for(var r in i){var a=this.getItem(r);a&&(a.value=i[r])}(this||e)._props_dataset=i;this.refresh()},getValues:function(){var i=clone((this||e)._props_dataset||{});for(var s=0;s<(this||e)._settings.elements.length;s++){var n=(this||e)._settings.elements[s];"label"!=n.type&&(i[n.id]=n.value)}(this||e)._settings.complexData&&(i=B.expandNames(i));return i},refresh:function(){this.render()},$setSize:function(i,s){if(St.api.$setSize.call(this||e,i,s)){(this||e)._data_width=(this||e)._content_width-(this||e)._settings.nameWidth;this.render()}},$getSize:function(i,s){if((this||e)._settings.autoheight){var n=(this||e)._settings.elements.length;(this||e)._settings.height=Math.max((this||e).type.height*n,(this||e)._settings.minHeight||0)}return St.api.$getSize.call(this||e,i,s)},_toHTML:function(){var i=[];var s=(this||e)._settings.elements;if(s)for(var n=0;n<s.length;n++){var r=s[n];r.css&&"object"==_typeof(r.css)&&(r.css=createCss(r.css));var a='<div webix_f_id="'+r.id+'"'+("label"!==r.type?'role="option" tabindex="0"':"")+' class="webix_property_line '+(r.css||"")+'">';if("label"==r.type)i[n]=a+"<div class='webix_property_label_line'>"+r.label+"</div></div>";else{var o,l=(this||e).on_render[r.type];var h="<div class='webix_property_label' style='width:"+(this||e)._settings.nameWidth+"px'>"+r.label+"</div><div class='webix_property_value' style='width:"+(this||e)._data_width+"px'>";o=r.collection||r.options?r.template(r,(this||e).type,r.value,r):r.format?r.format(r.value):r.value;l&&(o=l.call(this||e,r.value,r));i[n]=a+h+o+"</div></div>"}}return i.join("")},type:{height:24,templateStart:template(""),templateEnd:template("</div>")},$skin:function(){(this||e).type.height=Ht.propertyItemHeight}};i.protoUI(_s,kt,le,pe,me,$e,$t,L,f,St.view);var cs={name:"calendar",defaults:{date:ii.datePart(new Date),navigation:true,monthSelect:true,weekHeader:true,monthHeader:true,weekNumber:false,skipEmptyWeeks:false,calendarHeader:"%F %Y",events:ii.isHoliday,minuteStep:5,timeIcon:"wxi-clock",icons:false,timepickerHeight:30,headerHeight:30,dayTemplate:function(e){return e.getDate()},width:260,height:250},dayTemplate_setter:template,calendarHeader_setter:ii.dateToStr,calendarTime_setter:function(i){(this||e)._calendarTime=i;return ii.dateToStr(i)},date_setter:function(e){e=ii.copy(this._string_to_date(e));e.setDate(1);return e},maxDate_setter:function(e){return ii.datePart(this._string_to_date(e))},minDate_setter:function(e){return ii.datePart(this._string_to_date(e))},minTime_setter:function(e){if("string"==typeof e){e=u.parseTimeFormatDate(e);e=[e.getHours(),e.getMinutes()]}return e},maxTime_setter:function(e){if("string"==typeof e){e=u.parseTimeFormatDate(e);e=[e.getHours(),e.getMinutes()]}return e},_ariaFocus:function(){var i=this||e;_event((this||e).$view,"mousedown",(function(){i._mouse_time=new Date}));_event((this||e).$view,"focus",(function(e){if(!i._settings.master){var s=e.relatedTarget;var n=-1!==e.target.className.indexOf("webix_cal_day");if(s&&new Date-i._mouse_time>100&&n&&i.$view.contains(s)){var r=i._locate_day(e.target);i._selectedDay(r)||i._moveSelection(r)}}}),{capture:true})},$init:function(){(this||e)._viewobj.className+=" webix_calendar";(this||e)._viewobj.setAttribute("role","region");(this||e)._viewobj.setAttribute("aria-label",u.aria.calendar);(this||e)._special_dates={};(this||e)._selected_days={};(this||e)._zoom_level=0;this._ariaFocus();this.attachEvent("onKeyPress",(this||e)._onKeyPress)},_onKeyPress:function(i,s){var n=s.target,r=n.getAttribute("role");if((13===i||32===i)&&("button"==r||"log"==r)&&!(this||e)._settings.disabled){triggerEvent(n,"MouseEvent","click");preventEvent(s)}},minuteStep_setter:function(i){return Math.max(Math.min(i,60),(this||e).defaults.minuteStep)},type_setter:function(i){if("time"==i){(this||e)._zoom_in=true;(this||e)._zoom_level=-1}else"year"==i&&((this||e)._fixed=true);return i},$setSize:function(i,s){St.api.$setSize.call(this||e,i,s)&&this.render()},$getSize:function(i,s){var n=(this||e)._settings;if(n.cellHeight&&!n.type){var r=this._getDateBoundaries(n.date);n.height=n.cellHeight*r._rows+n.headerHeight+(n.weekHeader?Ht.calendarWeekHeaderHeight:0)+(n.timepicker||(this||e)._icons?n.timepickerHeight:0)+2*((this||e)._content_padding+Ht.borderWidth)}return St.api.$getSize.call(this||e,i,s)},moveSelection:function(i,s,n){if(!(this||e).config.master){var r=this.getSelectedDate(true);var a=ii.copy(r||this.getVisibleDate());this._moveSelection(a,i,n)}},_moveSelection:function(i,s,n){var r=(this||e)._zoom_logic[(this||e)._zoom_level]._keyshift(i,s,this||e);false!==n&&this._restore_focus(r)},_restore_focus:function(i,s){var n;if(s){n=(this||e)._viewobj.querySelector(".webix_cal_body");n=n.childNodes[s.rind].childNodes[s.cind+((this||e)._settings.weekNumber?1:0)]}else n=(this||e)._viewobj.querySelector("."+i+"[tabindex='0']");n&&n.focus()},_getDateBoundaries:function(i,s){if(!(this||e)._set_date_bounds||s){var n=i.getMonth();var r=i.getFullYear();var a=new Date(r,n+1,1);var o=ii.weekStart(new Date(r,n,1));var l=Math.round((a.valueOf()-o.valueOf())/864e5);var h=(this||e)._settings.skipEmptyWeeks?Math.ceil(l/7):6;(this||e)._set_date_bounds={_month:n,_start:o,_next:a,_rows:h}}return(this||e)._set_date_bounds},$skin:function(){if(Ht.calendar){Ht.calendar.width&&((this||e).defaults.width=Ht.calendar.width);Ht.calendar.height&&((this||e).defaults.height=Ht.calendar.height);Ht.calendar.headerHeight&&((this||e).defaults.headerHeight=Ht.calendar.headerHeight);Ht.calendar.timepickerHeight&&((this||e).defaults.timepickerHeight=Ht.calendar.timepickerHeight)}(this||e)._content_padding=Ht.layoutPadding.form},_getColumnConfigSizes:function(i){var s=this._getDateBoundaries(i);var n=(this||e)._settings;var r=[];var a=[];var o=Infinity;var l=(this||e)._content_width-2*((this||e)._content_padding+Ht.borderWidth);var h=(this||e)._content_height-(n.monthHeader?n.headerHeight:0)-(n.weekHeader?Ht.calendarWeekHeaderHeight:0)-(n.timepicker||(this||e)._icons?n.timepickerHeight:0)-2*((this||e)._content_padding+Ht.borderWidth);var _=n.weekNumber?8:7;for(var c=0;c<_;c++){a[c]=Math.ceil(l/(_-c));l-=a[c];o=Math.min(o,a[c])}var d=s._rows;for(var u=0;u<d;u++){r[u]=Math.ceil(h/(d-u));h-=r[u];o=Math.min(o,r[u])}return[a,r,o]},icons_setter:function(i){i?"object"==_typeof(i)?(this||e)._icons=i:(this||e)._icons=(this||e)._icons2:(this||e)._icons=null},_icons:[],_icons2:[{template:function(){return"<span role='button' tabindex='0' class='webix_cal_icon_today webix_cal_icon'>"+u.calendar.today+"</span>"},on_click:{webix_cal_icon_today:function(){var i=new Date;(this||e)._settings.timepicker||(i=ii.datePart(i));this.setValue(i,"user");this.callEvent("onTodaySet",[this.getSelectedDate()])}}},{template:function(){return"<span role='button' tabindex='0' class='webix_cal_icon_clear webix_cal_icon'>"+u.calendar.clear+"</span>"},on_click:{webix_cal_icon_clear:function(){this.setValue("","user");this.callEvent("onDateClear",[this.getSelectedDate()])}}}],refresh:function(){this.render()},render:function(){(this||e)._zoom_level=0;(this||e)._zoom_size=false;var i=(this||e)._settings;if(this.isVisible(i.id)){(this||e)._current_time=ii.datePart(new Date);this.callEvent("onBeforeRender",[]);var s=this.getVisibleDate();var n=this._getDateBoundaries(s,true);var r=this._getColumnConfigSizes(s);var a=(this||e)._content_padding+"px";var o=r[0];var l=r[1];var h="";if(i.monthHeader){h+="<div class='webix_cal_month' style='margin:0 "+a+"'><span role='log' aria-live='assertive' aria-atomic='true' class='webix_cal_month_name"+(i.monthSelect&&i.navigation?"' role='button' tabindex='0'":" webix_readonly'")+">"+i.calendarHeader(s)+"</span>";i.navigation&&(h+="<div role='button' tabindex='0' aria-label='"+u.aria.navMonth[0]+"' class='webix_cal_prev_button'></div><div role='button' tabindex='0' aria-label='"+u.aria.navMonth[1]+"' class='webix_cal_next_button'></div>");h+="</div>"}i.weekHeader&&(h+="<div class='webix_cal_header' style='margin:0 "+a+"' aria-hidden='true'>"+this._week_template(o)+"</div>");h+="<div class='webix_cal_body' role='grid' style='margin:0 "+a+"'>"+this._body_template(o,l,n,r[2])+"</div>";if(i.timepicker||(this||e)._icons){h+="<div class='webix_cal_footer' style='margin:0 "+a+"'>";i.timepicker&&(h+=this._timepicker_template(s));(this||e)._icons&&(h+=this._icons_template());h+="</div>"}(this||e)._contentobj.innerHTML=h;(this||e)._contentobj.firstChild.style.marginTop=a;"time"==i.type?this._changeZoomLevel(-1,s):"month"==i.type?this._changeZoomLevel(1,s):"year"==i.type&&this._changeZoomLevel(2,s);this._fix_cover();this.callEvent("onAfterRender",[])}},_icons_template:function(s){var n="<div class='webix_cal_icons'>";var r=(this||e)._icons;for(var a=0;a<r.length;a++){if(r[a].template){var o="function"==typeof r[a].template?r[a].template:o(r[a].template);n+=o.call(this||e,s)}r[a].on_click&&i.extend((this||e).on_click,r[a].on_click)}n+="</div>";return n},_timepicker_template:function(i){var s=(this||e)._settings.calendarTime||u.timeFormatStr;var n=(this||e)._settings.timeIcon;var r="";if((this||e)._settings.master){var a=copy($$((this||e)._settings.master)._settings.value);ii.equal(a.end,i)&&(a.start=a.end);for(var o in a)r+="<div role='button' tabindex='0' class='webix_range_time_"+o+" webix_cal_time'><span class='webix_icon "+n+"'></span> "+s(a[o])+"</div>"}else r="<div role='button' tabindex='0' class='webix_cal_time"+((this||e)._icons?" webix_cal_time_icons":"")+"'><span class='webix_icon "+n+"'></span> "+s(i)+"</div>";return r},_week_template:function(i){var s=(this||e)._settings;var n="";var r=0;if(s.weekNumber){r=1;n+="<div class='webix_cal_week_header' style='width: "+i[0]+"px;' >"+(s.calendarWeekHeader||"")+"</div>"}var a=ii.startOnMonday?1:0;for(var o=0;o<7;o++){var l=(a+o)%7;var h=u.calendar.dayShort[l];n+="<div day='"+l+"' style='width: "+i[o+r]+"px;' >"+h+"</div>"}return n},blockDates_setter:function(i){return toFunctor(i,(this||e).$scope)},_day_css:function(i,s){var n="",r=false;ii.equal(i,(this||e)._current_time)&&(n+=" webix_cal_today");this._checkDate(i)||(n+=" webix_cal_day_disabled");if(i.getMonth()!=s._month){r=true;n+=" webix_cal_outside"}!r&&this._selectedDay(i)&&(n+=" webix_cal_select");(this||e)._settings.events&&(n+=" "+((this||e)._settings.events(i,r)||""));n+=" webix_cal_day";return n},_body_template:function(i,s,n,r){var a=(this||e)._settings;var o=a.weekNumber?1:0;var l=ii.datePart(ii.copy(n._start));var h=ii.getISOWeek(ii.add(l,2,"day",true));var _,c="";for(var d=0;d<s.length;d++){c+="<div class='webix_cal_row' role='row' style='height:"+s[d]+"px;line-height:"+s[d]+"px'>";if(o){!l.getMonth()&&l.getDate()<7&&(h=ii.getISOWeek(ii.add(l,2,"day",true)));c+="<div class='webix_cal_week_num' aria-hidden='true' style='width:"+i[0]+"px'>"+h+"</div>"}for(var f=o;f<i.length;f++){var g=this._selectedDay(l);var v=this._day_css(l,n);var p=a.dayTemplate.call(this||e,l);var m="";if("object"==_typeof(p)){m=p.aria||m;p=p.text}else m=ii.dateToStr(u.aria.dateFormat)(l);var b=l.getMonth()!=n._month;var w=g&&!b?"0":"-1";1!=l.getDate()||b||(w="$webix_tabindex");"0"==w&&(_=true);c+="<div day='"+f+"' role='gridcell' "+(b?"aria-hidden='true'":"")+" aria-label='"+m+"' tabindex='"+w+"' aria-selected='"+(g&&!b?"true":"false")+"' class='"+v+"' style='text-align:center; width:"+i[f]+"px'><span aria-hidden='true' class='webix_cal_day_inner' style='display:inline-block; "+this._getCalSizesString(r,r)+"'>"+p+"</span></div>";l=ii.add(l,1,"day");l.getHours()&&(l=ii.datePart(l))}c+="</div>";h++}return c.replace("$webix_tabindex",_||a.master?"-1":"0")},_changeDate:function(i,s){s||(s=(this||e)._zoom_logic[(this||e)._zoom_level]._changeStep);var n=(this||e)._settings.date;var r=ii.add(n,i*s,"month",true);this._changeDateInternal(n,r,i)},_changeDateInternal:function(i,s,n){if(this.callEvent("onBeforeMonthChange",[i,s])){if((this||e)._zoom_level)this._update_zoom_level(s);else{this.showCalendar(s);if((this||e)._settings.monthHeader&&(this||e)._settings.navigation){var r="webix_cal_"+(n>0?"next":"prev")+"_button";this._restore_focus(r)}}this.callEvent("onAfterMonthChange",[s,i])}},_zoom_logic:{"-2":{_isBlocked:function(i){var s=(this||e)._settings,n=s.date,r=false;var a=s.minTime?s.minTime[0]:0;var o=s.maxTime?s.maxTime[0]+(s.maxTime[1]?1:0):24;var l=s.minTime&&n.getHours()==a?s.minTime[1]:0;var h=s.maxTime&&s.maxTime[1]&&n.getHours()==o-1?s.maxTime[1]:60;if((this||e)._settings.blockTime){var _=ii.copy(n);_.setMinutes(i);r=(this||e)._settings.blockTime(_)}return i<l||i>=h||r},_setContent:function(e,i){e.setMinutes(i)},_findActive:function(i,s,n){if(!(this||e)._isBlocked.call(n,i.getMinutes()))return i;var r=n._settings.minuteStep;var a=ii.add(i,"right"==s?r:-r,"minute",true);return i.getHours()===a.getHours()?this._findActive(a,s,n):void 0}},"-1":{_isBlocked:function(i){var s=(this||e)._settings,n=s.date;var r=s.minTime?s.minTime[0]:0;var a=s.maxTime?s.maxTime[0]+(s.maxTime[1]?1:0):24;if(i<r||i>=a)return true;if(s.blockTime){var o=ii.copy(n);o.setHours(i);var l=s.minTime&&i==r?s.minTime[1]:0;var h=s.maxTime&&s.maxTime[1]&&i==a-1?s.maxTime[1]:60;for(var _=l;_<h;_+=s.minuteStep){o.setMinutes(_);if(!s.blockTime(o))return false}return true}},_setContent:function(e,i){e.setHours(i)},_keyshift:function(e,i,s){var n,r,a=s._settings.minuteStep;if("bottom"===i||"top"===i){e.setHours("bottom"===i?23:0);e.setMinutes("bottom"===i?55:0);e.setSeconds(0);e.setMilliseconds(0);n=e}else if("left"===i||"right"===i){r="right"===i?a:-a;"left"===i&&e.getMinutes()<a&&(r=60-a);"right"===i&&e.getMinutes()>=60-a&&(r=a-60);r-=e.getMinutes()%a;n=s._zoom_logic[-2]._findActive(ii.add(e,r,"minute"),i,s)}else if("up"===i||"down"===i){r="down"===i?1:-1;"down"===i&&23===e.getHours()&&(r=-23);"up"===i&&0===e.getHours()&&(r=23);n=this._findActive(ii.add(e,r,"hour"),i,s)}else false===i&&(n=this._findActive(e,i,s));if(n){s._update_zoom_level(n);s.selectDate(n,false,false,"user")}return"webix_cal_block"+("left"===i||"right"===i?"_min":"")},_findActive:function(i,s,n){if(!(this||e)._isBlocked.call(n,i.getHours()))return i;var r=ii.add(i,"down"==s?1:-1,"hour",true);return i.getDate()===r.getDate()?this._findActive(r,s,n):void 0}},0:{_changeStep:1,_keyshift:function(e,i,s){var n=e;"pgup"===i||"pgdown"===i?n=ii.add(e,"pgdown"===i?1:-1,"month"):"bottom"===i?n=new Date(e.getFullYear(),e.getMonth()+1,0):"top"===i?n=new Date(e.setDate(1)):"left"===i||"right"===i?n=ii.add(e,"right"===i?1:-1,"day"):"up"!==i&&"down"!==i||(n=ii.add(e,"down"===i?1:-1,"week"));s._checkDate(n)||(n=s._findActive(e,i));n&&s.selectDate(n,true,false,"user");return"webix_cal_day"}},1:{_isBlocked:function(i){var s=this.getVisibleDate();s.setMonth(i);var n=(this||e)._settings.blockDates&&(this||e)._settings.blockDates.call(this||e,s);var r=(this||e)._settings.minDate,a=(this||e)._settings.maxDate,o=(this||e)._settings.date.getFullYear();if(r&&!n){var l=r.getFullYear();n=o<l||o==l&&r.getMonth()>i}if(a&&!n){var h=a.getFullYear();n=o>h||o==h&&a.getMonth()<i}return n},_correctDate:function(e,i){e=ii.monthStart(e);e<i._settings.minDate?e=ii.copy(i._settings.minDate):e>i._settings.maxDate&&(e=ii.copy(i._settings.maxDate));return e},_getTitle:function(e){return e.getFullYear()},_getContent:function(e){return u.calendar.monthShort[e]},_setContent:function(e,i){i!=e.getMonth()&&e.setDate(1);e.setMonth(i)},_changeStep:12,_keyshift:function(e,i,s){var n=e;"pgup"===i||"pgdown"===i?n=ii.add(e,"pgdown"===i?1:-1,"year"):"bottom"===i?n=new Date(e.setMonth(11)):"top"===i?n=new Date(e.setMonth(0)):"left"===i||"right"===i?n=ii.add(e,"right"===i?1:-1,"month"):"up"!==i&&"down"!==i||(n=ii.add(e,"down"===i?4:-4,"month"));n=s._correctDate(n);s._checkDate(n)||(n=s._findActive(e,i));if(n){s._update_zoom_level(n);s.selectDate(n,false,false,"user")}return"webix_cal_block"}},2:{_isBlocked:function(i){i+=(this||e)._zoom_start_date;var s=this.getVisibleDate();s.setFullYear(i);var n=(this||e)._settings.blockDates&&(this||e)._settings.blockDates.call(this||e,s);var r=(this||e)._settings.minDate;var a=(this||e)._settings.maxDate;return!!(n||r&&r.getFullYear()>i||a&&a.getFullYear()<i)},_correctDate:function(e,i){e=ii.yearStart(e);e<i._settings.minDate?e=ii.copy(i._settings.minDate):e>i._settings.maxDate&&(e=ii.copy(i._settings.maxDate));return e},_getTitle:function(e,i){var s=e.getFullYear();i._zoom_start_date=s=s-s%10-1;return s+" - "+(s+10+1)},_getContent:function(e,i){return i._zoom_start_date+e},_setContent:function(e,i,s){e.setFullYear(s._zoom_start_date+i)},_changeStep:120,_keyshift:function(e,i,s){var n=e;"pgup"===i||"pgdown"===i?n=ii.add(e,"pgdown"===i?10:-10,"year"):"bottom"===i?n=new Date(e.setYear(s._zoom_start_date+10)):"top"===i?n=new Date(e.setYear(s._zoom_start_date)):"left"===i||"right"===i?n=ii.add(e,"right"===i?1:-1,"year"):"up"!==i&&"down"!==i||(n=ii.add(e,"down"===i?4:-4,"year"));n=s._correctDate(n);s._checkDate(n)||(n=s._findActive(e,i));if(n){s._update_zoom_level(n);s.selectDate(n,false,false,"user")}return"webix_cal_block"}}},_correctBlockedTime:function(){var i,s,n;s=(this||e)._zoom_logic[-1]._isBlocked.call(this||e,(this||e)._settings.date.getHours());if(s)for(i=0;i<24;i++)if(!(this||e)._zoom_logic[-1]._isBlocked.call(this||e,i)){(this||e)._settings.date.setHours(i);break}n=(this||e)._zoom_logic[-2]._isBlocked.call(this||e,(this||e)._settings.date.getMinutes());if(n)for(i=0;i<60;i+=(this||e)._settings.minuteStep)if(!(this||e)._zoom_logic[-2]._isBlocked.call(this||e,i)){(this||e)._settings.date.setMinutes(i);break}},_update_zoom_level:function(i){var s,n,r,a,o,l,h,_,c,d,f,g;var v="";var p=(this||e)._content_padding+"px";s=(this||e)._settings;o=2-(s.weekHeader?0:1)-(s.monthHeader?0:1);d=(this||e)._zoom_logic[(this||e)._zoom_level];l=(this||e)._contentobj.childNodes;i&&this.define("date",i);_=s.type;if(!(this||e)._zoom_size){(this||e)._reserve_box_height=(this||e)._contentobj.offsetHeight-(s.monthHeader||(this||e)._zoom_in?s.headerHeight:0)-2*((this||e)._content_padding+Ht.borderWidth);"year"!=_&&"month"!=_&&((this||e)._reserve_box_height-=s.timepickerHeight);(this||e)._reserve_box_width=l[o].offsetWidth;(this||e)._zoom_size=1}if((this||e)._zoom_in){r=(this||e)._reserve_box_height/6;var m=6;var b=(this||e)._calendarTime||u.timeFormat;var w=b.match(/%([a,A])/);w&&m++;c=parseInt(((this||e)._reserve_box_width-3)/m,10);g=Math.min(c,r);v+="<div class='webix_time_header' style='margin:0 "+p+"'>"+this._timeHeaderTemplate(c,w)+"</div>";v+="<div  class='webix_cal_body' style='height:"+(this||e)._reserve_box_height+"px; margin:0 "+p+";'>";this._correctBlockedTime();v+="<div role='grid' class='webix_hours'><div role='row'>";h=s.date.getHours();f=ii.copy(s.date);for(a=0;a<24;a++){n="";if(w&&a%4===0){var x=a?12==a?u.pm[0]:"":u.am[0];v+="<div class='webix_cal_block_empty"+n+"' style='"+this._getCalSizesString(c,r)+"clear:both;'>"+x+"</div>"}(this||e)._zoom_logic[-1]._isBlocked.call(this||e,a)?n+=" webix_cal_day_disabled":h==a&&(n+=" webix_selected");f.setHours(a);v+="<div aria-label='"+ii.dateToStr(u.aria.hourFormat)(f)+"' role='gridcell' tabindex='"+(h==a?"0":"-1")+"' aria-selected='"+(h==a?"true":"false")+"' class='webix_cal_block"+n+"' data-value='"+a+"' style='"+this._getCalSizesString(c,r)+(a%4!==0||w?"":"clear:both;")+"'><span style='display:inline-block; "+this._getCalSizesString(g,g)+"'>"+ii.toFixed(w?a&&12!=a?a%12:12:a)+"</span></div>"}v+="</div></div>";v+="<div role='grid' class='webix_minutes'><div role='row'>";h=s.date.getMinutes();f=ii.copy(s.date);for(a=0;a<60;a+=s.minuteStep){n="";(this||e)._zoom_logic[-2]._isBlocked.call(this||e,a)?n=" webix_cal_day_disabled":h==a&&(n=" webix_selected");f.setMinutes(a);v+="<div aria-label='"+ii.dateToStr(u.aria.minuteFormat)(f)+"' role='gridcell' tabindex='"+(h==a?"0":"-1")+"' aria-selected='"+(h==a?"true":"false")+"' class='webix_cal_block webix_cal_block_min"+n+"' data-value='"+a+"' style='"+this._getCalSizesString(c,r)+(a/s.minuteStep%2===0?"clear:both;":"")+"'><span style='display:inline-block; "+this._getCalSizesString(g,g)+"'>"+ii.toFixed(a)+"</span></div>"}v+="</div></div>";v+="</div>";v+="<div class='webix_time_footer' style='margin:0 "+p+"'>"+this._timeButtonsTemplate()+"</div>";(this||e)._contentobj.innerHTML=v;(this||e)._contentobj.firstChild.style.marginTop=p}else{if(s.monthHeader){var y=l[0].childNodes;var S=d._getTitle(s.date,this||e);y[0].innerHTML!=S&&(y[0].innerHTML=S);if(s.navigation){var $=u.aria["nav"+(1==(this||e)._zoom_level?"Year":"Decade")];y[1].setAttribute("aria-label",$[0]);y[2].setAttribute("aria-label",$[1])}}else d._getTitle(s.date,this||e);r=Math.floor((this||e)._reserve_box_height/3);c=Math.floor((this||e)._reserve_box_width/4);g=Math.min(r,c);h=1===(this||e)._zoom_level?s.date.getMonth():s.date.getFullYear()-(this||e)._zoom_start_date;for(a=0;a<12;a++){n="";d._isBlocked.call(this||e,a)?n=" webix_cal_day_disabled":h==a&&(n=" webix_selected");var C=u.aria[(1==(this||e)._zoom_level?"month":"year")+"Format"];v+="<div role='gridcell' aria-label='"+ii.dateToStr(C)(s.date)+"' tabindex='"+(-1!==n.indexOf("selected")?"0":"-1")+"' aria-selected='"+(-1!==n.indexOf("selected")?"true":"false")+"' class='webix_cal_block"+n+"' data-value='"+a+"' style='"+this._getCalSizesString(c,r)+"'><span style='display:inline-block; "+this._getCalSizesString(g,g)+"'>"+d._getContent(a,this||e)+"</span></div>"}if(s.weekHeader){l[o-1].style.display="none";1===o&&(l[o].style.marginTop=p)}l[o].innerHTML="<div role='row'>"+v+"</div>";"year"!=_&&"month"!=_?l[o+1]?l[o+1].innerHTML=this._timeButtonsTemplate():(this||e)._contentobj.innerHTML+="<div class='webix_time_footer' style='margin:0 "+p+"'>"+this._timeButtonsTemplate()+"</div>":l[o+1]&&(l[o+1].style.display="none");l[o].style.height=(this||e)._reserve_box_height+"px"}},_getCalSizesString:function(e,i){return"width:"+e+"px; height:"+i+"px; line-height:"+i+"px;"},_timeButtonsTemplate:function(){return"<input type='button' style='width:100%' class='webix_cal_done' value='"+u.calendar.done+"'>"},_timeHeaderTemplate:function(e,i){var s=e*(i?5:4);var n=2*e;return"<div class='webix_cal_hours' style='width:"+s+"px'>"+u.calendar.hours+"</div><div class='webix_cal_minutes' style='width:"+n+"px'>"+u.calendar.minutes+"</div>"},_changeZoomLevel:function(i,s){var n=(this||e)._zoom_level;if(this.callEvent("onBeforeZoom",[i,n])){(this||e)._zoom_level=i;i?this._update_zoom_level(s):this.showCalendar(s);this.callEvent("onAfterZoom",[i,n])}},_correctDate:function(i){(this||e)._zoom_logic[(this||e)._zoom_level]._correctDate&&!this._checkDate(i)&&(i=(this||e)._zoom_logic[(this||e)._zoom_level]._correctDate(i,this||e));return i},_mode_selected:function(i,s){var n=this._locate_date(i);var r=(this||e)._zoom_level-((this||e)._fixed?0:1);n=this._correctDate(n);if(this._checkDate(n)){this._changeZoomLevel(r,n);var a=(this||e)._settings.type;"month"!=a&&"year"!=a||this._selectDate(n,false,s)}},_selectDate:function(e,i,s){if(this.callEvent("onBeforeDateSelect",[e])){this.selectDate(e,true,i,s);this.callEvent("onAfterDateSelect",[e])}},_locate_day:function(i,s){var n=index(i)-((this||e)._settings.weekNumber?1:0);var r=index(i.parentNode);if(s)return{cind:n,rind:r};var a=ii.add(this._getDateBoundaries()._start,n+7*r,"day",true);if((this||e)._settings.timepicker){a.setHours((this||e)._settings.date.getHours());a.setMinutes((this||e)._settings.date.getMinutes())}return a},_locate_date:function(i){var s=1*i.getAttribute("data-value");var n=-1!=i.className.indexOf("webix_cal_block_min")?(this||e)._zoom_level-1:(this||e)._zoom_level;var r=this.getVisibleDate();(this||e)._zoom_logic[n]._setContent(r,s,this||e);return r},on_click:{webix_cal_prev_button:function(){this._changeDate(-1)},webix_cal_next_button:function(){this._changeDate(1)},webix_cal_day_disabled:function(){return false},webix_cal_outside:function(){if(!(this||e)._settings.navigation)return false},webix_cal_day:function(i,s,n){var r=this._locate_day(n);var a=(this||e)._settings.multiselect?this._locate_day(n,true):null;var o="touch"===(this||e)._settings.multiselect||i.ctrlKey||i.metaKey;this._selectDate(r,o,"user");this._restore_focus("webix_cal_day",a)},webix_cal_time:function(){if((this||e)._zoom_logic[(this||e)._zoom_level-1]){(this||e)._zoom_in=true;var i=(this||e)._zoom_level-1;this._changeZoomLevel(i)}},webix_range_time_start:function(){$$((this||e)._settings.master)._time_mode="start"},webix_range_time_end:function(){$$((this||e)._settings.master)._time_mode="end"},webix_cal_done:function(){var i=this.getVisibleDate();if((this||e)._zoom_in){var s=this.getSelectedDate(true);if(s){s.setHours(i.getHours());s.setMinutes(i.getMinutes());i=s}}i=this._correctDate(i);this._selectDate(i,false,"user")},webix_cal_month_name:function(){if((this||e)._settings.navigation){(this||e)._zoom_in=false;if(2!=(this||e)._zoom_level&&(this||e)._settings.monthSelect){var i=Math.max((this||e)._zoom_level,0)+1;this._changeZoomLevel(i)}}},webix_cal_block:function(i,s,n){if((this||e)._zoom_in){if(-1!==n.className.indexOf("webix_cal_day_disabled"))return false;var r=this._locate_date(n);this._update_zoom_level(r);var a="webix_cal_block";-1!==n.className.indexOf("webix_cal_block_min")&&(a="webix_cal_block_min");this._restore_focus(a)}else-1==n.className.indexOf("webix_cal_day_disabled")&&this._mode_selected(n,"user")}},_string_to_date:function(e,i){if(!e)return ii.datePart(new Date);"string"==typeof e&&(e=i?ii.strToDate(i)(e):u.parseFormatDate(e));return e},_checkDate:function(i){var s=(this||e)._settings.blockDates&&(this||e)._settings.blockDates.call(this||e,i);var n=(this||e)._settings.minDate;var r=(this||e)._settings.maxDate;var a=n&&i<n||r&&i>=ii.add(r,1,"day",true);return!s&&!a},_findActive:function(i,s){var n="top"===s||"left"===s||"pgup"===s||"up"===s?-1:1;var r=ii.add(i,n,"day",true);if(this._checkDate(r))return r;var a;0===(this||e)._zoom_level?a=i.getMonth()===r.getMonth():1===(this||e)._zoom_level?a=i.getFullYear()===r.getFullYear():2===(this||e)._zoom_level&&(a=r.getFullYear()>(this||e)._zoom_start_date&&r.getFullYear()<(this||e)._zoom_start_date+10);return a?this._findActive(r,s):void 0},showCalendar:function(e){this.define("date",e);this.render();this.resize()},_selectedDay:function(i){return i&&(this||e)._selected_days[i.valueOf()]},getSelectedDate:function(i){var s=[];var n=Object.keys((this||e)._selected_days);var r=i?Math.min(1,n.length):n.length;for(var a=0;a<r;a++)s.push(ii.copy((this||e)._selected_days[n[a]]));return(this||e).config.multiselect&&!i?s:s[0]||null},getVisibleDate:function(){return ii.copy((this||e)._settings.date)},setValue:function(e,i){this.selectDate(e,true,false,i)},getValue:function(e){var i=this.getSelectedDate();e&&(i=ii.dateToStr(e)(i));return i},selectDate:function(i,s,n,r){i&&n&&(this||e).config.multiselect||((this||e)._selected_days={});if(i){isArray(i)||(i=[i]);for(var a=0;a<i.length;a++){var o=this._string_to_date(i[a]);var l=ii.datePart(ii.copy(o)).valueOf();(this||e)._selected_days[l]&&n?delete(this||e)._selected_days[l]:(this||e)._selected_days[l]=o;if(!(this||e).config.multiselect)break}i.length&&s&&this.showCalendar(i[0])}false!==s&&this.render();this.callEvent("onChange",[i,r])},locate:function(){return null}};i.protoUI(cs,ve,me,St.view,f);var ds={name:"colorboard",defaults:{template:function(e){return'<div class="webix_color_item" style="background-color:'.concat(e.val,';"></div>')},palette:null,height:250,width:260,cols:11,rows:10,minLightness:.15,maxLightness:1,navigation:true,grayScale:true,type:"material"},$init:function(){_event((this||e)._viewobj,"click",bind((function(i){var s=i.target.parentNode;var n=locate(s,"webix_val");if(n){var r=(this||e)._settings.value;this.setValue(n,"user");n=(this||e)._settings.value;this.callEvent("onItemClick",[n,i]);n!=r&&this.callEvent("onSelect",[n])}}),this||e));(this||e).$view.setAttribute("role","grid");(this||e)._viewobj.setAttribute("aria-readonly","true")},_get_clear_palette:function(){return["#F34336","#FF9700","#FFEA3B","#4CB050","#009788","#00BCD4","#2196F3","#3F51B5","#673BB7","#9C28B1","#EA1E63"]},_set_item_focus:function(){this.getValue()||this.moveSelection("up")},_findIndex:function(i){var s=(this||e)._settings.palette;i=(i||"").toUpperCase();for(var n=0,r=s.length;n<r;n++)for(var a=0,o=s[n].length;a<o;a++)if(s[n][a].toUpperCase()==i)return{row:n,col:a};return null},$setSize:function(i,s){St.api.$setSize.call(this||e,i,s)&&this.render()},getValue:function(){return(this||e)._settings.value},_getBox:function(){return(this||e)._viewobj.firstChild},$prepareValue:function(e){e=e?e.toString(16):"";e&&"#"!=e.charAt(0)&&/^[0-9a-fA-F]+$/.test(e)&&(e="#"+e);return e},value_setter:function(e){return this.$prepareValue(e)},setValue:function(i,s){i=this.$prepareValue(i);var n=(this||e)._settings.value;if(n!=i){(this||e)._settings.value=i;this.$setValue(i);this.callEvent("onChange",[i,n,s])}},$setValue:function(i){if(this.isVisible((this||e)._settings.id)){if((this||e)._activeSelection){var s=this._getCell((this||e)._activeSelection);this._setSelection(s,false)}var n=(this||e)._activeSelection=this._findIndex(i);if(n){var r=this._getCell(n);this._setSelection(r,true)}}},_getCell:function(i){return(this||e)._viewobj.lastChild.childNodes[i.row].childNodes[i.col]},_setSelection:function(e,i){if(i){e.setAttribute("tabindex","0");e.setAttribute("aria-selected","true");addCss(e,"webix_color_selected")}else{e.setAttribute("tabindex","-1");e.removeAttribute("aria-selected");removeCss(e,"webix_color_selected")}},_numToHex:function(e){return ke.toHex(e,2)},_rgbToHex:function(e,i,s){return"#"+this._numToHex(Math.floor(e))+this._numToHex(Math.floor(i))+this._numToHex(Math.floor(s))},_hslToRgb:function(e,i,s){var n,r,a;if(i){var o=s<.5?s*(1+i):s+i-s*i;var l=2*s-o;n=this._hue2rgb(l,o,e+1/3);r=this._hue2rgb(l,o,e);a=this._hue2rgb(l,o,e-1/3)}else n=r=a=s;return{r:255*n,g:255*r,b:255*a}},_hue2rgb:function(e,i,s){s<0&&(s+=1);s>1&&(s-=1);return s<1/6?e+6*(i-e)*s:s<=.5?i:s<2/3?e+(i-e)*(2/3-s)*6:e},_lightenRgb:function(e,i){var s=e[0]*i+255*(1-i);var n=e[1]*i+255*(1-i);var r=e[2]*i+255*(1-i);return{r:s,g:n,b:r}},_getGrayScale:function(e){var i=[];var s=255,n=s/e;for(var r=0;r<e;r++){s=Math.round(s>0?s:0);i.push(this._rgbToHex(s,s,s));s-=n}i[i.length-1]="#000000";return i},_initPalette:function(i){var s=this._get_clear_palette();i.cols=s.length;var n=[];var r=i.rows-1;var a=1/i.rows;var o=null;if((this||e)._settings.grayScale){var l=this._getGrayScale(i.cols);n.push(l.reverse());a=1/r;r-=1}n.push(s);for(var h=0,_=i.maxLightness;h<r;h++){_-=a;o=[];for(var c=0;c<i.cols;c++){var d=ke.toRgb(s[c]);var u=this._lightenRgb(d,_);o.push(this._rgbToHex(u.r,u.g,u.b))}n.push(o)}(this||e)._settings.palette=n},_initOldPalette:function(i){var s=[];var n=1/i.cols;var r=i.rows;var a=null;if((this||e)._settings.grayScale){s.push(this._getGrayScale(i.cols));r-=1}var o=(i.maxLightness-i.minLightness)/r;for(var l=0,h=i.minLightness;l<r;l++){a=[];for(var _=0,c=0;_<i.cols;_++){var d=this._hslToRgb(c,1,h);a.push(this._rgbToHex(d.r,d.g,d.b));c+=n}s.push(a);h+=o}(this||e)._settings.palette=s},moveSelection:function(i,s,n){var r,a,o=this.getValue();o&&(r=this._findIndex(o));r||(r={row:0,col:0});if(r){if("up"==i||"down"==i)r.row=r.row+("up"==i?-1:1);else if("right"==i||"left"==i)r.col=r.col+("right"==i?1:-1);else if("top"==i)r.row=r.col=0;else if("bottom"==i){r.row=(this||e)._viewobj.lastChild.querySelectorAll(".webix_color_row").length-1;r.col=(this||e)._viewobj.lastChild.childNodes[r.row].childNodes.length-1}r.row=Math.max(r.row,0);if(r.row>=0){var l=(this||e)._viewobj.lastChild.childNodes[r.row];l&&(a=l.childNodes[r.col])}if(a){o=a.getAttribute("webix_val");var h=s&&s.e instanceof KeyboardEvent?"user":"auto";this.setValue(o,h);this.callEvent("onSelect",[(this||e)._settings.value]);if(false!==n){var _=(this||e)._viewobj.querySelector("div[tabindex='0']");_&&_.focus()}}}},_renderRow:function(e,i,s){var n={width:0,height:0,val:0};var r='<div class="webix_color_row" role="row">';for(var a=0;a<e.length;a++){n.width=i[a];n.height=s;n.val=e[a];r+=this._renderItem(n)}r+="</div>";return r},_renderItem:function(i){var s=template((this||e)._settings.template||"");return'<div role="gridcell" tabindex="-1" aria-label="'.concat(i.val,'" style="width:').concat(i.width,"px;height:").concat(i.height,'px;" ',"webix_val",'="').concat(i.val,'">').concat(s(i),"</div>")},render:function(){if(this.isVisible((this||e)._settings.id)){var i=(this||e)._settings.type;(this||e)._settings.palette||("classic"===i?this._initOldPalette((this||e)._settings):this._initPalette((this||e)._settings));var s=(this||e)._settings.palette;this.callEvent("onBeforeRender",[]);var n="classic"===i?0:Ht.colorPadding;var r="object"==_typeof(s[0]);var a=r?s[0]:s;var o=2*n+n*(a.length-1);var l=2*n+n*(r?s.length-1:0);var h=(this||e).$width-o,_=(this||e).$height-l,c=[];var d='<div class="webix_color_palette '.concat("webix_palette_"+i,'" role="rowgroup">');for(var u=0;u<a.length;u++){c[u]=Math.floor(h/(a.length-u));h-=c[u]}if("object"==_typeof(s[0]))for(var f=0;f<s.length;f++){var g=Math.floor(_/(s.length-f));_-=g;var v=s[f];d+=this._renderRow(v,c,g)}else d+=this._renderRow(s,c,_);d+="</div>";(this||e)._viewobj.innerHTML=d;(this||e)._settings.value?this.$setValue((this||e)._settings.value):(this||e)._viewobj.lastChild.childNodes[0].childNodes[0].setAttribute("tabindex","0");this._fix_cover();this.callEvent("onAfterRender",[])}},refresh:function(){this.render()}};i.protoUI(ds,ve,St.view,f);var us={name:"colorselect",defaults:{width:260,height:250,value:"#751FE0"},$init:function(){var i=this||e;(this||e)._hValue=(this||e)._sValue=(this||e)._vValue=0;_event((this||e).$view,"keydown",(function(e){return i._handle_move_keyboard(e)}));this.attachEvent("onAfterRender",(function(){var i=this||e;_event((this||e)._colorBlock,z.mouse.down,(function(e){return i._handle_dnd(e,"mouse")}));_event((this||e)._colorLine,z.mouse.down,(function(e){return i._handle_dnd(e,"mouse",true)}));if(z.touch){_event((this||e)._colorBlock,z.touch.down,(function(e){return i._handle_dnd(e,"touch")}));_event((this||e)._colorLine,z.touch.down,(function(e){return i._handle_dnd(e,"touch",true)}))}_event((this||e)._colorOutText,"change",(function(){return i.setValue(i._colorOutText.value,"user")}));(this||e)._settings.button&&_event((this||e)._viewobj.querySelector(".webix_button"),"click",(function(){i.callEvent("onColorSelect",[i.getValue()])}))}));this.attachEvent("onDestruct",(function(){(this||e)._colorCircle=(this||e)._colorLineCircle=(this||e)._colorBlock=null;(this||e)._colorLine=(this||e)._colorOutText=(this||e)._colorOutBlock=(this||e)._offset=null}))},$skin:function(){(this||e)._inpHeight="compact"==jt||"mini"==jt?24:32},$setSize:function(i,s){St.api.$setSize.call(this||e,i,s)&&this.render()},getValue:function(){return(this||e)._settings.value},$prepareValue:function(e){e=e?e.toString(16):"";e&&"#"!=e.charAt(0)&&/^[0-9a-fA-F]+$/.test(e)&&(e="#"+e);return e},value_setter:function(e){return this.$prepareValue(e)},setValue:function(i,s){i=this.$prepareValue(i);var n=(this||e)._settings.value;if(n!=i){(this||e)._settings.value=i;this.$setValue(i);this.callEvent("onChange",[i,n,s])}},$setValue:function(i){if(this.isVisible((this||e)._settings.id)){var s=ke.toRgb(i);if(i!==(this||e)._current_value){var n=ke.rgbToHsv.apply(ke,_toConsumableArray(s));(this||e)._hValue=n[0];(this||e)._sValue=n[1];(this||e)._vValue=n[2]}var r=(this||e)._hValue*(this||e)._offset.width/359;(this||e)._colorLineCircle.style.left=r+"px";var a=(this||e)._sValue*(this||e)._offset.width;var o=Math.abs((this||e)._offset.height*((this||e)._vValue-1));(this||e)._colorCircle.style.left=Math.max(Math.min(a,(this||e)._offset.width),0)+"px";(this||e)._colorCircle.style.top=Math.max(Math.min(o,(this||e)._offset.height),0)+"px";(this||e)._colorCircle.setAttribute("aria-valuetext",i);(this||e)._colorLineCircle.setAttribute("aria-valuetext",i);this._setOutColors(s,i);this._setBlockColors()}},_setOutColors:function(i,s){i||(i=ke.hsvToRgb((this||e)._hValue,(this||e)._sValue,(this||e)._vValue));s||(s="#"+ke.rgbToHex(i));var n="rgb(".concat(i[0],", ").concat(i[1],", ").concat(i[2],")");(this||e)._colorCircle.style.backgroundColor=n;(this||e)._colorOutBlock.style.backgroundColor=n;(this||e)._colorOutText.value=s.toUpperCase();(this||e)._current_value=s},_setBlockColors:function(){var i=ke.hsvToRgb((this||e)._hValue,1,1);var s="rgb(".concat(i[0],", ").concat(i[1],", ").concat(i[2],")");(this||e)._colorLineCircle.style.backgroundColor=s;(this||e)._colorBlock.style.backgroundColor=s},_move_block:function(i){var s=pos(i);var n=s.x-(this||e)._offset.x;var r=s.y-(this||e)._offset.y;n=Math.max(Math.min(n,(this||e)._offset.width),0);r=Math.max(Math.min(r,(this||e)._offset.height),0);(this||e)._colorCircle.style.left=n+"px";(this||e)._colorCircle.style.top=r+"px";var a=(this||e)._offset.width/100;var o=(this||e)._offset.height/100;var l=Math.ceil(n/a)/100;var h=Math.ceil(Math.abs(r/o-100))/100;(this||e)._sValue=l;(this||e)._vValue=h;this._setOutColors()},_move_line:function(i){var s=pos(i);var n=s.x-(this||e)._offset.x;n=Math.max(Math.min(n,(this||e)._offset.width),0);(this||e)._colorLineCircle.style.left=n+"px";var r=Math.round(359*n/(this||e)._offset.width);(this||e)._hValue=Math.max(Math.min(r,359),0);this._setOutColors();this._setBlockColors()},_handle_dnd:function(i,s,n){var r=this||e;(this||e)._offset=offset((this||e)._colorBlock);if(n){addCss((this||e)._colorLine,"webix_color_area_active");this._move_line(i)}else{addCss((this||e)._colorBlock,"webix_color_area_active");this._move_block(i)}var a="touch"===s?{passive:false}:null;(this||e)._handle_drag_events=[event$1(document.body,z[s].move,(function(e){return r._handle_move_process(e,s,n)}),a),event$1(document,z[s].up,(function(){return r._handle_move_stop(n)}))];addCss(document.body,"webix_noselect")},_handle_move_process:function(e,i,s){s?this._move_line(e):this._move_block(e);"touch"===i&&preventEvent(e)},_handle_move_stop:function(i){eventRemove((this||e)._handle_drag_events[0]);eventRemove((this||e)._handle_drag_events[1]);(this||e)._handle_drag_events=null;this.setValue((this||e)._current_value,"user");if(i){removeCss((this||e)._colorLine,"webix_color_area_active");(this||e)._colorLineCircle.focus()}else{removeCss((this||e)._colorBlock,"webix_color_area_active");(this||e)._colorCircle.focus()}removeCss(document.body,"webix_noselect")},_move_block_value:function(e,i){return Math.min(Math.max(e+i/100,0),1)},_move_line_value:function(e,i){return Math.min(Math.max(e+i,0),359)},_handle_move_keyboard:function(i){var s=i.which||i.keyCode;if(s>32&&s<41){var n=/webix_color_(\w*)circle/.exec(i.target.className);if(!n)return;preventEvent(i);if(n[1].length){if(36===s)(this||e)._hValue=0;else if(35===s)(this||e)._hValue=359;else{var r=37===s||40===s||34===s?-1:1;(this||e)._hValue=this._move_line_value((this||e)._hValue,r)}this._setBlockColors()}else if(36===s){(this||e)._sValue=0;(this||e)._vValue=1}else if(35===s)(this||e)._sValue=(this||e)._vValue=1;else if(39===s||37===s){var a=39===s?1:-1;(this||e)._sValue=this._move_block_value((this||e)._sValue,a)}else{var o=33===s||38===s?1:-1;(this||e)._vValue=this._move_block_value((this||e)._vValue,o)}this._setOutColors();(this||e)._settings.value==(this||e)._current_value?this.$setValue((this||e)._current_value):this.setValue((this||e)._current_value,"user")}},moveSelection:function(i){if("pgup"==i||"pgdown"==i){var s="pgup"===i?-1:1;(this||e)._hValue=this._move_line_value((this||e)._hValue,s);this._setBlockColors()}else if("top"!=i&&"bottom"!==i){var n="up"==i||"right"==i?1:-1;"down"==i||"up"==i?(this||e)._vValue=this._move_block_value((this||e)._vValue,n):(this||e)._sValue=this._move_block_value((this||e)._sValue,n)}this._setOutColors();this.setValue((this||e)._current_value,"auto")},render:function(){if(this.isVisible((this||e)._settings.id)){this.callEvent("onBeforeRender",[]);var i=((this||e).$width-3*Ht.dataPadding)/2;var s=(this||e).$height-24-32-(this||e)._inpHeight-((this||e)._settings.button?(this||e)._inpHeight+12:0);var n='<div class="webix_color_area">';n+="\n\t\t\t<div ".concat("webix_disable_drag",'="true" class="webix_color_block" style="height:',s,'px;">\n\t\t\t\t<div class="webix_color_circle" tabindex="0" role="slider"></div>\n\t\t\t</div>\n\t\t\t<div ',"webix_disable_drag",'="true" class="webix_color_line">\n\t\t\t\t<div class="webix_color_line_circle" tabindex="0" role="slider"></div>\n\t\t\t</div>\n\t\t\t<div class="webix_color_out">\n\t\t\t\t<div style="width:').concat(i,'px" class="webix_color_out_block"></div>\n\t\t\t\t<input type="text" style="width:').concat(i,'px" class="webix_color_out_text"></input>\n\t\t\t</div>\n\t\t');(this||e)._settings.button&&(n+="<div class='webix_secondary'><button class=\"webix_button\">".concat(u.combo.select,"</button></div>"));n+="</div>";(this||e)._viewobj.innerHTML=n;this._collect_vars();this.$setValue((this||e)._settings.value);this._fix_cover();this.callEvent("onAfterRender",[])}},_collect_vars:function(){(this||e)._colorCircle=(this||e)._viewobj.querySelector(".webix_color_circle");(this||e)._colorLineCircle=(this||e)._viewobj.querySelector(".webix_color_line_circle");(this||e)._colorBlock=(this||e)._viewobj.querySelector(".webix_color_block");(this||e)._colorLine=(this||e)._viewobj.querySelector(".webix_color_line");(this||e)._colorOutText=(this||e)._viewobj.querySelector(".webix_color_out_text");(this||e)._colorOutBlock=(this||e)._viewobj.querySelector(".webix_color_out_block");(this||e)._offset=offset((this||e)._colorBlock)},refresh:function(){this.render()}};i.protoUI(us,St.view,f);var fs={name:"button",touchable:true,$skin:function(){(this||e).defaults.height=Ht.buttonHeight||Ht.inputHeight},defaults:{template:function(e,i){var s=i.$renderInput(e,i);(e.badge||0===e.badge)&&(s=s.replace("</button>","<span class='webix_badge'>"+e.badge+"</span></button>"));return"<div class='webix_el_box' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+s+"</div>"},label:"",value:"",borderless:true},$renderInput:function(e){return"<button type='button' "+(e.popup?"aria-haspopup='true'":"")+" class='webix_button'>"+(e.label||e.value)+"</button>"},$init:function(i){(this||e)._viewobj.className+=" webix_control webix_el_"+((this||e).$cssName||(this||e).name);(this||e)._destroy_with_me=[];this._set_default_css(i);(this||e).data=(this||e)._settings;(this||e)._dataobj=(this||e)._viewobj;(this||e).$ready.push((function(){this._calc_size((this||e).config)}))},hotkey_setter:function(i){var s=this||e;this._addElementHotKey(i,(function(e,i){if(s.isVisible()){var n=s.$view.firstChild;triggerEvent(n,"MouseEvent","click");preventEvent(i)}}))},_set_default_css:function(i){i.css&&this._get_class(i.css)&&(!(this||e).defaults.css||this._get_class((this||e).defaults.css))||((this||e)._viewobj.className+=" webix_secondary")},_get_class:function(e){if("string"==typeof e){var i={webix_danger:1,webix_transparent:1,webix_primary:1};for(var s in i)if(-1!==e.indexOf(s))return true}return false},_addElementHotKey:function(e,i,s){var n=ht.addHotKey(e,i,s);this.attachEvent("onDestruct",(function(){ht.removeHotKey(n,i,s)}))},type_setter:function(i){(this||e)._types[i]&&((this||e).$renderInput=template((this||e)._types[i]));return i},_set_inner_size:false,_types:{image:"<button type='button' class='webix_button webix_img_btn' style='line-height:#cheight#px;'><img class='webix_image' style='max-width:#cheight#px; max-height:#cheight#px;' src = '#image#'>#label#</button>",imageTop:"<button type='button' class='webix_button webix_img_btn_top'><img class='webix_image' style='max-width:#cheight#px; max-height:#cheight#px;' src = '#image#'><div class='webix_img_btn_text'>#label#</div></button>",icon:"<button type='button' class='webix_button webix_img_btn' style='line-height:#cheight#px;'><span class='webix_icon_btn #icon#' style='max-width:#cheight#px;'></span>#label#</button>",iconTop:"<button type='button' class='webix_button webix_img_btn_top' style='width:100%;text-align:center;'><span class='webix_icon #icon#'></span><div class='webix_img_btn_text'>#label#</div></button>"},_findAllInputs:function(){var i=[];var s=["input","select","textarea","button"];for(var n=0;n<s.length;n++){var r=(this||e).$view.getElementsByTagName(s[n]);for(var a=0;a<r.length;a++)i.push(r[a])}return i},disable:function(){var i,s,n=this._getBox();wt.api.disable.apply(this||e,arguments);if(n&&-1==n.className.indexOf(" webix_disabled_box")){n.className+=" webix_disabled_box";var r=this._findAllInputs();for(i=0;i<r.length;i++)r[i].setAttribute("disabled",true);s=this.getInputNode();if(s&&"div"==s.tagName.toLowerCase()){(this||e)._disabledTabIndex=s.getAttribute("tabIndex");s.removeAttribute("tabIndex")}if("top"==(this||e)._settings.labelPosition){var a=(this||e)._dataobj.firstChild;a&&(a.className+=" webix_disabled_top_label")}}},enable:function(){wt.api.enable.apply(this||e,arguments);var i,s=this._getBox();if(s){s.className=s.className.replace(" webix_disabled_box","");var n=this._findAllInputs();for(var r=0;r<n.length;r++)n[r].removeAttribute("disabled");i=this.getInputNode();i&&!isUndefined((this||e)._disabledTabIndex)&&i.setAttribute("tabIndex",(this||e)._disabledTabIndex);if("top"==(this||e)._settings.labelPosition){var a=(this||e)._dataobj.firstChild;a&&(a.className=a.className.replace(" webix_disabled_top_label",""))}}},$setSize:function(i,s){St.api.$setSize.call(this||e,i,s)&&this.render()},setValue:function(i,s){i=this.$prepareValue(i);var n=(this||e)._settings.value;if(this.$compareValue(n,i)){if((this||e)._rendered_input&&(this||e)._pattern){i=this._pattern(i);var r=this.getInputNode();r&&!isUndefined(r.value)&&r.value!=i&&this.$setValue(i)}}else{(this||e)._settings.value=i;(this||e)._rendered_input&&this.$setValue(i);this.callEvent("onChange",[i,n,s])}},$compareValue:function(e,i){"number"===typeof i&&(i=i.toString());"number"===typeof e&&(e=e.toString());return e==i},$prepareValue:function(e){return 0===e?"0":(e||"").toString()},value_setter:function(e){return this.$prepareValue(e)},$setValue:function(i){var s=this.getInputNode();if(s&&!(this||e)._types[(this||e)._settings.type]){i=(this||e)._settings.label||i;"BUTTON"==s.tagName?s.innerHTML=i:s.value=i}},getValue:function(){var i=(this||e)._rendered_input?this.$getValue():(this||e)._settings.value;return"undefined"==typeof i?"":i},$getValue:function(){return(this||e)._settings.value||""},focus:function(){if(!ht.canFocus(this||e))return false;var i=this.getInputNode();i&&i.focus&&i.focus()},blur:function(){var e=this.getInputNode();e&&e.blur&&e.blur()},getInputNode:function(){return(this||e)._dataobj.getElementsByTagName("input")[0]||(this||e)._dataobj.getElementsByTagName("button")[0]},_getBox:function(){for(var i=0;i<(this||e)._dataobj.childNodes.length;i++)if((this||e)._dataobj.childNodes[i].className.indexOf("webix_el_box")>=0)return(this||e)._dataobj.childNodes[i];return null},_get_tooltip_data:function(i,s){var n=s.target;var r=this._getBox();var a="top"==(this||e)._settings.labelPosition&&(this||e)._dataobj.firstChild.contains(n);return a||r&&r.contains(n)?(this||e)._settings:null},_sqrt_2:Math.sqrt(2),_calc_size:function(i){i=i||(this||e)._settings;if(i.autowidth){var s=getTextSize(i.value||i.label||"","webixbutton").width+(i.badge||0===i.badge?2*getTextSize(i.badge,"webix_badge").width-32:0)+("icon"===i.type?24:0)+("image"===i.type?i.height-Ht.inputPadding:0);s=Math.max(i.minWidth||0,s);i.width=Math.min(i.maxWidth||Infinity,s)}},_calck_input_size:function(){(this||e)._input_width=(this||e)._settings.inputWidth||((this||e)._content_width-(this||e)._settings.width>2?(this||e)._settings.width:0)||(this||e)._content_width;(this||e)._input_height=(this||e)._settings.inputHeight||(this||e)._inputHeight||0},resize:function(){this._calc_size();return St.api.resize.apply(this||e,arguments)},render:function(){this._calck_input_size();(this||e)._settings.awidth=(this||e)._input_width||(this||e)._content_width;(this||e)._settings.aheight=(this||e)._input_height||(this||e)._content_height;(this||e)._settings.bheight=(this||e)._settings.aheight+2;(this||e)._settings.cheight=(this||e)._settings.aheight-2*Ht.inputPadding;(this||e)._settings.dheight=(this||e)._settings.cheight-2;if(X.render.call(this||e)){(this||e)._rendered_input=true;(this||e)._set_inner_size&&this._set_inner_size();if((this||e)._settings.align){var i=(this||e)._dataobj.firstChild;"top"==(this||e)._settings.labelPosition&&i.nextSibling&&(i=i.nextSibling);switch((this||e)._settings.align){case"right":i.style.cssFloat="right";break;case"center":i.style.display="inline-block";i.parentNode.style.textAlign="center";break;case"middle":i.style.marginTop=Math.round(((this||e)._content_height-(this||e)._input_height)/2)+"px";break;case"bottom":i.style.marginTop=(this||e)._content_height-(this||e)._input_height+"px";break;case"left":i.style.cssFloat="left";break;default:assert(false,"Unknown align mode: "+(this||e)._settings.align);break}}(this||e).$render&&this.$render((this||e).data);(this||e)._settings.disabled&&this.disable();if((this||e)._init_once){this._init_once((this||e).data);(this||e)._init_once=0}}},refresh:function(){this.render()},on_click:{_handle_tab_click:function(e){var i=locate(e,"button_id");var s=this.getOption(i);if(s&&!s.disabled&&this.callEvent("onBeforeTabClick",[i,e])){this.setValue(i,"user");this.focus();this.callEvent("onAfterTabClick",[i,e])}},webix_all_segments:function(i,s){(this||e).on_click._handle_tab_click.call(this||e,i,s)},webix_all_tabs:function(i,s){(this||e).on_click._handle_tab_click.call(this||e,i,s)},webix_inp_counter_next:function(){(this||e)._settings.readonly||this.next((this||e)._settings.step,"user")},webix_inp_counter_prev:function(){(this||e)._settings.readonly||this.prev((this||e)._settings.step,"user")},webix_input_icon:function(){this.getInputNode().focus()},webix_clear_icon:function(){(this||e).$allowsClear&&this.setValue("","user");return false},webix_inp_checkbox_border:function(i){(this||e)._settings.disabled||"DIV"==i.target.tagName||(this||e)._settings.readonly||this.toggle("user")},webix_inp_checkbox_label:function(){(this||e)._settings.readonly||this.toggle("user")},webix_inp_radio_border:function(e){var i=locate(e,"radio_id");var s=this.getOption(i);if(s&&!s.disabled){this.setValue(i,"user");this.focus()}},webix_tab_more_icon:function(e,i,s){var n=this.getPopup();if(n.isVisible())n.hide();else{n.resize();n.show(s,null,true)}},webix_tab_close:function(e){var i=locate(e,"button_id");var s=this.getOption(i);s&&!s.disabled&&this.callEvent("onBeforeTabClose",[i,e])&&this.removeOption(i);return false}},_check_options:function(i){assert(!!i,(this||e).name+": options not defined");assert(isArray(i),(this||e).name+": options must be an array");for(var s=0;s<i.length;s++){assert(!i[s].text,"Please replace .text with .value in control config");assert(!i[s].label,"Please replace .label with .value in control config");if("string"==typeof i[s])i[s]={id:i[s],value:i[s]};else{isUndefined(i[s].id)&&(i[s].id=i[s].value);isUndefined(i[s].value)&&(i[s].value=i[s].id)}}return i},_get_div_placeholder:function(i){var s=i?i.placeholder:(this||e)._settings.placeholder;return s?"<span class='webix_placeholder'>"+s+"</span>":""}};var gs=i.protoUI(fs,St.view,kt,X,_t,f);var vs={api:fs,view:gs};var ps={name:"label",defaults:{template:"<div class='webix_el_box' style='width:#awidth#px;height:#aheight#px;line-height:#cheight#px'>#label#</div>"},$skin:function(){vs.api.$skin.call(this||e);(this||e).defaults.height=Ht.inputHeight},focus:function(){return false},_getBox:function(){return(this||e)._dataobj.firstChild},setHTML:function(i){(this||e)._settings.label=i;this.refresh()},setValue:function(i){(this||e)._settings.label=i;vs.api.setValue.apply(this||e,arguments)},$setValue:function(i){(this||e)._dataobj.firstChild.innerHTML=i},$render:function(i){"right"===i.align&&((this||e)._dataobj.firstChild.style.textAlign="right")},_set_inner_size:false,_set_default_css:function(){},_calc_size:function(i){var s="webix_el_box webixlabel"+(this.queryView("toolbar","parent")?" webixtoolbarlabel":"");i=i||(this||e)._settings;i.autowidth&&(i.width=getTextSize(i.label,s).width)}};i.protoUI(ps,vs.view);var ms={9:"tab",38:"up",40:"down",37:"left",39:"right"};var bs={$init:function(i){var s=(this||e).defaults.pattern||i.pattern;var n=(this||e).defaults.format||i.format;i.value=isUndefined(i.value)?"":i.value;if(s||n&&!(this||e).format_setter){this.attachEvent("onKeyPress",(function(i,s){if(!(s.ctrlKey||s.altKey||(this||e)._settings.readonly||(this||e)._custom_format)){i>105&&i<112&&(i-=64);if(!ms[i]||8===i||46===i){this._on_key_pressed(s,i);return false}}}));this.attachEvent("onAfterRender",(this||e)._after_render);(this||e).getText=function(){return this.getInputNode().value};(this||e).$prepareValue=function(e){return this._pattern(e,false)};(this||e)._pattern=function(e,i){return false===i?this._getRawValue(e):this._matchPattern(e)};if(n)if("object"===_typeof(n))(this||e)._custom_format=n;else{n=si.getConfig(n);(this||e)._custom_format={parse:function(e){return si.parse(e,n)},edit:function(e){return si.format(e,n)}}}}if(s){(this||e)._settings.pattern=this.pattern_setter(s);delete i.pattern}},pattern_setter:function(e){var i=ci[e]||e;"string"==typeof i&&(i={mask:i});i.allow=i.allow||/[A-Za-z0-9]/g;this._patternScheme(i);return i},_init_validation:function(){(this||e).config.validate=(this||e).config.validate||bind((function(){var i=this.getText();var s=i.replace((this||e)._pattern_chars,"");var n=(i.toString().match((this||e)._pattern_allows)||[]).join("");return n.length==s.length&&i.length==(this||e)._settings.pattern.mask.length}),this||e)},_after_render:function(){var i=this||e;(this||e)._custom_format||_event(this.getInputNode(),"input",(function(){var i=(new Date).valueOf();if(!(this||e)._property_stamp||i-(this||e)._property_stamp>100){(this||e)._property_stamp=i;this.$setValue(this.getText())}}),{bind:this||e});_event(this.getInputNode(),"blur",(function(){return i._applyChanges("user")}))},_patternScheme:function(i){var s=i.mask,n={},r="",a=0;for(var o=0;o<s.length;o++)if("#"===s[o]){n[o]=a;a++}else{n[o]=false;-1===r.indexOf(s[o])&&(r+="\\"+s[o])}(this||e)._pattern_allows=i.allow;(this||e)._pattern_chars=new RegExp("["+r+"]","g");(this||e)._pattern_scheme=n;this._init_validation()},_on_key_pressed:function(i,s){var n=this.getInputNode();var r=n.value;var a=getSelectionRange(n);var o="";if(8==s||46==s)a.start==a.end&&(8==s?a.start--:a.end++);else{o=String.fromCharCode(s);var l=i.getModifierState("CapsLock");(!i.shiftKey&&!l||i.shiftKey&&l)&&(o=o.toLowerCase())}r=r.substr(0,a.start)+o+r.substr(a.end);a=this._getCaretPos(o,r.length,a.start,s);(this||e)._input_code=s;this.$setValue(r);setSelectionRange(n,a)},_getCaretPos:function(i,s,n,r){if(i&&i.match((this||e)._pattern_allows)||8==r||46==r){n=i?n+1:n;n=this._fixCaretPos(n,r)}else if(s-1==n&&8!==r&&46!==r){var a=(this||e)._settings.pattern.mask.indexOf("#",n);a>0&&(n+=a)}return n},_fixCaretPos:function(i,s){var n=i-1*(46!==s);if(false===(this||e)._pattern_scheme[n]){i+=8==s?-1:1;return this._fixCaretPos(i,s)}return false===(this||e)._pattern_scheme[i]&&8!==s?this._fixCaretPos(i+1,s)-1:i},_getRawValue:function(i){if((this||e)._custom_format)return(this||e)._custom_format.parse(i);i=i||0===i?i:"";var s=i.toString().match((this||e)._pattern_allows)||[];return s.join("").replace((this||e)._pattern_chars,"")},_matchPattern:function(i){if((this||e)._custom_format)return(this||e)._custom_format.edit((this||e)._custom_format.parse(i));var s=this._getRawValue(i),n=(this||e)._settings.pattern.mask,r=(this||e)._settings.pattern.mask,a=(this||e)._pattern_scheme,o=false,l=0,h=0,_=0;for(var c in a)if(false!==a[c]){if(!o){l=1*c;h=a[c];var d=s[h]||"";var u=s[h+1];n=(d?n.substr(0,l):"")+d+(d&&u?n.substr(l+1):"");u||(o=true)}_++}var f=(this||e)._input_code;if(f&&8!==f||!f&&_-1===h&&n.length<r.length)if(s){var g=l+1;if("#"!==r.charAt(g)&&n.length<r.length){var v=r.indexOf("#",g);v<0&&(v=r.length);n+=r.substr(g,v-g)}}else 46!==f&&(n+=r.substr(0,r.indexOf("#")));(this||e)._input_code=null;return n}};var ws={name:"text",$allowsClear:true,_init_onchange:function(){var i=this||e;if((this||e).$allowsClear){var s=(this||e)._settings;var n=this.getInputNode();(this||e).$onBlur||_event(n,"change",(function(){return i._applyChanges("user")}));s.suggest&&$$(s.suggest).linkInput(this||e);if(s.clear&&!(this||e).addSection){(this||e)._clear_icon=(this||e).$view.querySelector(".webix_input_icon:last-child");"INPUT"!=n.tagName&&"SELECT"!=n.tagName||_event(n,"input",(function(e){return i._toggleClearIcon(e.target.value)}));var r=(this||e).getText?this.getText():s.text||s.value;this._toggleClearIcon(r)}}},_applyChanges:function(e){var i=this.getValue();this.setValue(i,e)},_toggleClearIcon:function(i){var s=(this||e)._settings;if(s.clear&&(this||e)._clear_icon)if("hover"===s.clear||"replace"===s.clear){var n=i?"webix_clear_icon "+("hover"===s.clear?s.icon:"wxi-close"):s.icon;(this||e)._clear_icon.className="webix_input_icon "+n}else{var r=i?"":"hidden";(this||e)._clear_icon.style.visibility!==r&&((this||e)._clear_icon.style.visibility=r)}},$skin:function(){vs.api.$skin.call(this||e);(this||e).defaults.height=Ht.inputHeight;(this||e).defaults.inputPadding=Ht.inputPadding;(this||e)._inputSpacing=Ht.inputSpacing;(this||e)._labelTopHeight=Ht.labelTopHeight},$init:function(i){"top"==i.labelPosition&&isUndefined(i.height)&&(this||e).defaults.height&&(i.height=(this||e).defaults.height+(i.label?(this||e)._labelTopHeight:0));isUndefined(i.icon)||((this||e)._settings.icon=i.icon);(this||e).$onBlur&&this.attachEvent("onBlur",(function(){(this||e)._rendered_input&&this.$onBlur()}));this.attachEvent("onAfterRender",(this||e)._init_onchange);this.attachEvent("onDestruct",(function(){(this||e)._clear_icon=null}))},clear_setter:function(i){if(i){(this||e)._settings.icon||(i=true);"hover"!==i&&"replace"!==i&&(i=!!i)}return i},$renderIcon:function(i){var s=i.aheight-2*i.inputPadding;var n=(s-18)/2-1;var r=(this||e)._inputSpacing/2-24;var a="";if(i.icon){r+=24;a+="<span style='right:"+r+"px;height:"+(s-n)+"px;padding-top:"+n+"px;' class='webix_input_icon "+i.icon+"'></span>"}if(true===i.clear){r+=24;a+="<span style='right:"+r+"px;height:"+(s-n)+"px;padding-top:"+n+"px;' class='webix_input_icon webix_clear_icon webix_icon_transparent wxi-close'></span>"}return a},relatedView_setter:function(i){this.attachEvent("onChange",(function(){var i=this.getValue();var s=(this||e)._settings.relatedAction;var n=(this||e)._settings.relatedView;var r=$$(n);if(!r){var a=this.getTopParentView();a&&a.$$&&(r=a.$$(n))}assert(r,"Invalid relatedView: "+n);"enable"==s?i?r.enable():r.disable():i?r.show():r.hide()}));return i},validateEvent_setter:function(i){"blur"==i&&this.attachEvent("onBlur",(this||e).validate);"key"==i&&this.attachEvent("onTimedKeyPress",(this||e).validate);return i},validate:function(){var i=(this||e)._settings.validate;!i&&(this||e)._settings.required&&(i=at.isNotEmpty);var s=this.getFormView();var n=(this||e)._settings.name;var r=this.getValue();var a={};a[n]=r;assert(s,"Validation works only for fields in the form");assert(n,"Validation works only for fields with name");return!(i&&!s._validate(i,r,a,n))},bottomLabel_setter:function(i){(this||e)._settings.bottomPadding||((this||e)._settings.bottomPadding=18);return i},_getInvalidText:function(){var i=(this||e)._settings.invalidMessage;"function"==typeof i&&i.call(this||e);return i},setBottomText:function(i,s){var n=(this||e)._settings;if(!isUndefined(i)){if(n.bottomLabel==i)return;n.bottomLabel=i}var r;var a=this.getInputNode();if(a&&!isUndefined(a.value)){a==document.activeElement&&(r=getSelectionRange(a));this._applyChanges("auto")}var o=(n.invalid?n.invalidMessage:"")||n.bottomLabel;o||n.bottomPadding||(n.inputHeight=0);if(o&&!n.bottomPadding){(this||e)._restorePadding=1;n.bottomPadding=n.bottomPadding||s||18;this.render();this.adjust();this.resize()}else if(!o&&(this||e)._restorePadding){n.bottomPadding=(this||e)._restorePadding=0;n.height||this.render();this.adjust();this.resize()}else this.render();r&&setSelectionRange(this.getInputNode(),r.start,r.end)},$getSize:function(){var i=St.api.$getSize.apply(this||e,arguments);var s=(this||e).config.bottomPadding;if(s){i[2]+=s;i[3]+=s}return i},$setSize:function(i,s){var n=(this||e)._settings;if(St.api.$setSize.call(this||e,i,s)){if(!i||!s)return;if("top"==n.labelPosition){n.labelWidth=0;n.inputHeight||((this||e)._inputHeight=(this||e)._content_height-(n.label?(this||e)._labelTopHeight:0)-((this||e).config.bottomPadding||0))}else{n.label&&(n.labelWidth=this._getLabelWidth(n.labelWidth,n.label));n.bottomPadding&&(n.inputHeight=(this||e)._content_height-(this||e).config.bottomPadding)}this.render()}},_get_input_width:function(i){var s=((this||e)._input_width||0)-(i.label?i.labelWidth:0)-(this||e)._inputSpacing-(i.iconWidth||0);return s<0?0:s},_render_div_block:function(e,i){var s="x"+uid();var n=i._get_input_width(e);var r=e.inputAlign||"left";var a=e.aheight-2*Ht.inputPadding-2*Ht.borderWidth;var o=true===e.clear?"padding-right:51px;":"";var l=e.text||e.value||this._get_div_placeholder(e);var h="<div class='webix_inp_static' role='combobox' aria-label='"+template.escape(e.label)+"' tabindex='0'"+(e.readonly?" aria-readonly='true'":"")+(e.invalid?"aria-invalid='true'":"")+" onclick='' style='line-height:"+a+"px;width:"+n+"px;text-align:"+r+";"+o+"'>"+l+"</div>";return i.$renderInput(e,h,s)},_baseInputHTML:function(i){var s="<"+i+((this||e)._settings.placeholder?" placeholder='"+template.escape((this||e)._settings.placeholder)+"' ":" ");(this||e)._settings.readonly&&(s+="readonly='true' aria-readonly=''");(this||e)._settings.required&&(s+="aria-required='true'");(this||e)._settings.invalid&&(s+="aria-invalid='true'");var n=(this||e)._settings.attributes;if(n)for(var r in n)s+=r+"='"+n[r]+"' ";return s},$renderLabel:function(i,s){var n="";if(i.label){var r="top"==(this||e)._settings.labelPosition;var a="text-align:".concat(i.labelAlign||"left","; line-height:").concat(this._getLabelHeight(r),"px; ");a+=r?"display:block;":i.labelWidth?"width:".concat(i.labelWidth,"px;"):"display:none;";n="<label style='"+a+"' onclick='' for='"+s+"' class='webix_inp_"+(r?"top_":"")+"label "+(i.required?"webix_required":"")+"'>"+(i.label||"")+"</label>"}return n},_getLabelHeight:function(i){return i?(this||e)._labelTopHeight-(this||e)._settings.inputPadding:(this||e)._settings.aheight-2*(this||e)._settings.inputPadding},$renderInput:function(i,s,n){var r=i.inputAlign||"left";var a="top"==i.labelPosition;var o=this._get_input_width(i);n=n||uid();var l=this.$renderLabel(i,n);var h="";if(s)h+=s;else{var _=template.escape(i.text||this._pattern(i.value));var c=(i.icon||i.clear?27:0)+(i.icon&&true===i.clear?24:0);c=c&&!(this||e).addSection?"padding-right:"+c+"px;":"";h+=this._baseInputHTML("input")+"id='"+n+"' type='"+(i.type||(this||e).name)+"'"+(i.editable?" role='combobox'":"")+" value='"+_+"' style='width:"+o+"px;text-align:"+r+";"+c+"'";var d=i.attributes;if(d)for(var u in d)h+=" "+u+"='"+d[u]+"'";h+=" />"}h+=(this||e).$renderIcon?this.$renderIcon(i):"";var f="";f=a?l+"<div class='webix_el_box' style='width:"+i.awidth+"px; height:"+i.aheight+"px'>"+h+"</div>":"<div class='webix_el_box' style='width:"+i.awidth+"px; height:"+i.aheight+"px'>"+l+h+"</div>";var g=i.awidth-o-2*Ht.inputPadding;var v=(i.invalid?i.invalidMessage:"")||i.bottomLabel;v&&(f+="<div class='webix_inp_bottom_label'"+(i.invalid?"role='alert' aria-relevant='all'":"")+" style='width:"+(o||i.awidth)+"px;margin-left:"+Math.max(g,Ht.inputPadding)+"px;'>"+v+"</div>");return f},defaults:{template:function(e,i){return i.$renderInput(e)},label:"",labelWidth:80},_getLabelWidth:function(e,i){"auto"==e&&(e=getTextSize(i,"webix_inp_label").width);return e?Math.max(e,Ht.dataPadding):0},type_setter:function(e){return e},_set_inner_size:false,_set_default_css:function(){},_pattern:function(e){return e},$setValue:function(e){e=this._pattern(e);this.getInputNode().value=e;this._toggleClearIcon(e)},$getValue:function(){return this._pattern(this.getInputNode().value,false)},setValueHere:function(e,i,s){if(s&&s.symbol){var n=s.symbol;var r=this.getValue();var a=r.substring(s.pos);r=r.substring(0,s.pos);r=r.substring(0,r.lastIndexOf(n)+n.length)+e;this.setValue(r+a,s.config);setSelectionRange(this.getInputNode(),r.length)}else this.setValue(e,s&&s.config)},suggest_setter:function(s){var n=this||e;if(s){assert(true!==s,"suggest options can't be set as true, data need to be provided instead");if("string"==typeof s){var r=$$(s);if(r)return $$(s)._settings.id;s={body:{url:s,dataFeed:s}}}else s.getItem?s={body:{data:s}}:isArray(s)?s={body:{data:this._check_options(s)}}:s.body||(s.body={});i.extend(s,{view:"suggest"});var a=ui(s);(this||e)._destroy_with_me.push(a);(this||e).$ready.push((function(){return a._settings.master=n._settings.id}));return a._settings.id}return false}};var xs=i.protoUI(ws,bs,vs.view);var ys={api:ws,view:xs};var Ss=i.proto({name:"DataCollection",isVisible:function(){return!!((this||e).data.order.length||(this||e).data._filter_order||(this||e)._settings.dataFeed)},$init:function(i){(this||e).data.provideApi(this||e,true);var s=i&&i.id?i.id:uid();(this||e)._settings.id=s;ui.views[s]=this||e;(this||e).data.attachEvent("onStoreLoad",bind((function(){this.callEvent("onBindRequest",[])}),this||e))},refresh:function(){this.callEvent("onBindRequest",[])}},Zt,dt,gt,Ue,ie,pe,f,vt,ct,_t);define("DataCollection",Ss);var $s={name:"select",defaults:{template:function(e,i){var s="x"+uid();var n=i._baseInputHTML("select")+"id='"+s+"' style='width:"+i._get_input_width(e)+"px;'>";var r=$$(e.options);if(r&&r.data&&r.data.each)r.data.each((function(i){n+="<option"+(i.id==e.value?" selected='true'":"")+" value='"+i.id+"'>"+i.value+"</option>"}));else{var a=i._check_options(e.options);for(var o=0;o<a.length;o++)n+="<option"+(a[o].id==e.value?" selected='true'":"")+" value='"+a[o].id+"'>"+a[o].value+"</option>"}n+="</select>";return i.$renderInput(e,n,s)}},options_setter:function(i){if(i){if("string"==typeof i){var s=new Ss({url:i});s.data.attachEvent("onStoreLoad",bind((this||e).refresh,this||e));return s}return i}},$renderIcon:function(){return""},getInputNode:function(){return(this||e)._dataobj.getElementsByTagName("select")[0]}};i.protoUI($s,ys.view);var Cs={name:"checkbox",defaults:{checkValue:1,uncheckValue:0,template:function(e,i){var s="x"+uid();var n="";if(e.labelRight){n="<label class='webix_label_right'>"+e.labelRight+"</label>";e.labelWidth&&(e.label=e.label||"&nbsp;")}var r=e.checkValue==e.value;var a=Math.floor((i._settings.aheight-16)/2);var o=i._baseInputHTML("input")+"style='margin-top:"+a+"px;"+(e.customCheckbox?"display:none":"")+"' id='"+s+"' type='checkbox' "+(r?"checked='1'":"")+(e.labelRight?" aria-label='"+template.escape(e.labelRight)+"'":"")+"/>";var l="webix_inp_checkbox_border webix_el_group webix_checkbox_"+(r?"1":"0");var h=e.customCheckbox||"";if(h){h=h.replace(/(aria-checked=')\w*(?=')/,"$1"+(e.value==e.checkValue?"true":"false"));h=h.replace(/(aria-label=')\w*(?=')/,"$1"+template.escape(e.labelRight||e.label));h=h.replace(/(aria-invalid=')\w*(?=')/,"$1"+(e.invalid?"true":"false"))}var _="<div style='line-height:"+i._settings.cheight+"px' class='"+l+"'>"+o+h+n+"</div>";return i.$renderInput(e,_,s)}},customCheckbox_setter:function(e){true===e&&Ht.customCheckbox&&(e="<a role='presentation' onclick='javascript:void(0)'><button role='checkbox' aria-checked='false' aria-label='' type='button' aria-invalid='' class='webix_custom_checkbox'></button></a>");return e},blur:function(){var e=this.getInputNode();e&&e.blur()},$prepareValue:function(e){return e},_init_onchange:function(){},$setValue:function(i){var s=i==(this||e)._settings.checkValue;var n=(this||e).$view.getElementsByTagName("input")[0];var r=n?n.parentNode:null;if(r&&(this||e)._settings.customCheckbox){var a=r.getElementsByTagName("BUTTON");a[0]&&a[0].setAttribute("aria-checked",s?"true":"false")}r&&(r.className=r.className.replace(/(webix_checkbox_)\d/,"$1"+(s?1:0)));n.checked=s},toggle:function(i){var s=(this||e)._settings;var n=this.getValue()!=s.checkValue?s.checkValue:s.uncheckValue;this.setValue(n,i)},getValue:function(){var i=(this||e)._settings;return i.value==i.checkValue?i.checkValue:i.uncheckValue},getInputNode:function(){return(this||e).$view.getElementsByTagName((this||e)._settings.customCheckbox?"button":"input")[0]},$skin:function(){ys.api.$skin.call(this||e);(this||e).defaults.customCheckbox=!!Ht.customCheckbox}};var ks=i.protoUI(Cs,ys.view);var Is={api:Cs,view:ks};var Ms={name:"radio",defaults:{template:function(e,i){i._check_options(e.options);var s=i._filterOptions(e.options);var n=i._getFirstActive();var r,a,o,l,h,_,c,d,u,f,g;var v=[];for(var p=0;p<s.length;p++){a="x"+uid();r=r||a;p&&(s[p].newline||e.vertical)&&v.push("<div class='webix_line_break'></div>");o=s[p].id==e.value;g=o||!e.value&&s[p].id===n;l=!!s[p].disabled;h=s[p].value||"";_=e.tooltip?" webix_t_id='"+s[p].id+"'":"";c=e.customRadio||"";if(c){d=(0===p?e.label+" ":"")+h;c=c.replace(/(aria-label=')\w*(?=')/,"$1"+template.escape(d));c=c.replace(/(aria-checked=')\w*(?=')/,"$1"+(o?"true":"false"));c=c.replace(/(tabindex=')\w*(?=')/,"$1"+(!l&&g?"0":"-1"));c=c.replace(/(aria-invalid=')\w*(?=')/,"$1"+(e.invalid?"true":"false"));c=c.replace(/(button_id=')\w*(?=')/,"$1"+s[p].id);l&&(c=c.replace("role='radio'","role='radio' webix_disabled='true'"))}u=i._baseInputHTML("input")+" name='"+(e.name||e.id)+"' type='radio' "+(o?"checked='1'":"")+"tabindex="+(!l&&g?"0":"-1")+" value='"+s[p].id+"' id='"+a+"'"+(l?" disabled='true'":"")+" style='"+(c?"display:none":"")+"' />";f="<div radio_id='"+s[p].id+"' class='webix_inp_radio_border webix_radio_"+(o?"1":"0")+"' role='presentation'>"+u+c+"</div>";h&&(h="<label for='"+a+"' class='webix_label_right'>"+h+"</label>");v.push("<div class='webix_radio_option"+(l?" webix_disabled":"")+"' role='presentation'"+_+">"+f+h+"</div>")}v="<div class='webix_el_group' role='radiogroup' style='margin-left:"+(e.label?e.labelWidth:0)+"px;'>"+v.join("")+"</div>";return i.$renderInput(e,v,r)}},refresh:function(){this.render();(this||e)._last_size&&this.$getSize(0,0)[2]!=(this||e)._last_size[1]&&this.resize()},$getSize:function(i,s){var n=vs.api.$getSize.call(this||e,i,s);var r=this._filterOptions((this||e)._settings.options);if(r){var a=(this||e)._settings.vertical?0:1;for(var o=0;o<r.length;o++)((this||e)._settings.vertical||r[o].newline)&&a++;n[3]=n[2]=Math.max(n[2],((this||e)._settings.optionHeight||25)*a+2*(this||e)._settings.inputPadding+("top"==(this||e)._settings.labelPosition?(this||e)._labelTopHeight:0))}var l=(this||e).config.bottomPadding;if(l){n[2]+=l;n[3]+=l}return n},_getInputNode:function(){return(this||e)._dataobj.getElementsByTagName((this||e)._settings.customRadio?"button":"input")},$setValue:function(i){var s=(this||e)._dataobj.getElementsByTagName("input");var n=this._getFirstActive();var r,a,o,l,h;for(var _=0;_<s.length;_++){r=s[_].parentNode.getAttribute("radio_id");a=this.getOption(r);s[_].checked=r==i;o=a&&!a.disabled&&(s[_].checked||!i&&a.id==n);s[_].setAttribute("tabindex",o?"0":"-1");l=s[_]?s[_].parentNode:null;if(l){l.className=l.className.replace(/(webix_radio_)\d/,"$1"+(s[_].checked?1:0));if((this||e)._settings.customRadio){h=l.getElementsByTagName("BUTTON");if(h[0]){h[0].setAttribute("aria-checked",s[_].checked?"true":"false");h[0].setAttribute("tabindex",o?"0":"-1")}}}}},getValue:function(){return(this||e)._settings.value},focus:function(){return this._focus()},blur:function(){this._blur()},customRadio_setter:function(e){true===e&&Ht.customRadio&&(e="<a role='presentation' onclick='javascript:void(0)'><button type='button' class='webix_custom_radio' button_id='' role='radio' aria-checked='false' aria-label='' aria-invalid='' tabindex=''></button></a>");return e},$skin:function(){ys.api.$skin.call(this||e);(this||e).defaults.customRadio=!!Ht.customRadio;Ht.optionHeight&&((this||e).defaults.optionHeight=Ht.optionHeight)}};i.protoUI(Ms,ys.view,ue);var Ts={name:"datepicker",_editable:true,$init:function(i){i.multiselect&&((this||e)._settings.multiselect=i.multiselect);i.type&&((this||e)._settings.type=i.type);(this||e).$ready.push((this||e)._init_popup)},defaults:{template:function(e,i){"time"==i._settings.type&&(i._settings.icon=i._settings.timeIcon);var s=e.type;e.type="";var n=e.editable?i.$renderInput(e):i._render_div_block(e,i);e.type=s;return n},stringResult:false,timepicker:false,icon:"wxi-calendar",icons:true,timeIcon:"wxi-clock",separator:", "},$onBlur:function(){var i=this.getText();if((this||e)._settings.text!=i){var s=(this||e)._settings.editable?this.getValue():this.getPopup().getValue();this.setValue(s||"","user")}},$skin:function(){ys.api.$skin.call(this||e);(this||e).defaults.inputPadding=Ht.inputPadding;(this||e).defaults.point=!Ht.popupNoPoint},getPopup:function(){return $$((this||e)._settings.popup)},_init_popup:function(){var i=(this||e)._settings;if(i.suggest)i.popup=i.suggest;else if(!i.popup){var s=(this||e)._settings.timepicker;i.popup=i.suggest=this.suggest_setter({type:"calendar",point:false!==(this||e)._settings.point,padding:0,body:{height:240+(s||(this||e)._settings.icons?30:0),width:250,multiselect:(this||e)._settings.multiselect,timepicker:s,type:(this||e)._settings.type,icons:(this||e)._settings.icons,timeIcon:(this||e)._settings.timeIcon}})}(this||e)._init_once=function(){}},$render:function(e){this.$setValue(e.value)},$prepareValue:function(i){if((this||e)._settings.multiselect){"string"===typeof i?i=i.split((this||e)._settings.separator):i instanceof Date?i=[i]:i||(i=[]);for(var s=0;s<i.length;s++)i[s]=this._prepareSingleValue(i[s]);return i}return this._prepareSingleValue(i)},_prepareSingleValue:function(i){var s=(this||e)._settings.type;var n="time"==s;isNaN(parseFloat(i))||(i=""+i);if("string"==typeof i&&i){var r=null;r="month"!=s&&"year"!=s||!(this||e)._formatDate?n?u.parseTimeFormatDate:u.parseFormatDate:(this||e)._formatDate;i=r(i)}if(i){if(n&&isArray(i)){var a=new Date;a.setHours(i[0]);a.setMinutes(i[1]);i=a}isNaN(i.getTime())&&(i="")}return i},_get_visible_text:function(i){var s=this||e;return(this||e)._settings.multiselect?[].concat(i).map((function(e){return s._get_visible_text_single(e)})).join((this||e).config.separator):this._get_visible_text_single(i)},_get_visible_text_single:function(i){var s=(this||e)._formatStr;s||(s="time"==(this||e)._settings.type?u.timeFormatStr:(this||e).config.timepicker?u.fullDateFormatStr:u.dateFormatStr);return s(i)},_set_visible_text:function(){var i=this.getInputNode();isUndefined(i.value)?i.innerHTML=(this||e)._settings.text||this._get_div_placeholder():i.value=(this||e)._settings.text||""},$compareValue:function(e,i){return!e&&!i||ii.equal(e,i)},$setValue:function(i){(this||e)._settings.text=i?this._get_visible_text(i):"";this._set_visible_text();this._toggleClearIcon((this||e)._settings.text)},format_setter:function(i){if(i)if("function"===typeof i)(this||e)._formatStr=i;else{(this||e)._formatStr=ii.dateToStr(i);(this||e)._formatDate=ii.strToDate(i)}else(this||e)._formatStr=(this||e)._formatDate=null;return i},getInputNode:function(){return(this||e)._settings.editable?(this||e)._dataobj.getElementsByTagName("input")[0]:(this||e)._dataobj.getElementsByTagName("DIV")[1]},getValue:function(){var i=this||e;if((this||e)._settings.multiselect){var s=(this||e)._settings.value;if(!s)return[];var n=[].concat(s).map((function(e){return i._get_value_single(e)}));return(this||e)._settings.stringResult?n.join((this||e)._settings.separator):n}return this._get_value_single((this||e)._settings.value)},_get_value_single:function(i){var s=(this||e)._settings.type;var n="time"==s;if((this||e)._rendered_input){if((this||e)._settings.editable){var r=(this||e)._formatDate;r||(r=n?u.timeFormatDate:(this||e).config.timepicker?u.fullDateFormatDate:u.dateFormatDate);var a=r(this.getInputNode().value);if(n&&""!=i){i.setHours(a.getHours());i.setMinutes(a.getMinutes());i.setSeconds(a.getSeconds());i.setMilliseconds(a.getMilliseconds())}else i=a}}else i=this.$prepareValue(i)||null;if((this||e)._settings.stringResult){var o=u.parseFormatStr;n&&(o=u.parseTimeFormatStr);!(this||e)._formatStr||"month"!=s&&"year"!=s||(o=(this||e)._formatStr);return(this||e)._settings.multiselect?[].concat(i).map((function(e){return e?o(e):""})):i?o(i):""}return i||null},getText:function(){var e=this.getInputNode();return e?isUndefined(e.value)?e.firstChild&&"webix_placeholder"===e.firstChild.className?"":e.innerHTML:e.value:""}};var Es=i.protoUI(Ts,ys.view);var As={api:Ts,view:Es};var zs={name:"colorpicker",$init:function(){(this||e).$ready.push((this||e)._init_popup)},defaults:{icon:true},_init_popup:function(){var i=(this||e)._settings;i.suggest?i.popup=i.suggest:i.popup||(i.popup=i.suggest=this.suggest_setter({type:"colorboard"}));(this||e)._init_once=function(){}},clear_setter:function(e){return!!e},getValue:function(){return(this||e)._rendered_input&&(this||e)._settings.editable?this.getInputNode().value:(this||e)._settings.value},$prepareValue:function(e){e=e?e.toString(16):"";e&&"#"!=e.charAt(0)&&/^[0-9a-fA-F]+$/.test(e)&&(e="#"+e);return e},_getColorNode:function(){return(this||e).$view.getElementsByTagName("DIV")[(this||e)._settings.editable?1:2]},_get_visible_text:function(e){return e},$compareValue:function(e,i){return e==i},$setValue:function(i){this._getColorNode().style.backgroundColor=i;(this||e)._settings.text=i;this._toggleClearIcon(i);var s=this.getInputNode();isUndefined(s.value)?s.innerHTML=i:s.value=i},$renderIcon:function(i){var s=(this||e)._inputSpacing/2+5;var n="<div class='webix_input_icon' style='top:"+(i.inputPadding+4)+"px;right:"+s+"px;background-color:"+i.value+";'></div>";if(i.clear){var r=i.aheight-2*i.inputPadding;var a=(r-18)/2-1;s+=24;n+="<span style='right:"+s+"px;height:"+(r-a)+"px;padding-top:"+a+"px;' class='webix_input_icon webix_clear_icon wxi-close'></span>"}return n}};i.protoUI(zs,As.view);var Hs={name:"richselect",defaults:{template:function(e,i){return i._render_div_block(e,i)},popupWidth:200,icon:"wxi-menu-down"},$onBlur:function(){var i=this.getText();if((this||e)._settings.text!=i&&(!isUndefined((this||e)._settings.text)||i)){var s=this.getPopup();if(!s.$view.contains(document.activeElement)){var n=(this||e).config.newValues;var r=this.getInputNode().value;var a=this.getList();var o;if(n){o=a.find((function(e){return s.getItemText(e.id)==r}),true);o?o=o.id:r&&(o=a.add({value:r}))}else o=s.getSuggestion(r);var l=this.getValue();!o||o==l||""===r&&""!==s.getItemText(o)?""===r?this.setValue("","user"):(this||e)._revertValue&&this._revertValue():this.setValue(o,"user")}}},suggest_setter:function(e){return this.options_setter(e)},options_setter:function(i){i=(this||e)._suggest_config?this._suggest_config(i):i;var s=(this||e)._settings.popup=(this||e)._settings.suggest=ys.api.suggest_setter.call(this||e,i);var n=$$(s).getList();n&&n.attachEvent("onAfterLoad",bind((this||e)._reset_value,this||e));return s},getList:function(){var i=$$((this||e)._settings.suggest);assert(i,"Input doesn't have a list");return i.getList()},_reset_value:function(){var i=(this||e)._settings.value||[];i.length&&!this.getPopup().isVisible()&&this.getInputNode()&&!((this||e)._settings.text||this.getText())&&this.$setValue(i)},$skin:function(){ys.api.$skin.call(this||e);(this||e).defaults.inputPadding=Ht.inputPadding},$render:function(e){this.$setValue(e.value)},getInputNode:function(){return(this||e)._dataobj.getElementsByTagName("DIV")[1]},getPopup:function(){return $$((this||e)._settings.popup)},getText:function(){var i=(this||e)._settings.value,s=this.getInputNode();return s?isUndefined(s.value)?s.firstChild&&"webix_placeholder"===s.firstChild.className?"":s.innerHTML:s.value:i?this.getPopup().getItemText(i):""},$prepareValue:function(i){return i&&i.id?i:ys.api.$prepareValue.call(this||e,i)},$setValue:function(i){var s=i;var n=this.getPopup();n&&(s=n.getItemText(i));if(i&&i.id){var r=n.getList();var a=r.exists(i.id);a||r.add(i);s=n.getItemText(i.id);r._settings.dynamic&&!a&&r.remove(i.id);(this||e)._settings.value=this.$prepareValue(i.id)}var o=this.getInputNode();isUndefined(o.value)?o.innerHTML=s||this._get_div_placeholder():o.value=s=s.replace(/<[^>]*>/g,"");(this||e)._settings.text=s;this._toggleClearIcon(s)},getValue:function(){return(this||e)._settings.value||""},_ignoreLabelClick:function(e){if(e.type){this.focus();preventEvent(e)}}};var js=i.protoUI(Hs,ys.view);var Ps={api:Hs,view:js};var Vs={name:"combo",getInputNode:function(){return(this||e)._dataobj.getElementsByTagName("input")[0]},_init_onchange:function(){var i=this||e;_event(this.getInputNode(),"keydown",(function(e){13==e.keyCode&&Ps.api.$onBlur.apply(i,[])}));Ps.api._init_onchange.apply(this||e,arguments)},_revertValue:function(){var e=this.getValue();this.$setValue(isUndefined(e)?"":e)},_applyChanges:function(i){var s=this.getInputNode(),n="",r=this.getPopup();if(s.value){n=(this||e)._settings.value;r.getItemText(n)!=this.getText()&&(n=r.getSuggestion()||n)}n!=(this||e)._settings.value?this.setValue(n,i):this.$setValue(n)},defaults:{template:function(e,i){return i.$renderInput(e).replace(/(<input)\s*(?=\w)/,"$1 role='combobox'")},icon:"wxi-menu-down"},on_click:{webix_clear_icon:function(){(this||e).$allowsClear&&this.setValue("","user");return false},webix_inp_label:function(e){this._ignoreLabelClick(e)},webix_inp_top_label:function(e){this._ignoreLabelClick(e)}}};i.protoUI(Vs,Ps.view);var Ns={name:"counter",defaults:{template:function(e,i){var s=e.value;var n="x"+uid();var r="<div role='spinbutton' aria-label='"+template.escape(e.label)+"' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+e.value+"' class='webix_el_group' style='width:"+i._get_input_width(e)+"px'>";r+="<button type='button' class='webix_inp_counter_prev' tabindex='-1' aria-label='"+u.aria.decreaseValue+"'>-</button>";r+=i._baseInputHTML("input")+" id='"+n+"' type='text' class='webix_inp_counter_value' aria-live='assertive' value='"+s+"'></input>";r+="<button type='button' class='webix_inp_counter_next' tabindex='-1' aria-label='"+u.aria.increaseValue+"'>+</button></div>";return i.$renderInput(e,r,n)},min:0,max:Infinity,value:0,step:1},$init:function(){_event((this||e).$view,"keydown",(this||e)._keyshift,{bind:this||e})},_keyshift:function(i){if(!(this||e)._settings.readonly){var s=i.which||i.keyCode,n=(this||e)._settings;var r=this.getValue();if(s>32&&s<41){36===s?r=n.min:35===s?r=Infinity===n.max?1e6:n.max:33===s?this.next(n.step,"user"):34===s?this.prev(n.step,"user"):r+=37===s||40===s?-1:1;s>34&&r>=n.min&&r<=n.max&&this.setValue(r,"user")}}},$setValue:function(e){this.getInputNode().value=e},$prepareValue:function(i){i=parseFloat(i);var s=(this||e)._settings.min;var n=(this||e)._settings.max;isNaN(i)&&(i=isFinite(s)?s:0);return Math.min(Math.max(i,s),n)},getInputNode:function(){return(this||e)._dataobj.getElementsByTagName("input")[0]},getValue:function(){return 1*vs.api.getValue.apply(this||e,arguments)},next:function(i,s){i=1*(i||(this||e)._settings.step);this.shift(i,s)},prev:function(i,s){i=-1*(i||(this||e)._settings.step);this.shift(i,s)},shift:function(e,i){var s=Math.round(1e5*(this.getValue()+e))/1e5;this.setValue(s,i)}};i.protoUI(Ns,ys.view);var Ds={name:"icon",$skin:function(){vs.api.$skin.call(this||e);(this||e).defaults.height=Ht.inputHeight;(this||e).defaults.width=Ht.inputHeight},defaults:{template:function(e,i){var s=Math.min(e.awidth,e.aheight);var n=Math.round((i._content_height-e.aheight)/2);var r="<button type='button' style='height:"+s+"px;width:"+s+"px;' class='webix_icon_button'><span class='webix_icon "+e.icon+"'></span></button>";var a=e.aheight!=s?e.aheight:0;return"<div class='webix_el_box' style='width:"+e.awidth+"px;height:"+e.aheight+"px;line-height:"+a+"px;margin-top:"+n+"px'>"+r+(e.badge||0===e.badge?"<span class='webix_badge'>"+e.badge+"</span>":"")+"</div>"}},_set_inner_size:false,_set_default_css:function(){},$setValue:function(){}};i.protoUI(Ds,vs.view);var Ls={name:"search",on_click:{webix_clear_icon:function(){(this||e).$allowsClear&&this.setValue("","user");return false},webix_input_icon:function(i){this.getInputNode().focus();"hover"!==(this||e).config.clear&&i.target&&-1!==i.target.className.indexOf((this||e).config.icon)&&this.callEvent("onSearchIconClick",[i])}},defaults:{type:"text",icon:"wxi-search"}};i.protoUI(Ls,ys.view);var Bs={name:"segmented",$allowsClear:false,$init:function(){this.attachEvent("onChange",(function(i){(this||e)._settings.multiview&&this._show_view(i)}));this.attachEvent("onAfterRender",once((function(){(this||e)._settings.multiview&&(this||e)._settings.value&&this._show_view((this||e)._settings.value)})))},_show_view:function(e){var i=this.getTopParentView();var s=null;i&&i.$$&&(s=i.$$(e));s||(s=$$(e));s&&s.show&&s.show()},defaults:{template:function(e,i){i._check_options(e.options);var s=i._filterOptions(e.options);var n=i._get_input_width(e);var r="contrast"==jt?0:s.length-1;var a=e.optionWidth||Math.floor((n-r)/s.length);var o="<div style='width:"+n+"px' class='webix_all_segments' role='tablist' aria-label='"+template.escape(e.label)+"'>";var l,h;e.value||(e.value=i._getFirstActive(true));for(var _=0;_<s.length;_++){h=!!s[_].disabled;l=e.tooltip?" webix_t_id='"+s[_].id+"'":"";o+="<button type='button' style='width:"+(s[_].width||a)+"px' role='tab' aria-selected='"+(e.value==s[_].id?"true":"false")+"' tabindex='"+(h||e.value!=s[_].id?"-1":"0")+"' class='webix_segment_"+(_==s.length-1?"N":_>0?1:0)+(e.value==s[_].id?" webix_selected":"")+(h?" webix_disabled":"")+"' "+(h?"webix_disabled='true' ":"")+"button_id='"+s[_].id+"'"+l+">"+s[_].value+"</button>"}return i.$renderInput(e,o+"</div>",uid())}},_getInputNode:function(){return(this||e).$view.getElementsByTagName("BUTTON")},focus:function(){return this._focus()},blur:function(){this._blur()},$setValue:function(i){var s=(this||e).config.tabbarPopup;if(s&&$$(s)&&$$(s).getBody().exists(i))return this.refresh();var n=this._getInputNode();var r,a;for(var o=0;o<n.length;o++){r=n[o].getAttribute("button_id");a=this.getOption(r);n[o].setAttribute("aria-selected",i==r?"true":"false");n[o].setAttribute("tabindex",a&&!a.disabled&&i==r?"0":"-1");i==r?addCss(n[o],"webix_selected"):removeCss(n[o],"webix_selected")}},$getValue:function(){return(this||e)._settings.value||""},getValue:function(){return(this||e)._settings.value},getInputNode:function(){return null},_set_inner_size:false};var Fs=i.protoUI(Bs,ys.view,ue);var Rs={api:Bs,view:Fs};var Os={$init:function(){(this||e).$ready.push((function(){var i=this||e;if((this||e)._settings.autoheight){addCss((this||e).$view,"webix_noscroll");(this||e)._settings.maxHeight||((this||e)._settings.maxHeight=100);_event((this||e).$view,"input",(function(){i._sizeToContent(true)}),{capture:true});this.attachEvent("onAfterRender",(function(){i._sizeToContent()}))}}))},_sizeToContent:function(i){var s=this||e;if((this||e)._skipSizing)return(this||e)._skipSizing=false;var n=this.getInputNode();var r=this._getTextHeight(n.value,n.offsetWidth);var a=2*Ht.inputPadding+2*Ht.borderWidth;r=Math.max(r+a,(this||e)._settings.minHeight);if(r>(this||e)._settings.maxHeight){removeCss((this||e).$view,"webix_noscroll");r=(this||e)._settings.maxHeight}else addCss((this||e).$view,"webix_noscroll",true);var o=this.getTopParentView();clearTimeout(o._template_resize_timer);o._template_resize_timer=delay((function(){if(s.config.height!=r){s.config.height=r;var e=n.selectionEnd;s._skipSizing=true;var a=ys.api.getValue.call(s);s.resize();s.callEvent("onInputResize",[]);if(i){n=s.getInputNode();ys.api.$setValue.call(s,a);n.setSelectionRange(e,e);n.focus()}}}))},_getTextHeight:function(e,i){var s=create("textarea",{class:"webix_textarea_measure",rows:"1"},"");s.style.cssText="height:auto;visibility:hidden; position:absolute; top:0px; left:0px; width:"+i+"px;";document.body.appendChild(s);s.value=e;var n=s.scrollHeight;remove(s);return n},$setValue:function(i){ys.api.$setValue.call(this||e,i);(this||e)._settings.autoheight&&this._sizeToContent()}};var Ws={name:"textarea",defaults:{template:function(e,i){var s=e.name||e.id;var n="x"+uid();var r=i._baseInputHTML("textarea")+"style='width:"+i._get_input_width(e)+"px;'";r+=" id='"+n+"' name='"+s+"' class='webix_inp_textarea'>"+i._pattern(e.value)+"</textarea>";return i.$renderInput(e,r,n)},minHeight:60},$skin:function(){ys.api.$skin.call(this||e);(this||e).defaults.height=0},_skipSubmit:true,_getLabelHeight:function(i){return i?(this||e)._labelTopHeight-(this||e)._settings.inputPadding:""},$renderIcon:function(){return""},getInputNode:function(){return(this||e)._dataobj.getElementsByTagName("textarea")[0]}};var Us=i.protoUI(Ws,Os,ys.view);var Ys={api:Ws,view:Us,autoheight:Os};var qs={name:"toggle",$allowsClear:true,$init:function(){this.attachEvent("onItemClick",(function(){this.toggle("user")}))},$renderInput:function(e){return"<button type='button' "+(e.popup?"aria-haspopup='true'":"")+" class='webix_button'>"+e.label+"</button>"},$setValue:function(i){var s=this.getInputNode();var n=(this||e)._settings;var r=i&&"0"!=i;var a=(r?n.onLabel:n.offLabel)||n.label;var o=s.children;if((this||e)._types[n.type]){var l=o[0];"SPAN"==l.nodeName&&n.onIcon&&n.offIcon&&n.onIcon!=n.offIcon&&(l.className=l.className.replace(r?n.offIcon:n.onIcon,r?n.onIcon:n.offIcon));if("imageTop"==n.type||"iconTop"==n.type)o[1].innerHTML=a;else{s.innerHTML=a;s.insertBefore(l,s.firstChild)}}else s.innerHTML=a;s.setAttribute("aria-pressed",r?"true":"false");var h=r?addCss:removeCss;h(s.parentNode,"webix_pressed")},toggle:function(e){this.setValue(!this.getValue(),e)},getValue:function(){var i=(this||e)._settings.value;return i&&"0"!=i?1:0},defaults:{template:function(e,i){var s=e.value&&"0"!=e.value;var n=s?" webix_pressed":"";e.label=(s?e.onLabel:e.offLabel)||e.label;e.icon=(s?e.onIcon:e.offIcon)||e.icon;var r="<div class='webix_el_box"+n+"' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+i.$renderInput(e,i)+"</div>";r=r.replace(/(button)\s*(?=\w)/,"$1 aria-pressed='"+(s?"true":"false")+"' ");(e.badge||0===e.badge)&&(r=r.replace(/<\/div>$/,"<span class='webix_badge'>"+e.badge+"</span></div>"));return r}},_set_inner_size:false};i.protoUI(qs,vs.view);var Xs={name:"multitext",$cssName:"text",defaults:{icon:"wxi-plus-circle",iconWidth:25,separator:", "},getValueHere:function(){return ys.api.getValue.call(this||e)},setValueHere:function(i){return ys.api.$setValue.call(this||e,i)},getValue:function(){if("extra"==(this||e).config.mode)return this.getValueHere();if((this||e)._full_value)return(this||e)._full_value;var i=[this.getValueHere(this||e)];for(var s=0;s<(this||e)._subs.length;s++){var n=$$((this||e)._subs[s]).getValueHere();n&&i.push(n)}return i.join((this||e).config.separator)},$setValue:function(i){i=i||"";if("extra"==(this||e).config.mode)return this.setValueHere(i);(this||e)._full_value=i;var s=i.split((this||e).config.separator);if(s.length!=(this||e)._subs.length+1){this.removeSection();(this||e).setValueHere.call(this||e,s[0]);for(var n=1;n<s.length;n++)this.addSection(s[n]);(this||e)._full_value=""}else{this.setValueHere(s[0]);for(var r=0;r<(this||e)._subs.length;r++)$$((this||e)._subs[r]).setValueHere(s[r+1]);(this||e)._full_value=""}},$renderIcon:function(e){if(e.icon){var i=e.aheight-2*e.inputPadding;var s=(i-18)/2-1;var n="role='button' tabindex='0' aria-label='"+u.aria["multitext"+(e.mode||"")+"Section"]+"'";return"<span style='right:0;height:"+(i-s)+"px;padding-top:"+s+"px;' class='webix_input_icon webix_multitext_icon "+e.icon+"' "+n+"></span>"}return""},_subOnChange:function(i,s,n){var r=(this||e).config.master?$$((this||e).config.master):this||e;var a=r.getValue();var o=r._settings.value;if(a!=o){r._settings.value=a;r.callEvent("onChange",[a,o,n])}},addSection:function(s){var n=(this||e).config,r={labelWidth:n.labelWidth,inputWidth:n.inputWidth,width:n.width,label:n.label?"&nbsp;":"",view:(this||e).name,mode:"extra",value:s||"",icon:"wxi-minus-circle",tooltip:n.tooltip,suggest:n.suggest||null,master:n.id};i.extend(r,n.subConfig||{},true);var a=this.getParentView().addView(r);$$(a).attachEvent("onChange",(this||e)._subOnChange);(this||e)._subs.push(a);this.callEvent("onSectionAdd",[a,(this||e)._subs.length]);return a},removeSection:function(i){var s=(this||e).config.master?$$((this||e).config.master):this||e;for(var n=s._subs.length-1;n>=0;n--){var r=s._subs[n];if(!i||r==i){s._subs.removeAt(n);this.getParentView().removeView(r);s.callEvent("onSectionRemove",[r,n+1])}}},on_click:{webix_input_icon:function(){if("extra"==(this||e).config.mode){var i=this.getParentView();this.removeSection((this||e).config.id);var s=i.getChildViews();s[s.length-1].focus();this._subOnChange(null,null,"user")}else $$(this.addSection()).focus();return false}},$init:function(){(this||e)._subs=_to_array([]);this.attachEvent("onKeyPress",(this||e)._onKeyPress)},$render:function(e){this.$setValue(e.value)}};i.protoUI(Xs,ys.view);i.protoUI({name:"multiselect",defaults:{template:"GPL version doesn't support multiselect <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"multicombo",defaults:{template:"GPL version doesn't support multicombo <br> You need Webix PRO"}},Ai.view);var Gs={name:"slider",defaults:{min:0,max:100,value:50,step:1,title:false,moveTitle:true,template:function(e,i){var s=i._handle_id="x"+uid();var n="";var r="<div class='webix_slider_title"+(e.moveTitle?" webix_slider_move":"")+"'"+(!e.moveTitle&&e.vertical?" style='line-height:"+(e.aheight-2*e.inputPadding)+"px;'":"")+">&nbsp;</div>";var a="<div class='webix_slider_left'>&nbsp;</div>";var o="<div class='webix_slider_right'></div>";var l="<div class='webix_slider_handle' webix_disable_drag='true' role='slider' aria-label='"+e.label+(e.title?" "+e.title(e):"")+"' aria-valuemax='"+e.max+"' aria-valuemin='"+e.min+"' aria-valuenow='"+e.value+"' tabindex='0' id='"+s+"'>&nbsp;</div>";n=e.vertical?"<div class='webix_slider_box'>"+o+a+l+"</div>"+r:r+"<div class='webix_slider_box'>"+a+o+l+"</div>";return i.$renderInput(e,n,s)}},type_setter:function(i){(this||e)._viewobj.className+=" webix_slider_"+i},title_setter:function(e){return"string"==typeof e?template(e):e},_get_slider_handle:function(){return(this||e).$view.querySelector(".webix_slider_handle")},_set_inner_size:function(){var i=this._get_slider_handle();var s=(this||e)._settings;if(i){var n=s.vertical?(this||e)._content_height:this._get_input_width(s);var r=s.value%s.step?Math.round(s.value/s.step)*s.step:s.value;var a=s.max-s.min;r=this._safeValue(r);r=s.vertical?a-(r-s.min):r-s.min;var o=Math.ceil((n-2*(this||e)._sliderPadding)*r/a);var l=n-2*(this||e)._sliderPadding-o;var h=s.vertical?"top":"left";var _=s.vertical?"height":"width";i.style[h]=(this||e)._sliderPadding+o-(this||e)._sliderHandleWidth/2+"px";i.parentNode.style[_]=n+"px";l=this._safeValue(l,2*(this||e)._sliderBorder,n-2*(this||e)._sliderPadding-2*(this||e)._sliderBorder);o=this._safeValue(o,2*(this||e)._sliderBorder,n-2*(this||e)._sliderPadding-2*(this||e)._sliderBorder);var c=i.previousSibling;c.style[_]=l+"px";var d=c.previousSibling;d.style[_]=o+"px";this._set_title(i,o,l,h)}},_set_title:function(i,s,n,r){var a=(this||e)._settings;if((this||e)._settings.title){var o=i.parentNode[a.vertical?"nextSibling":"previousSibling"];o.innerHTML=(this||e)._settings.title((this||e)._settings,this||e);if((this||e)._settings.moveTitle){var l=0;if(a.vertical)l=s+2*(this||e)._sliderBorder-(this||e)._sliderHandleWidth/2;else{var h=o.clientWidth/2;var _=h>s?h-s-2*(this||e)._sliderBorder:0;var c=h>n?h-n-2*(this||e)._sliderBorder-(this||e)._sliderHandleWidth/2:0;l=(this||e)._sliderPadding+s-h+_-c}o.style[r]=l+"px"}}},_set_value_now:function(){this._get_slider_handle().setAttribute("aria-valuenow",(this||e)._settings.value)},_safeValue:function(i,s,n){s=s||(this||e)._settings.min;n=n||(this||e)._settings.max;return Math.min(Math.max(i,s),n)},refresh:function(){var i=this._get_slider_handle();if(i){this._set_value_now();(this||e)._settings.title&&i.setAttribute("aria-label",(this||e)._settings.label+" "+(this||e)._settings.title((this||e)._settings,this||e));this._set_inner_size()}},$setValue:function(){this.refresh()},$getValue:function(){return(this||e)._settings.value},$prepareValue:function(i){i=parseFloat(i);isNaN(i)&&(i=(this||e)._settings.min);return this._safeValue(i)},$init:function(i){var s=this||e;_event((this||e)._viewobj,z.mouse.down,(function(e){return s._on_mouse_down_start(e,"mouse")}));z.touch&&_event((this||e)._viewobj,z.touch.down,(function(e){return s._on_mouse_down_start(e,"touch")}));_event((this||e).$view,"keydown",bind((this||e)._handle_move_keyboard,this||e));if(i.vertical){i.height=i.height||Ht.vSliderHeight;(this||e)._viewobj.className+=" webix_slider_vertical";(this||e)._sliderPadding=Ht.vSliderPadding}},$skin:function(){ys.api.$skin.call(this||e);(this||e)._sliderHandleWidth=Ht.sliderHandleWidth;(this||e)._sliderPadding=Ht.sliderPadding;(this||e)._sliderBorder=Ht.sliderBorder},_handle_move_keyboard:function(i){var s=i.which||i.keyCode,n=(this||e)._settings,r=n.value;if(s>32&&s<41){preventEvent(i);var a=i.target;var o=/webix_slider_handle_(\d)/.exec(a.className);(this||e)._activeIndex=o?parseInt(o[1],10):-1;o&&(r=n.value[(this||e)._activeIndex]);r=r<n.min?n.min:r>n.max?n.max:r;if(36===s)r=n.min;else if(35===s)r=n.max;else{var l=37===s||40===s||34===s?-1:1;(33===s||34===s||n.step>1)&&(l*=n.step);r=1*r+l}if(o){var h=n.value[(this||e)._activeIndex?0:1];r=(this||e)._activeIndex&&r<=h||!(this||e)._activeIndex&&r>=h?h:r}if(r>=n.min&&r<=n.max){if(o){var _=[];for(var c=0;c<n.value.length;c++)_[c]=c===(this||e)._activeIndex?r:n.value[c];r=_}this.setValue(r,"user");(this||e)._activeIndex=-1}}},_on_mouse_down_start:function(i,s){var n=this||e;var r=i.target;(this||e)._mouse_down_process&&this._mouse_down_process(i);var a=(this||e)._settings.value;isArray(a)&&(a=copy(a));(this||e)._start_value=a;-1!==r.className.indexOf("webix_slider")&&((this||e)._settings.value=this._get_value_from_event(i));var o="touch"===s?{passive:false}:null;(this||e)._handle_drag_events=[event$1(document.body,z[s].move,(function(e){return n._handle_move_process(e,s)}),o),event$1(document,z[s].up,(function(){return n._handle_move_stop()}))];addCss(document.body,"webix_noselect")},_handle_move_stop:function(){eventRemove((this||e)._handle_drag_events[0]);eventRemove((this||e)._handle_drag_events[1]);(this||e)._handle_drag_events=null;var i=(this||e)._settings.value;isArray(i)&&(i=copy(i));(this||e)._settings.value=(this||e)._start_value;this.setValue(i,"user");this._get_slider_handle((this||e)._activeIndex).focus();(this||e)._activeIndex=-1;removeCss(document.body,"webix_noselect")},_handle_move_process:function(i,s){(this||e)._settings.value=this._get_value_from_event(i);this.refresh();this.callEvent("onSliderDrag",[]);"touch"===s&&preventEvent(i)},_get_value_from_event:function(i){var s=(this||e)._settings.vertical?"y":"x";var n=pos(i)[s];return this._get_value_from_pos(n)},_get_value_from_pos:function(i){var s=(this||e)._settings;var n=s.max-s.min;var r=s.vertical?"y":"x";var a=offset(this._get_slider_handle().parentNode)[r]+(this||e)._sliderPadding;var o=(s.vertical?(this||e)._content_height:this._get_input_width(s))-2*(this||e)._sliderPadding;var l=o?(i-a)*n/o:0;s.vertical&&(l=n-l);l=Math.round((l+1*s.min)/s.step)*s.step;return this._safeValue(l)},_init_onchange:function(){}};i.protoUI(Gs,ys.view);i.protoUI({name:"rangeslider",defaults:{template:"GPL version doesn't support rangeslider <br> You need Webix PRO"}},Ai.view);var Ks={name:"switch",defaults:{template:function(e,i){i._calck_switch_size();var s=e.name||"x"+uid();var n="";if(e.labelRight){n="<label class='webix_label_right'>"+e.labelRight+"</label>";e.labelWidth&&(e.label=e.label||"&nbsp;")}var r=e.checkValue==e.value;var a='aria-label="'+(e.label||e.labelRight||"")+'" role="checkbox" tabindex="0" aria-checked="'+(r?"true":"false")+'" '+(e.readonly?"aria-readonly='true'":"")+'"';var o='<div class="webix_switch_box '+(r?" webix_switch_on":"")+'" style="width:'+i._switchWidth+'px"><span class="webix_switch_text">'+((r?e.onLabel:e.offLabel)||"")+'</span><button class="webix_switch_handle" '+a+' style="left:'+(r?i._switchWidth-i._switchHeight:0)+'px;"><input  id="'+s+'" class="webix_switch_toggle" type="checkbox" '+(r?"checked":"")+"></button></div>"+n;return i.$renderInput(e,o,s)}},$skin:function(){Is.api.$skin.call(this||e);(this||e)._switchHeight=Ht.switchHeight;(this||e)._switchWidth=Ht.switchWidth},$setValue:function(i){var s=(this||e)._settings;var n=i==s.checkValue;var r=(this||e).$view.querySelector(".webix_switch_box");if(r){var a=r.childNodes[1];var o=(n?s.onLabel:s.offLabel)||"";n?addCss(r,"webix_switch_on"):removeCss(r,"webix_switch_on");a.style.left=(n?(this||e)._switchWidth-(this||e)._switchHeight:0)+"px";a.firstChild.checked=n;a.setAttribute("aria-checked",n?"true":"false");o&&(r.childNodes[0].innerHTML=o)}},_calck_switch_size:function(){var i=(this||e)._settings;if(i.onLabel||i.offLabel){var s=i.onLabel?getTextSize(i.onLabel,"webix_switch_text").width:0;var n=i.onLabel?getTextSize(i.offLabel,"webix_switch_text").width:0;(this||e)._switchWidth=Math.max(s,n)+(this||e)._switchHeight}},on_click:{webix_switch_box:function(){(this||e)._settings.readonly||this.toggle("user")},webix_label_right:function(){(this||e)._settings.readonly||this.toggle("user")}}};i.protoUI(Ks,Is.view);var Js={name:"tabbar",$init:function(){this.attachEvent("onKeyPress",(this||e)._onKeyPress)},$skin:function(){var i=Ht;var s=(this||e).defaults;s.topOffset=i.tabTopOffset||0;s.tabOffset="undefined"!=typeof i.tabOffset?i.tabOffset:10;s.bottomOffset=i.tabBottomOffset||0;s.height=i.tabbarHeight;s.tabMargin=i.tabMargin;s.inputPadding=i.inputPadding;s.tabMinWidth=i.tabMinWidth||100;s.tabMoreWidth=i.tabMoreWidth||40;s.borderless=!i.tabBorder},_getTabbarSizes:function(){var i,s,n=(this||e)._settings,r=this._filterOptions(n.options),a=(this||e)._input_width-2*n.tabOffset,o=n.optionWidth||n.tabMinWidth;s=r.length;if(n.tabMinWidth&&a/s<o)return{max:parseInt(a/o,10)||1};if(!n.optionWidth)for(i=0;i<s;i++)if(r[i].width){a-=r[i].width+(i||n.type?0:n.tabMargin);s--}return{width:s?a/s:n.tabMinWidth}},_init_popup:function(){var s=this||e;var n=(this||e)._settings;if(!n.tabbarPopup||!$$(n.tabbarPopup)){var r=i.extend({view:"popup",autofocus:false,width:200},n.tabbarPopup||{});var a=i.extend({view:"list",borderless:true,select:true,autoheight:true,yCount:7,template:template("#value#")},n.tabbarPopup&&n.tabbarPopup.body||{},true);a.css="webix_tab_list ".concat(a.css||"");r.body=a;var o=ui(r);var l=o.getBody();o.attachEvent("onShow",(function(){l.unselect();ht.setFocus(l);var e=l.getItemNode(l.getFirstId());e&&e.focus()}));l.attachEvent("onItemClick",(function(e){return s._popupInnerClick(e)}));l.attachEvent("onEnter",(function(){return s._popupInnerClick()}));n.tabbarPopup=o._settings.id;(this||e)._destroy_with_me.push(o)}(this||e)._init_popup=function(){}},_popupInnerClick:function(i){var s=$$((this||e)._settings.tabbarPopup);i=i||s.getBody().getSelectedId();if(i&&this.callEvent("onBeforeTabClick",[i])){this.setValue(i,"user");s.hide();this.callEvent("onAfterTabClick",[i]);this.refresh();this.focus()}return false},getPopup:function(){this._init_popup();return $$((this||e)._settings.tabbarPopup)},moreTemplate_setter:template,defaults:{moreTemplate:'<span class="webix_icon wxi-dots"></span>',template:function(e,i){i._check_options(e.options);var s=i._filterOptions(e.options);var n,r,a,o,l,h,_,c;if(s.length){e.value||(e.value=i._getFirstActive(true));r="";e.tabOffset&&(r+="<div class='webix_tab_filler' style='width:"+e.tabOffset+"px;'>&nbsp;</div>");n=i._input_width-2*e.tabOffset-(e.type?0:e.tabMargin*(s.length-1));_=e.topOffset+e.bottomOffset;var d=i._getTabbarSizes();if(d.max&&d.max<s.length){var f=i.getPopup();f.hide();var g=f.getBody()||null;if(g)if(d.max){for(var v=0,p=false;v<s.length&&!p;v++)if(s[v].id==e.value){p=true;if(v+1>d.max){var m=s.splice(v,1);var b=s.splice(0,d.max-1).concat(m);s=b.concat(s)}}g.clearAll();g.parse(s.slice(d.max))}else g.clearAll()}else if(i._settings.tabbarPopup){var w=$$(i._settings.tabbarPopup);w&&w.hide()}h=e.tabOffset;for(var x=0,y=false;x<s.length&&!y;x++){if(d&&d.max){d.max==x+1&&(y=true);n=i._input_width-2*e.tabOffset-(!e.type&&d.max>1?e.tabMargin*(d.max-1):0);c=(n-e.tabMoreWidth)/d.max}else c=d.width;c=s[x].width||e.optionWidth||c;h+=c+(x&&!e.type?e.tabMargin:0);e.tabMargin>0&&x&&!e.type&&(r+="<div class='webix_tab_filler' style='width:"+e.tabMargin+"px;'></div>");r+=i._getTabHTML(s[x],c);if(y){r+='<div role="button" tabindex="0" aria-label="'+u.aria.showTabs+'" class="webix_tab_more_icon" style="width:'+e.tabMoreWidth+'px;">'+e.moreTemplate(e,i)+"</div>";h+=e.tabMoreWidth}}a=i._content_width-h;a>0&&!e.type&&(r+="<div class='webix_tab_filler' style='width:"+a+"px;'>&nbsp;</div>")}else r="<div class='webix_tab_filler' style='width:"+i._input_width+"px; border-right:0px;'></div>";o="";l=_&&!e.type?"height:"+(i._content_height-_)+"px":"";e.topOffset&&!e.type&&(o+="<div class='webix_before_all_tabs' style='width:100%;height:"+e.topOffset+"px'></div>");o+="<div style='"+l+"' role='tablist' class='webix_all_tabs "+(e.type?"webixtype_"+e.type:"")+"'>"+r+"</div>";e.bottomOffset&&!e.type&&(o+="<div class='webix_after_all_tabs' style='width:100%;height:"+e.bottomOffset+"px'></div>");return o}},_getInputNode:function(){return(this||e).$view.querySelectorAll(".webix_item_tab")},_getTabHTML:function(s,n){var r,a="",o="",l=!!s.disabled,h=(this||e).config;s.id==h.value&&(a+=" webix_selected");l&&(a+=" webix_disabled");s.css&&(a+=" "+s.css);h.tooltip&&(o=" webix_t_id='"+s.id+"'");n=s.width||n;r='<div class="webix_item_tab'+a+'" button_id="'+s.id+'" role="tab" aria-selected="'+(s.id==h.value?"true":"false")+'" tabindex="'+(l||s.id!=h.value?"-1":"0")+'" style="width:'+n+'px;"'+(l?' webix_disabled="true"':"")+o+">";if((this||e)._tabTemplate){var _=(this||e)._content_height-2*h.inputPadding-2;var c=(this||e)._content_height-2;var d=i.extend({cheight:_,aheight:c},s);r+=this._tabTemplate(d)}else{var f=s.icon?"<span class='webix_icon "+s.icon+"'></span> ":"";r+=f+s.value}l||!s.close&&!h.close||(r+="<span role='button' tabindex='0' aria-label='"+u.aria.closeTab+"' class='webix_tab_close webix_icon wxi-close'></span>");r+="</div>";return r},_getBox:function(){return(this||e)._dataobj.firstChild},_types:{image:"<div class='webix_img_btn_top' style='height:#cheight#px;background-image:url(#image#);'><div class='webix_img_btn_text'>#value#</div></div>",icon:"<div class='webix_img_btn' style='line-height:#cheight#px;height:#cheight#px;'><span class='webix_icon_btn #icon#' style='max-width:#cheight#px;max-height:#cheight#px;'></span>#value#</div>",iconTop:"<div class='webix_img_btn_top' style='height:#cheight#px;width:100%;top:0px;text-align:center;'><span class='webix_icon #icon#'></span><div class='webix_img_btn_text'>#value#</div></div>"},type_setter:function(i){(this||e)._settings.tabOffset=0;(this||e)._types[i]&&((this||e)._tabTemplate=template((this||e)._types[i]));return i}};i.protoUI(Js,Rs.view);var Zs={name:"richtext",defaults:{label:"",labelWidth:80,labelPosition:"left"},$init:function(){(this||e)._viewobj.className+=" webix_richtext";(this||e).$ready.unshift((this||e)._setLayout)},$skin:function(){Vi.api.$skin.call(this||e);(this||e).defaults.paddingX=Ht.inputSpacing/2;(this||e).defaults.paddingY=Ht.inputPadding},getInputNode:function(){return(this||e).$view.querySelector(".webix_richtext_editor")},_button:function(i){return{view:"toggle",type:"icon",icon:"wxi-"+i,name:i,id:i,label:u.richtext[i],autowidth:true,action:i,click:(this||e)._add_data}},_setLayout:function(){var i=this||e;var s={view:"template",css:"webix_richtext_container",borderless:true,template:"<div class='webix_richtext_editor' contenteditable='true'>"+this.getValue()+"</div>",on:{onAfterRender:function(){i._rendered_input=true;i.refresh();_event(i.getInputNode(),"blur",(function(){i._updateValue((this||e).innerHTML,"user")}));_event(i.getInputNode(),"keyup",(function(){i._getselection("auto")}))}},onClick:{webix_richtext_editor:function(){i._getselection("auto")}}};var n=[this._button("underline"),this._button("bold"),this._button("italic"),{}];var r={view:"toolbar",id:"toolbar",elements:n};var a=[r,s];var o=(this||e).config;if("top"==o.labelPosition){r.elements=n.concat([{view:"label",label:o.label,align:"right"},{width:4}]);this.rows_setter(a)}else{o.labelWidth=o.label?this._getLabelWidth(o.labelWidth,o.label):0;if(o.labelWidth){o.margin=0;this.cols_setter([{template:o.label,css:"webix_richtext_inp_label"+(o.required?" webix_required":""),borderless:true,width:o.labelWidth},{rows:a}])}else this.rows_setter(a)}},_getLabelWidth:function(e,i){"auto"==e&&(e=getTextSize(i,"webix_inp_label").width);return e?Math.max(e,Ht.dataPadding):0},_getselection:function(i){var s=this||e;var n=s.$$("toolbar");var r;n.setValues({italic:false,underline:false,bold:false},false,i);r=window.getSelection?window.getSelection():document.selection.createRange();for(var a=0;a<r.rangeCount;++a)if(s.$view.contains(this.getInputNode())){document.queryCommandState("bold")&&s.$$("bold").setValue(true,i);document.queryCommandState("underline")&&s.$$("underline").setValue(true,i);document.queryCommandState("italic")&&s.$$("italic").setValue(true,i)}},refresh:function(){(this||e)._rendered_input&&(this.getInputNode().innerHTML=(this||e)._settings.value)},_execCommandOnElement:function(e){var i,s;i=window.getSelection();s=i.toString().length;var n=this.getInputNode();if(n.contains(i.anchorNode)&&n.contains(i.focusNode)&&s>0)for(var r=0;r<i.rangeCount;++r){var a=i.getRangeAt(r);if(i.isCollapsed){var o=i.focusNode.textContent;var l=i.focusNode;var h=i.anchorOffset;var _=o.substring(0,h).match(/[A-Za-z]*$/)[0];var c=o.substring(h).match(/^[A-Za-z]*/)[0];var d=h-_.length;var u=h+c.length;a.setStart(l,d);a.setEnd(l,u);i.removeAllRanges();i.addRange(a);document.execCommand(e,false,"")}else document.execCommand(e,false,"")}},_add_data:function(){var i=this.getTopParentView();i._execCommandOnElement((this||e).config.action)},focus:function(){if(!ht.canFocus(this||e))return false;var i=this.getInputNode();i.focus()},_updateValue:function(i,s){i=this.$prepareValue(i);var n=(this||e)._settings.value;if(n!=i){(this||e)._settings.value=i;this.callEvent("onChange",[i,n,s])}},setValue:function(e,i){this._updateValue(e,i);this.refresh()},$prepareValue:function(e){return 0===e?"0":(e||"").toString()},value_setter:function(e){return this.$prepareValue(e)},getValue:function(){var i=this.getInputNode();return i?i.innerHTML:(this||e)._settings.value}};i.protoUI(Zs,ge,Vi.view);var Qs={name:"proto",$init:function(){(this||e).data.provideApi(this||e,true);(this||e)._dataobj=(this||e)._dataobj||(this||e)._contentobj;(this||e).data.attachEvent("onStoreUpdated",bind((function(){(this||e).render.apply(this||e,arguments)}),this||e))},$setSize:function(){St.api.$setSize.apply(this||e,arguments)&&this.render()},_id:"webix_item",on_mouse_move:{},type:{}};var tn=i.protoUI(Qs,xe,Jt,kt,Ue,Se,ie,St.view,f,_t);var en={api:Qs,view:tn};var sn={name:"list",_listClassName:"webix_list",_itemClassName:"webix_list_item",$init:function(i){var s=this||e;addCss((this||e)._viewobj,(this||e)._listClassName+("x"==(i.layout||(this||e).defaults.layout)?"-x":""));(this||e).data.provideApi(this||e,true);(this||e).data.attachEvent("onStoreUpdated",(function(e,i,n){e&&"add"!==n&&"delete"!==n||s._auto_resize()}));(this||e).data.attachEvent("onSyncApply",(function(){return s._auto_resize()}));(this||e)._viewobj.setAttribute("role","listbox")},dynamic_setter:function(s){s&&i.extend(this||e,Xe,true);return s},$dragHTML:function(i,s,n){var r;if("y"==(this||e)._settings.layout&&"auto"==(this||e).type.width){(this||e).type.width=(this||e)._content_width;r=this._toHTML(i);(this||e).type.width="auto"}else r=this._toHTML(i);isArray(n.source)&&n.source.length>1&&(r=this._toMultipleHTML(r,n.source.length));return r},defaults:{select:false,scroll:true,layout:"y",navigation:true,datafetch:50},_id:"webix_l_id",on_click:{webix_list_item:function(i,s){if((this||e)._settings.select){(this||e)._no_animation=true;"multiselect"==(this||e)._settings.select||(this||e)._settings.multiselect?this.select(s,false,i.ctrlKey||i.metaKey||"touch"==(this||e)._settings.multiselect,i.shiftKey):this.select(s);(this||e)._no_animation=false}}},on_dblclick:{},getVisibleCount:function(){return Math.floor((this||e)._content_height/this._one_height())},_auto_resize:function(){var i=(this||e)._settings;if(i.autoheight||i.autowidth)return this.resize();"y"==i.layout?i.yCount&&this._auto_height_calc(i.yCount):i.xCount&&this._auto_width_calc(i.xCount)},_auto_height_calc:function(i){var s=(this||e).data.$pagesize||this.count();this._onoff_scroll(i&&i<s,"y");(this||e)._settings.autoheight&&s<(i||Infinity)&&(i=s);var n=this._one_height()*i+((this||e).type.margin||0);(this||e).getUnits&&(n+=this.getUnits().length*(this||e).type.headerHeight);return Math.max(n,(this||e)._settings.minHeight||0)},_one_height:function(){return(this||e).type.height+((this||e).type.margin||0)},_auto_width_calc:function(i){var s=(this||e).data.$pagesize||this.count();this._onoff_scroll(i&&i<s,"x");(this||e)._settings.autowidth&&s<(i||Infinity)&&(i=s);return(this||e).type.width*i},$getSize:function(i,s){if("y"==(this||e)._settings.layout){"auto"!=(this||e).type.width&&((this||e)._settings.width=(this||e).type.width+((this||e)._scroll_y?z.scrollSize:0));((this||e)._settings.yCount||(this||e)._settings.autoheight)&&((this||e)._settings.height=this._auto_height_calc((this||e)._settings.yCount)||1)}else{"auto"!=(this||e).type.height&&((this||e)._settings.height=this._one_height()+((this||e)._scroll_x?z.scrollSize:0));((this||e)._settings.xCount||(this||e)._settings.autowidth)&&((this||e)._settings.width=this._auto_width_calc((this||e)._settings.xCount)||1)}return St.api.$getSize.call(this||e,i,s)},$setSize:function(){St.api.$setSize.apply(this||e,arguments)},type:{css:"",widthSize:function(e,i){return i.width+(i.width>-1?"px":"")},heightSize:function(e,i){return i.height+(i.height>-1?"px":"")},classname:function(e,i,s){var n="webix_list_item";i.css&&(n+=" "+i.css);e.disabled&&(n+=" webix_disabled");if(e.$css){"object"==_typeof(e.$css)&&(e.$css=createCss(e.$css));n+=" "+e.$css}s&&s.$css&&(n+=" "+s.$css);return n},aria:function(e,i,s){return'role="option"'+(s&&s.webix_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')+(e.$count&&e.$template?'aria-expanded="true"':"")+(e.disabled?' aria-disabled="true" webix_disabled="true"':"")},template:function(e){return(e.icon?"<span class='webix_list_icon webix_icon "+e.icon+"'></span>":"")+e.value+(e.badge||0===e.badge?"<div class='webix_badge'>"+e.badge+"</div>":"")},width:"auto",templateStart:template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;" {common.aria()}>'),templateEnd:template("</div>")},$skin:function(){(this||e).type.height=Ht.listItemHeight},disableItem:function(e){this._set_item_disabled(e,true)},enableItem:function(e){this._set_item_disabled(e,false)},_set_item_disabled:function(e,i){var s=this.getItem(e);if(s){s.disabled=i;this.refresh(e)}},isItemEnabled:function(e){var i=this.getItem(e);return i&&!i.disabled},_skip_item:function(e,i,s){if(!this.isItemEnabled(e)){e=this.getNextId(e,s)||null;return e&&e!=i?this._skip_item(e,i,s):i}return e}};var nn=i.protoUI(sn,Gt,ve,Zt,ne,me,Ce,$e,en.view,Xt);var rn={api:sn,view:nn};type(rn.view,{name:"uploader",template:"{common.removeIcon()}{common.percent()}<div style='float:right'>#sizetext#</div>{common.fileName()}",percent:function(e){return"transfer"==e.status?"<div style='width:60px; text-align:center; float:right'>"+e.percent+"%</div>":"<div class='webix_upload_"+e.status+"'><span class='"+("error"==e.status?"error_icon":"webix_icon wxi-check")+"'></span></div>"},removeIcon:function(){return"<div class='webix_remove_upload'><span class='cancel_icon'></span></div>"},fileName:function(e){return"<div style='text-overflow:ellipsis; white-space:nowrap; overflow:hidden; padding-right:8px;'>"+e.name+"</div>"},on_click:{webix_remove_upload:function(i,s){$$((this||e).config.uploader).files.remove(s)}}});var an={name:"uploader",defaults:{autosend:true,multiple:true,inputName:"upload"},$cssName:"button webix_uploader",$allowsClear:true,on_click:{webix_hidden_upload:function(){return false}},send:function(){},fileDialog:function(){},stopUpload:function(){},$skin:function(){vs.api.$skin.call(this||e);"material"!=jt&&"mini"!=jt||((this||e).defaults.css="webix_primary")},$init:function(){(this||e).files=new Ss;(this||e)._destroy_with_me=[(this||e).files];i.extend(this||e,We,true)},$setSize:function(i,s){St.api.$setSize.call(this||e,i,s)&&this.render()},apiOnly_setter:function(i){delay((this||e).render,this||e);return(this||e).$apiOnly=i},_add_files:function(e){for(var i=0;i<e.length;i++)this.addFile(e[i])},link_setter:function(i){i&&delay((function(){var i=$$((this||e)._settings.link);if(!i){var s=this.getTopParentView();s.$$&&(i=s.$$((this||e)._settings.link))}i.sync&&i.filter?i.sync((this||e).files):i.setValues&&(this||e).files.data.attachEvent("onStoreUpdated",(function(){i.setValues(this||e,false,"auto")}));i._settings.uploader=(this||e)._settings.id}),this||e);return i},addFile:function(s,n,r,a){var o=null;if("object"==_typeof(s)){o=s;s=o.name;n=o.size}var l=this._format_size(n);r=r||s.split(".").pop();var h={file:o,name:s,id:uid(),size:n,sizetext:l,type:r,context:(this||e)._last_file_context,status:"client"};o&&o.webkitRelativePath&&(h.name=o.webkitRelativePath);a&&i.extend(h,a,true);if(this.callEvent("onBeforeFileAdd",[h])){(this||e)._settings.multiple||(this||e).files.clearAll();var _=(this||e).files.add(h);this.callEvent("onAfterFileAdd",[h]);_&&(this||e)._settings.autosend&&this.send(_)}return h},_get_active_url:function(s){var n=(this||e)._settings.upload;var r=i.extend(s.urlData||{},(this||e)._settings.urlData||{});if(n&&r){var a=[];for(var o in r)a.push(encodeURIComponent(o)+"="+encodeURIComponent(r[o]));a.length&&(n+=(-1==n.indexOf("?")?"?":"&")+a.join("&"))}return n},addDropZone:function(i,s){var n=toNode(i);var r="";s&&(r=" "+createCss({content:'"'+s+'"'},":before"));var a="webix_drop_file"+r;var o=null;_event(n,"dragover",preventEvent);_event(n,"dragover",(function(){addCss(n,a,true);if(o){clearTimeout(o);o=null}}));_event(n,"dragleave",(function(){o=setTimeout((function(){removeCss(n,a)}),150)}));_event(n,"drop",bind((function(e){removeCss(n,a);this.$drop(e);return preventEvent(e)}),this||e))},_format_size:function(e){var i=0;while(e>1024){i++;e/=1024}return Math.round(100*e)/100+" "+u.fileSize[i]},_complete:function(s,n){var r=(this||e).files.getItem(s);i.extend(r,n,true);r.status="server";r.progress=100;this.callEvent("onFileUpload",[r,n]);this.callEvent("onChange",[]);(this||e).files.updateItem(s);this.isUploaded()&&this._upload_complete(n)},_upload_complete:function(i){this.callEvent("onUploadComplete",[i]);if((this||e)._last_assigned_upload_callback){(this||e)._last_assigned_upload_callback.call(this||e,i);(this||e)._last_assigned_upload_callback=0}},isUploaded:function(){var i=(this||e).files.data.order;for(var s=0;s<i.length;s++)if("server"!=(this||e).files.getItem(i[s]).status)return false;return true},$onUploadComplete:function(){},$updateProgress:function(i,s){var n=(this||e).files.getItem(i);n.percent=Math.round(s);(this||e).files.updateItem(i)},setValue:function(i){"string"==typeof i&&i&&(i={value:i,status:"server"});(this||e).files.clearAll();i&&(this||e).files.parse(i);this.callEvent("onChange",[])},getValue:function(){var i=[];(this||e).files.data.each((function(e){"server"==e.status&&i.push(e.value||e.name)}));return i.join(",")}};i.protoUI(an,vs.view);var on={name:"texthighlight",defaults:{template:function(e,i){var s=e.name||e.id;var n="x"+uid();var r=i._get_input_width(e);var a='<div class="webix_text_highlight" style="width:'.concat(r,'px;"><div class="webix_text_highlight_value"');"textarea"==e.type&&z.isIOS&&(a+=' style="margin-left:'.concat(Ht.dataPadding+3,"px; margin-right:").concat(Ht.dataPadding+3,'px;"'));a+="></div></div>";if("textarea"==e.type){a+="".concat(i._baseInputHTML("textarea"),' style="width:').concat(r,'px;" id="').concat(n,'" name="').concat(s,'" class="webix_inp_textarea">').concat(i._pattern(e.value),"</textarea>");return i.$renderInput(e,a,n)}return a+i.$renderInput(e)},highlight:function(e){return template.escape(e)},type:"text"},$init:function(i){var s=this||e;var n=i.type||(this||e).defaults.type;(this||e)._viewobj.className+=" webix_el_"+n;if("textarea"==n){delete i.clear;i.height=i.height||0;i.minHeight=i.minHeight||60;(this||e)._skipSubmit=true}else{(this||e).scrollEv=event$1(document,"selectionchange",(function(){s.$view.contains(document.getSelection().focusNode)&&s._syncText()}));this.attachEvent("onDestruct",(function(){eventRemove(s.scrollEv)}))}this.attachEvent("onChange",(function(){return s._syncText()}));this.attachEvent("onAfterRender",(function(){s._updatePos();var e=["scroll","focus","blur","paste","cut","keyup","input"];e.forEach((function(e){return _event(s.getInputNode(),e,(function(){return s._syncText()}))}));s._handleInput(true)}))},$setSize:function(){ys.api.$setSize.apply(this||e,arguments);this._updatePos()},$renderIcon:function(i){return"text"==i.type?ys.api.$renderIcon.apply(this||e,arguments):""},_getLabelHeight:function(i){return"textarea"==(this||e)._settings.type?i?(this||e)._labelTopHeight-(this||e)._settings.inputPadding:"":ys.api._getLabelHeight.apply(this||e,arguments)},getInputNode:function(){return(this||e)._dataobj.querySelector("text"==(this||e)._settings.type?"input":"textarea")},_getHighlightNode:function(){return(this||e)._dataobj.querySelector(".webix_text_highlight")},_handleInput:function(i){var s=this._getHighlightNode().firstElementChild;var n=this.getValue();if(i||n!=((this||e)._lastText||"")){(this||e)._lastText=n;s.innerHTML=(this||e)._settings.highlight.apply(this||e,[n])+"&nbsp;"}},_handleScroll:function(){var i=this._getHighlightNode();"text"==(this||e)._settings.type&&(i=i.firstElementChild);var s=this.getInputNode();i.scrollTop=s.scrollTop;i.scrollLeft=s.scrollLeft},_updatePos:function(){if((this||e)._rendered_input&&this.isVisible()){var i=this.getInputNode();var s=this._getHighlightNode().style;s.left=i.offsetLeft+"px";s.top=i.offsetTop+"px";s.height=i.getBoundingClientRect().height+"px"}},_syncText:function(){delay((function(){if(!(this||e).$destructed){this._handleInput();this._handleScroll()}}),this||e)}};i.protoUI(on,Ys.autoheight,ys.view);var ln={name:"timeboard",defaults:{width:260,hours:true,seconds:false,twelve:/%([a,A])/.test(u.timeFormat)},$skin:function(){Vi.api.$skin.call(this||e);(this||e).defaults.margin=Ht.layoutMargin.form;(this||e).defaults.padding=Ht.layoutPadding.space},$init:function(i){var s=this||e;(this||e).$view.className+=" webix_timeboard";var n=[];var r=isUndefined(i.twelve)?(this||e).defaults.twelve:i.twelve;var a=isUndefined(i.hours)?(this||e).defaults.hours:i.hours;var o=i.seconds||(this||e).defaults.seconds;if(isUndefined(i.height)){var l=1+1*a+1+1*o+1*!!i.button;i.height=Ht.inputHeight*l+(i.margin||(this||e).defaults.margin)*(l-1)+2*(i.padding||(this||e).defaults.padding)}n.push(this._getClock(a,o,r));n.push.apply(n,_toConsumableArray(this._getSliders(a,o,r)));i.button&&n.push(this._getDoneButton());i.rows=[{view:"form",elements:n,padding:0,borderless:true,on:{onChange:function(e,i,n){return s._recollectValues(n)}}}];(this||e).$ready.push((function(){(this||e)._form=this.queryView("form");var i=(this||e)._settings.value;i&&this.setValue(i,"auto")}))},setValue:function(i,s){i=this.$prepareValue(i);var n=(this||e)._settings.value;if(!ii.equal(i,n)){(this||e)._settings.value=i;this.$setValue(i);this.callEvent("onChange",[i,n,s])}},$prepareValue:function(e){"string"===typeof e&&(e=u.parseTimeFormatDate(e));return e||ii.datePart(new Date)},$setValue:function(i){var s={};s.minutes=s.sminutes=i.getMinutes();(this||e)._settings.hours&&(s.shours=s.hours=i.getHours());(this||e)._settings.seconds&&(s.sseconds=s.seconds=i.getSeconds());if((this||e)._settings.twelve&&!isUndefined(s.hours)){s.day_part=s.hours>11?u.pm[1]:u.am[1];s.hours=s.hours&&12!=s.hours?s.hours%12:12;s.shours=12==s.hours?0:s.hours}(this||e)._form.setValues(s,false,"auto")},_recollectValues:function(i){var s=this.$getValue();var n=(this||e)._settings.value?ii.copy((this||e)._settings.value):new Date;n.setHours(s.hours||0);n.setMinutes(s.minutes);(this||e)._settings.seconds&&n.setSeconds(s.seconds);this.setValue(n,i)},$getValue:function(){var i=(this||e)._form.getValues();(this||e)._settings.twelve&&(this||e)._settings.hours&&(i.day_part==u.pm[1]&&i.hours<12?i.hours=(1*i.hours+12).toString():i.day_part==u.am[1]&&12==i.hours&&(i.hours=0));return i},getValue:function(){if((this||e)._settings.stringResult){var i=this.$getValue();var s=[];i.hours&&s.push(i.hours);i.minutes&&s.push(i.minutes);i.seconds&&s.push(i.seconds);return s.join(":")}return(this||e)._settings.value},_getClock:function(e,i,s){var n=[{},this._getText("minutes"),{}];var r={css:"webix_colon_template",template:":",borderless:true,width:16};e&&n.splice(1,0,this._getText("hours",s),copy(r));i&&n.splice(-1,0,copy(r),this._getText("seconds"));if(s&&e){var a=u.am[1];var o=u.pm[1];var l={view:"label",name:"day_part",css:"webix_day_part",template:"<div tabindex='0' role='button' class='webix_el_box' style='width:#awidth#px;height:#aheight#px;line-height:#cheight#px'>#label#</div>",inputWidth:30,on:{onItemClick:function(){this.setValue(this.getValue()==a?o:a,"user")},onKeyPress:function(e,i){this._onKeyPress(e,i)}}};n.splice(-1,1,l)}return{type:"clean",cols:n}},_getText:function(i,s){var n=this||e;var r="hours"===i?s?11:23:59;return{view:"text",width:getTextSize("00").width+2*Ht.dataPadding+2*Ht.inputPadding,name:i,format:{parse:function(e){12==e&&"hours"===i&&s&&(e="00");return e.length>1?e.replace(/^0/,""):e||0},edit:function(e){e<=0&&"hours"===i&&s?e=12:e<0?e=0:e>r&&(e=r);return 1===(e+"").length?"0"+e:e+""||"00"}},on:{onChange:function(e){var r=1*(!s||"hours"!==i||e&&12!=e?e:0);n._form.elements["s"+i].setValue(r,"auto")}}}},_getSliders:function(e,i,s){var n=[this._getSlider("minutes",u.calendar.minutes,59)];e&&n.unshift(this._getSlider("hours",u.calendar.hours,s?11:23));i&&n.push(this._getSlider("seconds",u.timeboard.seconds,59,s));return n},_getSlider:function(i,s,n,r){var a=this||e;var o="hours"===i&&r;var l={view:"slider",name:"s"+i,title:s,moveTitle:false,min:0,max:n,on:{onChange:function(e){a._form.elements[i].setValue((o?e&&12!=e?e%12:12:e)+"","auto")},onSliderDrag:function(){var e=this.getValue();var s=this.getFormView();s.blockEvent();s.elements[i].setValue((o?e&&12!=e?e%12:12:e)+"","auto");s.unblockEvent()}}};return l},_getDoneButton:function(){var i=this||e;return{view:"button",value:u.calendar.done,css:"webix_primary",click:function(){i.callEvent("onTimeSelect",[i._settings.value])}}}};i.protoUI(ln,Vi.view);var hn={name:"suggest",defaults:{autofocus:false,type:"list",keyPressTimeout:1,body:{yCount:10,autoheight:true,body:true,select:true,borderless:true,navigation:true},filter:function(e,i){return 0===e.value.toString().toLowerCase().indexOf(i.toLowerCase())}},template_setter:template,filter_setter:function(i){return toFunctor(i,(this||e).$scope)},_show_on_key_press:true,$init:function(s){var n={};i.extend(n,copy((this||e).defaults.body));n.view=s.type||(this||e).defaults.type;var r=this._get_extendable_cell(n);s.body&&i.extend(r,s.body,true);s.data&&(r.data=s.data);s.url&&(r.url=s.url);s.datatype&&(r.datatype=s.datatype);s.id&&(n.id=n.id||s.id+"_"+n.view);s.body=n;(this||e).$ready.push((this||e)._set_on_popup_click);this.attachEvent("onShow",(function(){if((this||e)._settings.master){var i=$$((this||e)._settings.master);if(i){var s=i._getInputDiv?i._getInputDiv():i.getInputNode();s.setAttribute("aria-expanded","true")}this._show_selection()}}));this.attachEvent("onHide",(function(){if((this||e)._settings.master){var i=$$((this||e)._settings.master);if(i){var s=i._getInputDiv?i._getInputDiv():i.getInputNode();s.setAttribute("aria-expanded","false")}}}));(this||e)._old_text={}},_get_extendable_cell:function(e){return e},_get_details:function(e){return isUndefined(e)?null:{config:e}},_set_input_value:function(i){(this||e)._last_input_target.value=i},_preselectMasterOption:function(i){var s=i.id?this.getItemText(i.id):i.text||i.value;var n;if((this||e)._settings.master){var r=$$((this||e)._settings.master);n=r.getInputNode();if(n){var a=r._settings.text;r.options_setter?r.$setValue(i.$empty?"":i.id):r.$setValueHere?r.$setValueHere(s,i,this._get_details()):r.$setValue(s);r._settings.text=a}}else(this||e)._last_input_target&&this._set_input_value(s);n=n||(this||e)._last_input_target;n&&n.focus()},setMasterValue:function(i,s,n){var r=i.id?this.getItemText(i.id):i.text||i.value;if((this||e)._settings.master){var a=$$((this||e)._settings.master);s&&i.id?a.refresh():a.options_setter?a.setValue(i.$empty?"":i.id,n):a.setValueHere?a.setValueHere(r,i,this._get_details(n)):a.setValue(r,n)}else(this||e)._last_input_target&&this._set_input_value(r);if(!s){this.hide();(this||e)._last_input_target&&(this||e)._last_input_target.focus()}this.callEvent("onValueSuggest",[i,r])},getMasterValue:function(){return(this||e)._settings.master?$$((this||e)._settings.master).getValue():null},getItemId:function(i){var s=this.getList();for(var n in s.data.pull){var r=s.getItem(n);if((this||e)._settings.filter.call(this||e,r,i))return r.id}},getItemText:function(i){var s=this.getList().getItem(i);if(!s)return(this||e)._old_text[i]||"";if((this||e)._settings.template)return(this||e)._settings.template.call(this||e,s,(this||e).type);if((this||e)._settings.textValue)return""+s[(this||e)._settings.textValue];var n=this.getList().type;var r=n.template.call(n,s,n);return(this||e)._old_text[i]=r},getSuggestion:function(i){var s,n=this.getList(),r=n.data.order;n.getSelectedId&&(s=n.getSelectedId());if(i&&r.length&&(!s||r.find(s)<0)){s=r[0];if(!n.config.dataFeed&&!(this||e).config.filter.call(this||e,n.data.pull[s],i))return null}if(s){"object"==_typeof(s)&&(s+="");if(n.getItem(s).$empty)return null}return s},getList:function(){return(this||e)._body_cell},_set_on_popup_click:function(){var i=this.getList();var s=(this||e)._settings.type;if(i.count){i.attachEvent("onItemClick",bind((function(e){this.setMasterValue(i.getItem(e),false,"user")}),this||e));i.data.attachEvent("onStoreUpdated",bind((function(e,i,s){"delete"==s&&e==this.getMasterValue()?this.setMasterValue({id:"",text:""},true,"auto"):"update"==s&&e==this.getMasterValue()&&this.setMasterValue(i,true,"auto")}),this||e));i.data.attachEvent("onAfterFilter",bind((this||e)._suggest_after_filter,this||e));i.data.attachEvent("onStoreLoad",bind((this||e)._suggest_after_filter,this||e));isUndefined((this||e)._settings.fitMaster)&&((this||e)._settings.fitMaster=true)}else if("calendar"==s){i.attachEvent("onAfterDateSelect",(function(){this.getParentView().setMasterValue({value:i.getSelectedDate()},i.config.multiselect,"user")}));i.attachEvent("onTodaySet",(function(e){this.getParentView().setMasterValue({value:e},false,"user")}));i.attachEvent("onDateClear",(function(e){this.getParentView().setMasterValue({value:e},false,"user")}))}else"colorboard"==s?i.attachEvent("onItemClick",(function(e){this.getParentView().setMasterValue({value:e},false,"user")})):"timeboard"==s?i.attachEvent("onTimeSelect",(function(e){this.getParentView().setMasterValue({value:e},false,"user")})):"colorselect"==s&&i.attachEvent("onColorSelect",(function(e){this.getParentView().setMasterValue({value:e},false,"user")}))},input_setter:function(e){this.linkInput(e);return 0},linkInput:function(i){var s;if(i.getInputNode){s=i.getInputNode();s.webix_master_id=i._settings.id;i.attachEvent("onInputResize",bind((this||e)._resetPosition,this||e))}else s=toNode(i);_event(s,"keydown",(function(e){s==document.body&&!this.isVisible()||(i.config?i.config.readonly:s.getAttribute("readonly"))||this._suggestions(e)}),{bind:this||e});i._getInputDiv&&(s=i._getInputDiv());s.setAttribute("aria-autocomplete","list");s.setAttribute("aria-expanded","false");if("DIV"===s.tagName){s.setAttribute("aria-live","assertive");s.setAttribute("aria-atomic","true")}(this||e)._non_ui_mode=true},_suggestions:function(i){(this||e)._last_delay&&((this||e)._last_delay=clearTimeout((this||e)._last_delay));var s=this.getList();var n=i.target;if((n!=document.body||this.isVisible())&&"webix_clipbuffer"!=n.className){(this||e)._last_input_target=n;(this||e)._settings.master=n.webix_master_id;var r=i.which||i.keyCode;if(16!=r&&17!=r){if(9==r)return this._tab_key(i,s);if(27==r)return this._escape_key(i,s);if(13==r)return this.$enterKey(i,s);if(this._navigate(i)&&this.isVisible()){preventEvent(i);return false}var a="true"==n.getAttribute("contentEditable")||""==n.getAttribute("contentEditable");isUndefined(n.value)&&!a||((this||e)._last_delay=delay((function(){if((this||e)._non_ui_mode||ht.getFocus()==$$((this||e)._settings.master)){(this||e)._resolve_popup=true;var i=a?n.innerText:n.value;(this||e)._before_filtering&&this._before_filtering();s.config.dataFeed?s.filter("value",i):s.filter&&s.filter(bind((function(s){return(this||e)._settings.filter.call(this||e,s,i)}),this||e))}}),this||e,[],(this||e)._settings.keyPressTimeout))}}},_suggest_after_filter:function(){if(!(this||e)._resolve_popup)return true;(this||e)._resolve_popup=false;var i=this.getList();if(i.count()>0){this.adjust();this.isVisible()||((this||e)._dont_unfilter=true);this.show((this||e)._last_input_target,null,true);(this||e)._dont_unfilter=false}else{this.hide();(this||e)._last_input_target=null}},show:function(i){var s=!i||"INPUT"!=i.tagName&&"TEXTAREA"!=i.tagName?null:i;if(!this.isVisible()||s&&s!=(this||e)._last_input_target){var n=this.getList();n.filter&&!(this||e)._dont_unfilter&&n.filter("");(this||e).$customWidth?this.$customWidth(i):i&&i.tagName&&(this||e)._settings.fitMaster&&((this||e)._settings.width=i.offsetWidth-2);n._zoom_level&&n.render();this.adjust();s&&((this||e)._last_input_target=s)}Zi.api.show.apply(this||e,arguments)},_show_selection:function(){var i=this.getList();var s=this.getMasterValue();if(i.select&&i.showItem)if(s&&i.exists&&i.exists(s)){i.select(s);i.showItem(s)}else{i.unselect();i.showItem(i.getFirstId())}else if(i.setValue){(this||e)._settings.master&&(s=$$((this||e)._settings.master).$prepareValue(s));i.setValue(s,"auto")}},$enterKey:function(i,s){var n=this.isVisible();var r;var a;(this||e)._settings.master&&(a=$$((this||e)._settings.master));if(a&&a._editable&&a._settings.editable)a._applyChanges("user");else if(n){if(s.count){r=s.getSelectedId(false,true);1==s.count()&&s.getFirstId()!=r&&(r=s.getFirstId());r&&(r=s.getItem(r))}else{s.getSelectedDate?r=s.getSelectedDate():s.getValue&&(r=s.getValue());r&&(r={value:r})}r&&this.setMasterValue(r,false,"user")}n?this.hide():(this||e)._show_on_key_press&&this.show((this||e)._last_input_target)},_escape_key:function(){return this.hide()},_tab_key:function(){return this.hide()},
/*! suggestions navigation: up/down buttons move selection
     *	@param e
     *		event object
     **/
_navigate:function(i){var s=this.getList();var n=i.which||i.keyCode;var r;if(s.moveSelection&&n<41&&n>32&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey){if(40===n||38===n){(this||e)._show_on_key_press&&!this.isVisible()&&this.show((this||e)._last_input_target);var a=38===n?"up":"down";s.moveSelection(a,false,false)}else{if(s.count||!s.count&&!s.isVisible())return false;var o;33==n&&(o="pgup");34==n&&(o="pgdown");35==n&&(o="bottom");36==n&&(o="top");37==n&&(o="left");39==n&&(o="right");s.moveSelection(o,false,false)}if(s.count)r=s.getSelectedItem(false);else{s.getSelectedDate?r=s.getSelectedDate():s.getValue&&(r=s.getValue());r&&(r={value:r})}r&&this.isVisible()&&this._preselectMasterOption(r);return true}return false},getValue:function(){var e=this.getList();var i=(e.getValue?e.getValue():e.getSelectedId())||"";i=i.id||i;if(e.getItem){var s=e.getItem(i);if(s&&s.$empty)return""}return i},setValue:function(e){var i=this.getList();if(e){if(i.exists(e)){i.select(e);i.showItem(e)}}else{i.unselect();i.showItem(i.getFirstId())}},_resetPosition:function(){if(!(this||e)._settings.hidden&&(this||e)._settings.master){var i=$$((this||e)._settings.master);i&&this.show(i.$view)}}};var _n=i.protoUI(hn,Zi.view);var cn={api:hn,view:_n};i.protoUI({name:"multisuggest",defaults:{template:"GPL version doesn't support multisuggest <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"checksuggest",defaults:{template:"GPL version doesn't support checksuggest <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"datasuggest",defaults:{template:"GPL version doesn't support datasuggest <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"gridsuggest",defaults:{template:"GPL version doesn't support gridsuggest <br> You need Webix PRO"}},Ai.view);var dn={name:"mentionsuggest",defaults:{symbol:"@",filter:function(i,s){var n=(this||e)._settings.symbol;s=s.substring(0,(this||e)._last_cursor_pos);if(-1===s.indexOf(n))return false;s=s.substring(s.lastIndexOf(n)+n.length);if(s.length){var r=i.id?this.getItemText(i.id):i.text||i.value;return-1!==r.toString().toLowerCase().indexOf(s.toLowerCase())}return false}},$init:function(){this.attachEvent("onValueSuggest",(this||e)._before_filtering)},$enterKey:function(i){if(this.isVisible()){preventEvent(i);var s;(this||e)._settings.master&&(s=$$((this||e)._settings.master));s&&s.callEvent&&s.callEvent("onEnter")}return cn.api.$enterKey.apply(this||e,arguments)},_before_filtering:function(){(this||e)._last_input_target&&((this||e)._last_cursor_pos=getSelectionRange((this||e)._last_input_target).start)},_get_details:function(i){return{pos:(this||e)._last_cursor_pos,symbol:(this||e)._settings.symbol,config:i}},_preselectMasterOption:function(){},_set_input_value:function(i){var s=(this||e)._settings.symbol;var n=(this||e)._last_input_target.value;var r=n.substring((this||e)._last_cursor_pos);n=n.substring(0,(this||e)._last_cursor_pos);n=n.substring(0,n.lastIndexOf(s)+s.length)+i;(this||e)._last_input_target.value=n+r;setSelectionRange((this||e)._last_input_target,n.length)},_show_on_key_press:false};i.protoUI(dn,cn.view);i.protoUI({name:"daterange",defaults:{template:"GPL version doesn't support daterange <br> You need Webix PRO"}},Ai.view);var un={name:"daterangesuggest",defaults:{type:"daterange",body:{view:"daterange",icons:true,button:true,borderless:true}},getValue:function(){return this.getRange().getValue()},setValue:function(e,i){this.getRange().setValue(copy(e),i)},getRange:function(){return this.getBody()},getButton:function(){return this.getBody().getChildViews()[1].getChildViews()[1]},_setValue:function(i){var s=$$((this||e)._settings.master);s&&s.setValue(i,"user")},_set_on_popup_click:function(){var i=this.getRange();i.attachEvent("onAfterDateSelect",bind((function(e){this._setValue(e)}),this||e));i.attachEvent("onDateClear",bind((function(e){this._setValue(e)}),this||e));i.attachEvent("onTodaySet",bind((function(e){this._setValue(e)}),this||e))}};i.protoUI(un,cn.view);i.protoUI({name:"daterangepicker",defaults:{template:"GPL version doesn't support daterangepicker <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"excelbar",defaults:{template:"GPL version doesn't support excelbar <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"excelviewer",defaults:{template:"GPL version doesn't support excelviewer <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"pdfbar",defaults:{template:"GPL version doesn't support pdfbar <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"pdfviewer",defaults:{template:"GPL version doesn't support pdfviewer <br> You need Webix PRO"}},Ai.view);var gn={name:"video",$init:function(i){i.id||(i.id=uid());(this||e).$ready.push((this||e)._init_video)},_init_video:function(){var i=(this||e)._settings;(this||e)._contentobj=create("video",{class:"webix_view_video",style:"width:100%;height:100%;",autobuffer:"autobuffer"},"");i.poster&&((this||e)._contentobj.poster=i.poster);if(i.src){"object"!=_typeof(i.src)&&(i.src=[i.src]);for(var s=0;s<i.src.length;s++)(this||e)._contentobj.innerHTML+=' <source src="'+i.src[s]+'">'}i.controls&&((this||e)._contentobj.controls=true);i.autoplay&&((this||e)._contentobj.autoplay=true);(this||e)._viewobj.appendChild((this||e)._contentobj)},getVideo:function(){return(this||e)._contentobj},defaults:{src:"",controls:true}};i.protoUI(gn,St.view);i.protoUI({name:"gage",defaults:{template:"GPL version doesn't support gage <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"barcode",defaults:{template:"GPL version doesn't support barcode <br> You need Webix PRO"}},Ai.view);i.protoUI({name:"bulletgraph",defaults:{template:"GPL version doesn't support bulletgraph <br> You need Webix PRO"}},Ai.view);var vn,pn;var mn={name:"geochart",defaults:{chart:{displayMode:"auto",region:"world",resolution:"countries"}},$init:function(s){(this||e).$view.innerHTML="<div class='webix_map_content' style='width:100%;height:100%'></div>";(this||e)._contentobj=(this||e).$view.firstChild;(this||e)._waitMap=Deferred.defer();s.chart=i.extend(s.chart||{},(this||e).defaults.chart);(this||e).data.provideApi(this||e,true);(this||e).$ready.push((this||e).render);(this||e).data.attachEvent("onClearAll",bind((this||e)._refreshColumns,this||e));(this||e).data.attachEvent("onStoreUpdated",bind((this||e)._drawData,this||e))},getMap:function(i){return i?(this||e)._waitMap:(this||e)._map},_getCallBack:function(i){return bind((function(){"function"===typeof i&&i();vn=vn||window.google;this._initMap()}),this||e)},render:function(){if("undefined"==typeof window.google||"undefined"==typeof window.google.charts){if(!pn){pn=document.createElement("script");pn.type="text/javascript";pn.src="//www.gstatic.com/charts/loader.js";document.getElementsByTagName("head")[0].appendChild(pn)}pn.onload=this._getCallBack(pn.onload)}else this._getCallBack()()},_initMap:function(){if(vn.visualization&&vn.visualization.GeoChart){(this||e)._map=new vn.visualization.GeoChart((this||e)._contentobj);this._mapEvents();(this||e)._waitMap.resolve((this||e)._map)}else{vn.charts.load("current",{packages:["geochart"],mapsApiKey:(this||e)._settings.key});vn.charts.setOnLoadCallback(bind((function(){this._initMap()}),this||e))}},$onLoad:function(i){if(!(this||e)._map){(this||e)._waitMap.then(bind((function(){this.parse(i,(this||e)._settings.datatype)}),this||e));return true}return false},_drawData:function(){if((this||e)._map){var i=(this||e)._columns&&(this||e)._columns.length?(this||e)._columns:this._defineColumns();var s=[];(this||e).data.each((function(n){var r=[];for(var a=0;a<i.length;a++){var o=n[i[a].label];"number"==i[a].type?o*=1:"tooltip"==i[a].role&&(o=(this||e)._settings.tooltip(n));r.push(o)}s.push(r)}),this||e);if(i.length){var n=new vn.visualization.DataTable;for(var r=0;r<i.length;r++)n.addColumn(i[r]);n.addRows(s);var a=new vn.visualization.DataView(n);(this||e)._map.draw(a,(this||e)._settings.chart)}else(this||e)._map.draw(vn.visualization.arrayToDataTable([["",""]]),{})}else(this||e)._map||(this||e)._waitMap.then(bind((this||e)._drawData,this||e))},setDisplayMode:function(i){(this||e)._settings.chart.displayMode=i;this.refresh()},setRegion:function(i){(this||e)._settings.chart.region=i;this.refresh()},refresh:function(){(this||e)._map.clearChart();this._drawData()},tooltip_setter:function(s){var n=(this||e)._settings.chart.tooltip;(this||e)._settings.chart.tooltip=i.extend(n||{},{isHtml:true});return template(s)},$setSize:function(s,n){if(St.api.$setSize.apply(this||e,arguments)&&(this||e)._map){i.extend((this||e)._settings,{width:s,height:n});this.refresh()}},_refreshColumns:function(){(this||e)._columns=null;this._drawData()},_getColumnType:function(e,i){if(!e||isUndefined(e[i]))return"string";var s=_typeof(e[i]);"string"!=s||isNaN(1*e[i])||(s="number");return s},_defineColumns:function(){var i=(this||e)._settings.columns||[];var s=(this||e).data.pull[(this||e).data.order[0]];if(!i.length&&s)for(var n in s)"id"!==n&&i.push(n);for(var r=0;r<i.length;r++)"object"!==_typeof(i[r])&&(i[r]={type:this._getColumnType(s,i[r]),label:i[r]});(this||e)._settings.tooltip&&i.push({type:"string",role:"tooltip",p:{html:true}});(this||e)._columns=i;return i},_mapEvents:function(){vn.visualization.events.addListener((this||e)._map,"error",bind((function(){this.callEvent("onMapError",arguments)}),this||e));vn.visualization.events.addListener((this||e)._map,"ready",bind((function(){this.callEvent("onMapReady",arguments)}),this||e));vn.visualization.events.addListener((this||e)._map,"regionClick",bind((function(){this.callEvent("onRegionClick",arguments)}),this||e));vn.visualization.events.addListener((this||e)._map,"select",bind((function(){var i=(this||e)._map.getSelection()[0];var s=i||(this||e)._selprev;if(s){var n=(this||e).data.order[s.row];(this||e)._selprev=s;this.callEvent("onItemClick",[n,!!i])}}),this||e))}};i.protoUI(mn,ie,f,St.view);var bn,wn;var xn={name:"google-map",$init:function(){(this||e).$view.innerHTML="<div class='webix_map_content' style='width:100%;height:100%'></div>";(this||e)._contentobj=(this||e).$view.firstChild;(this||e)._waitMap=Deferred.defer();(this||e).data.provideApi(this||e,true);(this||e).$ready.push((this||e).render)},getMap:function(i){return i?(this||e)._waitMap:(this||e)._map},_getCallBack:function(i){return bind((function(){"function"===typeof i&&i();bn=bn||window.google;(this||e)._initMap.call(this||e)}),this||e)},render:function(){if("undefined"==typeof window.google||"undefined"==typeof window.google.maps){if(!wn){wn=document.createElement("script");wn.type="text/javascript";var i=(this||e)._settings;var s=i.src||"//maps.google.com/maps/api/js";s+=-1===s.indexOf("?")?"?":"&";i.key&&(s+="&key="+i.key);i.libraries&&(s+="&libraries="+i.libraries);wn.src=s;document.getElementsByTagName("head")[0].appendChild(wn)}wn.onload=this._getCallBack(wn.onload)}else this._getCallBack()()},_initMap:function(){var i=(this||e).config;if(this.isVisible(i.id)){(this||e)._map=new bn.maps.Map((this||e)._contentobj,{zoom:i.zoom,center:new bn.maps.LatLng(i.center[0],i.center[1]),mapTypeId:bn.maps.MapTypeId[i.mapType]});(this||e)._waitMap.resolve((this||e)._map);(this||e)._contentobj.firstChild.setAttribute("webix_disable_drag","true")}},center_setter:function(i){(this||e)._map&&(this||e)._map.setCenter(new bn.maps.LatLng(i[0],i[1]));return i},mapType_setter:function(i){(this||e)._map&&(this||e)._map.setMapTypeId(bn.maps.MapTypeId[i]);return i},zoom_setter:function(i){(this||e)._map&&(this||e)._map.setZoom(i);return i},layerType_setter:function(s){"heatmap"==s&&((this||e).config.libraries="visualization");if((this||e)._layerApi[s]){i.extend(this||e,(this||e)._layerApi[s],true);(this||e).data.attachEvent("onStoreUpdated",bind((function(){(this||e)._waitMap.then(bind((function(){(this||e).drawData.call(this||e,arguments)}),this||e))}),this||e))}return s},defaults:{zoom:5,center:[39.5,-98.5],mapType:"ROADMAP",layerType:"marker"},$setSize:function(){St.api.$setSize.apply(this||e,arguments);(this||e)._map&&bn.maps.event.trigger((this||e)._map,"resize")},$onLoad:function(i){if(!(this||e)._map){(this||e)._waitMap.then(bind((function(){this.parse(i)}),this||e));return true}return false},_layerApi:{marker:{drawData:function(i,s,n){switch(n){case"add":s.$marker=this._getItemConfig(s);break;case"update":s.$marker=this._getItemConfig(s);break;case"delete":s.$marker.setMap(null);break;default:(this||e).data.each((function(e){e.$marker=this._getItemConfig(e)}),this||e);break}},clearAll:function(i){(this||e).data.each((function(e){e.$marker.setMap(null)}));(this||e).data.clearAll(i)},showItem:function(i){var s=this.getItem(i);(this||e)._map.setCenter(new bn.maps.LatLng(s.lat,s.lng))},_getItemConfig:function(i){var s={};for(var n in i)s[n]=i[n];s.position=new bn.maps.LatLng(i.lat,i.lng);s.map=i.hidden?null:(this||e)._map;var r=i.$marker;if(r)i.$marker.setMap(s.map);else{r=new bn.maps.Marker(s);this._events(r)}this.callEvent("onItemRender",[i]);return r},_events:function(i){var s=this||e;i.addListener("click",(function(){s.callEvent("onItemClick",[(this||e).id,this||e])}));if(i.getDraggable()){i.addListener("dragend",(function(){s._onDrag(this||e,true)}));i.addListener("drag",(function(){s._onDrag(this||e)}))}},_onDrag:function(e,i){var s=this.getItem(e.id);var n=e.getPosition();var r=i?"onAfterDrop":"onDrag";s.lat=n.lat();s.lng=n.lng();this.callEvent(r,[s.id,s])}},heatmap:{heatmapConfig_setter:function(e){e=e||{};return e},drawData:function(){if((this||e)._heatmap){(this||e)._heatmap.setMap(null);(this||e)._heatmap=null}var s=[];(this||e).data.each((function(e){s.push(this._getConfig(e))}),this||e);if(s.length){var n=i.extend((this||e).config.heatmapConfig,{data:s,map:(this||e)._map},true);(this||e)._heatmap=new bn.maps.visualization.HeatmapLayer(n);this.callEvent("onHeatMapRender",[(this||e)._heatmap])}},getHeatmap:function(){return(this||e)._heatmap},_getConfig:function(e){var i={};for(var s in e)i[s]=e[s];i.location=new bn.maps.LatLng(e.lat,e.lng);return i}}}};i.protoUI(xn,ie,f,St.view);var yn={$render_pie:function(e,i,s,n,r,a){this._renderPie(e,i,s,n,1,a,r)},
/**
     *   renders a pie chart
     *   @param: ctx - canvas object
     *   @param: data - object those need to be displayed
     *   @param: x - the width of the container
     *   @param: y - the height of the container
     *   @param: ky - value from 0 to 1 that defines an angle of inclination (0<ky<1 - 3D chart)
     */
_renderPie:function(i,s,n,r,a,o,l){if(s.length){var h=this._getPieParameters(n,r);var _=(this||e)._settings.radius?(this||e)._settings.radius:h.radius;if(!(_<0)){var c=this._getValues(s);var d=this._getTotalValue(c);var u=this._getRatios(c,d);var f=(this||e)._settings.x?(this||e)._settings.x:h.x;var g=(this||e)._settings.y?(this||e)._settings.y:h.y;1==a&&(this||e)._settings.shadow&&this._addShadow(i,f,g,_);g/=a;var v=-Math.PI/2;var p=[];i.scale(1,a);if((this||e)._settings.gradient){var m=1!=a?f+_/3:f;var b=1!=a?g+_/3:g;this._showRadialGradient(i,f,g,_,m,b)}for(var w=0;w<s.length;w++)if(c[w]){i.strokeStyle=(this||e)._settings.lineColor.call(this||e,s[w]);i.beginPath();i.moveTo(f,g);p.push(v);var x=-Math.PI/2+u[w]-1e-4;i.arc(f,g,_,v,x,false);i.lineTo(f,g);var y=(this||e)._settings.color.call(this||e,s[w]);i.fillStyle=y;i.fill();(this||e)._settings.pieInnerText&&this._drawSectorLabel(f,g,5*_/6,v,x,a,(this||e)._settings.pieInnerText(s[w],d),true);(this||e)._settings.label&&this._drawSectorLabel(f,g,_+(this||e)._settings.labelOffset,v,x,a,(this||e)._settings.label(s[w]));if(1!=a){this._createLowerSector(i,f,g,v,x,_,true);i.fillStyle="#000000";i.globalAlpha=.2;this._createLowerSector(i,f,g,v,x,_,false);i.globalAlpha=1;i.fillStyle=y}o.addSector(s[w].id,v,x,f-n.x,g-n.y/a,_,a,l);v=x}i.globalAlpha=.8;var S;for(w=0;w<p.length;w++){S=this._getPositionByAngle(p[w],f,g,_);this._drawLine(i,f,g,S.x,S.y,(this||e)._settings.lineColor.call(this||e,s[w]),2)}i.globalAlpha=1;if(1==a&&(this||e)._settings.border){i.lineWidth=(this||e)._settings.borderWidth||2;i.strokeStyle=(this||e)._settings.borderColor?(this||e)._settings.borderColor.call(this||e):"#ffffff";i.beginPath();i.arc(f,g,_+1,0,2*Math.PI,false);i.stroke()}i.scale(1,1/a)}}},
/**
     *   returns list of values
     *   @param: data array
     */
_getValues:function(i){var s=[];for(var n=0;n<i.length;n++)s.push(Math.abs(parseFloat((this||e)._settings.value(i[n]))||0));return s},
/**
     *   returns total value
     *   @param: the array of values
     */
_getTotalValue:function(e){var i=0;for(var s=0;s<e.length;s++)i+=e[s];return i},
/**
     *   gets angles for all values
     *   @param: the array of values
     *   @param: total value (optional)
     */
_getRatios:function(e,i){var s;var n=[];var r=0;i=i||this._getTotalValue(e);for(var a=0;a<e.length;a++){s=e[a];n[a]=2*Math.PI*(i?(s+r)/i:1/e.length);r+=s}return n},
/**
     *   returns calculated pie parameters: center position and radius
     *   @param: x - the width of a container
     *   @param: y - the height of a container
     */
_getPieParameters:function(e,i){var s=i.x-e.x;var n=i.y-e.y;var r=e.x+s/2;var a=e.y+n/2;var o=Math.min(s/2,n/2);return{x:r,y:a,radius:o}},
/**
     *   creates lower part of sector in 3Dpie
     *   @param: ctx - canvas object
     *   @param: x0 - the horizontal position of the pie center
     *   @param: y0 - the vertical position of the pie center
     *   @param: a0 - the angle that defines the first edge of a sector
     *   @param: a1 - the angle that defines the second edge of a sector
     *   @param: R - pie radius
     *   @param: line (boolean) - if the sector needs a border
     */
_createLowerSector:function(i,s,n,r,a,o,l){i.lineWidth=1;if(r<=0&&a>=0||r>=0&&a<=Math.PI||Math.abs(r-Math.PI)>.003&&r<=Math.PI&&a>=Math.PI){if(r<=0&&a>=0){r=0;l=false;this._drawSectorLine(i,s,n,o,r,a)}if(r<=Math.PI&&a>=Math.PI){a=Math.PI;l=false;this._drawSectorLine(i,s,n,o,r,a)}var h=((this||e)._settings.pieHeight||Math.floor(o/4))/(this||e)._settings.cant;i.beginPath();i.arc(s,n,o,r,a,false);i.lineTo(s+o*Math.cos(a),n+o*Math.sin(a)+h);i.arc(s,n+h,o,a,r,true);i.lineTo(s+o*Math.cos(r),n+o*Math.sin(r));i.fill();l&&i.stroke()}},_drawSectorLine:function(e,i,s,n,r,a){e.beginPath();e.arc(i,s,n,r,a,false);e.stroke()},
/**
     *   adds a shadow to pie
     *   @param: ctx - canvas object
     *   @param: x - the horizontal position of the pie center
     *   @param: y - the vertical position of the pie center
     *   @param: R - pie radius
     */
_addShadow:function(e,i,s,n){e.globalAlpha=.5;var r=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"];for(var a=r.length-1;a>-1;a--){e.beginPath();e.fillStyle=r[a];e.arc(i+1,s+1,n+a,0,2*Math.PI,true);e.fill()}e.globalAlpha=1},
/**
     *   returns a gray gradient
     *   @param: gradient - gradient object
     */
_getGrayGradient:function(e){e.addColorStop(0,"#ffffff");e.addColorStop(.7,"#7a7a7a");e.addColorStop(1,"#000000");return e},
/**
     *   adds gray radial gradient
     *   @param: ctx - canvas object
     *   @param: x - the horizontal position of the pie center
     *   @param: y - the vertical position of the pie center
     *   @param: radius - pie radius
     *   @param: x0 - the horizontal position of a gradient center
     *   @param: y0 - the vertical position of a gradient center
     */
_showRadialGradient:function(i,s,n,r,a,o){i.beginPath();var l;if("function"!=typeof(this||e)._settings.gradient){l=i.createRadialGradient(a,o,r/4,s,n,r);l=this._getGrayGradient(l)}else l=(this||e)._settings.gradient(l);i.fillStyle=l;i.arc(s,n,r,0,2*Math.PI,true);i.fill();i.globalAlpha=.7},
/**
     *   returns the calculates pie parameters: center position and radius
     *   @param: ctx - canvas object
     *   @param: x0 - the horizontal position of the pie center
     *   @param: y0 - the vertical position of the pie center
     *   @param: R - pie radius
     *   @param: alpha1 - the angle that defines the 1st edge of a sector
     *   @param: alpha2 - the angle that defines the 2nd edge of a sector
     *   @param: ky - the value that defines an angle of inclination
     *   @param: text - label text
     *   @param: in_width (boolean) - if label needs being displayed inside a pie
     */
_drawSectorLabel:function(i,s,n,r,a,o,l,h){var _=(this||e).canvases[0].renderText(0,0,l,0,1);if(_){var c=_.scrollWidth;_.style.width=c+"px";c>i&&(c=i);var d=a-r<.2?4:8;h&&(d=c/1.8);var u=r+(a-r)/2;n-=(d-8)/2;var f=-d;var g=-8;var v="right";if(u>=Math.PI/2&&u<Math.PI||u<=3*Math.PI/2&&u>=Math.PI){f=-c-f+1;v="left"}var p=0;!h&&o<1&&u>0&&u<Math.PI&&(p=((this||e)._settings.height||Math.floor(n/4))/o);var m=(s+Math.floor((n+p)*Math.sin(u)))*o+g;var b=i+Math.floor((n+d/2)*Math.cos(u))+f;var w=a<Math.PI/2+.01;var x=r<Math.PI/2;x&&w?b=Math.max(b,i+3):x||w?!h&&(u>=Math.PI/2&&u<Math.PI||u<=3*Math.PI/2&&u>=Math.PI)&&(b+=c/3):b=Math.min(b,i-c);_.style.top=m+"px";_.style.left=b+"px";_.style.width=c+"px";_.style.textAlign=v;_.style.whiteSpace="nowrap"}},$render_pie3D:function(i,s,n,r,a,o){this._renderPie(i,s,n,r,(this||e)._settings.cant,o)},$render_donut:function(i,s,n,r,a,o){if(s.length){this._renderPie(i,s,n,r,1,o,a);var l=(this||e)._settings;var h=this._getPieParameters(n,r);var _=l.radius?l.radius:h.radius;if(!(_<=0)){var c=l.innerRadius&&l.innerRadius<_?l.innerRadius:_/3;var d=l.x?l.x:h.x;var u=l.y?l.y:h.y;i.fillStyle=Ht.backColor;i.beginPath();i.arc(d,u,c,0,2*Math.PI,true);i.fill();if((this||e)._settings.donutInnerText){var f=this._getValues(s);var g=this._getTotalValue(f);var v=Ht.dataPadding;var p=2*c-2*v;var m=(this||e).canvases[0].renderText(d-c+v,u-c+v,'<div class="webix_donut_center_text">'.concat((this||e)._settings.donutInnerText(s,g),"</div>"),"webix_donut_center_text_box",p);m.style.height=m.style.lineHeight=p+"px"}}}}};var Sn={
/**
    *   renders a bar chart
    *   @param: ctx - canvas object
    *   @param: data - object those need to be displayed
    *   @param: x - the width of the container
    *   @param: y - the height of the container
    *   @param: sIndex - index of drawing chart
    */
$render_bar:function(i,s,n,r,a,o){var l,h,_,c,d,u,f,g,v,p,m,b,w,x=r.y-n.y;w=!!(this||e)._settings.yAxis;b=!!(this||e)._settings.xAxis;c=this._getLimits();d=c.max;u=c.min;h=(r.x-n.x)/s.length;a||"auto"!=(this||e)._settings.origin&&!w||this._drawScales(s,n,r,u,d,h);if(w){d=parseFloat((this||e)._settings.yAxis.end);u=parseFloat((this||e)._settings.yAxis.start)}v=this._getRelativeValue(u,d);f=v[0];g=v[1];m=f?x/f:f;if(!w&&!("auto"!=(this||e)._settings.origin&&b)){p=10;m=f?(x-p)/f:p}!a&&"auto"!=(this||e)._settings.origin&&!w&&(this||e)._settings.origin>u&&this._drawXAxis(i,s,n,r,h,r.y-m*((this||e)._settings.origin-u));l=parseInt((this||e)._settings.barWidth,10);var y=0;var S=0;for(_=0;_<(this||e)._series.length;_++){_==a&&(S=y);"bar"==(this||e)._series[_].type&&y++}(this||e)._series&&l*y+4>h&&(l=parseInt(h/y-4,10));var $=(h-l*y)/2;var C="undefined"!=typeof(this||e)._settings.radius?parseInt((this||e)._settings.radius,10):Math.round(l/5);var k=false;var I=(this||e)._settings.gradient;if(I&&"function"!=typeof I){k=I;I=false}else if(I){I=i.createLinearGradient(0,r.y,0,n.y);(this||e)._settings.gradient(I)}b||this._drawLine(i,n.x,r.y+.5,r.x,r.y+.5,"#edeff0",1);for(_=0;_<s.length;_++){var M=parseFloat((this||e)._settings.value(s[_])||0);(this||e)._logScaleCalc&&(M=this._log10(M));if(M&&!isNaN(M)){M>d&&(M=d);M-=u;M*=g;var T=n.x+$+_*h+(l+1)*S;var E=r.y;var A=I||(this||e)._settings.color.call(this||e,s[_]);var z=(this||e)._settings.border?1:0;var H=(this||e)._settings.label(s[_]);if(w||"auto"!=(this||e)._settings.origin&&b){if(M==(this||e)._settings.origin||"auto"==(this||e)._settings.origin&&(this||e)._settings.value(s[_])==u){z=0;H=""}else if(M<0||(this||e)._settings.yAxis&&0===M&&!("auto"!=(this||e)._settings.origin&&(this||e)._settings.origin>u)){M=z=0;H=""}}else M+=p/m;i.globalAlpha=(this||e)._settings.alpha.call(this||e,s[_]);var j=this._drawBar(i,n,T,E,l,u,C,m,M,A,I,k,z);k&&this._drawBarGradient(i,T,E,l,u,C,m,M,A,k,z);z&&this._drawBarBorder(i,T,E,l,u,C,m,M,A);i.globalAlpha=1;j[0]!=T?(this||e).canvases[a].renderTextAt(false,true,T+Math.floor(l/2),j[1],H):(this||e).canvases[a].renderTextAt(true,true,T+Math.floor(l/2),j[3],H);o.addRect(s[_].id,[T-n.x,j[3]-n.y,j[2]-n.x,j[1]-n.y],a)}}},_correctBarParams:function(i,s,n,r,a,o,l){var h=n;if("auto"!=(this||e)._settings.origin&&(this||e)._settings.origin>l){n-=((this||e)._settings.origin-l)*a;h=n;r-=(this||e)._settings.origin-l;if(r<0){r*=-1;i.translate(s+o,n);i.rotate(Math.PI);s=0;n=0}n-=.5}return{value:r,x0:s,y0:n,start:h}},_drawBar:function(e,i,s,n,r,a,o,l,h,_,c,d,u){e.save();e.fillStyle=_;var f=this._correctBarParams(e,s,n,h,l,r,a);var g=this._setBarPoints(e,f.x0,f.y0,r,o,l,f.value,u);c&&!d&&e.lineTo(f.x0+u,i.y);e.fill();e.restore();var v=f.x0;var p=f.x0!=s?s+g[0]:g[0];var m=f.x0!=s?f.start-g[1]-f.y0:f.y0;var b=f.x0!=s?f.start-f.y0:g[1];return[v,m,p,b]},_setBorderStyles:function(e,i){var s,n;n=ke.toRgb(i);s=ke.rgbToHsv(n[0],n[1],n[2]);s[2]/=1.4;var r="rgb("+ke.hsvToRgb(s[0],s[1],s[2])+")";e.strokeStyle=r;1==e.globalAlpha&&(e.globalAlpha=.9)},_drawBarBorder:function(e,i,s,n,r,a,o,l,h){var _;e.save();_=this._correctBarParams(e,i,s,l,o,n,r);this._setBorderStyles(e,h);this._setBarPoints(e,_.x0,_.y0,n,a,o,_.value,e.lineWidth/2,1);e.stroke();e.restore()},_drawBarGradient:function(e,i,s,n,r,a,o,l,h,_,c){e.save();var d=this._correctBarParams(e,i,s,l,o,n,r);var u=this._setBarGradient(e,d.x0,d.y0,d.x0+n,d.y0-o*d.value+2,_,h,"y");e.fillStyle=u.gradient;this._setBarPoints(e,d.x0+u.offset,d.y0,n-2*u.offset,a,o,d.value,u.offset+c);e.fill();e.restore()},
/**
     *   sets points for bar and returns the position of the bottom right point
     *   @param: ctx - canvas object
     *   @param: x0 - the x position of start point
     *   @param: y0 - the y position of start point
     *   @param: barWidth - bar width
     *   @param: radius - the rounding radius of the top
     *   @param: unit - the value defines the correspondence between item value and bar height
     *   @param: value - item value
     *   @param: offset - the offset from expected bar edge (necessary for drawing border)
     */
_setBarPoints:function(e,i,s,n,r,a,o,l,h){e.beginPath();var _=0;if(r>a*o){var c=(r-a*o)/r;c<=1&&c>=-1&&(_=-Math.acos(c)+Math.PI/2)}e.moveTo(i+l,s);var d=s-Math.floor(a*o)+r+(r?0:l);r<a*o&&e.lineTo(i+l,d);var u=i+r;r&&r>0&&e.arc(u,d,Math.max(r-l,0),-Math.PI+_,-Math.PI/2,false);var f=i+n-r-l;var g=d-r+(r?l:0);e.lineTo(f,g);r&&r>0&&e.arc(f+l,d,Math.max(r-l,0),-Math.PI/2,0-_,false);var v=i+n-l;e.lineTo(v,s);h||e.lineTo(i+l,s);return[v,g]}};var $n={
/**
    *   renders a graphic
    *   @param: ctx - canvas object
    *   @param: data - object those need to be displayed
    *   @param: width - the width of the container
    *   @param: height - the height of the container
    *   @param: sIndex - index of drawing chart
    */
$render_line:function(i,s,n,r,a,o){var l,h,_,c,d,u,f,g,v,p,m,b;c=this._calculateLineParams(i,s,n,r,a);l=(this||e)._settings;if(s.length){d=l.offset?n.x+.5*c.cellWidth:n.x;_=[];for(h=0;h<s.length;h++){b=this._getPointY(s[h],n,r,c);if(b||"0"==b){f=h?c.cellWidth*h-.5+d:d;v="object"==_typeof(b)?b.y0:b;if(h&&(this||e)._settings.fixOverflow){m=this._getPointY(s[h-1],n,r,c);if(m.out&&m.out==b.out)continue;u=c.cellWidth*(h-1)-.5+d;g="object"==_typeof(m)?m.y0:m;if(m.out){p="min"==m.out?r.y:n.y;_.push({x:this._calcOverflowX(u,f,g,v,p),y:p})}if(b.out){p="min"==b.out?r.y:n.y;_.push({x:this._calcOverflowX(u,f,g,v,p),y:p})}}b.out||_.push({x:f,y:b,index:h})}}(this||e)._mapStart=n;for(h=1;h<=_.length;h++){u=_[h-1].x;g=_[h-1].y;if(h<_.length){f=_[h].x;v=_[h].y;this._drawLine(i,u,g,f,v,l.line.color.call(this||e,s[h-1]),l.line.width);if(l.line&&l.line.shadow){i.globalAlpha=.3;this._drawLine(i,u+2,g+l.line.width+8,f+2,v+l.line.width+8,"#eeeeee",l.line.width+3);i.globalAlpha=1}}"undefined"!=typeof _[h-1].index&&this._drawItem(i,u,g,s[_[h-1].index],l.label(s[_[h-1].index]),a,o,n)}}},_calcOverflowX:function(e,i,s,n,r){return e+(r-s)*(i-e)/(n-s)},
/**
    *   draws an item and its label
    *   @param: ctx - canvas object
    *   @param: x0 - the x position of a circle
    *   @param: y0 - the y position of a circle
    *   @param: obj - data object
    *   @param: label - (boolean) defines wherether label needs being drawn
    */
_drawItem:function(i,s,n,r,a,o,l){var h=(this||e)._settings.item;var _=parseInt(h.radius.call(this||e,r),10)||0;var c=(this||e)._mapStart;var d=h.type.call(this||e,r);if(_){i.save();if(h.shadow){i.lineWidth=1;i.strokeStyle="#bdbdbd";i.fillStyle="#bdbdbd";var u=[.1,.2,.3];for(var f=u.length-1;f>=0;f--){i.globalAlpha=u[f];i.strokeStyle="#d0d0d0";i.beginPath();this._strokeChartItem(i,s,n+2*_/3,_+f+1,d);i.stroke()}i.beginPath();i.globalAlpha=.3;i.fillStyle="#bdbdbd";this._strokeChartItem(i,s,n+2*_/3,_+1,d);i.fill()}i.restore();i.lineWidth=h.borderWidth;i.fillStyle=h.color.call(this||e,r);i.strokeStyle=h.borderColor.call(this||e,r);i.globalAlpha=h.alpha.call(this||e,r);i.beginPath();this._strokeChartItem(i,s,n,_+1,d);i.fill();i.stroke();i.globalAlpha=1}a&&(this||e).canvases[o].renderTextAt(false,true,s,n-_-(this||e)._settings.labelOffset,(this||e)._settings.label.call(this||e,r));if(l){var g=(this||e)._settings.eventRadius||_+1;l.addRect(r.id,[s-g-c.x,n-g-c.y,s+g-c.x,n+g-c.y],o)}},_strokeChartItem:function(e,i,s,n,r){var a=[];if(!r||"square"!=r&&"s"!=r)if(!r||"diamond"!=r&&"d"!=r)a=!r||"triangle"!=r&&"t"!=r?[[i,s,n,0,2*Math.PI,true]]:[[i,s-n],[i+Math.sqrt(3)*n/2,s+n/2],[i-Math.sqrt(3)*n/2,s+n/2],[i,s-n]];else{var o=e.lineWidth>1?e.lineWidth*Math.sqrt(2)/4:0;a=[[i,s-n],[i+n,s],[i,s+n],[i-n,s],[i+o,s-n-o]]}else{n*=Math.sqrt(2)/2;a=[[i-n-e.lineWidth/2,s-n],[i+n,s-n],[i+n,s+n],[i-n,s+n],[i-n,s-n]]}this._path(e,a)},
/**
    *   gets the vertical position of the item
    *   @param: data - data object
    *   @param: y0 - the y position of chart start
    *   @param: y1 - the y position of chart end
    *   @param: params - the object with elements: minValue, maxValue, unit, valueFactor (the value multiple of 10)
    */
_getPointY:function(i,s,n,r){var a=r.minValue;var o=r.maxValue;var l=r.unit;var h=r.valueFactor;var _=(this||e)._settings.value(i);(this||e)._logScaleCalc&&(_=this._log10(_));var c=(parseFloat(_||0)-a)*h;(this||e)._settings.yAxis||(c+=r.startValue/l);var d=n.y-l*c;if(!(this||e)._settings.fixOverflow||"line"!=(this||e)._settings.type&&"area"!=(this||e)._settings.type){_>o&&(d=s.y);(c<0||_<a)&&(d=n.y)}else _>o?d={y:s.y,y0:d,out:"max"}:(c<0||_<a)&&(d={y:n.y,y0:d,out:"min"});return d},_calculateLineParams:function(i,s,n,r,a){var o={};var l;o.totalHeight=r.y-n.y;(this||e)._settings.cellWidth?o.cellWidth=Math.min(r.x-n.x,(this||e)._settings.cellWidth):o.cellWidth=(r.x-n.x)/((this||e)._settings.offset?s.length:s.length-1);var h=!!(this||e)._settings.yAxis;var _=-1!=(this||e)._settings.type.indexOf("stacked")?this._getStackedLimits(s):this._getLimits();o.maxValue=_.max;o.minValue=_.min;a||this._drawScales(s,n,r,o.minValue,o.maxValue,o.cellWidth);if(h){o.maxValue=parseFloat((this||e)._settings.yAxis.end);o.minValue=parseFloat((this||e)._settings.yAxis.start)}var c=this._getRelativeValue(o.minValue,o.maxValue);l=c[0];o.valueFactor=c[1];o.unit=l?o.totalHeight/l:10;o.startValue=0;if(!h){o.startValue=10;o.unit!=o.totalHeight&&(o.unit=l?(o.totalHeight-o.startValue)/l:10)}return o}};var Cn={
/**
    *   renders a bar chart
    *   @param: ctx - canvas object
    *   @param: data - object those need to be displayed
    *   @param: x - the width of the container
    *   @param: y - the height of the container
    *   @param: sIndex - index of drawing chart
    */
$render_barH:function(i,s,n,r,a,o){var l,h,_,c,d,u,f,g,v,p,m,b,w,x,y,S,$,C,k,I,M;_=(r.y-n.y)/s.length;f=this._getLimits("h");g=f.max;v=f.min;S=r.x-n.x;M=!!(this||e)._settings.xAxis;a||this._drawHScales(i,s,n,r,v,g,_);if(M){g=parseFloat((this||e)._settings.xAxis.end);v=parseFloat((this||e)._settings.xAxis.start)}x=this._getRelativeValue(v,g);b=x[0];m=x[1];C=b?S/b:10;if(!M){y=10;C=b?(S-y)/b:10}h=parseInt((this||e)._settings.barWidth,10);h*(this||e)._series.length+4>_&&(h=_/(this||e)._series.length-4);l=Math.floor((_-h*(this||e)._series.length)/2);w="undefined"!=typeof(this||e)._settings.radius?parseInt((this||e)._settings.radius,10):Math.round(h/5);p=false;d=(this||e)._settings.gradient;if(d&&"function"!=typeof d){p=d;d=false}else if(d){d=i.createLinearGradient(n.x,n.y,r.x,n.y);(this||e)._settings.gradient(d)}M||this._drawLine(i,n.x-.5,n.y,n.x-.5,r.y,"#edeff0",1);for(u=0;u<s.length;u++){$=parseFloat((this||e)._settings.value(s[u]||0));(this||e)._logScaleCalc&&($=this._log10($));if($&&!isNaN($)){$>g&&($=g);$-=v;$*=m;k=n.x;I=n.y+l+u*_+(h+1)*a;if($<0&&"auto"==(this||e)._settings.origin||(this||e)._settings.xAxis&&0===$&&!("auto"!=(this||e)._settings.origin&&(this||e)._settings.origin>v))(this||e).canvases[a].renderTextAt("middle","right",k+10,I+h/2+l,(this||e)._settings.label(s[u]));else{$<0&&"auto"!=(this||e)._settings.origin&&(this||e)._settings.origin>v&&($=0);M||($+=y/C);c=d||(this||e)._settings.color.call(this||e,s[u]);(this||e)._settings.border&&this._drawBarHBorder(i,k,I,h,v,w,C,$,c);i.globalAlpha=(this||e)._settings.alpha.call(this||e,s[u]);var T=this._drawBarH(i,r,k,I,h,v,w,C,$,c,d,p);p&&this._drawBarHGradient(i,k,I,h,v,w,C,$,c,p);i.globalAlpha=1;if(T[3]==I){(this||e).canvases[a].renderTextAt("middle","left",T[0]-5,T[3]+Math.floor(h/2),(this||e)._settings.label(s[u]));o.addRect(s[u].id,[T[0]-n.x,T[3]-n.y,T[2]-n.x,T[3]+h-n.y],a)}else{(this||e).canvases[a].renderTextAt("middle",false,T[2]+5,T[1]+Math.floor(h/2),(this||e)._settings.label(s[u]));o.addRect(s[u].id,[T[0]-n.x,I-n.y,T[2]-n.x,T[3]-n.y],a)}}}}},
/**
     *   sets points for bar and returns the position of the bottom right point
     *   @param: ctx - canvas object
     *   @param: x0 - the x position of start point
     *   @param: y0 - the y position of start point
     *   @param: barWidth - bar width
     *   @param: radius - the rounding radius of the top
     *   @param: unit - the value defines the correspondence between item value and bar height
     *   @param: value - item value
     *   @param: offset - the offset from expected bar edge (necessary for drawing border)
     */
_setBarHPoints:function(e,i,s,n,r,a,o,l,h){var _=0;if(r>a*o){var c=(r-a*o)/r;_=-Math.asin(c)+Math.PI/2}e.moveTo(i,s+l);var d=i+a*o-r-(r?0:l);d=Math.max(i,d);r<a*o&&e.lineTo(d,s+l);var u=s+r;r&&r>0&&e.arc(d,u,r-l,-Math.PI/2+_,0,false);var f=s+n-r-(r?0:l);var g=d+r-(r?l:0);e.lineTo(g,f);r&&r>0&&e.arc(d,f,r-l,0,Math.PI/2-_,false);var v=s+n-l;e.lineTo(i,v);h||e.lineTo(i,s+l);return[g,v]},_drawHScales:function(i,s,n,r,a,o,l){var h=0;if((this||e)._settings.xAxis){(this||e).canvases.x||((this||e).canvases.x=this._createCanvas("axis_x"));h=this._drawHXAxis((this||e).canvases.x.getCanvas(),s,n,r,a,o)}if((this||e)._settings.yAxis){(this||e).canvases.y||((this||e).canvases.y=this._createCanvas("axis_y"));this._drawHYAxis((this||e).canvases.y.getCanvas(),s,n,r,l,h)}},_drawHYAxis:function(i,s,n,r,a,o){if((this||e)._settings.yAxis){var l;var h=parseInt(o||n.x,10)-.5;var _=r.y+.5;var c=n.y;this._drawLine(i,h,_,h,c,(this||e)._settings.yAxis.color,1);for(var d=0;d<s.length;d++){var u="auto"!=(this||e)._settings.origin&&"barH"==(this||e)._settings.type&&parseFloat((this||e)._settings.value(s[d]))<(this||e)._settings.origin;l=c+a/2+d*a;(this||e).canvases.y.renderTextAt("middle",!u&&"left",u?h+5:h-5,l,(this||e)._settings.yAxis.template(s[d]),"webix_axis_item_y",u?0:h-10);(this||e)._settings.yAxis.lines.call(this||e,s[d])&&this._drawLine(i,n.x,l,r.x,l,(this||e)._settings.yAxis.lineColor.call(this||e,s[d]),1)}(this||e)._settings.yAxis.lines.call(this||e,{})&&this._drawLine(i,n.x+.5,c+.5,r.x,c+.5,(this||e)._settings.yAxis.lineColor.call(this||e,{}),1);this._setYAxisTitle(n,r)}},_drawHXAxis:function(i,s,n,r,a,o){var l;var h={};var _=(this||e)._settings.xAxis;if(_){var c=r.y+.5;var d=n.x-.5;var u=r.x-.5;var f=n.x;this._drawLine(i,d,c,u,c,_.color,1);_.step&&(l=parseFloat(_.step));if("undefined"==typeof(this||e)._configXAxis.step||"undefined"==typeof(this||e)._configXAxis.start||"undefined"==typeof(this||e)._configXAxis.end){h=this._calculateScale(a,o);a=h.start;o=h.end;l=h.step;(this||e)._settings.xAxis.end=o;(this||e)._settings.xAxis.start=a;(this||e)._settings.xAxis.step=l}if(0!==l){var g=(u-d)*l/(o-a);var v=0;for(var p=a;p<=o;p+=l){var m=(this||e)._logScaleCalc?Math.pow(10,p):p;h.fixNum&&(m=parseFloat(m).toFixed(h.fixNum));var b=Math.floor(d+v*g)+.5;p==a&&"auto"==(this||e)._settings.origin||!_.lines.call(this||e,p)||this._drawLine(i,b,c,b,n.y,(this||e)._settings.xAxis.lineColor.call(this||e,p),1);p==(this||e)._settings.origin&&(f=b+1);if(l<1&&!(this||e)._logScaleCalc){var w=Math.min(Math.floor(this._log10(l)),a<=0?0:Math.floor(this._log10(a)));var x=Math.pow(10,-w);m=Math.round(m*x)/x;p=m}(this||e).canvases.x.renderTextAt(false,true,b,c+2,_.template(m.toString()),"webix_axis_item_x");v++}(this||e).canvases.x.renderTextAt(true,false,d,r.y+(this||e)._settings.padding.bottom-3,(this||e)._settings.xAxis.title,"webix_axis_title_x",r.x-n.x);return f}}},_correctBarHParams:function(i,s,n,r,a,o,l){var h=(this||e)._settings.yAxis;var _=s;if(!!h&&"auto"!=(this||e)._settings.origin&&(this||e)._settings.origin>l){s+=((this||e)._settings.origin-l)*a;_=s;r-=(this||e)._settings.origin-l;if(r<0){r*=-1;i.translate(s,n+o);i.rotate(Math.PI);s=.5;n=0}s+=.5}return{value:r,x0:s,y0:n,start:_}},_drawBarH:function(i,s,n,r,a,o,l,h,_,c,d,u){i.save();var f=this._correctBarHParams(i,n,r,_,h,a,o);i.fillStyle=c;i.beginPath();var g=this._setBarHPoints(i,f.x0,f.y0,a,l,h,f.value,(this||e)._settings.border?1:0);d&&!u&&i.lineTo(s.x,f.y0+((this||e)._settings.border?1:0));i.fill();i.restore();var v=f.y0;var p=f.y0!=r?r:g[1];var m=f.y0!=r?f.start-g[0]:f.start;var b=f.y0!=r?f.start:g[0];return[m,v,b,p]},_drawBarHBorder:function(e,i,s,n,r,a,o,l,h){e.save();var _=this._correctBarHParams(e,i,s,l,o,n,r);e.beginPath();this._setBorderStyles(e,h);e.globalAlpha=.9;this._setBarHPoints(e,_.x0,_.y0,n,a,o,_.value,e.lineWidth/2,1);e.stroke();e.restore()},_drawBarHGradient:function(e,i,s,n,r,a,o,l,h,_){e.save();var c=this._correctBarHParams(e,i,s,l,o,n,r);var d=this._setBarGradient(e,c.x0,c.y0+n,c.x0+o*c.value,c.y0,_,h,"x");e.fillStyle=d.gradient;e.beginPath();this._setBarHPoints(e,c.x0,c.y0+d.offset,n-2*d.offset,a,o,c.value,d.offset);e.fill();e.globalAlpha=1;e.restore()}};var kn={
/**
    *   renders a bar chart
    *   @param: ctx - canvas object
    *   @param: data - object those need to be displayed
    *   @param: x - the width of the container
    *   @param: y - the height of the container
    *   @param: sIndex - index of drawing chart
    */
$render_stackedBar:function(i,s,n,r,a,o){var l,h,_,c,d;var u;var f;var g=(this||e)._settings;var v=r.y-n.y;var p=!!g.yAxis;var m=!!g.xAxis;var b=this._getStackedLimits(s);var w=0===g.origin;l=b.max;h=b.min;var x=Math.floor((r.x-n.x)/s.length);a||(_=this._drawScales(s,n,r,h,l,x));if(p){l=parseFloat(g.yAxis.end);h=parseFloat(g.yAxis.start)}var y=this._getRelativeValue(h,l);f=y[0];u=y[1];var S=f?v/f:10;var $=parseInt(g.barWidth,10);$+4>x&&($=x-4);var C=Math.floor((x-$)/2);var k=!!g.gradient&&g.gradient;m||this._drawLine(i,n.x,r.y+.5,r.x,r.y+.5,"#edeff0",1);for(var I=0;I<s.length;I++){var M=parseFloat(g.value(s[I]||0));(this||e)._logScaleCalc&&(M=this._log10(M));c=n.x+C+I*x;var T=w&&M<0;if(a)d=T?s[I].$startYN:s[I].$startY;else{d=_-1;s[I].$startY=d;if(w){T&&(d=_+1);s[I].$startYN=_+1}}if(M&&!isNaN(M)){a||w||(M-=h);M*=u;var E=g.border;var A=g.label(s[I]);if(!(d<n.y+1)){var z=(this||e)._settings.color.call(this||e,s[I]);var H=Math.abs(d-(w?r.y+h*S:r.y))<3;i.globalAlpha=g.alpha.call(this||e,s[I]);i.fillStyle=i.strokeStyle=g.color.call(this||e,s[I]);i.beginPath();var j=d-S*M+(H?T?-1:1:0);if(Math.floor(j)>r.y){j=r.y;""!=A&&j-d<getTextSize('<div class="webix_canvas_text">'.concat(A,"</div>"),(this||e).$view.className).height&&(A="")}var P=this._setStakedBarPoints(i,c-(E?.5:0),d,$+(E?.5:0),j,0,n.y);i.fill();i.stroke();if(k){i.save();var V=this._setBarGradient(i,c,d,c+$,P[1],k,z,"y");i.fillStyle=V.gradient;i.beginPath();P=this._setStakedBarPoints(i,c+V.offset,d,$-2*V.offset,j,E?1:0,n.y);i.fill();i.restore()}if(E){i.save();"string"==typeof E?i.strokeStyle=E:this._setBorderStyles(i,z);i.beginPath();this._setStakedBarPoints(i,c-.5,parseInt(d,10)+.5,$+1,parseInt(j,10)+.5,0,n.y,H);i.stroke();i.restore()}i.globalAlpha=1;(this||e).canvases[a].renderTextAt(false,true,c+Math.floor($/2),P[1]+(d-P[1])/2-7,A);o.addRect(s[I].id,[c-n.x,P[1]-n.y,P[0]-n.x,s[I][T?"$startYN":"$startY"]-n.y],a);s[I][T?"$startYN":"$startY"]=P[1]}}}},
/**
     *   sets points for bar and returns the position of the bottom right point
     *   @param: ctx - canvas object
     *   @param: x0 - the x position of start point
     *   @param: y0 - the y position of start point
     *   @param: barWidth - bar width
     *   @param: radius - the rounding radius of the top
     *   @param: unit - the value defines the correspondence between item value and bar height
     *   @param: value - item value
     *   @param: offset - the offset from expected bar edge (necessary for drawing border)
     *   @param: minY - the minimum y position for the bars ()
     */
_setStakedBarPoints:function(e,i,s,n,r,a,o,l){e.moveTo(i,s);r<o&&(r=o);e.lineTo(i,r);var h=i+n;var _=r;e.lineTo(h,_);var c=i+n;e.lineTo(c,s);l||e.lineTo(i,s);return[c,_]}};var In={
/**
    	*   renders a bar chart
    	*   @param: ctx - canvas object
    	*   @param: data - object those need to be displayed
    	*   @param: x - the width of the container
    	*   @param: y - the height of the container
    	*   @param: sIndex - index of drawing chart
    	*   @param: map - map object
    	*/
$render_stackedBarH:function(i,s,n,r,a,o){var l,h;var _;var c;var d=r.x-n.x;var u=!!(this||e)._settings.yAxis;var f=this._getStackedLimits(s);l=f.max;h=f.min;var g=Math.floor((r.y-n.y)/s.length);a||this._drawHScales(i,s,n,r,h,l,g);if(u){l=parseFloat((this||e)._settings.xAxis.end);h=parseFloat((this||e)._settings.xAxis.start)}var v=this._getRelativeValue(h,l);c=v[0];_=v[1];var p=c?d/c:10;var m=0;if(!u){m=10;p=c?(d-m)/c:10}var b=parseInt((this||e)._settings.barWidth,10);b+4>g&&(b=g-4);var w=(g-b)/2;var x=0;var y=false;var S=(this||e)._settings.gradient;S&&(y=true);u||this._drawLine(i,n.x-.5,n.y,n.x-.5,r.y,"#edeff0",1);var $=0;var C=0;for(k=0;k<(this||e)._series.length;k++){k==a&&(C=$);"stackedBarH"==(this||e)._series[k].type&&$++}for(var k=0;k<s.length;k++){C||(s[k].$startX=n.x);var I=Math.abs(parseFloat((this||e)._settings.value(s[k]||0)));I>l&&(I=l);I-=h;I*=_;var M=n.x;var T=n.y+w+k*g;C?M=s[k].$startX:s[k].$startX=M;if(I&&!isNaN(I)){u||(I+=m/p);var E=(this||e)._settings.color.call(this||e,s[k]);i.globalAlpha=(this||e)._settings.alpha.call(this||e,s[k]);i.fillStyle=(this||e)._settings.color.call(this||e,s[k]);i.beginPath();var A=this._setBarHPoints(i,M,T,b,x,p,I,0);S&&!y&&i.lineTo(n.x+d,T+((this||e)._settings.border?1:0));i.fill();if(y){var z=this._setBarGradient(i,M,T+b,M,T,y,E,"x");i.fillStyle=z.gradient;i.beginPath();A=this._setBarHPoints(i,M,T,b,x,p,I,0);i.fill()}(this||e)._settings.border&&this._drawBarHBorder(i,M,T,b,h,x,p,I,E);i.globalAlpha=1;(this||e).canvases[a].renderTextAt("middle",true,s[k].$startX+(A[0]-s[k].$startX)/2-1,T+(A[1]-T)/2,(this||e)._settings.label(s[k]));o.addRect(s[k].id,[s[k].$startX-n.x,T-n.y,A[0]-n.x,A[1]-n.y],a);s[k].$startX=A[0]}}}};var Mn={
/**
    *   renders a spline chart
    *   @param: ctx - canvas object
    *   @param: data - object those need to be displayed
    *   @param: width - the width of the container
    *   @param: height - the height of the container
    *   @param: sIndex - index of drawing chart
    */
$render_spline:function(i,s,n,r,a,o){var l,h,_,c,d,u,f,g,v,p,m,b,w;d=this._calculateLineParams(i,s,n,r,a);l=(this||e)._settings;(this||e)._mapStart=n;_=[];if(s.length){g=l.offset?n.x+.5*d.cellWidth:n.x;for(h=0;h<s.length;h++){m=this._getPointY(s[h],n,r,d);if(m||"0"==m){f=h?d.cellWidth*h-.5+g:g;_.push({x:f,y:m,v:(this||e)._settings.value(s[h]),index:h})}}u=this._getSplineParameters(_);for(h=0;h<_.length;h++){v=_[h].x;b=_[h].y;if(h<_.length-1){p=_[h+1].x;w=_[h+1].y;for(c=v;c<p;c++){var x=this._getSplineYPoint(c,v,h,u.a,u.b,u.c,u.d);x<n.y&&(x=n.y);x>r.y&&(x=r.y);var y=this._getSplineYPoint(c+1,v,h,u.a,u.b,u.c,u.d);y<n.y&&(y=n.y);y>r.y&&(y=r.y);this._drawLine(i,c,x,c+1,y,l.line.color(s[h]),l.line.width)}this._drawLine(i,p-1,this._getSplineYPoint(c,v,h,u.a,u.b,u.c,u.d),p,w,l.line.color(s[h]),l.line.width)}this._drawItem(i,v,b,s[_[h].index],l.label(s[_[h].index]),a,o)}}},_getSplineParameters:function(e){var i,s,n,r,a,o,l,h,_=[],c=[],d=e.length;for(a=0;a<d-1;a++){_[a]=e[a+1].x-e[a].x;c[a]=(e[a+1].y-e[a].y)/_[a]}l=[];h=[];l[0]=0;l[1]=2*(_[0]+_[1]);h[0]=0;h[1]=6*(c[1]-c[0]);for(a=2;a<d-1;a++){l[a]=2*(_[a-1]+_[a])-_[a-1]*_[a-1]/l[a-1];h[a]=6*(c[a]-c[a-1])-_[a-1]*h[a-1]/l[a-1]}o=[];o[d-1]=o[0]=0;for(a=d-2;a>=1;a--)o[a]=(h[a]-_[a]*o[a+1])/l[a];i=[];s=[];n=[];r=[];for(a=0;a<d-1;a++){i[a]=e[a].y;s[a]=-_[a]*o[a+1]/6-_[a]*o[a]/3+(e[a+1].y-e[a].y)/_[a];n[a]=o[a]/2;r[a]=(o[a+1]-o[a])/(6*_[a])}for(a=0;a<e.length-1;a++)if(0===e[a].v&&0===e[a+1].v){i[a]=e[a].y;r[a]=n[a]=s[a]=0}return{a:i,b:s,c:n,d:r}},_getSplineYPoint:function(e,i,s,n,r,a,o){return n[s]+(e-i)*(r[s]+(e-i)*(a[s]+(e-i)*o[s]))}};var Tn={
/**
    *   renders an area chart
    *   @param: ctx - canvas object
    *   @param: data - object those need to be displayed
    *   @param: width - the width of the container
    *   @param: height - the height of the container
    *   @param: sIndex - index of drawing chart
    */
$render_area:function(i,s,n,r,a,o){var l,h,_,c,d,u,f,g,v,p,m,b,w,x,y;u=this._calculateLineParams(i,s,n,r,a);h=(this||e)._settings;c=h.eventRadius||Math.floor(u.cellWidth/2);if(s.length){f=[];p=h.offset?n.x+.5*u.cellWidth:n.x;for(_=0;_<s.length;_++){d=s[_];v=this._getPointY(d,n,r,u);w=p+u.cellWidth*_;if(v){x="object"==_typeof(v)?v.y0:v;if(_&&(this||e)._settings.fixOverflow){g=this._getPointY(s[_-1],n,r,u);if(g.out&&g.out==v.out)continue;m=u.cellWidth*(_-1)-.5+p;b="object"==_typeof(g)?g.y0:g;if(g.out){y="min"==g.out?r.y:n.y;f.push([this._calcOverflowX(m,w,b,x,y),y])}if(v.out){y="min"==v.out?r.y:n.y;f.push([this._calcOverflowX(m,w,b,x,y),y]);_==s.length-1&&y==n.y&&f.push([w,n.y])}}if(!v.out){f.push([w,x]);o.addRect(d.id,[w-c-n.x,x-c-n.y,w+c-n.x,x+c-n.y],a)}if(!h.yAxis){l=h.offset||_!=s.length-1?"center":"left";(this||e).canvases[a].renderTextAt(false,l,w,x-h.labelOffset,h.label(d))}}}if(f.length){f.push([w,r.y]);f.push([f[0][0],r.y])}i.globalAlpha=(this||e)._settings.alpha.call(this||e,s[0]);i.fillStyle=(this||e)._settings.color.call(this||e,s[0]);i.beginPath();this._path(i,f);i.fill();i.lineWidth=1;i.globalAlpha=1;if(h.border){i.lineWidth=h.borderWidth||1;h.borderColor?i.strokeStyle=h.borderColor.call(this||e,s[0]):this._setBorderStyles(i,i.fillStyle);i.beginPath();this._path(i,f);i.stroke()}}},
/**
    *   renders an area chart
    *   @param: ctx - canvas object
    *   @param: data - object those need to be displayed
    *   @param: width - the width of the container
    *   @param: height - the height of the container
    *   @param: sIndex - index of drawing chart
    */
$render_stackedArea:function(i,s,n,r,a,o){var l,h,_,c,d,u,f,g,v,p,m,b,w,x;p=this._calculateLineParams(i,s,n,r,a);c=(this||e)._settings;g=c.eventRadius||Math.floor(p.cellWidth/2);if(s.length){m=[];x=[];b=c.offset?n.x+.5*p.cellWidth:n.x;var setOffset=function(e,i){return a?s[e].$startY?i-r.y+s[e].$startY:0:i};var solveEquation=function(e,i,s){var n=(s.y-i.y)/(s.x-i.x);return n*e+i.y-n*i.x};for(d=0;d<s.length;d++){v=s[d];if(d)b+=p.cellWidth;else{w=setOffset(d,r.y);m.push([b,w])}w=setOffset(d,this._getPointY(v,n,r,p));x.push(isNaN(w)&&!d?s[d].$startY||r.y:w);if(w){m.push([b,w]);o.addRect(v.id,[b-g-n.x,w-g-n.y,b+g-n.x,w+g-n.y],a);if(!c.yAxis){_=!c.offset&&f?"left":"center";(this||e).canvases[a].renderTextAt(false,_,b,w-c.labelOffset,c.label(v))}}}m.push([b,setOffset(d-1,r.y)]);if(a)for(d=s.length-2;d>0;d--){b-=p.cellWidth;w=s[d].$startY;w&&m.push([b,w])}m.push([m[0][0],m[0][1]]);i.globalAlpha=(this||e)._settings.alpha.call(this||e,s[0]);i.fillStyle=(this||e)._settings.color.call(this||e,s[0]);i.beginPath();this._path(i,m);i.fill();for(d=0;d<s.length;d++){w=x[d];if(!w){d==s.length-1&&(w=s[d].$startY);for(u=d+1;u<s.length;u++)if(x[u]){l={x:n.x,y:x[0]};h={x:n.x+p.cellWidth*u,y:x[u]};w=solveEquation(n.x+p.cellWidth*d,l,h);break}}s[d].$startY=w}}}};var En={$render_radar:function(e,i,s,n,r,a){this._renderRadarChart(e,i,s,n,r,a)},
/**
    *   renders a pie chart
    *   @param: ctx - canvas object
    *   @param: data - object those need to be displayed
    *   @param: x - the width of the container
    *   @param: y - the height of the container
    *   @param: ky - value from 0 to 1 that defines an angle of inclination (0<ky<1 - 3D chart)
    */
_renderRadarChart:function(i,s,n,r,a,o){if(s.length){var l=this._getPieParameters(n,r);var h=(this||e)._settings.radius?(this||e)._settings.radius:l.radius;var _=(this||e)._settings.x?(this||e)._settings.x:l.x;var c=(this||e)._settings.y?(this||e)._settings.y:l.y;var d=[];for(var u=0;u<s.length;u++)d.push(1);var f=this._getRatios(d,s.length);(this||e)._mapStart=n;a||this._drawRadarAxises(f,_,c,h,s);this._drawRadarData(i,f,_,c,h,s,a,o)}},_drawRadarData:function(i,s,n,r,a,o,l,h){var _,c,d,u,f,g,v,p,m,b,w,x,y,S,$,C,k,I,M;d=(this||e)._settings;f=d.yAxis.start;g=d.yAxis.end;M=this._getRelativeValue(f,g);x=M[0];I=x?a/x:a/2;k=M[1];y=-Math.PI/2;_=c=y;m=[];p=0;for(u=0;u<o.length;u++){if(C)$=C;else{S=d.value(o[u]);(this||e)._logScaleCalc&&(S=this._log10(S));$=(parseFloat(S||0)-f)*k}b=Math.floor(I*$);S=d.value(u!=o.length-1?o[u+1]:o[0]);(this||e)._logScaleCalc&&(S=this._log10(S));C=(parseFloat(S||0)-f)*k;w=Math.floor(I*C);_=c;c=u!=o.length-1?y+s[u]-1e-4:y;v=p||this._getPositionByAngle(_,n,r,b);p=this._getPositionByAngle(c,n,r,w);m.push(v)}d.fill&&this._fillRadarChart(i,m,o);!d.disableLines&&o.length>2&&this._strokeRadarChart(i,m,o);(!d.disableItems||o.length<3)&&this._drawRadarItemMarkers(i,m,o,l,h);m=null},_drawRadarItemMarkers:function(i,s,n,r,a){for(var o=0;o<s.length;o++)this._drawItem(i,s[o].x,s[o].y,n[o],(this||e)._settings.label.call(this||e,n),r,a)},_fillRadarChart:function(i,s,n){var r,a;i.globalAlpha=(this||e)._settings.alpha.call(this||e,{});i.beginPath();for(var o=0;o<s.length;o++){i.fillStyle=(this||e)._settings.fill.call(this||e,n[o]);r=s[o];a=s[o+1]||s[0];o||i.moveTo(r.x,r.y);i.lineTo(a.x,a.y)}i.fill();i.globalAlpha=1},_strokeRadarChart:function(i,s,n){var r,a;for(var o=0;o<s.length;o++){r=s[o];a=s[o+1]||s[0];this._drawLine(i,r.x,r.y,a.x,a.y,(this||e)._settings.line.color.call(this||e,n[o]),(this||e)._settings.line.width)}},_drawRadarAxises:function(i,s,n,r,a){var o=(this||e)._settings.yAxis;var l=(this||e)._settings.xAxis;var h=o.start;var _=o.end;var c=o.step;var d={};var u=(this||e)._configYAxis;if("undefined"==typeof u.step||"undefined"==typeof u.start||"undefined"==typeof u.end){var f=this._getLimits();d=this._calculateScale(f.min,f.max);h=d.start;_=d.end;c=d.step;o.end=_;o.start=h}var g=[];var v,p,m;var b=0;var w=r*c/(_-h);var x,y;if(c<1){x=Math.min(this._log10(c),h<=0?0:this._log10(h));y=Math.pow(10,-x)}var S=[];(this||e).canvases.scale||((this||e).canvases.scale=this._createCanvas("radar_scale"));var $=(this||e).canvases.scale.getCanvas();for(v=_;v>=h;v-=c){var C=(this||e)._logScaleCalc?Math.pow(10,v):v;d.fixNum&&(C=parseFloat(v).toFixed(d.fixNum));g.push(Math.floor(b*w)+.5);if(y&&!(this||e)._logScaleCalc){C=Math.round(C*y)/y;v=C}var k=n-r+g[g.length-1];(this||e).canvases.scale.renderTextAt("middle","left",s,k,o.template(C.toString()),"webix_axis_item_y webix_radar");var I=-Math.PI/2;var M=I;var T;for(p=0;p<i.length;p++){b||S.push(M);T=I+i[p]-1e-4;this._drawScaleSector($,i.length>2?u.lineShape||"line":"arc",s,n,r-g[g.length-1],M,T,v,p,a[v]);M=T}b++}for(v=0;v<S.length;v++){m=this._getPositionByAngle(S[v],s,n,r);if(l){l.lines.call(this||e,a[v],v)&&this._drawLine($,s,n,m.x,m.y,l.lineColor.call(this||e,a[v]),1);this._drawRadarScaleLabel($,s,n,r,S[v],l.template.call(this||e,a[v]))}}},_drawScaleSector:function(i,s,n,r,a,o,l,h,_){var c,d;if(a<0)return false;c=this._getPositionByAngle(o,n,r,a);d=this._getPositionByAngle(l,n,r,a);var u=(this||e)._settings.yAxis;if(u.bg){i.beginPath();i.moveTo(n,r);if("arc"==s)i.arc(n,r,a,o,l,false);else{i.lineTo(c.x,c.y);i.lineTo(d.x,d.y)}i.fillStyle=u.bg(h,_);i.moveTo(n,r);i.fill();i.closePath()}if(u.lines.call(this||e,h)){i.lineWidth=1;i.beginPath();if("arc"==s)i.arc(n,r,a,o,l,false);else{i.moveTo(c.x,c.y);i.lineTo(d.x,d.y)}i.strokeStyle=u.lineColor.call(this||e,h);i.stroke()}},_drawRadarScaleLabel:function(i,s,n,r,a,o){if(!o)return false;var l=(this||e).canvases.scale.renderText(0,0,o,"webix_axis_radar_title",1);var h=l.scrollWidth;var _=l.offsetHeight;var c=.001;var d=this._getPositionByAngle(a,s,n,r+5);var u=0,f=0;(a<0||a>Math.PI)&&(f=-_);a>Math.PI/2&&(u=-h);Math.abs(a+Math.PI/2)<c||Math.abs(a-Math.PI/2)<c?u=-h/2:(Math.abs(a)<c||Math.abs(a-Math.PI)<c)&&(f=-_/2);l.style.top=d.y+f+"px";l.style.left=d.x+u+"px";l.style.width=h+"px";l.style.whiteSpace="nowrap"}};var An={
/**
    *   renders a graphic
    *   @param: ctx - canvas object
    *   @param: data - object those need to be displayed
    *   @param: point0  - top left point of a chart
    *   @param: point1  - right bottom point of a chart
    *   @param: sIndex - index of drawing chart
       *   @param: map - map object
    */
$render_scatter:function(i,s,n,r,a,o){if((this||e)._settings.xValue){var l=(this||e)._settings;var h=!(l.disableLines||"undefined"==typeof l.disableLines);var _=this._getLimits();var c=this._getLimits("h","xValue");if(!a){(this||e).canvases.x||((this||e).canvases.x=this._createCanvas("axis_x"));(this||e).canvases.y||((this||e).canvases.y=this._createCanvas("axis_y"));this._drawYAxis((this||e).canvases.y.getCanvas(),s,n,r,_.min,_.max);this._drawHXAxis((this||e).canvases.x.getCanvas(),s,n,r,c.min,c.max)}_={min:l.yAxis.start,max:l.yAxis.end};c={min:l.xAxis.start,max:l.xAxis.end};var d=this._getScatterParams(i,s,n,r,c,_);(this||e)._mapStart=n;var u=[];for(var f=0;f<s.length;f++){var g=this._calculateScatterItemPosition(d,r,n,c,s[f],"X");var v=this._calculateScatterItemPosition(d,n,r,_,s[f],"Y");isNaN(g)||isNaN(v)||u.push({x:g,y:v,index:f})}var p,m,b,w,x;for(var y=0;y<u.length;y++){x=u[y].index;if(h){var S=l.line.color.call(this||e,s[x]);p=u[y].x;m=u[y].y;if(y==u.length-1){if(l.shape&&u.length>2){this._drawLine(i,b,w,u[0].x,u[0].y,S,l.line.width);l.disableItems||this._drawScatterItem(i,o,u[0],s[0],a);l.fill&&this._fillScatterChart(i,u,s)}}else{b=u[y+1].x;w=u[y+1].y;this._drawLine(i,p,m,b,w,S,l.line.width)}}!l.disableItems&&u[y]&&this._drawScatterItem(i,o,u[y],s[x],a)}}},_fillScatterChart:function(i,s,n){var r,a;i.globalAlpha=(this||e)._settings.alpha.call(this||e,{});i.beginPath();for(var o=0;o<s.length;o++){i.fillStyle=(this||e)._settings.fill.call(this||e,n[o]);r=s[o];a=s[o+1]||s[0];o||i.moveTo(r.x,r.y);i.lineTo(a.x,a.y)}i.fill();i.globalAlpha=1},_getScatterParams:function(e,i,s,n,r,a){var o={};o.totalHeight=n.y-s.y;o.totalWidth=n.x-s.x;this._calcScatterUnit(o,r.min,r.max,o.totalWidth,"X");this._calcScatterUnit(o,a.min,a.max,o.totalHeight,"Y");return o},_drawScatterItem:function(i,s,n,r,a){this._drawItem(i,n.x,n.y,r,(this||e)._settings.label.call(this||e,r),a,s)},_calculateScatterItemPosition:function(i,s,n,r,a,o){var l=(this||e)._settings["X"==o?"xValue":"value"].call(this||e,a);var h=i["valueFactor"+o];var _=(parseFloat(l||0)-r.min)*h;var c=i["unit"+o];var d=n[o.toLowerCase()]-("X"==o?-1:1)*Math.floor(c*_);_<0&&(d=n[o.toLowerCase()]);l>r.max&&(d=s[o.toLowerCase()]);l<r.min&&(d=n[o.toLowerCase()]);return d},_calcScatterUnit:function(e,i,s,n,r){var a=this._getRelativeValue(i,s);r=r||"";e["relValue"+r]=a[0];e["valueFactor"+r]=a[1];e["unit"+r]=e["relValue"+r]?n/e["relValue"+r]:10}};var zn={presets:{simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:false,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#8664C6",item:{borderColor:"#8664C6",borderWidth:1,color:"#ffffff",type:"r",shadow:false},line:{color:"#8664C6",width:2}},diamond:{color:"#FF5C4C",item:{borderColor:"#FF5C4C",color:"#FF5C4C",type:"d",radius:3,shadow:true},line:{color:"#FF5C4C",width:2}},point:{color:"#1ca1c1",disableLines:true,fill:false,disableItems:false,item:{color:"#1ca1c1",borderColor:"#1ca1c1",radius:2,borderWidth:2,type:"r"},alpha:1},line:{line:{color:"#1ca1c1",width:2},item:{color:"#ffffff",borderColor:"#1ca1c1",radius:2,borderWidth:2,type:"d"},fill:false,disableItems:false,disableLines:false,alpha:1},area:{fill:"#1ca1c1",line:{color:"#1ca1c1",width:1},disableItems:true,alpha:.2,disableLines:false},round:{item:{radius:3,borderColor:"#1ca1c1",borderWidth:1,color:"#1ca1c1",type:"r",shadow:false,alpha:.6}},square:{item:{radius:3,borderColor:"#00a497",borderWidth:2,color:"#ffffff",type:"s",shadow:false,alpha:1},line:{color:"#00a497"}},column:{color:"RAINBOW",gradient:false,barWidth:45,radius:0,alpha:1,border:true},stick:{barWidth:5,gradient:false,color:"#1ca1c1",radius:2,alpha:1,border:false},alpha:{color:"#b9a8f9",barWidth:70,gradient:"falling",radius:0,alpha:.5,border:true}}};var Hn={
/**
     *   renders an splineArea chart
     *   @param: ctx - canvas object
     *   @param: data - object those need to be displayed
     *   @param: width - the width of the container
     *   @param: height - the height of the container
     *   @param: sIndex - index of drawing chart
     */
$render_splineArea:function(i,s,n,r,a,o){var l,h,_,c,d,u,f,g,v,p,m,b,w,x=(this||e)._settings,y=[];u=this._calculateLineParams(i,s,n,r,a);d=x.eventRadius||Math.floor(u.cellWidth/2);_=[];if(s.length){v=n.x;for(h=0;h<s.length;h++){b=this._getPointY(s[h],n,r,u);if(b||"0"==b){g=h?u.cellWidth*h-.5+v:v;_.push({x:g,y:b,index:h});o.addRect(s[h].id,[g-d-n.x,b-d-n.y,g+d-n.x,b+d-n.y],a)}}f=this._getSplineParameters(_);for(h=0;h<_.length;h++){p=_[h].x;if(h<_.length-1){m=_[h+1].x;w=_[h+1].y;for(c=p;c<m;c++){var S=this._getSplineYPoint(c,p,h,f.a,f.b,f.c,f.d);S<n.y&&(S=n.y);S>r.y&&(S=r.y);var $=this._getSplineYPoint(c+1,p,h,f.a,f.b,f.c,f.d);$<n.y&&($=n.y);$>r.y&&($=r.y);y.push([c,S]);y.push([c+1,$])}y.push([m,w])}}l=(this||e)._settings.color.call(this||e,s[0]);if(y.length){y.push([m,r.y]);y.push([y[0][0],r.y])}i.globalAlpha=(this||e)._settings.alpha.call(this||e,s[0]);i.fillStyle=l;i.beginPath();this._path(i,y);i.fill();i.lineWidth=1;i.globalAlpha=1;if(x.border){i.lineWidth=x.borderWidth||1;x.borderColor?i.strokeStyle=x.borderColor.call(this||e,s[0]):this._setBorderStyles(i,l);i.beginPath();y.splice(y.length-3);this._path(i,y);i.stroke()}}}};var jn=400,Pn=30;var Vn={dynamic_setter:function(i){i&&init(this||e);return i}};
/**
   * Sets event handlers and properties for a stock chart
   * @param {object} chart - chart view
   */function init(e){if(!e._stockRenderHandler){var i=e._settings;i.cellWidth||(i.cellWidth=Pn);i.animateDuration||(i.animateDuration=jn);i.offset=false;e._stockRenderHandler=e.attachEvent("onBeforeRender",(function(s,n){var r=e._getChartBounds(e._content_width,e._content_height);resizeStockCanvases(e);filterStockData(s,r.start,r.end,i.cellWidth);"add"==n&&startAnimation(e)}));e._stockXAxisHandler=e.attachEvent("onBeforeXAxis",(function(i,s,n,r,a,o){drawXAxis(e,i,s,n,r,a,o);return false}))}}
/**
   * Starts stock animation
   * @param {object} chart - chart view
   */function startAnimation(e){var i=e._settings.cellWidth;if(e._stockAnimationOffset!=i){e._stockAnimationOffset=i;e.render()}e._stockAnimationOffset=0;e._stockAnimationStart=null;window.requestAnimationFrame&&!document.hidden&&window.requestAnimationFrame((function(i){animate$2(e,i)}));e._stockAnimateHandler||(e._stockAnimateHandler=e.attachEvent("onAfterRender",(function(i){applyStockOffset(e,i)})))}
/**
   * Animates a chart
   * @param {object} chart - chart view
   * @param {number} timestamp - timestamp
   */function animate$2(e,i){var s,n=e._settings.animateDuration,r=e._settings.cellWidth;if(r&&e.count()>1){e._stockAnimationStart||(e._stockAnimationStart=i);s=i-e._stockAnimationStart;e._stockAnimationOffset=Math.min(Math.max(s/n*r,1),r);e.render();s<n&&window.requestAnimationFrame((function(i){animate$2(e,i)}))}}
/**
   * Applies animation offset to "series" and "x-axis" canvases
   * @param {object} chart - chart view
   * @param {object} data - data array
   */function applyStockOffset(e,i){var s=e.count(),n=e._getChartBounds(e._content_width,e._content_height),r=e._settings.cellWidth,a=e._stockAnimationOffset||0,o=i.length<s||(i.length-1)*r>n.end.x-n.start.x;function setCanvasOffset(e,n,o,l){var h=e.getCanvas(),_=e._canvas,c=e._canvas_labels,d=e._canvas_series;if(a&&(i.length<s||(i.length-1)*r>o-n)){_.style.left=-a+"px";if(i.length>1){setLabelsOffset(c,a,d);h.clearRect(0,0,n+a,_.offsetHeight);h.clearRect(o+a,0,_.offsetWidth,_.offsetHeight)}}else{_.style.left="0px";l||a==r||h.clearRect(n+(i.length-1)*r-r+a,0,_.offsetWidth,_.offsetHeight)}if(c.length>1&&a&&a!=r){var u=c.length-1;isAxisTitle(d,c[u])&&(u-=1);c[u].style.display="none"}}eachStockCanvas(e,(function(e,i){setCanvasOffset(i,n.start.x,n.end.x,"x"==e)}));setHtmlMapSizes(e,n,o?a:0)}function isAxisTitle(e,i){return"axis_x"===e&&-1!==i.className.indexOf("webix_axis_title_x")}function setLabelsOffset(e,i,s){if(e.length){remove(e[0]);for(var n=1;n<e.length;n++)isAxisTitle(s,e[n])||(e[n].style.left=e[n].offsetLeft-i+"px")}}
/**
   * Gets visible chart data
   * @param {object} data - an array with all chart data
   * @param {object} point0 - a top left point of a plot
   * @param {object} point1 - a bottom right point of a plot
   * @param {number} cellWidth - a unit width
   */function filterStockData(e,i,s,n){if(n&&e.length){var r=Math.ceil((s.x-i.x)/n);e.length>r+1&&e.splice(0,e.length-r-1)}}
/**
   * Calls a function for "series" and "x-axis" canvases
   * @param {object} chart - chart view
   * @param {function} func - function to call
   */function eachStockCanvas(e,i){if(e.canvases){for(var s=0;s<e._series.length;s++)e.canvases[s]&&i(s,e.canvases[s]);e.canvases.x&&i("x",e.canvases.x)}}
/**
   * Set sizes for animated canvases
   * @param {object} chart - chart view
   */function resizeStockCanvases(e){eachStockCanvas(e,(function(i,s){s._resizeCanvas(e._content_width+2*e._settings.cellWidth,e._content_height)}))}
/**
   * Set sizes for an html map of a chart
   * @param {object} chart - a chart view
   * @param {object} bounds - start and end points of a plot
   * @param {number} offset - an offset to apply
   */function setHtmlMapSizes(e,i,s){e._contentobj._htmlmap.style.left=i.start.x-s+"px";e._contentobj._htmlmap.style.width=i.end.x-i.start.x+s+"px"}
/**
   * Renders lines and labels of an x-axis
   * @param {object} chart - a chart view
   * @param {object} ctx - a canvas Context
   * @param {object} data - a data array
   * @param {object} point0 - a top left point of a plot
   * @param {object} point1 - a bottom right point of a plot
   * @param {number} cellWidth - a width of a unit
   * @param {number} y - the vertical position of an "x-axis" line
   */function drawXAxis(e,i,s,n,r,a,o){var l,h,_,c,d=e._settings,u=n.x-.5,f=parseInt(o||r.y,10)+.5,g=r.x;if(!d.dynamic)return false;_=(s.length-1)*a>g-u||s.length<e.count();for(h=0;h<s.length;h++){c=u+h*a;l=_?h>1:!!h;c=Math.ceil(c)-.5;e._drawXAxisLabel(c,f,s[h],l);h&&d.xAxis.lines.call(e,s[h])&&e._drawXAxisLine(i,c,r.y,n.y,s[h])}e.canvases.x.renderTextAt(true,false,u,r.y+d.padding.bottom-3,d.xAxis.title,"webix_axis_title_x",r.x-n.x);e._drawLine(i,u,f,g+(_?e._stockAnimationOffset:0),f,d.xAxis.color,1)}var Nn={name:"chart",$init:function(i){(this||e)._series=[(this||e)._settings];(this||e)._legend_labels=[];(this||e)._contentobj.className+=" webix_chart";(this||e).$ready.push((this||e)._after_init_call);i.preset&&this._definePreset(i);if(i.series){var s=i.series;delete i.series;i.series=s}(this||e).data.provideApi(this||e,true)},_after_init_call:function(){(this||e).data.attachEvent("onStoreUpdated",bind((function(){(this||e).render.apply(this||e,arguments)}),this||e))},defaults:{ariaLabel:"chart",color:"default",alpha:"1",radius:0,label:false,value:"{obj.value}",padding:{},type:"pie",lineColor:"#ffffff",cant:.5,barWidth:30,line:{width:2,color:"#1ca1c1"},item:{radius:3,borderColor:"#1ca1c1",borderWidth:2,color:"#ffffff",alpha:1,type:"r",shadow:false},shadow:false,gradient:false,border:false,labelOffset:20,origin:"auto",scale:"linear"},_id:"webix_area_id",on_click:{webix_chart_legend_item:function(i,s,n){var r=n.getAttribute("series_id");if(this.callEvent("onLegendClick",[i,r,n])&&"undefined"!=typeof r&&(this||e)._series.length>1){var a=(this||e)._settings;var o=a.legend.values;var l=o&&o[r].toggle||a.legend.toggle;l&&(-1!=n.className.indexOf("hidden")?this.showSeries(r):this.hideSeries(r))}}},on_dblclick:{},on_mouse_move:{},locate:function(i){return locate(i,(this||e)._id)},$setSize:function(i,s){var n=St.api.$setSize.call(this||e,i,s);if(n){for(var r in(this||e).canvases)(this||e).canvases[r]._resizeCanvas((this||e)._content_width,(this||e)._content_height);this.render()}return n},type_setter:function(i){assert((this||e)["$render_"+i],"Chart type is not supported, or extension is not loaded: "+i);"undefined"==typeof(this||e)._settings.offset&&((this||e)._settings.offset=!(-1!=i.toLowerCase().indexOf("area")));"radar"!=i||(this||e)._settings.yAxis||this.define("yAxis",{});if("scatter"==i){(this||e)._settings.yAxis||this.define("yAxis",{});(this||e)._settings.xAxis||this.define("xAxis",{})}return i},destructor:function(){this.removeAllSeries();ct.destructor.apply(this||e,arguments)},removeAllSeries:function(){this.clearCanvas();if((this||e)._legendObj){(this||e)._legendObj.innerHTML="";(this||e)._legendObj.parentNode.removeChild((this||e)._legendObj);(this||e)._legendObj=null}(this||e).canvases&&((this||e).canvases={});(this||e)._contentobj.innerHTML="";(this||e)._series=[]},clearCanvas:function(){if((this||e).canvases&&"object"==_typeof((this||e).canvases))for(var i in(this||e).canvases)(this||e).canvases[i].clearCanvas()},render:function(i,s,n){var r,a,o,l;if(this.isVisible((this||e)._settings.id)){a=this._getChartData();if(this.callEvent("onBeforeRender",[a,n])){if((this||e).canvases&&"object"==_typeof((this||e).canvases))for(var h in(this||e).canvases)(this||e).canvases[h].clearCanvas();else(this||e).canvases={};if((this||e)._settings.legend){(this||e).canvases.legend||((this||e).canvases.legend=this._createCanvas("legend"));this._drawLegend((this||e).data.getRange(),(this||e)._content_width,(this||e)._content_height)}(this||e)._map=o=new fe((this||e)._id);l=(this||e)._settings;r=this._getChartBounds((this||e)._content_width,(this||e)._content_height);if((this||e)._series)for(var _=0;_<(this||e)._series.length;_++){(this||e)._settings=(this||e)._series[_];(this||e).canvases[_]||((this||e).canvases[_]=this._createCanvas((this||e).name+" "+_,"z-index:"+(2+_),null,_,(this||e)._settings.ariaLabel));this["$render_"+(this||e)._settings.type]((this||e).canvases[_].getCanvas(),a,r.start,r.end,_,o)}o.render((this||e)._contentobj);(this||e)._contentobj.lastChild.style.zIndex=80;this._applyBounds((this||e)._contentobj.lastChild,r);this.callEvent("onAfterRender",[a]);(this||e)._settings=l;if((this||e)._settings.legend&&(this||e)._settings.legend.values){var c=(this||e)._settings.legend.values;for(var d=0;d<c.length;d++)c[d].$hidden&&this.hideSeries(d)}}}},_applyBounds:function(e,i){var s={};s.left=i.start.x;s.top=i.start.y;s.width=i.end.x-i.start.x;s.height=i.end.y-i.start.y;for(var n in s)e.style[n]=s[n]+"px"},_getChartData:function(){var i,s,n,r,a,o,l,h,_,c;r=(this||e).data.getRange();i=-1!=(this||e)._settings.type.toLowerCase().indexOf("barh")?"yAxis":"xAxis";s=(this||e)._settings[i];if(s&&s.units&&"object"==_typeof(s.units)){n=s.units;h=[];if("undefined"!=typeof n.start&&"undefined"!=typeof n.end&&"undefined"!=typeof n.next){l=n.start;while(l<=n.end){h.push(l);l=n.next.call(this||e,l)}}else"[object Array]"===Object.prototype.toString.call(n)&&(h=n);o=[];if(h.length){_=s.value;c={};for(a=0;a<r.length;a++)c[_(r[a])]=a;for(a=0;a<h.length;a++)if("undefined"!=typeof c[h[a]]){r[c[h[a]]].$unit=h[a];o.push(r[c[h[a]]])}else o.push({$unit:h[a]})}return o}return r},series_setter:function(i){if(i&&"object"==_typeof(i)){this._parseSettings(i.length?i[0]:i);(this||e)._series=[(this||e)._settings];for(var s=1;s<i.length;s++)this.addSeries(i[s])}else assert(i,"Chart :: Series must be an array or object");return i},value_setter:template,xValue_setter:template,yValue_setter:function(e){this.define("value",e)},alpha_setter:template,label_setter:template,lineColor_setter:template,borderColor_setter:template,pieInnerText_setter:template,donutInnerText_setter:template,gradient_setter:function(e){"function"!=typeof e&&e&&true===e&&(e="light");return e},colormap:{RAINBOW:function(i){var s=Math.floor(this.getIndexById(i.id)/this.count()*1536);1536==s&&(s-=1);return(this||e)._rainbow[Math.floor(s/256)](s%256)},default:function(i){var s=this.count();var n=(this||e)._defColors.length;var r=this.getIndexById(i.id);if(n>s){r&&(r=r<n-s?(this||e)._defColorsCursor+2:(this||e)._defColorsCursor+1);(this||e)._defColorsCursor=r}else r%=n;return(this||e)._defColors[r]}},color_setter:function(i){return(this||e).colormap[i]||template(i)},fill_setter:function(e){return!(!e||"0"==e)&&template(e)},_definePreset:function(e){this.define("preset",e.preset);delete e.preset},preset_setter:function(s){var n,r,a;(this||e).defaults=i.extend({},(this||e).defaults);a=(this||e).presets[s];if("object"==_typeof(a)){for(n in a)if("object"==_typeof(a[n]))if((this||e).defaults[n]&&"object"==_typeof((this||e).defaults[n])){(this||e).defaults[n]=i.extend({},(this||e).defaults[n]);for(r in a[n])(this||e).defaults[n][r]=a[n][r]}else(this||e).defaults[n]=i.extend({},a[n]);else(this||e).defaults[n]=a[n];return s}return false},legend_setter:function(i){if(!i){if((this||e)._legendObj){(this||e)._legendObj.innerHTML="";(this||e)._legendObj=null}return false}"object"!=_typeof(i)&&(i={template:i});this._mergeSettings(i,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=(this||e)._settings.type.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3});i.template=template(i.template);return i},item_setter:function(s){"object"!=_typeof(s)&&(s={color:s,borderColor:s});this._mergeSettings(s,i.extend({},(this||e).defaults.item));var n=["alpha","borderColor","color","radius","type"];this._converToTemplate(n,s);return s},line_setter:function(s){"object"!=_typeof(s)&&(s={color:s});s=i.extend(s,(this||e).defaults.line);s.color=template(s.color);return s},padding_setter:function(e){"object"!=_typeof(e)&&(e={left:e,right:e,top:e,bottom:e});this._mergeSettings(e,{left:50,right:20,top:35,bottom:40});return e},xAxis_setter:function(s){if(!s)return false;"object"!=_typeof(s)&&(s={template:s});this._mergeSettings(s,{title:"",color:"#edeff0",lineColor:"#edeff0",template:"{obj}",lines:true});var n=["lineColor","template","lines"];this._converToTemplate(n,s);(this||e)._configXAxis=i.extend({},s);return s},yAxis_setter:function(s){this._mergeSettings(s,{title:"",color:"#edeff0",lineColor:"#edeff0",template:"{obj}",lines:true,bg:Ht.backColor});var n=["lineColor","template","lines","bg"];this._converToTemplate(n,s);(this||e)._configYAxis=i.extend({},s);return s},_converToTemplate:function(e,i){for(var s=0;s<e.length;s++)i[e[s]]=template(i[e[s]])},_createCanvas:function(i,s,n,r,a){var o={container:n||(this||e)._contentobj,name:i,title:isUndefined(a)?i:a||"",series:r,style:s||"",width:(this||e)._content_width,height:(this||e)._content_height};return new It(o)},_drawScales:function(i,s,n,r,a,o){var l,h=0;if((this||e)._settings.yAxis){(this||e).canvases.y||((this||e).canvases.y=this._createCanvas("axis_y"));h=this._drawYAxis((this||e).canvases.y.getCanvas(),i,s,n,r,a)}if((this||e)._settings.xAxis){(this||e).canvases.x||((this||e).canvases.x=this._createCanvas("axis_x"));l=(this||e).canvases.x.getCanvas();this.callEvent("onBeforeXAxis",[l,i,s,n,o,h])&&this._drawXAxis(l,i,s,n,o,h)}return h},_drawXAxis:function(i,s,n,r,a,o){var l,h,_=(this||e)._settings,c=n.x-.5,d=parseInt(o||r.y,10)+.5,u=r.x,f=true,g="stackedBar"==_.type?r.y+.5:d;for(l=0;l<s.length;l++){if(true===_.offset)h=c+a/2+l*a;else{h=l!=s.length-1||_.cellWidth?c+l*a:r.x;f=!!l}h=Math.ceil(h)-.5;var v="auto"!=_.origin&&"bar"==_.type&&parseFloat(_.value(s[l]))<_.origin;this._drawXAxisLabel(h,g,s[l],f,v);(_.offset||l||_.cellWidth)&&_.xAxis.lines.call(this||e,s[l])&&this._drawXAxisLine(i,h,r.y,n.y,s[l])}(this||e).canvases.x.renderTextAt(true,false,c,r.y+_.padding.bottom-3,_.xAxis.title,"webix_axis_title_x",r.x-n.x);this._drawLine(i,c,d,u,d,_.xAxis.color,1);_.xAxis.lines.call(this||e,{})&&_.offset&&this._drawLine(i,u+.5,r.y,u+.5,n.y+.5,_.xAxis.lineColor.call(this||e,{}),1)},_drawYAxis:function(i,s,n,r,a,o){var l;var h={};if((this||e)._settings.yAxis){var _=n.x-.5;var c=r.y;var d=n.y;var u=r.y+.5;(this||e)._settings.yAxis.step&&(l=parseFloat((this||e)._settings.yAxis.step));if("undefined"==typeof(this||e)._configYAxis.step||"undefined"==typeof(this||e)._configYAxis.start||"undefined"==typeof(this||e)._configYAxis.end){h=this._calculateScale(a,o);a=h.start;o=h.end;l=h.step;(this||e)._settings.yAxis.end=o;(this||e)._settings.yAxis.start=a}else"logarithmic"==(this||e).config.scale&&((this||e)._logScaleCalc=true);this._setYAxisTitle(n,r);if(0!==l){if(o==a)return c;var f=(c-d)*l/(o-a);var g=0;var v=(this||e)._settings.origin;for(var p=a;p<=o;p+=l){var m=(this||e)._logScaleCalc?Math.pow(10,p):p;h.fixNum&&(m=parseFloat(m).toFixed(h.fixNum));var b=Math.floor(c-g*f)+.5;p==a&&"auto"==v||!(this||e)._settings.yAxis.lines.call(this||e,p)||this._drawLine(i,_,b,r.x,b,(this||e)._settings.yAxis.lineColor.call(this||e,p),1);"auto"!=v&&p<=v&&p+l>v&&(u=b-f*(v-m)/l);if(l<1&&!(this||e)._logScaleCalc){var w=Math.min(Math.floor(this._log10(l)),a<=0?0:Math.floor(this._log10(a)));var x=Math.pow(10,-w);m=Math.round(m*x)/x;p=m}(this||e).canvases.y.renderText(0,b-5,(this||e)._settings.yAxis.template(m.toString()),"webix_axis_item_y",n.x-5);g++}this._drawLine(i,_,c+1,_,d,(this||e)._settings.yAxis.color,1);return u}}},_setYAxisTitle:function(i,s){var n="webix_axis_title_y";var r=(this||e).canvases.y.renderTextAt("middle",false,0,parseInt((s.y-i.y)/2+i.y,10),(this||e)._settings.yAxis.title,n);r&&(r.style.left=(r.offsetHeight-r.offsetWidth)/2+"px")},_calculateLogScale:function(e,i){var s=Math.floor(this._log10(e));var n=Math.ceil(this._log10(i));return{start:s,step:1,end:n}},_normStep:function(e){var i=Math.floor(this._log10(e));var s=Math.pow(10,i);var n=e/s;n=n>5?10:5;return parseInt(n,10)*s},_calculateScale:function(i,s){(this||e)._logScaleCalc=false;if("logarithmic"==(this||e)._settings.scale){var n=Math.floor(this._log10(i));var r=Math.ceil(this._log10(s));if(i>0&&s>0&&r-n>1){(this||e)._logScaleCalc=true;return this._calculateLogScale(i,s)}}"auto"!=(this||e)._settings.origin&&(this||e)._settings.origin<i&&(i=(this||e)._settings.origin);var a,o;var l=this._normStep((s-i)/8||1);var h=Math.floor(this._log10(l));if(l>Math.abs(i))a=i<0?-l:0;else{var _=Math.abs(i);var c=Math.floor(this._log10(_));var d=_/Math.pow(10,c);a=0!=c||l>=.1?Math.ceil(10*d)/10*Math.pow(10,c)-l:_;_>1&&l>.1&&(a=Math.ceil(a));while(i<0?a<=i:a>=i)a-=l;i<0&&(a=-a-2*l);a-=a%l;a=parseFloat((1*a).toFixed(Math.abs(h)))}s-a>10&&(l=this._normStep((s-a)/8||1));o=a;0==s&&s==i&&(s=l);while(o<s){o+=l;o=parseFloat((1*o).toFixed(Math.abs(h)))}return{start:a,end:o,step:l,fixNum:h<0?Math.abs(h):0}},_getLimits:function(i,s){var n=(this||e).data._obj_array();var r,a;var o=arguments.length&&"h"==i?(this||e)._configXAxis:(this||e)._configYAxis;s=s||"value";if(o&&"undefined"!=typeof o.end&&"undefined"!=typeof o.start&&o.step){r=parseFloat(o.end);a=parseFloat(o.start)}else{r=_e.max((this||e)._series[0][s],n);a=o&&"undefined"!=typeof o.start?parseFloat(o.start):_e.min((this||e)._series[0][s],n);if((this||e)._series.length>1)for(var l=1;l<(this||e)._series.length;l++){var h=_e.max((this||e)._series[l][s],n);var _=_e.min((this||e)._series[l][s],n);h>r&&(r=h);_<a&&(a=_)}}return{max:r,min:a}},_log10:function(e){var i="log";return Math[i](e)/Math.LN10},_drawXAxisLabel:function(i,s,n,r,a){if((this||e)._settings.xAxis){var o=(this||e).canvases.x.renderTextAt(a,r,i,s-(a?2:0),(this||e)._settings.xAxis.template(n));o&&(o.className+=" webix_axis_item_x")}},_drawXAxisLine:function(i,s,n,r,a){(this||e)._settings.xAxis&&(this||e)._settings.xAxis.lines&&this._drawLine(i,s,n,s,r,(this||e)._settings.xAxis.lineColor.call(this||e,a),1)},_drawLine:function(e,i,s,n,r,a,o){e.strokeStyle=a;e.lineWidth=o;e.beginPath();e.moveTo(i,s);e.lineTo(n,r);e.stroke();e.lineWidth=1},_getRelativeValue:function(e,i){var s;var n=1;s=i!=e?i-e:e;return[s,n]},_rainbow:[function(e){return"#FF"+ke.toHex(e/2,2)+"00"},function(e){return"#FF"+ke.toHex(e/2+128,2)+"00"},function(e){return"#"+ke.toHex(255-e,2)+"FF00"},function(e){return"#00FF"+ke.toHex(e,2)},function(e){return"#00"+ke.toHex(255-e,2)+"FF"},function(e){return"#"+ke.toHex(e,2)+"00FF"}],_defColors:["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"],_defColorsCursor:0,
/**
    *   adds series to the chart (value and color properties)
    *   @param: obj - obj with configuration properties
    */
addSeries:function(s){var n=(this||e)._settings;(this||e)._settings=i.extend({},n);this._parseSettings(s);(this||e)._series.push((this||e)._settings);(this||e)._settings=n},$tooltipIn:function(e){return e},_get_tooltip_data:function(s,n){var r=this.locate(n);if(!r)return null;var a=this._getActiveSeries(n);var o=i.extend({dx:20,dy:0,template:"{obj.value}",css:""},(this||e)._series[a].tooltip||{template:""},true);tt._tooltip.define(o);return this.getItem(r)},_getActiveSeries:function(i){var s,n,r,a,o,l,h,_;n=(this||e)._map._areas;a=offset((this||e)._contentobj._htmlmap);o=pos(i);h=o.x-a.x;_=o.y-a.y;for(r=0;r<n.length;r++){s=n[r].points;h<=s[2]&&h>=s[0]&&_<=s[3]&&_>=s[1]&&(l?n[r].index>l.index&&(l=n[r]):l=n[r])}return l?l.index:0},hideSeries:function(i){(this||e).canvases[i].hideCanvas();var s=(this||e)._settings.legend;if(s&&s.values&&s.values[i]){s.values[i].$hidden=true;this._drawLegend()}(this||e)._map.hide((this||e)._contentobj,i,true)},showSeries:function(i){(this||e).canvases[i].showCanvas();var s=(this||e)._settings.legend;if(s&&s.values&&s.values[i]){delete s.values[i].$hidden;this._drawLegend()}(this||e)._map.hide((this||e)._contentobj,i,false)},
/**
    *   renders legend block
    *   @param: ctx - canvas object
    *   @param: data - object those need to be displayed
    *   @param: width - the width of the container
    *   @param: height - the height of the container
    */
_drawLegend:function(i,s){var n,r,a,o,l,h,_,c,d,u,f,g=0,v=0;i=i||[];s=s||(this||e)._content_width;c=(this||e).canvases.legend.getCanvas();r=(this||e)._settings.legend;_="x"!=(this||e)._settings.legend.layout?"width:"+r.width+"px":"";if((this||e)._legendObj){(this||e)._legendObj.innerHTML="";(this||e)._legendObj.parentNode.removeChild((this||e)._legendObj)}(this||e).canvases.legend.clearCanvas(true);a=create("DIV",{class:"webix_chart_legend",style:"left:"+g+"px; top:"+v+"px;"+_},"");r.padding&&(a.style.padding=r.padding+"px");(this||e)._legendObj=a;(this||e)._contentobj.appendChild(a);l=[];if(r.values)for(n=0;n<r.values.length;n++)l.push(this._drawLegendText(a,r.values[n].text,"undefined"!=typeof r.values[n].id?_typeof(r.values[n].id):n,r.values[n].$hidden));else for(n=0;n<i.length;n++)l.push(this._drawLegendText(a,r.template(i[n]),i[n].id));var p=document.body.contains((this||e)._contentobj);var m,b;if(!p){b=create("DIV",{style:"visibility:hidden; position:absolute; top:0px; left:0px;"},"");m=(this||e)._contentobj.parentNode;document.body.appendChild(b);b.appendChild((this||e)._contentobj)}h=a.offsetWidth;o=a.offsetHeight;if(h<s){"x"==r.layout&&"center"==r.align&&(g=(s-h)/2);"right"==r.align&&(g=s-h);r.margin&&"center"!=r.align&&(g+=("left"==r.align?1:-1)*r.margin)}if(o<(this||e)._content_height){"middle"==r.valign&&"center"!=r.align&&"x"!=r.layout?v=((this||e)._content_height-o)/2:"bottom"==r.valign&&(v=(this||e)._content_height-o);r.margin&&"middle"!=r.valign&&(v+=("top"==r.valign?1:-1)*r.margin)}a.style.left=g+"px";a.style.top=v+"px";c.save();for(n=0;n<l.length;n++){f=l[n];if(r.values&&r.values[n].$hidden){u=true;d=r.values[n].disableColor?r.values[n].disableColor:"#edeff0"}else{u=false;d=r.values?r.values[n].color:(this||e)._settings.color.call(this||e,i[n])}this._drawLegendMarker(c,f.offsetLeft+g,f.offsetTop+v,d,f.offsetHeight,u,n)}c.restore();if(!p){m.appendChild((this||e)._contentobj);remove(b)}l=null},
/**
    *   appends legend item to legend block
    *   @param: ctx - canvas object
    *   @param: obj - data object that needs being represented
    */
_drawLegendText:function(i,s,n,r){var a="";"x"==(this||e)._settings.legend.layout&&(a="float:left;");var o=create("DIV",{style:a+"padding-left:"+(10+(this||e)._settings.legend.marker.width)+"px",class:"webix_chart_legend_item"+(r?" hidden":""),role:"button",tabindex:"0","aria-label":u.aria[(r?"show":"hide")+"Chart"]+" "+s},s);arguments.length>2&&o.setAttribute("series_id",n);i.appendChild(o);return o},
/**
    *   draw legend colorful marder
    *   @param: ctx - canvas object
    *   @param: x - the horizontal position of the marker
    *   @param: y - the vertical position of the marker
    *   @param: obj - data object which color needs being used
    */
_drawLegendMarker:function(i,s,n,r,a,o,l){var h=[];var _=(this||e)._settings.legend.marker;var c=(this||e)._settings.legend.values;var d=c&&c[l].markerType?c[l].markerType:_.type;r&&(i.strokeStyle=i.fillStyle=r);if("round"!=d&&_.radius)if("item"==d){if((this||e)._settings.line&&"scatter"!=(this||e)._settings.type&&!(this||e)._settings.disableLines){i.beginPath();i.lineWidth=(this||e)._series[l].line.width;i.strokeStyle=o?r:(this||e)._series[l].line.color.call(this||e,{});var u=s+5;var f=n+a/2;i.moveTo(u,f);var g=u+_.width;i.lineTo(g,f);i.stroke()}var v=(this||e)._series[l].item;var p=parseInt(v.radius.call(this||e,{}),10)||0;var m=v.type.call(this||e,{});if(p){i.beginPath();if(o){i.lineWidth=v.borderWidth;i.strokeStyle=r;i.fillStyle=r}else{i.lineWidth=v.borderWidth;i.fillStyle=v.color.call(this||e,{});i.strokeStyle=v.borderColor.call(this||e,{});i.globalAlpha=v.alpha.call(this||e,{})}i.beginPath();s+=_.width/2+5;n+=a/2;this._strokeChartItem(i,s,n,p+1,m);i.fill();i.stroke()}i.globalAlpha=1}else{i.beginPath();i.lineWidth=1;s+=5;n+=a/2-_.height/2;h=[[s+_.radius,n+_.radius,_.radius,Math.PI,3*Math.PI/2,false],[s+_.width-_.radius,n],[s+_.width-_.radius,n+_.radius,_.radius,-Math.PI/2,0,false],[s+_.width,n+_.height-_.radius],[s+_.width-_.radius,n+_.height-_.radius,_.radius,0,Math.PI/2,false],[s+_.radius,n+_.height],[s+_.radius,n+_.height-_.radius,_.radius,Math.PI/2,Math.PI,false],[s,n+_.radius]];this._path(i,h);i.stroke();i.fill()}else{i.beginPath();var b=_.height/2;i.arc(s+b+5,n+a/2,b,0,2*Math.PI);i.fill()}},
/**
    *   gets the points those represent chart left top and right bottom bounds
    *   @param: width - the width of the chart container
    *   @param: height - the height of the chart container
    */
_getChartBounds:function(i,s){var n,r,a,o;n=(this||e)._settings.padding.left;r=(this||e)._settings.padding.top;a=i-(this||e)._settings.padding.right;o=s-(this||e)._settings.padding.bottom;if((this||e)._settings.legend){var l=(this||e)._settings.legend;var h=(this||e)._settings.legend.width;var _=(this||e)._settings.legend.height;"x"==l.layout?"center"==l.valign?"right"==l.align?a-=h:"left"==l.align&&(n+=h):"bottom"==l.valign?o-=_:r+=_:"right"==l.align?a-=h:"left"==l.align&&(n+=h)}return{start:{x:n,y:r},end:{x:a,y:o}}},
/**
    *   gets the maximum and minimum values for the stacked chart
    *   @param: data - data set
    */
_getStackedLimits:function(i){var s,n,r,a,o;if((this||e)._settings.yAxis&&"undefined"!=typeof(this||e)._settings.yAxis.end&&"undefined"!=typeof(this||e)._settings.yAxis.start&&(this||e)._settings.yAxis.step){r=parseFloat((this||e)._settings.yAxis.end);a=parseFloat((this||e)._settings.yAxis.start)}else{for(s=0;s<i.length;s++){i[s].$sum=0;i[s].$min=Infinity;for(n=0;n<(this||e)._series.length;n++){o=Math.abs(parseFloat((this||e)._series[n].value(i[s])||0));if(!isNaN(o)){-1!=(this||e)._series[n].type.toLowerCase().indexOf("stacked")&&(i[s].$sum+=o);o<i[s].$min&&(i[s].$min=o)}}}r=-Infinity;a=Infinity;for(s=0;s<i.length;s++){i[s].$sum>r&&(r=i[s].$sum);i[s].$min<a&&(a=i[s].$min)}a>0&&(a=0)}return{max:r,min:a}},_setBarGradient:function(e,i,s,n,r,a,o,l){var h,_,c,d,u,f;if("light"==a){h="x"==l?e.createLinearGradient(i,s,n,s):e.createLinearGradient(i,s,i,r);f=[[0,"#FFFFFF"],[.9,o],[1,o]];_=2}else if("falling"==a||"rising"==a){h="x"==l?e.createLinearGradient(i,s,n,s):e.createLinearGradient(i,s,i,r);c=ke.toRgb(o);d=ke.rgbToHsv(c[0],c[1],c[2]);d[1]*=.5;u="rgb("+ke.hsvToRgb(d[0],d[1],d[2])+")";"falling"==a?f=[[0,u],[.7,o],[1,o]]:"rising"==a&&(f=[[0,o],[.3,o],[1,u]]);_=0}else{e.globalAlpha=.37;_=0;h="x"==l?e.createLinearGradient(i,r,i,s):e.createLinearGradient(i,s,n,s);f=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]}this._gradient(h,f);return{gradient:h,offset:_}},
/**
    *   returns the x and y position
    *   @param: a - angle
    *   @param: x - start x position
    *   @param: y - start y position
    *   @param: r - destination to the point
    */
_getPositionByAngle:function(e,i,s,n){e*=-1;i+=Math.cos(e)*n;s-=Math.sin(e)*n;return{x:i,y:s}},_gradient:function(e,i){for(var s=0;s<i.length;s++)e.addColorStop(i[s][0],i[s][1])},_path:function(e,i){var s,n;for(s=0;s<i.length;s++){n=s?"lineTo":"moveTo";i[s].length>2&&(n="arc");e[n].apply(e,i[s])}},_addMapRect:function(e,i,s,n,r){e.addRect(i,[s[0].x-n.x,s[0].y-n.y,s[1].x-n.x,s[1].y-n.y],r)}};i.protoUI(Nn,yn,Sn,$n,Cn,kn,In,Mn,Tn,En,An,zn,Hn,Vn,de,kt,ie,me,f,St.view);i.protoUI({name:"rangechart",defaults:{template:"GPL version doesn't support rangechart <br> You need Webix PRO"}},Ai.view);var Dn={name:"grouplist",defaults:{animate:{}},_listClassName:"webix_grouplist",$init:function(){i.extend((this||e).data,Fe,true);(this||e).data.count=function(){return(this||e).order.length};(this||e).data.provideApi(this||e,true);(this||e).data.attachEvent("onClearAll",bind((this||e)._onClear,this||e));this._onClear()},_onClear:function(){(this||e)._nested_cursor=[];(this||e)._nested_chain=[]},$setSize:function(){St.api.$setSize.apply(this||e,arguments)&&((this||e)._dataobj.style.width=(this||e)._content_width)},on_click:{webix_list_item:function(i,s){if((this||e)._animation_promise)return false;if(this._level_up(s)||this._level_down(s))return this.render();if((this||e)._settings.select){(this||e)._no_animation=true;"multiselect"==(this||e)._settings.select||(this||e)._settings.multiselect?this.select(s,false,"touch"==(this||e)._settings.multiselect||i.ctrlKey||i.metaKey,i.shiftKey):this.select(s);(this||e)._no_animation=false}}},_level_up:function(i){for(var s=0;s<(this||e)._nested_chain.length;s++)if((this||e)._nested_chain[s]==i){for(var n=s;n<(this||e)._nested_chain.length;n++)(this||e).data.getItem((this||e)._nested_chain[n]).$template="";if(s){(this||e)._nested_cursor=(this||e).data.branch[(this||e)._nested_chain[s-1]];(this||e)._nested_chain.splice(s)}else{(this||e)._nested_cursor=(this||e).data.branch[0];(this||e)._nested_chain=[]}(this||e)._is_level_down=false;return true}},_level_down:function(i){var s=this.getItem(i);if(s.$count&&-1===d.find.call((this||e)._nested_chain,i)){s.$template="Back";(this||e)._nested_cursor=(this||e).data.branch[s.id];(this||e)._nested_chain.push(i);return(this||e)._is_level_down=true}},getOpenState:function(){return{parents:(this||e)._nested_chain,branch:(this||e)._nested_cursor}},setOpenState:function(i){var s=0;if(i){var n=this.getItem(i);s=n.$count?n.id:n.$parent}(this||e)._nested_cursor=(this||e).data.branch[s];(this||e)._nested_chain=[];while(s){this.getItem(s).$template="Back";(this||e)._nested_chain.unshift(s);s=this.getItem(s).$parent}(this||e)._no_animation=true;this.render();(this||e)._no_animation=false},render:function(s,n,r){var a=this||e,o=arguments;var l,h;(this||e)._nested_chain=copy((this||e)._nested_chain);(this||e)._nested_cursor=copy((this||e)._nested_cursor);if((this||e)._nested_chain.length)for(l=0;l<(this||e)._nested_chain.length;l++)if(!(this||e).data.branch[(this||e)._nested_chain[l]]){(this||e)._nested_chain.splice(l,1);l--}h=(this||e)._nested_chain.length?(this||e)._nested_chain[(this||e)._nested_chain.length-1]:0;(this||e)._nested_cursor=copy((this||e).data.branch[h]);if(!(this||e)._nested_cursor.length&&(this||e)._nested_chain.length){(this||e)._nested_cursor=[h];(this||e)._nested_chain.pop()}if((this||e)._animation_promise)return(this||e)._animation_promise.then((function(){return a.render.apply(a,o)}));for(l=0;l<(this||e)._nested_cursor.length;l++)(this||e).data.getItem((this||e)._nested_cursor[l]).$template="";(this||e)._nested_cursor.length||((this||e)._nested_cursor=(this||e).data.branch[0]);(this||e).data.order=_to_array([].concat((this||e)._nested_chain).concat((this||e)._nested_cursor));if(this.callEvent("onBeforeRender",[(this||e).data])){if(!(this||e)._no_animation&&(this||e)._dataobj.innerHTML&&(this||e)._settings.animate&&(this||e)._prev_nested_chain_length!=(this||e)._nested_chain.length){if(this.callEvent("onBeforeRender",[(this||e).data])){(this||e)._back_scroll_states||((this||e)._back_scroll_states=[]);var _=(this||e)._dataobj.cloneNode(false);_.innerHTML=(this||e).data.getRange().map((this||e)._toHTML,this||e).join("");var c=i.extend({},(this||e)._settings.animate);c.direction=(this||e)._is_level_down?"left":"right";var d=[clone(c),clone(c)];var u;(this||e)._is_level_down?(this||e)._back_scroll_states.push(this.getScrollState()):u=(this||e)._back_scroll_states.pop();var f=animate.formLine(_,(this||e)._dataobj,c);c.master=this||e;c.callback=function(){(this||e)._dataobj=_;(this||e)._is_level_down?this.scrollTo(0,0):u&&this.scrollTo(0,u.y);animate.breakLine(f);c.master=c.callback=null;(this||e)._htmlmap=(this||e)._animation_promise=null;c.wait_animation.resolve();this.callEvent("onAfterRender",[])};animate(f,d);(this||e)._animation_promise=c.wait_animation=Deferred.defer()}}else{if(s&&"delete"!==r&&-1===(this||e).data.getIndexById(s))return;Se.render.apply(this||e,arguments)}(this||e)._prev_nested_chain_length=(this||e)._nested_chain.length}},templateBack_setter:function(i){(this||e).type.templateBack=template(i)},templateItem_setter:function(i){(this||e).type.templateItem=template(i)},templateGroup_setter:function(i){(this||e).type.templateGroup=template(i)},type:{template:function(e,i){return e.$count?i.templateGroup(e,i):i.templateItem(e,i)},css:"group",classname:function(e,i,s){return"webix_list_item webix_"+(e.$count?"group":"item")+(e.$template?"_back":"")+(s&&s.webix_selected?" webix_selected":"")+(i.css?" "+i.css:"")+(e.$css?" "+e.$css:"")},templateStart:template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()};  overflow:hidden;" {common.aria()}>'),templateBack:template("#value#"),templateItem:template("#value#"),templateGroup:template("#value#"),templateEnd:function(e){var i="";e.$count&&(i+="<div class='webix_arrow_icon'></div>");i+="</div>";return i}},showItem:function(i){var s=(this||e).data.getIndexById(i);-1===s&&this.setOpenState(i);Se.showItem.call(this||e,i)}};var Ln=i.protoUI(Dn,de,rn.view);type(Ln,{});var Bn={name:"unitlist",_id:"webix_item_id",uniteBy_setter:template,render:function(i,s,n){var r=(this||e)._settings;if(this.isVisible(r.id)&&r.uniteBy){if(i){var a=this.getItemNode(i);if(a&&"update"==n&&(this||e)._settings.uniteBy.call(this||e,s)==this.getItem(i).$unitValue){var o=(this||e)._htmlmap[i]=this._toHTMLObject(s);insertBefore(o,a);remove(a);return}}if(this.callEvent("onBeforeRender",[(this||e).data])){(this||e).units=null;this._setUnits();if((this||e).units){this.callEvent("onUnits",[]);(this||e)._dataobj.innerHTML=this._getUnitRange().map((this||e)._toHTML,this||e).join("");(this||e)._htmlmap=null}this.callEvent("onAfterRender",[])}}},getUnits:function(){var i=[];if((this||e).units)for(var s in(this||e).units)i.push(s);return i},getUnitList:function(i){return(this||e).units?(this||e).units[i]:null},_toHTML:function(i){var s=(this||e).data._marks[i.id];assert(!i.$template||(this||e).type["template"+i.$template],"RenderStack :: Unknown template: "+i.$template);this.callEvent("onItemRender",[i]);return i.$unit?(this||e).type.templateStartHeader(i,(this||e).type)+(this||e).type.templateHeader.call(this||e,i.$unit)+(this||e).type.templateEnd(i,(this||e).type):(this||e).type.templateStart(i,(this||e).type,s)+(i.$template?(this||e).type["template"+i.$template]:(this||e).type.template)(i,(this||e).type)+(this||e).type.templateEnd(i,(this||e).type)},_getUnitRange:function(){var i=[];var s=(this||e).data.$min||0;var n=(this||e).data.$max||Infinity;var r=0;for(var a in(this||e).units){i.push({$unit:a});var o=(this||e).units[a];for(var l=0;l<o.length;l++){r==s&&(i=[{$unit:a}]);i.push(this.getItem(o[l]));if(r==n)return _to_array(i);r++}}return _to_array(i)},_setUnits:function(){var i=this||e;(this||e).units={};(this||e).data.each((function(s){var n=i._settings.uniteBy.call(this||e,s);s.$unitValue=n;i.units[n]||(i.units[n]=[]);i.units[n].push(s.id)}))},type:{headerHeight:20,classname:function(e,i,s){var n="webix_list_item";i.css&&(n+=" webix_list_"+i.css+"_item");s&&s.$css&&(n+=" "+s.$css);if(e.$css){"object"==_typeof(e.$css)&&(e.$css=createCss(e.$css));n+=" "+e.$css}return n},templateHeader:function(e){return"<span class='webix_unit_header_inner'>"+e+"</span>"},templateStart:function(i,s,n){if(i.$unit)return s.templateStartHeader.apply(this||e,arguments);var r="width:"+s.widthSize(i,s,n)+"; height:"+s.heightSize(i,s,n)+"; overflow:hidden;"+(s.layout&&"x"==s.layout?"float:left;":"");return'<div webix_item_id="'+i.id+'" class="'+s.classname(i,s,n)+'" style="'+r+'" '+s.aria(i,s,n)+">"},templateStartHeader:function(e,i,s){var n="webix_unit_header"+(i.css?" webix_unit_header_"+i.css+"_item":"");var r="width:"+i.widthSize(e,i,s)+"; height:"+i.headerHeight+"px; overflow:hidden;";return'<div webix_unit_id="'+e.$unit+'" class="'+n+'" style="'+r+'">'}},$skin:function(){rn.api.$skin.call(this||e);(this||e).type.headerHeight=Ht.unitHeaderHeight}};i.protoUI(Bn,rn.view);u.dbllist={selectAll:"<span class='webix_icon wxi-angle-double-right'></span>",selectOne:"<span class='webix_icon wxi-angle-right'></span>",deselectAll:"<span class='webix_icon wxi-angle-double-left'></span>",deselectOne:"<span class='webix_icon wxi-angle-left'></span>"};var Fn={name:"dbllist",defaults:{borderless:true},$init:function(){(this||e)._moved={};(this||e)._inRight=bind((function(i){return(this||e)._moved[i.id]}),this||e);(this||e)._inLeft=bind((function(i){return!(this||e)._moved[i.id]}),this||e);(this||e).$view.className+=" webix_dbllist";(this||e).$ready.unshift((this||e)._setLayout)},$onLoad:function(i,s){var n=this.$$("left");var r=this.$$("right");this._updateAndResize((function(){n.data.driver=s;n.parse(i);r.data.driver=s;r.parse(i)}));(this||e)._data_ready=true;this._refresh();return true},_getButtons:function(){if(false===(this||e)._settings.buttons)return{width:10};var i=u.dbllist;var s=[this._getButton("deselect_all",i.deselectAll),this._getButton("select_all",i.selectAll),this._getButton("deselect_one",i.deselectOne),this._getButton("select_one",i.selectOne)];s={width:120,template:s.join(""),onClick:{dbllist_button:function(e,i,s){this.getTopParentView()._update_list(s.getAttribute("action"))}}};(this||e)._settings.buttons&&(s.template=(this||e)._settings.buttons);return s},_getButton:function(e,i){return"<button class='dbllist_button' action='"+e+"'>"+i+"</button>"},_getList:function(s,n,r,a){var o={view:"list",select:"multiselect",multiselect:"touch",id:s,action:n,drag:true,type:{margin:3,id:s},on:{onBeforeDrop:function(e){var i=e.from;var s=e.to;var n=i.getTopParentView();if(n===this.getTopParentView()){var r="select_one"!=s._settings.action;n.select(e.source,r)}return false},onItemDblClick:function(){return this.getTopParentView()._update_list((this||e).config.action)}}};(this||e)._settings.list&&i.extend(o,(this||e)._settings.list,true);r&&(o={rows:[{view:"label",label:r,css:"webix_inp_top_label"},o]});return a?{rows:[o,{view:"label",height:20,label:a,css:"bottom_label"}]}:o},_setLayout:function(){var i=[{margin:10,type:"clean",cols:[this._getList("left","select_one",(this||e)._settings.labelLeft,(this||e)._settings.labelBottomLeft),this._getButtons(),this._getList("right","deselect_one",(this||e)._settings.labelRight,(this||e)._settings.labelBottomRight)]}];this.cols_setter(i)},_update_list:function(i){var s=this||e;var n=null;var r=false;if("select_all"===i){n=s.$$("left").data.order;r=true}else if("select_one"===i){n=s.$$("left").getSelectedId(true);r=true}else if("deselect_all"===i){n=s.$$("right").data.order;r=false}else if("deselect_one"===i){n=s.$$("right").getSelectedId(true);r=false}s.select(n,r)},select:function(i,s){var n;"object"!==_typeof(i)&&(i=[i]);if(s)for(n=0;n<i.length;n++)(this||e)._moved[i[n]]=true;else for(n=0;n<i.length;n++)delete(this||e)._moved[i[n]];this._refresh();this.callEvent("onChange",[])},_updateAndResize:function(i,s){freeze(bind(i,this||e),false);s&&(this.$$("left")._settings.autoheight||this.$$("right")._settings.autoheight)&&this.resize()},_refresh:function(){var i=this.$$("left");var s=this.$$("right");i&&this._updateAndResize((function(){i.filter((this||e)._inLeft);s.filter((this||e)._inRight)}),true)},focus:function(){if(!ht.canFocus(this||e))return false;ht.setFocus(this||e)},value_setter:function(e){this.setValue(e)},setValue:function(i){(this||e)._moved={};if(i){"object"!==_typeof(i)&&(i=i.toString().split(","));for(var s=0;s<i.length;s++)(this||e)._moved[i[s]]=true}this._refresh()},getValue:function(){var i=[];var s=this.$$("left");for(var n in(this||e)._moved)(this||e)._data_ready&&!s.data.pull[n]||i.push(n);return i.join(",")}};i.protoUI(Fn,L,ge,Vi.view);var Rn={name:"tree",defaults:{scroll:"auto",navigation:true},$init:function(){(this||e)._viewobj.className+=" webix_tree";i.extend((this||e).data,Fe,true);i.extend((this||e).on_click,Ve);(this||e).data.provideApi(this||e,true);(this||e)._viewobj.setAttribute("role","tree")},_id:"webix_tm_id",on_context:{},on_dblclick:{webix_tree_checkbox:function(){if((this||e).on_click.webix_tree_checkbox)return(this||e).on_click.webix_tree_checkbox.apply(this||e,arguments)}},$fixEditor:function(i){var s=this.getItemNode(i.id).querySelector("span");if(s){""===s.innerHTML&&(s.innerHTML="&nbsp;");var n=10;var r=s.offsetLeft;i.node.style.width=(this||e).$view.scrollWidth-r-n+"px";i.node.style.marginLeft=r+"px";i.node.style.left="0px"}},on_click:{webix_tree_item:function(i,s){if((this||e)._settings.activeTitle){var n=this.getItem(s);n.open?this.close(s):this.open(s)}if((this||e)._settings.select)if("multiselect"==(this||e)._settings.select||(this||e)._settings.multiselect){var r=i.ctrlKey||i.metaKey||"touch"==(this||e)._settings.multiselect;if("level"==(this||e)._settings.multiselect&&(r||i.shiftKey)){var a=this.getSelectedId(true)[0];if(a&&this.getParentId(s)!=this.getParentId(a))return}this.select(s,false,r,i.shiftKey)}else this.select(s)}},_paste:{insert:function(e){var i=this.getSelectedId()||"0";this.add({value:e},null,i)},modify:function(e){var i=this.getSelectedId(true);for(var s=0;s<i.length;s++){this.getItem(i[s]).value=e;this.refresh(i[s])}},custom:function(){}},_drag_order_complex:true,$dragHTML:function(i,s,n){var r="<div class='webix_tree_item'>"+(this||e).type.template(i,(this||e).type)+"</div>";isArray(n.source)&&n.source.length>1&&(r=this._toMultipleHTML(r,n.source.length));return r},_close_branches:function(e){var i=e.source;for(var s=0;s<i.length;s++)this.close(i[s])},_set_drop_area:function(e,i){var s=this.getItemNode(e);s?s.parentNode.insertBefore(Nt._dropHTML[0],s):i.children[0].children[0].appendChild(Nt._dropHTML[0])},type:i.extend({template:function(i,s){var n=s["template"+i.level]||s.templateCommon;return n.apply(this||e,arguments)},classname:function(e,i,s){var n="webix_tree_item";if(e.$css){"object"==_typeof(e.$css)&&(e.$css=createCss(e.$css));n+=" "+e.$css}s&&s.$css&&(n+=" "+s.$css);i.css&&(n+=" "+i.css);return n},aria:function(e,i,s){return'role="treeitem"'+(s&&s.webix_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')+(e.$count?'aria-expanded="'+(e.open?"true":"false")+'"':"")+'aria-level="'+e.$level+'"'},templateCommon:template("{common.icon()}{common.folder()}<span>#value#</span>"),templateStart:template('<div webix_tm_id="#id#" class="{common.classname()}" {common.aria()}>'),templateEnd:template("</div>"),templateCopy:template("#value#")},Oe)};var On=i.protoUI(Rn,Be,de,Pe,ne,De,Ce,ve,me,$e,Ne,en.view,Le,Xt,f);var Wn={api:Rn,view:On};type(On,{name:"lineTree",css:"webix_line_tree",icon:function(e,i){var s="";var n="";for(var r=1;r<=e.$level;r++){r==e.$level&&(n=e.$count?e.open?"webix_tree_open ":"webix_tree_close ":"webix_tree_none ");var a=i._icon_src(e,i,r);a&&(s+="<div class='"+n+"webix_tree_img webix_tree_"+a+"'></div>")}return s},_icon_src:function(e,i,s){var n=i._tree_branch_render_state;var r=Le._obj;if(0===n&&r){var a=e.$level;var o=e.id;n=[];while(a){var l=r.getParentId(o);var h=r.data.branch[l];h[h.length-1]==o&&(n[a]=true);o=l;a--}i._tree_branch_render_state=n}if(!n)return 0;if(s==e.$level){var _=3;e.$parent||0===e.$index&&(_=4);n[e.$level]&&(_=2);return e.$count?e.open?"minus"+_:"plus"+_:"line"+_}return n[s]?"blank":"line1"}});var Un={name:"treemap",defaults:{activeItem:false,subRender:true,header:true,headerHeight:35,value:template("#value#"),headerTemplate:"",navigation:true},value_setter:template,headerTemplate_setter:template,header_setter:function(i){i&&true!==i&&((this||e).type.header=i);return i},$init:function(){(this||e).$view.className+=" webix_treemap";(this||e)._viewobj.setAttribute("role","tree");(this||e)._htmlElement=document.createElement("DIV");i.extend((this||e).data,Fe,true);(this||e).data.provideApi(this||e,true);(this||e).data.attachEvent("onClearAll",bind((function(){(this||e)._html="";(this||e).$values={};(this||e).$xy={}}),this||e));this.attachEvent("onKeyPress",(this||e)._onKeyPress)},_toHTMLItem:function(i){var s=(this||e).data._marks[i.id];this.callEvent("onItemRender",[i]);var n=i.$template?(this||e).type["template"+i.$template].call(this||e,i,(this||e).type,s):(this||e).type.template.call(this||e,i,(this||e).type,s);return(this||e).type.templateStart.call(this||e,i,(this||e).type,s)+n+(this||e).type.templateEnd.call(this||e)},_renderHeader:function(i){var s=this.getItem(i);var n=(this||e)._settings.headerHeight;var r="<div class='webix_treemap_header' style='height:"+n+"px;line-height:"+n+"px;'>";r+=(this||e).type.header.call(this||e,s,(this||e).type);r+="</div>";return r},_renderBranch:function(i){var s,n,r,a,o=[];if(!(this||e).$width||!this.count()){(this||e)._html="";return false}if(!i){i=(this||e).config.branch||0;(this||e)._html="";(this||e).$values={};(this||e).$xy={};(this||e).$xy[i]={width:(this||e).$width,height:(this||e).$height,top:0,left:0};if(i&&(this||e)._settings.header){(this||e).$xy[i].height-=(this||e)._settings.headerHeight;(this||e).$xy[i].top=(this||e)._settings.headerHeight;(this||e)._html+=this._renderHeader(i)}a=0;(this||e).data.each((function(i){var s=this.getParentId(i.id);if(!(this||e).data.branch[i.id]){r=1*(this||e).config.value.call(this||e,i);if(!isNaN(r)&&r){(this||e).$values[i.id]=r;a+=r;while(s){(this||e).$values[s]||((this||e).$values[s]=0);(this||e).$values[s]+=r;s=this.getParentId(s)}}}}),this||e,false,i)}(this||e).data.eachChild(i,(function(i){(this||e).$values[i.id]&&o.push(copy(i))}),this||e);a=a||(this||e).$values[i];if(o.length&&a){s=(this||e).$xy[i];n={top:s.top,left:s.left,dx:s.width,dy:s.height,set:[],sum:0};n.dim=Math.min(n.dx,n.dy);var l=n.dx*n.dy/a;for(var h=0;h<o.length;h++)o[h].$value=(this||e).$values[o[h].id]*l;o.sort((function(e,i){return e.$value>i.$value?-1:1}));var _=Infinity;var c=0;while(o[c]){var d=this._worst(n,o[c]);if(d<_){n.sum+=o[c].$value;n.set.push(o[c]);_=d;c++}else{this._renderRow(n);var u={top:n.top,left:n.left,dx:n.dx,dy:n.dy,set:[],sum:0};var f=n.sum/n.dim;if(n.dx>n.dy){u.left+=f;u.dx-=f}else{u.top+=f;u.dy-=f}n=u;n.dim=Math.min(n.dx,n.dy);_=Infinity}}}n&&this._renderRow(n)},_renderRow:function(i){var s,n,r,a,o=i.top,l=i.left;i.mode=i.dy<i.dx;i.contra=i.sum/i.dim;for(s=0;s<i.set.length;s++){n=i.set[s].id;if(i.mode){r=i.contra;a=i.set[s].$value/i.contra}else{r=i.set[s].$value/i.contra;a=i.contra}(this||e).$xy[n]={};(this||e).$xy[n].top=o;(this||e).$xy[n].left=l;i.mode?o+=a:l+=r;(this||e).$xy[n].width=r;(this||e).$xy[n].height=a;(this||e)._html+=this._toHTMLItem(this.getItem(n));(this||e)._settings.subRender&&(this||e).data.branch[n]&&this._renderBranch(n)}},_worst:function(e,i){var s=e.sum+i.$value;var n=s*s/(e.dim*e.dim*i.$value);e.set.length&&(n=Math.max(e.dim*e.dim*e.set[0].$value/(s*s),n));return n>1?n:1/n},_toHTMLObject:function(i){(this||e)._htmlElement.innerHTML=this._toHTMLItem(i);return(this||e)._htmlElement.firstChild},showBranch:function(i){(this||e)._settings.branch=i;this.refresh()},render:function(i,s,n){if(this.isVisible((this||e)._settings.id)&&!(this||e).$blockRender){if("update"==n){var r=this.getItemNode(i);if(r){var a=(this||e)._htmlmap[i]=this._toHTMLObject(s);insertBefore(a,r);remove(r)}}else if((this||e).data.branch&&(!(this||e)._settings.branch||(this||e).data.branch[(this||e)._settings.branch])){(this||e)._htmlmap=null;this.callEvent("onBeforeRender",[]);this._renderBranch();(this||e)._dataobj.innerHTML=(this||e)._html;this.callEvent("onAfterRender",[])}return true}},_id:"webix_dm_id",on_click:{webix_treemap_item:function(i,s){(this||e)._settings.select&&("multiselect"==(this||e)._settings.select||(this||e)._settings.multiselect?this.select(s,false,i.ctrlKey||i.metaKey||"touch"==(this||e)._settings.multiselect,i.shiftKey):this.select(s));(this||e)._settings.activeItem&&this.isBranch(s)&&this.showBranch(s)},webix_treemap_header_item:function(e){var i=locate(e,"webix_dm_header_id");this.define("branch",i);this.refresh()},webix_treemap_reset:function(){this.define("branch",0);this.refresh()}},on_dblclick:{},on_mouse_move:{},_getCssText:function(e){var i="";for(var s in e)i+=s+":"+e[s]+";";return i},type:{template:template("#value#"),header:function(i,s){var n=i.id;var r="<div role='button' tabindex='0' aria-label='"+u.aria.resetTreeMap+"' class='webix_treemap_reset'></div>";var a=[];while(n){i=this.getItem(n);a.push(s.headerItem.call(this||e,i,s));n=this.getParentId(n)}a.reverse();return r+a.join("<span class='webix_icon wxi-angle-right webix_treemap_path_icon'></span>")},headerItem:function(i){var s=(this||e).config.headerTemplate(i);var n='<a role="button" tabindex="0" aria-label="'+s+'" webix_dm_header_id="'+i.id+'" class="webix_treemap_header_item">';n+=s;n+="</a>";return n},classname:function(i,s,n){var r="webix_treemap_item";s.css&&(r+=" "+s.css);if(i.$css){"object"==_typeof(i.$css)&&(i.$css=createCss(i.$css));r+=" "+i.$css}var a=(this||e).$xy[i.id];n&&n.$css&&(r+=" "+n.$css);r+=" webix_treemap_level_"+this.getItem(i.id).$level;var o=this.getParentId(i.id);o&&o!=(this||e)._settings.branch||(r+=" webix_treemap_level_top");(this||e).$height-a.top-a.height<1&&(r+=" webix_treemap_item_bottom");(this||e).$width-a.left-a.width<1&&(r+=" webix_treemap_item_right");if(s.cssClass){var l=s.cssClass.call(this||e,i,s,n);l&&("object"==_typeof(l)?r+=" "+createCss(l):r+=" "+l)}return r},templateStart:function(i,s,n){var r="";if((this||e).$xy){var a=(this||e).$xy[i.id];r+="width: "+a.width+"px; height: "+a.height+"px;";r+="top: "+a.top+"px; left: "+a.left+"px;"}return'<div role="treeitem" aria-level="'+i.$level+'" '+(n&&n.webix_selected?'aria-selected="true" tabindex="0"':"")+' webix_dm_id="'+i.id+'" class="'+s.classname.call(this||e,i,s,n)+'" style="'+r+'">'},templateEnd:template("</div>")}};i.protoUI(Un,de,Pe,Ce,ve,me,$e,Ne,en.view,Le,Xt,f);var Yn={name:"dataview",$init:function(s){s.sizeToContent&&(this||e).$ready.unshift((this||e)._after_init_call);var n=s.type||s.item;var r=s.prerender||(this||e).defaults.prerender||n&&"auto"==n.width||"move"==s.drag||"order"==s.drag;r||s.autoheight||i.extend(this||e,qe,true);s.autoheight&&(s.scroll=false);if(n&&"tiles"==n.type){(this||e)._tilesPadding=n.padding||(this||e).type.padding;(this||e)._viewobj.firstChild.style.float="left";(this||e)._viewobj.firstChild.style.padding=(this||e)._tilesPadding/2+"px"}(this||e)._contentobj.className+=" webix_dataview";(this||e)._viewobj.setAttribute("role","listbox")},_after_init_call:function(){var i=create("DIV",0,(this||e).type.template({}));i.className="webix_dataview_item";i.style.position="absolute";document.body.appendChild(i);(this||e).type.width=i.offsetWidth+(this||e)._tilesPadding;(this||e).type.height=i.offsetHeight+(this||e)._tilesPadding;remove(i)},defaults:{scroll:true,datafetch:50,navigation:true},_id:"webix_l_id",_itemClassName:"webix_dataview_item",_tilesPadding:0,_drag_direction:"x",on_click:{webix_dataview_item:function(i,s){(this||e)._settings.select&&("multiselect"==(this||e)._settings.select||(this||e)._settings.multiselect?this.select(s,false,"touch"==(this||e)._settings.multiselect||i.ctrlKey||i.metaKey,i.shiftKey):this.select(s))}},on_dblclick:{},on_mouse_move:{},type:{template:template("#value#"),templateLoading:template("Loading..."),width:160,height:50,padding:8,classname:function(e,i,s){var n="webix_dataview_item";i.css&&(n+=" "+i.css);i.type&&(n+=" "+i.type);if(e.$css){"object"==_typeof(e.$css)&&(e.$css=createCss(e.$css));n+=" "+e.$css}s&&s.$css&&(n+=" "+s.$css);return n},aria:function(e,i,s){return'role="option"'+(s&&s.webix_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')},templateStart:function(e,i,s){var n=i.width,r=i.height;var a=0;if("tiles"==i.type){n-=i.padding;r-=i.padding;a=i.padding/2}return'<div webix_l_id="'+e.id+'" class="'+i.classname(e,i,s)+'" '+i.aria(e,i,s)+' style="margin:'+a+"px; width:"+n+"px; height:"+r+'px; float:left; overflow:hidden;">'},templateEnd:template("</div>")},$dropHTML:function(){var i=(this||e)._tilesPadding;return'<div class="webix_drop_area_inner" style="width:'.concat((this||e).type.width-i,"px; height:").concat((this||e).type.height-i,"px; margin:").concat(i/2,'px"></div>')},_calck_autoheight:function(i){return(this||e)._settings.height=(this||e).type.height*Math.ceil((this||e).data.count()/Math.floor(i/(this||e).type.width))},autoheight_setter:function(i){var s=this||e;if(i){(this||e).data.attachEvent("onStoreLoad",(function(){return s.resize()}));(this||e).data.attachEvent("onStoreUpdated",(function(e,i,n){e&&"add"!==n&&"delete"!==n||s._auto_resize()}));(this||e).data.attachEvent("onSyncApply",(function(){return s._auto_resize()}));(this||e)._contentobj.style.overflowY="hidden"}return i},_auto_resize:function(){(this||e)._settings.autoheight&&this.resize()},$getSize:function(i,s){(this||e)._settings.xCount&&"auto"!=(this||e).type.width&&!(this||e)._autowidth&&((this||e)._settings.width=(this||e).type.width*(this||e)._settings.xCount+(this||e)._tilesPadding+((this||e)._scroll_y?z.scrollSize:0));(this||e)._settings.yCount&&"auto"!=(this||e).type.height&&!(this||e)._autoheight&&((this||e)._settings.height=(this||e).type.height*(this||e)._settings.yCount+(this||e)._tilesPadding);var n=(this||e)._settings.width||(this||e)._content_width;if((this||e)._settings.autoheight&&n){this._recalk_counts();this._calck_autoheight(n);this.scroll_setter(false)}return St.api.$getSize.call(this||e,i,s)},_recalk_counts:function(){if((this||e)._settings.yCount&&((this||e)._autoheight||"auto"==(this||e).type.height)){(this||e).type.height=Math.floor(((this||e)._content_height-(this||e)._tilesPadding)/(this||e)._settings.yCount);(this||e)._autoheight=(this||e)._settings.yCount}if((this||e)._settings.xCount&&((this||e)._autowidth||"auto"==(this||e).type.width)){(this||e).type.width=Math.floor(((this||e)._content_width-(this||e)._tilesPadding)/(this||e)._settings.xCount);(this||e)._autowidth=(this||e)._settings.xCount}return(this||e)._autoheight||(this||e)._autowidth},$setSize:function(i,s){var n=(this||e)._settings;if(St.api.$setSize.call(this||e,i,s)){if(n.autoheight&&this._calck_autoheight()!=(this||e)._content_height)return delay((this||e).resize,this||e);(this._recalk_counts()||(this||e)._render_visible_rows)&&this.render()}else(n.yCount&&n.yCount!=(this||e)._autoheight||n.xCount&&n.xCount!=(this||e)._autowidth)&&this._recalk_counts()&&this.render()}};i.protoUI(Yn,Zt,ne,me,ve,Ce,$e,Gt,en.view);u.pager={first:"<span class='webix_icon wxi-angle-double-left'></span>",last:"<span class='webix_icon wxi-angle-double-right'></span>",next:"<span class='webix_icon wxi-angle-right'></span>",prev:"<span class='webix_icon wxi-angle-left'></span>"};var qn={defaults:{size:10,page:0,group:5,template:"{common.pages()}",maxWidth:1e5,height:30,borderless:true},name:"pager",on_click:{webix_pager_item:function(e,i){this.select(i)}},$init:function(i){(this||e).data=(this||e)._settings;(this||e)._dataobj=(this||e)._viewobj;(this||e)._viewobj.className+=" webix_pager"+(i.autowidth?" webix_pager_auto":"");false!==i.master&&0!==i.master||(this||e).$ready.push((this||e)._remove_master)},_remove_master:function(){this.refresh();(this||e).$master={refresh:function(){},select:function(){}}},select:function(i){if((this||e).$master&&"pager"==(this||e).$master.name)return(this||e).$master.select(i);switch(i){case"next":i=(this||e)._settings.page+1;break;case"prev":i=(this||e)._settings.page-1;break;case"first":i=0;break;case"last":i=(this||e)._settings.limit-1;break;default:break}i<0&&(i=0);i>=(this||e).data.limit&&(i=(this||e).data.limit-1);var s=(this||e).data.page;if(this.callEvent("onBeforePageChange",[i,s])){(this||e).data.page=1*i;(this||e).$master._scrollTop=0;this.refresh()&&((this||e)._settings.animate&&this._animate(s,1*i,(this||e)._settings.animate)||(this||e).$master.refresh());this.callEvent("onAfterPageChange",[i])}},_id:"webix_p_id",template_setter:template,type:{template:function(i,s){return i.template.call(this||e,i,s)},pages:function(e){var i="";if(-1==e.page)return"";e.$min=e.page-Math.round((e.group-1)/2);e.$max=e.$min+1*e.group-1;if(e.$min<0){e.$max+=-1*e.$min;e.$min=0}if(e.$max>=e.limit){e.$min-=Math.min(e.$min,e.$max-e.limit+1);e.$max=e.limit-1}for(var s=e.$min||0;s<=e.$max;s++)i+=this.button({id:s,index:s+1,selected:s==e.page?"_selected":"",label:u.aria.page+" "+(s+1)});return i},page:function(e){return e.page+1},first:function(){return this.button({id:"first",index:u.pager.first,selected:"",label:u.aria.pages[0]})},last:function(){return this.button({id:"last",index:u.pager.last,selected:"",label:u.aria.pages[3]})},prev:function(){return this.button({id:"prev",index:u.pager.prev,selected:"",label:u.aria.pages[1]})},next:function(){return this.button({id:"next",index:u.pager.next,selected:"",label:u.aria.pages[2]})},button:template("<button type='button' webix_p_id='{obj.id}' class='webix_pager_item{obj.selected}' aria-label='{obj.label}'>{obj.index}</button>")},clone:function(i){if(!i.$view){i.view="pager";i=ui(i)}(this||e)._clone=i;i.$master=this||e;this._refresh_clone()},refresh:function(){var i=(this||e)._settings;i.limit=Math.ceil(i.count/i.size)||1;var s=Math.min(i.limit-1,i.page);if(s!=i.page)return(this||e).$master.setPage(s);i.page=s;if(s>=0&&s!=i.old_page||i.limit!=i.old_limit||i.old_count!=i.count){this.render();this._refresh_clone();i.old_limit=i.limit;i.old_page=i.page;i.old_count=i.count;return true}},apiOnly_setter:function(i){return(this||e).$apiOnly=i},_refresh_clone:function(){if((this||e)._clone){(this||e)._clone._settings.count=(this||e)._settings.count;(this||e)._clone._settings.page=(this||e)._settings.page;(this||e)._clone.refresh()}},_animate:function(s,n,r){if(s==n)return false;if((this||e)._pgInAnimation){(this||e)._pgAnimateTimeout&&window.clearTimeout((this||e)._pgAnimateTimeout);return(this||e)._pgAnimateTimeout=delay((this||e)._animate,this||e,[s,n,r],100)}var a=n>s?"left":"right";"top"!=r.direction&&"bottom"!=r.direction||(a=n>s?"top":"bottom");r.flip&&(a="");var o=0;var l=(this||e).$master._dataobj;var h=!!(this||e).$master._body;if(h){l=(this||e).$master._body;o=l.offsetTop;addCss((this||e).$master.$view,"webix_animation")}var _=l.cloneNode(true);_.style.width=l.style.width="100%";(this||e).$master.refresh();insertBefore(_,l.nextSibling,l.parentNode);h&&(_.childNodes[1].scrollLeft=l.childNodes[1].scrollLeft);var c;var d=true!==r?r:{};var u=i.extend({direction:a,callback:bind((function(){u.callback=null;animate.breakLine(c);(this||e)._pgInAnimation=false;(this||e).$master._body&&removeCss((this||e).$master.$view,"webix_animation")}),this||e),top:o,keepViews:h},d);c=animate.formLine(l,_,u);animate([l,_],u);(this||e)._pgInAnimation=true}};i.protoUI(qn,me,$t,St.view,f);var Xn={name:"comments",defaults:{sendAction:"click",mode:"comments",highlight:true,maxInputHeight:84},$init:function(i){(this||e).$view.className+=" webix_comments";(this||e)._destroy_with_me=[];i.rows=[this.$configList(i)];i.moreButton||(i.moreButton=template(u.comments.moreComments));if(!i.readonly){i.rows.push(this.$configForm(i));this._initMenu()}z.mobile&&(i.keepButtonVisible=true);this._initUsers(i.users);(this||e).$ready.push((this||e)._afterInit)},$exportView:function(){return(this||e)._list},_afterInit:function(){var i=this||e;(this||e)._list=this.queryView("list");(this||e)._form=this.queryView("form");(this||e)._sendButton=this.queryView("button");(this||e)._input=this.queryView({localId:"textarea"});(this||e).config.mentions&&this._initMentions((this||e).config.mentions);(this||e)._list.data.provideApi(this||e,true);(this||e).serialize=function(){var e=i._list.serialize();var s=i.getIndexById("$more");s>=0&&e.splice(s,1);return e};if(!(this||e)._settings.readonly){(this||e)._clickHandler=attachEvent("onClick",(function(e){var s=$$(e);s==i._input?i.focus():s===i._sendButton||s===i._listMenu||i._userList&&s===i._userList.getList()||e&&-1!==(e.target.className||"").toString().indexOf("webix_comments_menu")||i._changeTextarea(false)}));this.attachEvent("onDestruct",(function(){detachEvent((this||e)._clickHandler)}));(this||e)._list.attachEvent("onAfterScroll",(function(){i._listMenu.hide()}))}},$onLoad:function(e,i){return this._fillList(e,i)},_fillList:function(i,s){var n=this||e;var r=(this||e)._list||this.queryView({view:"list"});r.data.driver=s;var a=false;if("function"==typeof i.serialize)i=i.serialize();else{a=i.more;i=s.getRecords(i)}if((this||e)._moreCall){(this||e)._moreCall=false;if(i.length){var o=r.data.order,l=1;if("chat"==(this||e)._settings.mode)r.data.order=_to_array([o[0]].concat(new Array(i.length),o.slice(1)));else{var h=r.getIndexById("$more");r.data.order=_to_array(o.slice(0,h).concat(new Array(i.length),o.slice(h)));l=h}r.parse({data:i,pos:l});a&&dp((this||e)._list).ignore((function(){n._list.updateItem("$more",{value:a})}));"chat"==(this||e)._settings.mode&&r.showItem(r.getIdByIndex(i.length))}i.length&&a||dp((this||e)._list).ignore((function(){n._list.remove("$more")}))}else{if(a&&!r.exists("$more")){a={id:"$more",value:a,$css:"webix_comments_more_item"};"chat"==(this||e)._settings.mode?i.unshift(a):i.push(a)}r.parse(i);"chat"==(this||e)._settings.mode&&r.waitData.then((function(){return r.showItem(r.getLastId())}))}return true},$skin:function(){Vi.api.$skin.call(this||e);(this||e)._inputHeight=Ht.inputHeight+6},getUsers:function(){return(this||e)._users},getMenu:function(){return(this||e)._listMenu},setCurrentUser:function(i,s){(this||e).config.currentUser=i;(this||e)._form.clear(s);(this||e)._list.refresh()},edit:function(i,s){if(!(this||e).config.readonly&&this.callEvent("onBeforeEditStart",[i])){this._changeTextarea(true);var n=(this||e)._list.getItem(i);(this||e)._form.setValues(n,false,s);(this||e)._form.focus();var r=(this||e)._form.elements.text.getInputNode();r.scrollTop=r.scrollHeight;setSelectionRange(r,n.text.length);this.callEvent("onAfterEditStart",[i])}},_saveComment:function(i){var s=(this||e)._form.getValues();if(s.text){if(s.id)this.updateItem(s.id,s);else{(this||e).config.currentUser&&(s.user_id=(this||e).config.currentUser);s.date=new Date;this.add(s);(this||e)._list.showItem(s.id)}(this||e)._form.clear("user");i&&((this||e)._input.getInputNode().value="")}},_removeComment:function(i){(this||e)._form.getValues().id==i&&(this||e)._form.clear("user");this.remove(i)},_changeTextarea:function(i){if(i!==(this||e)._text_expanded){var s=(this||e)._settings;if(i){(this||e)._sendButton.getParentView().show();(this||e)._input.define({height:s.maxInputHeight})}else{ht.hasFocus((this||e)._sendButton)&&ht.setFocus((this||e)._list);s.keepButtonVisible||(this||e)._sendButton.getParentView().hide();(this||e)._input.define({height:s.minInputHeight||(this||e)._inputHeight})}(this||e)._input.resize();(this||e)._text_expanded=i}},focus:function(){var i=this||e;this._changeTextarea(true);delay((function(){i._input.focus()}))},_toggleButton:function(i){i||(i=(this||e)._input.getValue());i&&!(this||e)._sendButton.isEnabled()?(this||e)._sendButton.enable():!i&&(this||e)._sendButton.isEnabled()&&(this||e)._sendButton.disable()},_initMenu:function(){var i=this||e;(this||e)._listMenu=ui({view:"contextmenu",autowidth:true,point:false,data:[{id:"edit",icon:"wxi-pencil",value:u.comments.edit},{id:"remove",icon:"wxi-trash",value:u.comments.remove}],on:{onShow:function(){var e=i._listMenu.getContext();i._list.addCss(e.id,"active_menu")},onHide:function(){var e=i._listMenu.getContext();i._list.removeCss(e.id,"active_menu")},onItemClick:function(e){var s=i._listMenu.getContext();i.callEvent("onBeforeMenuAction",[e,s.id])&&("edit"==e?i.edit(s.id,"user"):"remove"==e&&(u.comments.confirmMessage?confirm({text:u.comments.confirmMessage,callback:function(e){e&&i._removeComment(s.id)}}):i._removeComment(s.id)))}}});(this||e)._destroy_with_me.push((this||e)._listMenu)},$configForm:function(s){var n=this||e;var r=u.comments;var a={view:"textarea",localId:"textarea",css:"webix_comments_textarea",height:s.minInputHeight||(this||e)._inputHeight,name:"text",placeholder:r.placeholder,keyPressTimeout:100,on:{onTimedKeyPress:function(){n._toggleButton()},onChange:function(e){n._toggleButton(e)},onKeyPress:function(e,i){if(13==e){var s=n._settings.sendAction,r=i.shiftKey;if("enter"==s&&!r||"enter"!==s&&r){preventEvent(i);n._saveComment(true)}}}}};false!==s.highlight&&i.extend(a,{view:"texthighlight",type:"textarea",highlight:function(e){return n._highlightMention(template.escape(e),true)}},true);var o={view:"form",minHeight:50,paddingX:10,elements:[a,{hidden:!s.keepButtonVisible,cols:[{},{view:"button",disabled:true,css:"webix_comments_send webix_primary",value:r.send,autowidth:true,click:function(){n._saveComment()}}]}]};return o},_highlightMention:function(i,s){var n=this||e;if(-1===i.indexOf("@"))return i;var r;"users"===(this||e)._settings.highlight&&(r=(this||e)._userList&&(this||e)._userList._settings.textValue||"value");var a=s?(this||e)._markedText:(this||e)._markedHTML;return i.replace(a,(function(e,i,a,o){return n._wrapName(e,o||i,r,s)}))},_wrapName:function(i,s,n,r){return n&&!(this||e)._users.find((function(e){return e[n]==s}),true)?i:'<span class="webix_comments_mention">'.concat(r?i:"@"+s,"</span>")},$configList:function(s){var n=this||e;var r="webix_comments_";var a={height:"auto",templateStatus:function(e){return"<span class = '"+r+"status "+e.status+"'></span>"},templateUser:function(e){var i=n.getUsers();var s=i&&i.exists(e.user_id)?i.getItem(e.user_id):{};var a="<span class = '"+r+"name'>"+(s.value||"")+"</span>";return a},templateMenu:function(){return n.config.readonly?"":"<span class='webix_icon wxi-dots "+r+"menu'></span>"},templateDate:function(e){var i=ii.dateToStr("%d %M, %H:%i");return e.date?"<span class='"+r+"date'>"+i(e.date)+"</span>":""},templateLinks:function(e){var i=e.text.replace(/(https?:\/\/[^\s]+)/g,(function(e){e=template.escape(e);var i="<a target='_blank' href='"+e+"'>";e.match(/.(jpg|jpeg|png|gif)$/)?i+="<img class='webix_comments_image' src='"+e+"'/>":i+=e;return i+"</a>"}));return i},templateMentioned:function(e){var i=e.text;n._settings.mentions&&n._settings.highlight&&(i=n._highlightMention(e.text));return i},templateText:function(e){return"<div class = '"+r+"message'>"+e.text+"</div>"},templateAvatar:function(e,i){var s="<div class='"+r+"avatar'>";var a=n.getUsers();var o=a&&a.exists(e.user_id)?a.getItem(e.user_id):{};o.status&&(s+=i.templateStatus(o));s+="<div class='"+r+"avatar_image ";if(o.image)s+="'><img src = '"+o.image+"' class='"+r+"photo'>";else{var l=o.value?o.value[0].toUpperCase():"<span class='webix_icon wxi-user'></span>";s+=r+"avatar_text'>"+l}s+="</div></div>";return s},template:function(e,i){var s;if("$more"==e.id)s="<div class='webix_comments_more'>"+n._settings.moreButton(e)+"</div>";else{e=copy(e);var r=i.templateAvatar(e,i);var a=i.templateUser(e,i);var o=i.templateDate(e,i);var l=i.templateMenu(e,i);e.text=i.templateMentioned(e);e.text=i.templateLinks(e);var h=i.templateText(e,i);s=r+a+l+o+h}return s},classname:function(e,i,s){var r=rn.api.type.classname(e,i,s);(e.user_id&&e.user_id==n._settings.currentUser||!n._users.count())&&(r+=" webix_comments_current");return r}};a=i.extend(a,s.listItem||{},true);var o={$init:function(e){e.date&&(e.date=u.parseFormatDate(e.date))}};s.scheme&&Object.keys(s.scheme).forEach((function(e){o[e]=s.scheme[e]}));var l={view:"list",navigation:false,type:a,scheme:o,onClick:{webix_comments_menu:function(e,i){if(n._listMenu.isVisible())n._listMenu.hide();else{n._listMenu.setContext({obj:n,id:i});n._listMenu.show(e.target,a.menuPosition||{pos:"left",y:30,x:10})}},webix_comments_more:function(){if(n.config.url&&n.callEvent("onDataRequest",[])){n._moreCall=true;var e=n._list.getItem("$more").value;var i="chat"==n._settings.mode?e:n._list.getIndexById("$more");var s=proxy$5.$parse(n.config.url);var r={error:function(){n._moreCall=false}};"string"==typeof s&&(s=s+(s.indexOf("?")<0?"?":"&")+"pos="+i+"&more="+e);n.load(s,r,{pos:i,more:e})}}}};s.save&&(l.save=s.save);return l},_initUsers:function(i){var s=this||e;if(i&&i.getItem)(this||e)._users=i;else{(this||e)._users=new Ss;(this||e)._destroy_with_me.push((this||e)._users);i&&"string"===typeof i?(this||e)._users.load(i):(this||e)._users.parse(i||[])}(this||e)._users.data.attachEvent("onStoreUpdated",(function(){return s._list.refresh()}))},_initMentions:function(i){var s=this||e;var n=(this||e).config.readonly;n||this._initUserList(i);if((this||e).config.highlight){n||((this||e)._markedText=new RegExp("@((&quot;(.*?)&quot;)|([^\\s]{1,}))","g"));(this||e)._markedHTML=new RegExp('@(("(.*?)")|([^\\s]{1,}))',"g")}Deferred.all([(this||e)._list.waitData,(this||e)._users.waitData]).then((function(){s._list.refresh()}));(this||e)._list.data.attachEvent("onStoreUpdated",(function(e,i,n){!e||"add"!==n&&"update"!==n||s._findMentioned(i)}))},_initUserList:function(s){var n="object"!=_typeof(s)?{}:s;"object"!==_typeof(n.body)?n.body={data:(this||e)._users}:n.body.data=(this||e)._users;i.extend(n,{view:"mentionsuggest"},true);var r=(this||e)._input.define("suggest",n);(this||e)._input.setValueHere=function(i,s,n){-1!=i.indexOf(" ")&&(i='"'.concat(i,'"'));return ys.api.setValueHere.apply(this||e,[i,s,n])};(this||e)._userList=$$(r)},_findMentioned:function(i){var s=this||e;if(-1!=i.text.indexOf("@")){var n=(this||e)._userList&&(this||e)._userList._settings.textValue||"value";var r={};i.text.replace((this||e)._markedHTML,(function(e,a,o,l){var h=l||a;var _=s._users.find((function(e){return e[n]==h}),true);if(_&&!r[h]){s.callEvent("onUserMentioned",[_.id,i.id]);r[h]=true}return e}))}}};i.protoUI(Xn,L,Vi.view);var Gn={name:"timeline",defaults:{scroll:"auto"},$init:function(i){var s=this||e;var n="x"===i.layout;if(n){var r=i.type;(this||e).type.type=r&&r.type||"top";isUndefined(i.scroll)&&(i.scroll="x")}(this||e)._viewobj.className+=n?" webix_timeline_horizontal":" webix_timeline";(this||e).$blockRender=true;(this||e).data.provideApi(this||e,true);(this||e).data.attachEvent("onStoreUpdated",(function(e,i,n){return s.render(e,i,n)}))},_id:"webix_tl_id",on_click:{},$setSize:function(i,s){(this||e).$blockRender=false;wt.api.$setSize.call(this||e,i,s)&&this.refresh()},render:function(i,s,n){if(this.isVisible((this||e)._settings.id)&&!(this||e).$blockRender){if("update"==n){var r=this.getItemNode(i);var a=(this||e)._htmlmap[i]=this._toHTMLObject(s);insertBefore(a,r);remove(r);return true}if(this.callEvent("onBeforeRender",[(this||e).data])){(this||e)._htmlmap=null;(this||e)._dataobj.innerHTML=(this||e).data.getRange().map((this||e)._toHTML,this||e).join("");this.callEvent("onAfterRender",[])}return true}},_toHTML:function(i){this.callEvent("onItemRender",[i]);var s=this.getIndexById(i.id);return(this||e).type.templateStart.call(this||e,i,(this||e).type,s)+(this||e).type.template.call(this||e,i,(this||e).type,s)+(this||e).type.templateEnd.call(this||e)},type:{type:"left",classname:function(i,s,n){var r="webix_timeline_item";"alternate"!==s.type?r+="  webix_timeline_"+s.type:"x"==(this||e)._settings.layout?r+=" webix_timeline_"+(n%2?"bottom":"top"):r+=" webix_timeline_"+(n%2?"right":"left");s.css&&(r+=" "+s.css);if(i.$css){"object"==_typeof(i.$css)&&(i.$css=createCss(i.$css));r+=" "+i.$css}return r},lineColor:function(e){return e.color},templateValue:template("#value#"),templateDetails:function(e){return e.details||""},templateDate:function(e){var i=ii.dateToStr("%d %M, %Y");return i(e.date)},template:function(i,s,n){var r=Ht.dataPadding;var a=6,o=2;var l="string"==typeof s.lineColor?s.lineColor:s.lineColor(i,s);var h="stroke-width:".concat(o,"px; stroke:").concat(l||Ht.timelineColor,";");var _=s.type;var c=n+1==this.count();var d=a+o/2;var u=2*a+o;var f=u/2+7;var g,v,p,m,b,w,x,y,S="position:relative;",$="",C="";var k=s.templateDate(i,s);var I=s.templateDetails(i,s);var M='<div class="webix_timeline_value">'.concat(s.templateValue(i,s),"</div>\n\t\t\t\t").concat(I?'<div class="webix_timeline_details">'.concat(I,"</div>"):"");if("x"==(this||e)._settings.layout){var T=(this||e).$height-2*r;var E=Ht.listItemHeight;var A=r,H=T-E-f,j=E+f+r,P="top";if("bottom"==_){E=T-E;A=E+f+r;j=T-E+r+f;P="bottom"}else if("alternate"==_){E=Math.round(.5*T);H=E-f;A=E-f+r-20,j=E+f+r;if(n%2){A=j;P="bottom"}}var V=i.$width||s.width;"auto"==V&&(V=this._getTextSize([{text:M,css:"webix_timeline_event",height:H},{text:k,css:"webix_timeline_date"}]).width+r);$="top:".concat(A,"px;");C="".concat(P,":").concat(j,"px; height:auto; max-height:").concat(H,"px; width:inherit;");g=V;v=E+u;S+="left:1px;";m=E;p=d+a;w=E;b="100%";y=E;x=d}else{var N=(this||e)._settings.scroll?z.scrollSize:0;var D=(this||e).$width-2*r-N;var L=Math.floor(.35*D);var B=r,F=Math.floor(.65*D)-f;var R=L+f+r,O=L-f;if("right"==_){L=D-R+f+r;B=L+f+r;R=r}else if("alternate"==_){L=Math.floor(.5*D);R=L+f+r;O=F=L-f;if(n%2){B=R;R=r}}var W=i.$height||s.height;"auto"==W&&(W=this._getTextSize([{text:M,css:"webix_timeline_event",width:F},{text:k,css:"webix_timeline_date",width:O}]).height+r);$="left:".concat(B,"px; width:").concat(O,"px;");C="left:".concat(R,"px; width:").concat(F,"px; height:").concat(W-r,"px;");g=L+u;v=W;S+="top:3px;";p=L;m=d+a;b=L;w="100%";x=L;y=d}return'<div style="'.concat($,'" class="webix_timeline_date">').concat(k,'</div>\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="').concat(g,'px" height="').concat(v,'px" style="').concat(S,'">\n\t\t\t\t\t\t').concat(c?"":'<line x1="'.concat(p,'" y1="').concat(m,'" x2="').concat(b,'" y2="').concat(w,'" class="webix_timeline_node" style="').concat(h,'"/>'),'\n\t\t\t\t\t\t<circle cx="').concat(x,'" cy="').concat(y,'" r="').concat(a,'" class="webix_timeline_node webix_timeline_point" style="').concat(h,' fill:transparent;" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t<div class="webix_timeline_event" style="').concat(C,'">\n\t\t\t\t\t\t').concat(M,"\n\t\t\t\t\t</div>")},widthSize:function(e,i){var s=e.$width||i.width;return s+(s>-1?"px":"")},heightSize:function(e,i){var s=e.$height||i.height;return s+(s>-1?"px":"")},templateStart:function(i,s,n){return"x"==(this||e)._settings.layout?"<div ".concat("webix_tl_id",'="',i.id,'" class="').concat(s.classname.call(this||e,i,s,n),'" style="width:').concat(s.widthSize(i,s),';">'):"<div ".concat("webix_tl_id",'="',i.id,'" class="').concat(s.classname.call(this||e,i,s,n),'" style="height:').concat(s.heightSize(i,s),';">')},templateEnd:template("</div>")},_getTextSize:function(e){var i=create("DIV");i.style.cssText="visibility:hidden;position:absolute;top:0px;left:0px;overflow:hidden;";document.body.appendChild(i);var s=0,n=0;for(var r=0;r<e.length;r++){i.className="webix_measure_size "+e[r].css;i.style.width=e[r].width?e[r].width+"px":"auto";i.style.height=e[r].height?e[r].height+"px":"auto";i.innerHTML=e[r].text;var a=i.getBoundingClientRect();s=Math.max(s,Math.ceil(a.width));n=Math.max(n,Math.ceil(a.height))}remove(i);return{width:s,height:n}},templateValue_setter:function(i){(this||e).type.templateValue=template(i)},templateDetails_setter:function(i){(this||e).type.templateDetails=template(i)},templateDate_setter:function(i){(this||e).type.templateDate=template(i)},$skin:function(){(this||e).type.height=Ht.timelineItemHeight;(this||e).type.width=3*Ht.timelineItemHeight}};i.protoUI(Gn,$e,Se,ie,me,f,kt,wt.view);var Kn={name:"menu",_listClassName:"webix_menu",$init:function(i){if(i.autowidth){(this||e)._autowidth_submenu=true;delete i.autowidth}this._init_mouse_events();(this||e).data.attachEvent("onStoreUpdated",bind((function(){this._hide_sub_menu()}),this||e));this.attachEvent("onItemClick",(function(i,s,n){var r=this.getItem(i);if(r){if(r.$template)return;var a=this.getTopMenu();if(!a.callEvent("onMenuItemClick",[i,s,n])){s.showpopup=a._settings.id;return}(this||e)!=a&&a._call_onclick(i,s,n);if((this||e).type._submenu(r)||a._show_child_on_click){var o=s.pointerType&&"mouse"!==s.pointerType;(o||(this||e)===a&&"click"==a._settings.openAction)&&this._mouse_move_activation(i,n);s.showpopup=a._settings.id}else{a._hide_sub_menu(true);a._hide_on_item_click&&a.hide()}}}));this.attachEvent("onKeyPress",(function(e){if(9===e)this.getTopMenu()._hide_sub_menu();else if(13===e||32===e){var i,s=this.getSelectedId();s&&(i=this.getItemNode(s));i&&triggerEvent(i,"MouseEvent","click")}}));(this||e).data.attachEvent("onClearAll",(function(){(this||e)._hidden_items=[]}));(this||e).data._hidden_items=[];(this||e)._viewobj.setAttribute("role","menubar");(this||e)._destroy_with_me=[]},_init_mouse_events:function(){this.attachEvent("onMouseMove",(function(e,i,s){this._menu_was_activated()&&this._mouse_move_activation(e,s)}));this.attachEvent("onMouseOut",(function(i){this._menu_was_activated()&&"click"==(this||e)._settings.openAction||(this||e)._child_menu_active||i.relatedTarget&&(this||e).$view.contains(i.relatedTarget)||this._hide_sub_menu()}))},sizeToContent:function(){if("y"==(this||e)._settings.layout){var i=[];var s=false;(this||e).data.each((function(e){i.push(this._toHTML(e));e.submenu&&(s=true)}),this||e);(this||e).config.width=getTextSize(i,(this||e).$view.className).width+16+2+(s?15:0);this.resize()}else assert(false,"sizeToContent will work for vertical menu only")},getTopMenu:function(){var i=this||e;while(i._parent_menu)i=$$(i._parent_menu);return i},_auto_height_calc:function(i){(this||e)._settings.autoheight&&(i=this.count());var s=this.count(),n=0;for(var r=0;r<i;r++){var a=(this||e).data.pull[(this||e).data.order[r]];if(a&&"Separator"==a.$template){n+=4;(this||e)._settings.autoheight||i++}else n+=(this||e).type.height}this._onoff_scroll(i&&i<s,"y");return n},on_mouse_move:{},type:{_submenu:function(e){return e.submenu||e.data||e.item},css:"menu",width:"auto",aria:function(e,i,s){return'role="menuitem"'+(s&&s.webix_selected?' aria-selected="true" tabindex="0"':'tabindex="-1"')+(i._submenu(e)?'aria-haspopup="true"':"")+(e.disabled?' aria-disabled="true"  webix_disabled="true"':"")},templateStart:function(e,i,s){if("Separator"===e.$template||"Spacer"===e.$template)return'<div webix_l_id="#id#" role="separator" tabindex="-1" class="webix_context_'+e.$template.toLowerCase()+'">';var n=(e.href?" href='"+e.href+"' ":"")+(e.target?" target='"+e.target+"' ":"");return rn.api.type.templateStart(e,i,s).replace(/^<div/,"<a "+n)+(i._submenu(e)&&i.subsign?"<div class='webix_submenu_icon'></div>":"")},templateEnd:function(e){return"Separator"===e.$template||"Spacer"===e.$template?"</div>":"</a>"},templateSeparator:template("<div class='sep_line'></div>"),templateSpacer:template("<div></div>")},getMenu:function(i){if((this||e).data.pull[i])return this||e;for(var s in(this||e).data.pull){var n=this.getItem(s);if(n.submenu){var r=this._get_submenu(n).getMenu(i);if(r)return r}}},getSubMenu:function(e){var i=this.getMenu(e);var s=i.getItem(e);return s.submenu?i._get_submenu(s):null},getMenuItem:function(e){return this.getMenu(e).getItem(e)},_get_submenu:function(e){var i=$$(e.submenu);if(!i){e.submenu=this._create_sub_menu(e);i=$$(e.submenu)}return i},_menu_was_activated:function(){var e=this.getTopMenu();if("click"==e._settings.openAction){var i=e._open_sub_menu;return!(!i||!$$(i).isVisible())}return true},_mouse_move_activation:function(i,s){var n=this.getItem(i);if(n){(this||e)._child_menu_active=null;(this||e)._open_sub_menu&&n.submenu!=(this||e)._open_sub_menu&&this._hide_sub_menu(true);if((this||e).type._submenu(n)&&!(this||e).config.hidden){var r=this._get_submenu(n);if(!this.isItemEnabled(i))return;r.show(s,{pos:(this||e)._settings.subMenuPos});r._parent_menu=(this||e)._settings.id;(this||e)._open_sub_menu=n.submenu}}},disableItem:function(e){var i=this.getMenu(e);i&&i._set_item_disabled(e,true)},enableItem:function(e){var i=this.getMenu(e);i&&i._set_item_disabled(e,false)},isItemEnabled:function(e){var i=this.getMenu(e);if(i)return rn.api.isItemEnabled.apply(i,arguments)},_set_item_hidden:function(i,s){var n=(this||e).data;if(n._hidden_items[i]!=s){n._hidden_items[i]=s;n.filter((function(e){return!n._hidden_items[e.id]}));this.resize()}},hideItem:function(e){var i=this.getMenu(e);i&&i._set_item_hidden(e,true)},showItem:function(e){var i=this.getMenu(e);if(i){i._set_item_hidden(e,false);return rn.api.showItem.call(i,e)}},_hide_sub_menu:function(i){if((this||e)._open_sub_menu){var s=$$((this||e)._open_sub_menu);s._hide_sub_menu&&s._hide_sub_menu(i);if(i||!s._show_on_mouse_out){s.hide();(this||e)._open_sub_menu=null}}},_create_sub_menu:function(s){var n={view:"submenu",data:(this||e).type._submenu(s)};var r=this.getTopMenu()._settings.submenuConfig;r&&i.extend(n,r,true);var a=this.getMenuItem(s.id);a&&a.config&&i.extend(n,a.config,true);var o=ui(n);(this||e)._destroy_with_me.push(o);o._parent_menu=this||e;return o._settings.id},_skip_item:function(e,i,s){var n=this.getItem(e);if("Separator"==n.$template||"Spacer"==n.$template||!this.isItemEnabled(e)){e=this.getNextId(e,s)||null;return e&&e!=i?this._skip_item(e,i,s):i}return e},$skin:function(){rn.api.$skin.call(this||e);(this||e).type.height=Ht.menuHeight},defaults:{scroll:"",layout:"x",mouseEventDelay:100,subMenuPos:"bottom"}};var Jn=i.protoUI(Kn,rn.view);var Zn={api:Kn,view:Jn};var Qn={name:"submenu",$init:function(){(this||e)._body_cell=clone((this||e)._dummy_cell_interface);(this||e)._body_cell._view=this||e;this.attachEvent("onBeforeShow",(function(){this.getTopMenu()._autowidth_submenu&&(this||e).sizeToContent&&!this.isVisible()&&this.sizeToContent()}));(this||e)._dataobj.setAttribute("role","menu")},$skin:function(){Zn.api.$skin.call(this||e);Zi.api.$skin.call(this||e);(this||e).type.height=Ht.menuHeight},_init_mouse_events:function(){this.attachEvent("onMouseMove",(function(e,i,s){this._menu_was_activated()&&this._mouse_move_activation(e,s)}));this.attachEvent("onMouseOut",(function(i){"click"!=this.getTopMenu()._settings.openAction&&((this||e)._child_menu_active||(this||e)._show_on_mouse_out||!i.relatedTarget||(this||e).$view.contains(i.relatedTarget)||this.hide())}));this.attachEvent("onMouseMoving",(function(){(this||e)._parent_menu&&($$((this||e)._parent_menu)._child_menu_active=true)}))},_dummy_cell_interface:{$getSize:function(i,s){var n=1*(this||e)._view._settings.height;var r=1*(this||e)._view._settings.width;var a=Zn.api.$getSize.call((this||e)._view,i,s);(this||e)._view._settings.height=n;(this||e)._view._settings.width=r;return a},$setSize:function(i,s){(this||e)._view._settings.scroll&&((this||e)._view._bodyobj.style.height=s+"px")},destructor:function(){(this||e)._view=null}},body_setter:function(){},getChildViews:function(){return[]},defaults:{width:150,subMenuPos:"right",layout:"y",autoheight:true},type:{height:Ht.menuHeight,subsign:true}};var tr=i.protoUI(Qn,Zn.view,Zi.view);var er={api:Qn,view:tr};var ir={name:"sidemenu",defaults:{animate:true,position:"left",width:200,borderless:true},$init:function(){(this||e).$view.className+=" webix_sidemenu"},$skin:function(){Zi.api.$skin.call(this||e);(this||e).defaults.padding=0},position_setter:function(i){var s=(this||e)._settings.position;s&&removeCss((this||e).$view," webix_sidemenu_"+s);addCss((this||e).$view," webix_sidemenu_"+i);return i},$getSize:function(){var i=Wt.api.$getSize.apply(this||e,arguments);(this||e)._desired_sizes=i;return i},$setSize:function(i,s){St.api.$setSize.call(this||e,i,s);i=(this||e)._content_width-2*(this||e)._settings.padding;s=(this||e)._content_height-2*(this||e)._settings.padding;(this||e)._contentobj.style.padding=(this||e)._settings.padding+"px";(this||e)._headobj.style.display="none";(this||e)._bodyobj.style.height=s+"px";(this||e)._body_cell.$setSize(i,s)},show:function(){if(!this.callEvent("onBeforeShow",arguments))return false;(this||e)._settings.hidden=false;(this||e)._viewobj.style.zIndex=zIndex((this||e)._settings.zIndex);if((this||e)._settings.modal||(this||e)._modal){this._modal_set(true);(this||e)._modal=null}(this||e)._viewobj.style.display="block";this._render_hidden_views();(this||e)._settings.position&&this._setPosition();(this||e)._hide_timer=1;delay((function(){(this||e)._hide_timer=0}),this||e,[],z.fastClick?100:400);if((this||e).config.autofocus){(this||e)._prev_focus=ht.getFocus();ht.setFocus(this||e)}-1==J._popups.find(this||e)&&J._popups.push(this||e);this.callEvent("onShow",[])},_setPosition:function(i){var s,n,r,a,o,l=0,h=0,_={};(this||e).$view.style.position="fixed";r=document.documentElement.offsetWidth;a=document.documentElement.offsetHeight;s=(this||e)._desired_sizes[0]||r;n=(this||e)._desired_sizes[2]||a;assert(s&&n,"Attempt to show not rendered window");o=(this||e)._settings.position;if("top"==o)s=r;else if("right"==o){n=a;l=r-s}else if("bottom"==o){s=r;h=a-n}else n=a;_={left:l,top:h,width:s,height:n,maxWidth:r,maxHeight:a};"function"==typeof(this||e)._settings.state&&(this||e)._settings.state.call(this||e,_);(this||e)._state=_;this.$setSize(_.width,_.height);if("undefined"==typeof i&&(this||e)._settings.animate){removeCss((this||e).$view,"webix_animate",true);(this||e)._animate[(this||e)._settings.position].beforeShow.call(this||e,_);delay((function(){addCss((this||e).$view,"webix_animate",true)}),this||e,null,1);delay((function(){(this||e)._animate[(this||e)._settings.position].show.call(this||e,_)}),this||e,null,10)}else{"right"===(this||e)._settings.position&&(_.left=_.right?r-_.width-_.right:r-_.width);this.setPosition(_.left,_.top)}},_state:{},hidden_setter:function(e){e?this.hide():this.show();return!!e},_animate:{left:{beforeShow:function(i){(this||e).$view.style.left=-i.width+"px";(this||e).$view.style.top=i.top+"px"},show:function(i){(this||e).$view.style.left=i.left?i.left+"px":"0px"},hide:function(i){(this||e).$view.style.left=-i.width+"px"}},right:{beforeShow:function(i){(this||e).$view.style.left="auto";(this||e).$view.style.right=-i.width+"px";(this||e).$view.style.top=i.top+"px"},show:function(i){(this||e).$view.style.right=i.right?i.right+"px":"0px"},hide:function(i){(this||e).$view.style.right=-i.width+"px"}},top:{beforeShow:function(i){this.setPosition(i.left,i.top);(this||e).$view.style.height="0px";(this||e)._bodyobj.style.height="0px"},show:function(i){(this||e).$view.style.height=i.height+"px";(this||e)._bodyobj.style.height=i.height+"px"},hide:function(){(this||e).$view.style.height="0px";(this||e)._bodyobj.style.height="0px"}},bottom:{beforeShow:function(i){(this||e).$view.style.left=i.left+"px";(this||e).$view.style.top="auto";var s=void 0!=i.bottom?i.bottom:i.maxHeight-i.top-i.height;(this||e).$view.style.bottom=s+"px";(this||e).$view.style.height="0px"},show:function(i){(this||e).$view.style.height=i.height+"px"},hide:function(){(this||e).$view.style.height="0px"}}},_hiding_process:function(){var i=document.documentElement.offsetWidth;var s=document.documentElement.offsetHeight;if((this||e)._settings.animate&&i==(this||e)._state.maxWidth&&s==(this||e)._state.maxHeight){(this||e)._animate[(this||e)._settings.position].hide.call(this||e,(this||e)._state);var n=event$1((this||e).$view,z.transitionEnd,bind((function(){this._hide_callback();eventRemove(n)}),this||e))}else this._hide_callback()}};i.protoUI(ir,Zi.view);var sr={name:"sidebar",defaults:{type:"sideBar",activeTitle:true,select:true,scroll:false,collapsed:false,collapsedWidth:44,position:"left",width:250,mouseEventDelay:10},$skin:function(){(this||e).defaults.titleHeight=Ht.sidebarTitleHeight},$init:function(i){(this||e)._fullWidth=isUndefined(i.width)?(this||e).defaults.width:i.width;(this||e)._settings.width=i.width=i.collapsed?i.collapsedWidth||(this||e).defaults.collapsedWidth:(this||e)._fullWidth;(this||e).$view.className+=" webix_sidebar";(this||e).$ready.push((this||e)._initSidebar);(this||e).$ready.push((this||e)._initContextMenu);(this||e).data._scheme_init=function(e){e.data?e.menu=copy(e.data):e.item&&(e.menu=copy(e.item.length?e.item:[e.item]))};i.multiselect=false},on_context:{},on_mouse_move:{},_initSidebar:function(){this.attachEvent("onBeforeOpen",(function(i){if(!(this||e).config.multipleOpen){var s=this.getOpenItems();for(var n=0;n<s.length;n++)this.getParentId(i)==this.getParentId(s[n])&&this.close(s[n])}return!(this||e).config.collapsed}));this.attachEvent("onItemClick",(function(e,i,s){var n=this.getPopup();n&&!n.config.hidden&&(i.showpopup=n.config.id);i.pointerType&&"mouse"!==i.pointerType&&this._showPopup(e,s)}));this.attachEvent("onBeforeSelect",(function(e){if(!this.getItem(e).$count){this.clearCss("webix_sidebar_selected");return true}return false}));this.attachEvent("onAfterSelect",(function(i){this._markMenu(this||e,i,!Ht.sidebarMarkAll);this.getPopup()._onMasterSelect(i)}));this.attachEvent("onAfterUnSelect",(function(){this.clearCss("webix_sidebar_selected")}));this.attachEvent("onMouseMove",(function(e,i,s){this._showPopup(e,s)}));this.attachEvent("onMouseOut",(function(){(this||e).config.collapsed&&(this.getPopup().masterId=null)}))},_showPopup:function(i,s){if((this||e).config.collapsed){var n=this.getPopup();if(n){this._updateTitle(i,n);this._updateList(i,n);n.masterId=i;n.show(s,{x:"left"==(this||e).config.position?(this||e).config.collapsedWidth:-n.config.width,y:-1})}}},_updateTitle:function(e,i){var s=i.getBody().getChildViews()[0];if(s&&i.masterId!=e){s.parse(this.getItem(e));var n=this.getSelectedId();n==e?addCss(s.$view,"webix_selected",true):removeCss(s.$view,"webix_selected")}},_updateList:function(e,i){var s=i.getBody().getChildViews()[1];if(s&&i.masterId!=e){this.exists(i.masterId)&&this.getItem(i.masterId).menu&&this.updateItem(i.masterId,{menu:s.data.serialize()});s.clearCss("webix_sidebar_selected");s.unselectAll();var n=copy(this.getItem(e).menu||[]);if(n.length){s.show();s.data.importData(n);var r=this.getSelectedId();s.exists(r)?s.select(r):r&&this._markMenu(s,r)}else{s.hide();s.data.clearAll()}}},_initContextMenu:function(){var s,n=this||e,r=n.config;r.popup&&(s=$$(r.popup));if(!s){var a="left"==r.position?"webix_sidebar_popup_left":"webix_sidebar_popup_right";var o="left"==r.position?"right":"left";var menuTemplate=function(e){var i="wxi-angle-"+("left"==r.position?"right":"left");var s=e.submenu||e.data||e.item?'<div class="webix_icon '+i+'"></div>':"";return s+e.value};var l=r.css?" "+r.css:"";var h={view:"popup",css:"webix_sidebar_popup "+a+l,autofit:false,width:(this||e)._fullWidth-(this||e).config.collapsedWidth,borderless:true,padding:0,body:{rows:[{view:"template",borderless:true,css:"webix_sidebar_popup_title",template:"#value#",height:(this||e).config.titleHeight+2,onClick:{webix_template:function(){var e=this.getValues().id;n.getItem(e).$count||n.select(e)}}},{view:"menu",submenu:"data",layout:"y",subMenuPos:o,select:true,borderless:true,autoheight:true,css:"webix_sidebar_popup_list "+a+l,template:menuTemplate,type:{subsign:false},submenuConfig:{padding:0,subMenuPos:o,template:menuTemplate,select:true,type:{subsign:false},css:"webix_sidebar_popup_list "+a+l,on:{onShow:function(){this.clearCss("webix_sidebar_selected");this.unselectAll();var i=n.getSelectedId();i&&this.exists(i)?this.select(i):i&&n._markMenu(this||e,i)},onBeforeSelect:function(e){if(this.getSubMenu(e))return false},onAfterSelect:function(i){var s=n.getPopup().queryView({view:"menu"});var r=n.getParentId(i);while(r){var a=s.getMenu(r);if(a){a.unselectAll();n._markMenu(a,i)}r=n.getParentId(r)}n._markMenu(this||e,i)}}},on:{onBeforeSelect:function(e){if(this.getSubMenu(e))return false},onMenuItemClick:function(e){this.getSubMenu(e)||n.select(e)}}}]}};i.extend(h,r.popup||{},true);s=ui(h);s._onMasterSelect=function(e){if(n.config.collapsed&&1==n.getItem(e).$level){var i=s.getBody().getChildViews()[0];i&&addCss(i.$view,"webix_selected",true)}};s.queryView({view:"menu"})._show_child_on_click=true}s.attachEvent("onBeforeShow",(function(){return r.collapsed}));(this||e)._destroy_with_me=[s];r.popupId=s.config.id;_event(document.body,"pointermove",(function(i){var n=i.target;s.config.hidden||s.$view.contains(n)||(this||e).$view.firstChild.contains(n)||s.queryView({view:"menu"})._open_sub_menu||s.hide()}),{bind:this||e})},_markMenu:function(i,s,n){var r="webix_sidebar_selected";i.data.each((function(e){!this._isChild(s,e.id)||n&&"0"!=this.getParentId(e.id)?i.hasCss(e.id,r)&&i.removeCss(e.id,r):i.addCss(e.id,r)}),this||e)},_isChild:function(e,i){var s=this.getParentId(e);return i==s||!!s&&this._isChild(s,i)},getPopup:function(){return $$((this||e).config.popupId)},position_setter:function(i){var s=i;var n="left"==i?"right":"left";removeCss((this||e).$view,"webix_sidebar_"+n);addCss((this||e).$view,"webix_sidebar_"+s,true);var r=this.getPopup();if(r){var a=r.$view;removeCss(a,"webix_sidebar_popup_"+n);addCss(a,"webix_sidebar_popup_"+s,true)}return i},select:function(i){if(i){isArray(i)&&(i=i.pop());Wn.api.select.call(this||e,i)}},selectAll:function(){},collapse:function(){this.define("collapsed",true)},expand:function(){this.define("collapsed",false)},toggle:function(){var i=!(this||e).config.collapsed;this.define("collapsed",i)},collapsed_setter:function(i){var s;if(i){s=(this||e).config.collapsedWidth;this.closeAll();(this||e).type.collapsed=true;removeCss((this||e).$view,"webix_sidebar_expanded")}else{s=(this||e)._fullWidth;(this||e).type.collapsed=false;addCss((this||e).$view,"webix_sidebar_expanded",true)}if(!isUndefined(s)&&s!==(this||e).config.width){this.define("width",s);this.resize()}return i},getState:function(){var s={collapsed:(this||e).config.collapsed};i.extend(s,Pe.getState.call(this||e));return s},setState:function(i){Pe.setState.call(this||e,i);this.define("collapsed",i.collapsed)}};type(Wn.view,{name:"sideBar",height:"auto",template:function(e,i){return i.collapsed?i.icon(e,i):i.arrow(e,i)+i.icon(e,i)+"<span>"+e.value+"</span>"},arrow:function(e){var i="";for(var s=1;s<=e.$level;s++)if(s==e.$level&&e.$count){var n="wxi-angle-"+(e.open?"down":"left");var r="webix_sidebar_dir_icon webix_icon "+n;i+="<span class='"+r+"'></span>"}return i},icon:function(e){var i="";e.$level>2&&(i='style="padding-left:'+40*(e.$level-2)+'px"');return e.icon?"<span class='webix_icon webix_sidebar_icon "+e.icon+"' "+i+"></span>":"<span "+i+"></span>"}});i.protoUI(sr,Wn.view);var nr={name:"context"};i.protoUI(nr,Ut,Zi.view);var rr={name:"contextmenu",_hide_on_item_click:true,$init:function(e){e.submenuConfig&&i.extend(e,e.submenuConfig)}};i.protoUI(rr,Ut,er.view);var ar={name:"vscroll",$apiOnly:true,defaults:{scroll:"x",scrollPos:0,scrollSize:18,scrollVisible:true,zoom:1},$init:function(i){var s=this||e;var n=i.scroll||"x";var r=(this||e)._viewobj=toNode(i.container);r.className+=" webix_vscroll_"+n;r.innerHTML="<div class='webix_vscroll_body'></div>";_event(r,"scroll",(function(){return s._onscroll_delay()}));(this||e)._last_set_size=0},$skin:function(){(this||e).defaults.scrollStep=Ht.rowHeight},reset:function(){(this||e).config.scrollPos=0;(this||e)._viewobj["x"==(this||e).config.scroll?"scrollLeft":"scrollTop"]=0;(this||e)._scroll_delay&&clearTimeout((this||e)._scroll_delay[0])},_check_quantum:function(i){if(i>15e5){(this||e)._settings.zoom=i/1e6;i=1e6}else(this||e)._settings.zoom=1;return i},scrollWidth_setter:function(i){i=this._check_quantum(i);(this||e)._viewobj.firstChild.style.width=i+"px";return i},scrollHeight_setter:function(i){i=this._check_quantum(i);(this||e)._viewobj.firstChild.style.height=i+"px";return i},sizeTo:function(i,s,n){i=i-(s||0)-(n||0);var r=(this||e)._settings.scrollSize;if(!r&&(this||e)._settings.scrollVisible&&!z.$customScroll){(this||e)._viewobj.style.pointerEvents="none";r=14}if(r){(this||e)._viewobj.style.display="block";s&&((this||e)._viewobj.style.marginTop=s+"px");(this||e)._viewobj.style["x"==(this||e)._settings.scroll?"width":"height"]=Math.max(0,i)+"px";(this||e)._viewobj.style["x"==(this||e)._settings.scroll?"height":"width"]=r+"px"}else(this||e)._viewobj.style.display="none";(this||e)._last_set_size=i},getScroll:function(){return Math.round((this||e)._settings.scrollPos*(this||e)._settings.zoom)},getSize:function(){return Math.round(((this||e)._settings.scrollWidth||(this||e)._settings.scrollHeight)*(this||e)._settings.zoom)},_fixSize:function(){var i=this.getScroll();var s=Math.max(this.getSize()-(this||e)._last_set_size,0);i>s&&this.scrollTo(s)},_sync:function(i,s){var n=(this||e)._settings;i=Math.round(i/n.zoom);i<0&&(i=0);if(s&&(this||e)._viewobj.scrollTo){var r={top:0,left:0,behavior:"smooth"};r["x"==n.scroll?"left":"top"]=i;(this||e)._viewobj.scrollTo(r)}else(this||e)._viewobj["x"==n.scroll?"scrollLeft":"scrollTop"]=i;this._onscroll_delay(150);(this||e)._settings.scrollPos=i||0},scrollTo:function(i){var s=(this||e)._settings;i=Math.round(i/s.zoom);i<0&&(i=0);if(i!=(this||e)._settings.scrollPos){(this||e)._viewobj["x"==s.scroll?"scrollLeft":"scrollTop"]=i;this._onscroll_inner(i,true)}},_onscroll_delay:function(i){if((this||e)._scroll_delay){i=i||(this||e)._scroll_delay[1];clearTimeout((this||e)._scroll_delay[0])}(this||e)._scroll_delay=[delay((this||e)._onscroll,this||e,[!!i],i),i]},_onscroll:function(i){(this||e)._scroll_delay=null;if(!i){var s=Math.round((this||e)._viewobj["x"==(this||e)._settings.scroll?"scrollLeft":"scrollTop"]);s!=(this||e)._settings.scrollPos&&this._onscroll_inner(s,false)}},_onscroll_inner:function(i,s){var n=(this||e)._settings.scrollWidth||(this||e)._settings.scrollHeight;i>=n-(this||e)._last_set_size/(s?(this||e)._settings.zoom:1)&&(i=Math.max(0,n-(this||e)._last_set_size/(this||e)._settings.zoom));(this||e)._settings.scrollPos=i||0;this.callEvent("onScroll",[this.getScroll()])},activeArea:function(i,s){(this||e)._x_scroll_mode=s;_event(i,"wheel",(this||e)._on_wheel,{bind:this||e,passive:false})},_on_wheel:function(i){if(i.ctrlKey)return false;var s=0;var n=0===i.deltaMode?30:1;i.deltaX&&Math.abs(i.deltaX)>Math.abs(i.deltaY)||i.shiftKey?(this||e)._x_scroll_mode&&(this||e)._settings.scrollVisible&&(s=(i.shiftKey?i.deltaY:i.deltaX)/n):!(this||e)._x_scroll_mode&&(this||e)._settings.scrollVisible&&(s=i.deltaY/n);z.isSafari&&((this||e)._scroll_trg=i.target);if(s){var r=this.getScroll();this.scrollTo(r+s*(this||e)._settings.scrollStep);r!==this.getScroll()&&preventEvent(i)}}};i.protoUI(ar,f,_t);var or={};var lr={filterByAll:function(){var i=this||e;var s=false;(this||e).data.silent((function(){var i=this||e;this.filter();var n=false;var _loop=function(e){assert(e,"empty column id for column with filtering");if(!i.isColumnVisible(e))return"continue";var r=i._filter_elements[e];var a=r[2].getValue(r[0]);var o=a;r[1].prepare&&(o=r[1].prepare.call(r[2],o,r[1],i));r[1].value=a;var l=r[1].compare;if(!i.callEvent("onBeforeFilter",[e,o,r[1]]))return"continue";if(r[2].$server||s)s=true;else{if(""===o)return"continue";if(l){l=i._multi_compare(e,l);i.filter(bind((function(i,s){return!!i&&l(i[e],s,i)}),i),o,n)}else i.filter(e,o,n);n=true}};for(var r in(this||e)._filter_elements){var a=_loop(r);"continue"!==a}}),this||e);if(s)(this||e)._skip_server_op?(this||e)._skip_server_op.filter=true:this.loadNext(0,0,0,0,true,true).then((function(){return i._on_after_filter()}));else{this.refresh();this.callEvent("onAfterFilter",[])}},_multi_compare:function(e,i){var s=this.getColumnConfig(e);var n=s?s.optionslist:null;if(!n)return i;"string"!=typeof n&&(n=",");return function(e,s,r){if(!e)return false;var a=e.toString().split(n);for(var o=0;o<a.length;o++)if(i(a[o],s,r))return true}},filterMode_setter:function(s){return i.extend((this||e).data._filterMode,s,true)},getFilter:function(i){var s=(this||e)._filter_elements[i];return s&&s[2]._get_filter?s[2]._get_filter(s[0]):s&&s[2].getInputNode?s[2].getInputNode(s[0]):null},registerFilter:function(i,s,n){(this||e)._filter_elements[s.columnId]=[i,s,n]},collectValues:function(i,s){var n;var r=this.getColumnConfig(i);var a=s&&s.visible?null:r.collection;n=a?(this||e)._collectValues.call(a,"id","value"):this._collectValues(r.id,r.id);var o={values:n};this.callEvent("onCollectValues",[i,o]);return o.values},_collectValues:function(i,s){var n={"":true};var r=[];(this||e).data.each((function(e){var a=e?e[i]:"";0===a&&(a="0");"object"==_typeof(a)&&(a=String(a));if(void 0!==a&&!n[a]){n[a]=true;r.push({id:a,value:e[s]})}}),this||e,true);if(r.length){var a="string"===typeof r[0].value?"string":"raw";r.sort((this||e).data.sorting.create({as:a,by:"value",dir:"asc"}))}return r},_on_after_filter:function(){(this||e).editStop&&this.editStop();this.callEvent("onAfterFilter",[])}};var hr={hover_setter:function(i){var s=this||e;if(i&&!(this||e)._hover_initialized){this._enable_mouse_move();(this||e).config.experimental=true;this.attachEvent("onMouseMoving",(function(e){if(Nt.active)s._last_hover&&(s._last_hover=s.removeRowCss(s._last_hover,s._settings.hover));else{var i=s.locate(e);!i&&z.isEdge&&e.relatedTarget&&(i=s.locate(e.relatedTarget));var n=i?i.row:null;if(s._last_hover!=n){s._last_hover&&s.removeRowCss(s._last_hover,s._settings.hover);s._last_hover=n;s._last_hover&&s.addRowCss(s._last_hover,s._settings.hover)}}}));_event((this||e).$view,"mouseout",(function(e){var i=e.target;if(s._last_hover&&document.body.contains(i)){var n=e.relatedTarget?s.locate(e.relatedTarget):null;if(!n){s.removeRowCss(s._last_hover,s._settings.hover);s._last_hover=null}}}));(this||e)._hover_initialized=1}return i},select_setter:function(s){if(!(this||e).select&&s){i.extend(this||e,(this||e)._selections._commonselect,true);if(true===s)s="row";else if("multiselect"==s){s="row";(this||e)._settings.multiselect=true}assert((this||e)._selections[s],"Unknown selection mode: "+s);i.extend(this||e,(this||e)._selections[s],true)}return s},getSelectedId:function(e){return e?[]:""},getSelectedItem:function(i){return Ce.getSelectedItem.call(this||e,i)},_selections:{_commonselect:{_select_css:" webix_cell_select",$init:function(){this._reinit_selection();(this||e).on_click.webix_cell=bind((this||e)._click_before_select,this||e);(this||e)._data_cleared=(this||e)._data_filtered=function(){this.unselect()};(this||e).data.attachEvent("onStoreUpdated",bind((this||e)._data_updated,this||e));(this||e).data.attachEvent("onSyncApply",bind((this||e)._data_synced,this||e));(this||e).data.attachEvent("onClearAll",bind((this||e)._data_cleared,this||e));(this||e).data.attachEvent("onAfterFilter",bind((this||e)._data_filtered,this||e));(this||e).data.attachEvent("onIdChange",bind((this||e)._id_changed,this||e));(this||e).$ready.push(Ce._set_noselect)},_id_changed:function(i,s){for(var n=0;n<(this||e)._selected_rows.length;n++)(this||e)._selected_rows[n]==i&&((this||e)._selected_rows[n]=s);for(var r=0;r<(this||e)._selected_areas.length;r++){var a=(this||e)._selected_areas[r];if(a.row==i){i=this._select_key(a);a.row=s;s=this._select_key(a);a.id=s;delete(this||e)._selected_pull[i];(this||e)._selected_pull[s]=true}}},_data_updated:function(e,i,s){"delete"==s&&this.unselect(e)},_data_synced:function(){for(var i=(this||e)._selected_areas.length-1;i>=0;i--){var s=(this||e)._selected_areas[i].row;if(!this.exists(s)){(this||e)._selected_areas.splice(i,1);delete(this||e)._selected_pull[s]}}},_reinit_selection:function(){(this||e)._selected_areas=[];(this||e)._selected_pull={};(this||e)._selected_rows=[]},isSelected:function(i,s){var n;n=isUndefined(s)?"object"===_typeof(i)?this._select_key(i):i:this._select_key({row:i,column:s});return(this||e)._selected_pull[n]},getSelectedId:function(i,s){var n;if((this||e)._selected_areas.length>1||i){n=[].concat((this||e)._selected_areas);if(s)for(var r=0;r<n.length;r++)n[r]=n[r].id}else{n=(this||e)._selected_areas[0];if(s&&n)return n.id}return n},_id_to_string:function(){return(this||e).row},_select:function(i,s){var n=this._select_key(i);if(null!==n){if(-1===s)return this._unselect(i);i.id=n;i.toString=(this||e)._id_to_string;if(!this.callEvent("onBeforeSelect",[i,s]))return false;if(!(this||e)._selected_pull[n]||!s&&1!=(this||e)._selected_areas.length){s||this._clear_selection();(this||e)._selected_areas.push(i);(this||e)._selected_pull[n]=true;this.callEvent("onAfterSelect",[i,s]);this._finalize_select(this._post_select(i));return true}}},_clear_selection:function(){if(!(this||e)._selected_areas.length)return false;for(var i=0;i<(this||e)._selected_areas.length;i++)if(!this.callEvent("onBeforeUnSelect",[(this||e)._selected_areas[i]]))return false;for(var s=0;s<(this||e)._selected_rows.length;s++)(this||e).data.removeMark((this||e)._selected_rows[s],"webix_selected",0,true);var n=(this||e)._settings.columns;if(n)for(var r=0;r<n.length;r++)n[r].$selected=null;var a=(this||e)._selected_areas;this._reinit_selection();for(var o=0;o<a.length;o++)this.callEvent("onAfterUnSelect",[a[o]]);return true},unselectAll:function(){this.clearSelection()},selectAll:function(){this.selectRange()},clearSelection:function(){if(this._clear_selection()){this.callEvent("onSelectChange",[]);this.render()}},_unselect:function(i){var s=this._select_key(i);if(!s&&(this||e)._selected_areas.length){this.clearSelection();this.callEvent("onSelectChange",[])}if((this||e)._selected_pull[s]){if(!this.callEvent("onBeforeUnSelect",[i]))return false;for(var n=0;n<(this||e)._selected_areas.length;n++)if((this||e)._selected_areas[n].id==s){(this||e)._selected_areas.splice(n,1);break}delete(this||e)._selected_pull[s];this.callEvent("onAfterUnSelect",[i]);this._finalize_select(0,this._post_unselect(i))}},_add_item_select:function(i){var s=this.getItem(i);return(this||e).data.addMark(s.id,"webix_selected",0,{$count:0},true)},_finalize_select:function(i){i&&(this||e)._selected_rows.push(i);if(!(this||e)._silent_selection){this.render();this.callEvent("onSelectChange",[])}},_click_before_select:function(i,s){var n=i.ctrlKey||i.metaKey||"touch"==(this||e)._settings.multiselect;var r=i.shiftKey;(this||e)._settings.multiselect||"multiselect"==(this||e)._settings.select||"area"==(this||e)._settings.select||(n=r=false);if(r&&(this||e)._selected_areas.length){var a=(this||e)._selected_areas[(this||e)._selected_areas.length-1];this._selectRange(s,a)}else n&&(this||e)._selected_pull[this._select_key(s)]?this._unselect(s):this._select({row:s.row,column:s.column},n)},_mapSelection:function(i,s,n){var r=(this||e)._settings.columns;if(s){var a=[];for(var o=0;o<r.length;o++)r[o].$selected&&a.push(r[o]);r=a}var l=(this||e).data.order;var h=0;for(var _=0;_<l.length;_++){var c=this.getItem(l[_]);if(c){var d=(this||e).data.getMark(c.id,"webix_selected");if(d||s){var u=0;for(var f=0;f<r.length;f++){var g=r[f].id;if(n||s||d[g]){if(!i)return{row:l[_],column:g};c[g]=i(c[g],l[_],g,h,u);u++}}h++}}}}},row:{_select_css:" webix_row_select",_select_key:function(e){return e.row},select:function(i,s){i&&(i=i.toString());assert((this||e).data.exists(i),"Incorrect id in select command: "+i);this._select({row:i},s)},_post_select:function(e){this._add_item_select(e.row).$row=true;return e.row},unselect:function(e){this._unselect({row:e})},_post_unselect:function(i){(this||e).data.removeMark(i.row,"webix_selected",0,true);return i.row},mapSelection:function(e){return this._mapSelection(e,false,true)},_selectRange:function(e,i){return this.selectRange(e.row,i.row)},selectRange:function(i,s,n){isUndefined(n)&&(n=true);var r=i?this.getIndexById(i):0;var a=s?this.getIndexById(s):(this||e).data.order.length-1;if(r>a){var o=r;r=a;a=o}(this||e)._silent_selection=true;for(var l=r;l<=a;l++){var h=this.getIdByIndex(l);if(!h){i&&this.select(i);break}this.select(h,n)}(this||e)._silent_selection=false;this._finalize_select()}},cell:{_select_key:function(e){return e.column?e.row+"_"+e.column:null},select:function(i,s,n){assert((this||e).data.exists(i),"Incorrect id in select command: "+i);this._select({row:i,column:s},n)},_post_select:function(e){var i=this._add_item_select(e.row);i.$count++;i[e.column]=true;return e.row},unselect:function(e,i){this._unselect({row:e,column:i})},_post_unselect:function(i){var s=this._add_item_select(i.row);s.$count--;s[i.column]=false;s.$count<=0&&(this||e).data.removeMark(i.row,"webix_selected",0,true);return i.row},mapSelection:function(e){return this._mapSelection(e,false,false)},_selectRange:function(e,i){return this.selectRange(e.row,e.column,i.row,i.column)},selectRange:function(i,s,n,r,a){isUndefined(a)&&(a=true);var o=i?this.getIndexById(i):0;var l=n?this.getIndexById(n):(this||e).data.order.length-1;var h=s?this.getColumnIndex(s):0;var _=r?this.getColumnIndex(r):(this||e)._columns.length-1;if(o>l){var c=o;o=l;l=c}if(h>_){var d=h;h=_;_=d}(this||e)._silent_selection=true;for(var u=o;u<=l;u++)for(var f=h;f<=_;f++)this.select(this.getIdByIndex(u),this.columnId(f),a);(this||e)._silent_selection=false;this._finalize_select()}},column:{_select_css:" webix_column_select",_select_key:function(e){return e.column},_id_to_string:function(){return(this||e).column},select:function(e,i){this._select({column:e},i)},_post_select:function(i){(this||e)._settings.columns[this.getColumnIndex(i.column)].$selected=true;(this||e)._silent_selection||this._render_header_and_footer()},unselect:function(e){this._unselect({column:e})},_post_unselect:function(i){(this||e)._settings.columns[this.getColumnIndex(i.column)].$selected=null;this._render_header_and_footer()},mapSelection:function(e){return this._mapSelection(e,true,false)},_selectRange:function(e,i){return this.selectRange(e.column,i.column)},selectRange:function(i,s,n){isUndefined(n)&&(n=true);var r=i?this.getColumnIndex(i):0;var a=s?this.getColumnIndex(s):(this||e)._columns.length-1;if(r>a){var o=r;r=a;a=o}(this||e)._silent_selection=true;for(var l=r;l<=a;l++)this.select(this.columnId(l),n);(this||e)._silent_selection=false;this._render_header_and_footer();this._finalize_select()},_data_synced:function(){}},area:{_select_key:function(e){return e.row+"_"+e.column},getSelectedId:function(e){var i=this.getSelectArea();var s=[];if(i)if(!e||i.start.row==i.end.row&&i.start.column==i.end.column)s.push(i.end);else{var n=this.getIndexById(i.start.row);var r=this.getIndexById(i.end.row);if(-1==n||-1==r)return s;var a=this.getColumnIndex(i.start.column);var o=this.getColumnIndex(i.end.column);for(var l=n;l<=r;l++)for(var h=a;h<=o;h++)s.push({row:this.getIdByIndex(l),column:this.columnId(h)})}return e?s:s[0]},unselect:function(){this._unselect()},_unselect:function(){this.removeSelectArea();this.callEvent("onSelectChange",[])},mapSelection:function(i){var s=this.getSelectArea();if(s){var n=this.getColumnIndex(s.start.column);var r=this.getColumnIndex(s.end.column);var a=this.getIndexById(s.start.row);var o=this.getIndexById(s.end.row);for(var l=a;l<=o;l++){var h=(this||e).data.order[l];var _=this.getItem(h);for(var c=n;c<=r;c++){var d=(this||e)._columns[c].id;if(!i)return{row:h,column:d};_[d]=i(_[d],h,d,l-a,c-n)}}}},select:function(i,s,n){assert((this||e).data.exists(i),"Incorrect id in select command: "+i);this._select({row:i,column:s},n)},_selectRange:function(e,i){this._extendAreaRange(e,i)},_select:function(e){this.addSelectArea(e,e,false);return true},_data_synced:function(){(this||e)._selected_areas.length&&this.refreshSelectArea()}}}};var _r={blockselect_setter:function(s){var n=this||e;if(s&&(this||e)._block_sel_flag){_event((this||e)._viewobj,z.mouse.down,(function(e){return n._bs_down(e,"mouse")}));z.touch&&this.attachEvent("onLongTouch",(function(e){return n._bs_down(e,"touch")}));(this||e)._block_sel_flag=(this||e)._bs_ready=(this||e)._bs_progress=false;this.attachEvent("onAfterScroll",(this||e)._update_block_selection);i.extend(this||e,G,true);this.attachEvent("onBeforeAutoScroll",(function(){return(this||e)._bs_progress}))}return s},_block_sel_flag:true,_childOf:function(e,i){var s=e.target;while(s){if(s.getAttribute&&s.getAttribute("webixignore"))return false;if(s==i)return true;s=s.parentNode}return false},_bs_down:function(i,s){if((!(this||e)._settings.subview||(this||e)==$$(i.target))&&this._childOf(i,(this||e)._body)){if(i.target&&"INPUT"==i.target.tagName||(this||e)._rs_process)return;(this||e)._bs_position=offset((this||e)._body);var n=pos(i);(this||e)._bs_ready=[n.x-(this||e)._bs_position.x,n.y-(this||e)._bs_position.y];this._bs_handler_init(i.target,s)}},_bs_handler_init:function(i,s){var n=this||e;if("touch"===s){(this||e)._bs_mm_handler=event$1(i,z[s].move,(function(e){return n._bs_move(e,s)}),{passive:false});(this||e)._bs_mu_handler=event$1(i,z[s].up,(function(e){return n._bs_up(e)}))}else{(this||e)._bs_mm_handler=event$1((this||e)._viewobj,z[s].move,(function(e){return n._bs_move(e,s)}));(this||e)._bs_mu_handler=event$1(document,z[s].up,(function(e){return n._bs_up(e)}))}},_bs_up:function(i){if((this||e)._block_panel){this._bs_select("select",true,i);(this||e)._block_panel=remove((this||e)._block_panel)}(this||e)._bs_mm_handler=eventRemove((this||e)._bs_mm_handler);(this||e)._bs_mu_handler=eventRemove((this||e)._bs_mu_handler);removeCss(document.body,"webix_noselect");(this||e)._bs_ready=(this||e)._bs_progress=false;(this||e)._auto_scroll_delay&&((this||e)._auto_scroll_delay=window.clearTimeout((this||e)._auto_scroll_delay))},_update_block_selection:function(){(this||e)._bs_progress&&delay((this||e)._bs_select,this||e,[false,false])},_bs_select:function(i,s,n){var r=null;(this||e)._bs_ready[2]||((this||e)._bs_ready[2]=(this||e)._locate_cell_xy.apply(this||e,(this||e)._bs_ready));r=(this||e)._bs_ready[2];var a=(this||e)._locate_cell_xy.apply(this||e,(this||e)._bs_progress);if(this.callEvent("onBeforeBlockSelect",[r,a,s,n])){if((!(this||e)._bs_do_select||false!==this._bs_do_select(r,a,s,n))&&r.row&&a.row)if("select"===i){this._clear_selection();this._selectRange(r,a)}else{var o,l,h,_;if("box"===i){o=Math.min((this||e)._bs_ready[0],(this||e)._bs_progress[0]);h=Math.max((this||e)._bs_ready[0],(this||e)._bs_progress[0]);l=Math.min((this||e)._bs_ready[1],(this||e)._bs_progress[1]);_=Math.max((this||e)._bs_ready[1],(this||e)._bs_progress[1])}else{var c=this._cellPosition(r.row,r.column);var d=this._cellPosition(a.row,a.column);var u=this.getScrollState();var f=c.width;var g=d.width;if((this||e)._right_width&&(this||e)._bs_ready[0]>(this||e)._left_width+(this||e)._center_width)c.left+=(this||e)._left_width+(this||e)._center_width;else if((this||e)._left_width){if((this||e)._bs_ready[0]>(this||e)._left_width)if(c.left<u.x){f-=u.x-c.left;c.left=(this||e)._left_width}else c.left+=(this||e)._left_width-u.x}else c.left-=u.x;if((this||e)._right_width&&(this||e)._bs_progress[0]>(this||e)._left_width+(this||e)._center_width)d.left+=(this||e)._left_width+(this||e)._center_width;else if((this||e)._left_width){if((this||e)._bs_progress[0]>(this||e)._left_width)if(d.left<u.x){g-=u.x-d.left;d.left=(this||e)._left_width}else d.left+=(this||e)._left_width-u.x}else d.left-=u.x;if((this||e)._settings.prerender){c.top-=(this||e)._scrollTop;d.top-=(this||e)._scrollTop}o=Math.min(c.left,d.left);h=Math.max(c.left+f,d.left+g);l=Math.min(c.top,d.top);_=Math.max(c.top+c.height,d.top+d.height);(this||e)._settings.topSplit&&(l+=this._getTopSplitOffset(r));(this||e)._auto_scroll_delay&&((this||e)._auto_scroll_delay=window.clearTimeout((this||e)._auto_scroll_delay));!n||(this||e)._touch_scroll&&!(this||e)._settings.prerender||((this||e)._auto_scroll_delay=delay((this||e)._auto_scroll,this||e,[pos(n)],250))}var v=(this||e)._block_panel.style;v.left=o+"px";v.top=l+"px";v.width=h-o+"px";v.height=_-l+"px"}s&&this.callEvent("onAfterBlockSelect",[r,a])}},_bs_start:function(){(this||e)._block_panel=create("div",{class:"webix_block_selection"},"");(this||e)._body.appendChild((this||e)._block_panel)},_bs_move:function(i,s){if(!(this||e)._rs_progress&&false!==(this||e)._bs_ready){(this||e)._bs_progress||addCss(document.body,"webix_noselect");var n=pos(i);var r=[n.x-(this||e)._bs_position.x,n.y-(this||e)._bs_position.y];if(Math.abs((this||e)._bs_ready[0]-r[0])<5&&Math.abs((this||e)._bs_ready[1]-r[1])<5)return;false===(this||e)._bs_progress&&this._bs_start(i);(this||e)._bs_progress=r;this._bs_select((this||e).config.blockselect,false,i);"touch"===s&&preventEvent(i)}},_locate_cell_xy:function(i,s){var n=false,r=null,a=null;(this||e)._right_width&&i>(this||e)._left_width+(this||e)._center_width?i+=(this||e)._x_scroll.getSize()-(this||e)._center_width-(this||e)._left_width-(this||e)._right_width:(!(this||e)._left_width||i>(this||e)._left_width)&&(i+=(this||e)._x_scroll.getScroll());if((this||e)._settings.topSplit&&(this||e)._render_scroll_top>(this||e)._settings.topSplit){var o=this._cellPosition(this.getIdByIndex((this||e)._settings.topSplit-1),this.columnId(0));o.top+o.height>s&&(n=true)}n||(s+=this.getScrollState().y);i<0&&(i=0);s<0&&(s=0);var l=(this||e)._settings.columns;var h=(this||e).data.order;var _=0;for(var c=0;c<l.length;c++){_+=l[c].width;if(_>=i){a=l[c].id;break}}a||(a=l[l.length-1].id);_=0;var d=(this||e).data.$min||0;if((this||e)._settings.fixedRowHeight)r=h[d+Math.floor(s/(this||e)._settings.rowHeight)];else for(var u=d;u<h.length;u++){_+=this._getHeightByIndex(u);if(_>=s){r=h[u];break}}r||(r=h[h.length-1]);return{row:r,column:a}},_getTopSplitOffset:function(i,s){var n=0,r=this.getIndexById(i.row);if(r>=(this||e)._settings.topSplit){var a=this._cellPosition(this.getIdByIndex(r),i.column);var o=this._cellPosition(this.getIdByIndex((this||e)._settings.topSplit-1),i.column);o.top+o.height>a.top&&(n=o.top+o.height-(a.top>0||!s?a.top:0))}return n}};var cr={resizeRow_setter:function(i){(this||e)._settings.scrollAlignY=false;(this||e)._settings.fixedRowHeight=false;return this.resizeColumn_setter(i)},resizeColumn_setter:function(i){var s=this||e;if(i&&(this||e)._rs_init_flag){_event((this||e)._viewobj,"mousemove",(function(e){return s._rs_move(e)}));_event((this||e)._viewobj,"mousedown",(function(e){return s._rs_down(e)}));_event((this||e)._viewobj,"mouseup",(function(){return s._rs_up()}));(this||e)._rs_init_flag=false}return i},_rs_init_flag:true,_rs_down:function(i){if((this||e)._rs_ready&&(!(this||e)._settings.subview||(this||e)==$$(i.target))){(this||e)._rs_process=[pos(i),(this||e)._rs_ready];addCss(document.body,"webix_noselect");denySelect()}},_rs_up:function(){(this||e)._rs_process=false;removeCss(document.body,"webix_noselect");allowSelect()},_rs_start:function(){var i=this||e;if(!(this||e)._rs_progress){var s=_slicedToArray((this||e)._rs_process[1],4),n=s[0],r=s[1],a=s[2],o=s[3];var l=(this||e)._rs_process[0];var h;if("x"==n){h=offset(a).x+r-offset((this||e)._body).x;l=l.x}else{h=offset(a).y+r-offset((this||e)._body).y+(this||e)._header_height;l=l.y}(this||e)._rs_progress=[n,o,h];var _=new ui.resizearea({container:(this||e)._viewobj,eventPos:l,start:h,dir:n,cursor:("x"==n?"col":"row")+"-resize"});_.attachEvent("onResizeEnd",(function(e){return i._rs_end(e)}));(this||e)._rs_ready=false}},_rs_end:function(i){if((this||e)._rs_progress){var s=(this||e)._rs_progress[1];var n=i-(this||e)._rs_progress[2];if("x"==(this||e)._rs_progress[0]){(this||e)._settings.rightSplit&&s.cind>=(this||e)._rightSplit&&(n*=-1);var r=(this||e)._columns[s.cind];var a=r.width;delete r.fillspace;delete r.adjust;this._setColumnWidth(s.cind,a+n,true,true);this._updateColsSizeSettings()}else{var o=this.getIdByIndex(s.rind);var l=this._getRowHeight(this.getItem(o));this.setRowHeight(o,l+n)}this._rs_up()}(this||e)._rs_progress=null},_rs_move:function(i){if((this||e)._rs_ready&&(this||e)._rs_process)return this._rs_start();(this||e)._rs_ready=false;var s=false;var n=i.target;var r=(this||e)._settings;var a=n.getAttribute("class")||"";var o=-1!=a.indexOf("webix_cell");if(o&&r.drag)return this._mark_resize(s);var l=-1!=a.indexOf("webix_hcell");if(o||l){var h=posRelative(i);var _=this._locate(n);s=this._is_column_rs(_,h,n,r.resizeColumn,o)||o&&this._is_row_rs(_,h,n,r.resizeRow)}this._mark_resize(s)},_is_column_rs:function(i,s,n,r,a){if(!r||a&&r.headerOnly)return false;var o=n.offsetWidth;r=r.size?r.size:3;var l,h;if(s.x<r){i.cind<(this||e)._rightSplit&&(i.cind-=i.span||1);l=(this||e)._columns[i.cind];h=["x",0,n,i]}else if(o-s.x<r+1){(this||e)._settings.rightSplit&&i.cind+1>=(this||e)._rightSplit&&i.cind++;if(!(this||e)._settings.rightSplit||i.cind<(this||e)._columns.length){l=(this||e)._columns[i.cind];h=["x",o,n,i]}}if(l&&false!==l.resize){(this||e)._rs_ready=h;return"col-resize"}return false},_is_row_rs:function(i,s,n,r){if(!r||r.headerOnly&&i.cind>0)return false;if((this||e)._bs_progress)return false;var a=n.offsetHeight;r=r.size?r.size:3;if(s.y<r){if(i.rind>0){i.rind--;(this||e)._rs_ready=["y",0,n,i]}}else a-s.y<r+1&&((this||e)._rs_ready=["y",a,n,i]);return!!(this||e)._rs_ready&&"row-resize"},_mark_resize:function(i){(this||e)._cursor_timer&&window.clearTimeout((this||e)._cursor_timer);(this||e)._cursor_timer=delay((this||e)._mark_resize_ready,this||e,[i],i?100:0)},_mark_resize_ready:function(i){if((this||e)._last_cursor_mode!=i){(this||e)._last_cursor_mode=i;(this||e)._viewobj.style.cursor=i||""}}};attachEvent("onDataTable",(function(e,i){if(z.touch){Vt.$init();i.scrollSize=0;Vt._disabled&&Vt.limit();e.$ready.push(e.$touch)}}));var dr={$touch:function(){var s=(this||e)._settings;s.scrollAlignY=false;i.extend(this||e,true===s.prerender?(this||e)._touchNative:(this||e)._touch);var n="";s.autowidth||false===s.scrollX||(n+="x");s.autoheight||false===s.scrollY||(n+="y");(this||e)._body.setAttribute("touch_scroll",n);Vt._init_scroll_node((this||e)._body.childNodes[1].firstChild);this._sync_scroll(0,0,"0ms")},$hasYScroll:function(){return(this||e)._dtable_height-(this||e)._dtable_offset_height>2},_touchNative:{_touch_scroll:true,_scrollTo_touch:function(i,s){var n=Vt._get_sizes((this||e)._body.childNodes[1].firstChild);i=Math.max(0,Math.min(i,n.dx-n.px));s=Math.max(0,Math.min(s,n.dy-n.py));this.callEvent("onAfterScroll",[{e:-i,f:-s}])},_getScrollState_touch:function(){var i=Vt._get_matrix((this||e)._body.childNodes[1].firstChild);return{x:-i.e,y:-i.f}},$init:function(){this.attachEvent("onBeforeScroll",(function(){Vt._scroll_node=(this||e)._body.childNodes[1].firstChild;Vt._scroll_stat=Vt._get_sizes(Vt._scroll_node);Vt._scroll_master=this||e}));this.attachEvent("onTouchEnd",(function(){Vt._scroll_master=null}));this.attachEvent("onAfterScroll",(function(i){if(i){(this||e)._scrollLeft=-i.e;(this||e)._scrollTop=-i.f;this._sync_scroll(i.e,i.f,"0ms")}}))}},_touch:{_touch_scroll:true,_scrollTo_touch:function(i,s){delay((function(){this.callEvent("onAfterScroll",[{e:-i,f:-s}])}),this||e)},$scroll:{gravity:0,elastic:false},$init:function(){this.attachEvent("onAfterColumnHide",(function(){this._scrollTo_touch(0,0)}));this.attachEvent("onAfterRender",(function(){(this||e)._x_scroll&&(this||e)._settings.scrollX&&(this||e)._x_scroll._fixSize();(this||e)._y_scroll&&(this||e)._settings.scrollY&&(this||e)._y_scroll._fixSize()}));this.attachEvent("onBeforeScroll",(function(){Vt._scroll_node=(this||e)._body.childNodes[1].firstChild;Vt._scroll_stat=Vt._get_sizes(Vt._scroll_node);Vt._scroll_stat.dy=(this||e)._dtable_height;Vt._scroll_master=this||e}));this.attachEvent("onTouchEnd",(function(){Vt._scroll_master=null}));this.attachEvent("onAfterScroll",(function(i){if(i){(this||e)._scrollTop=0;(this||e)._scrollLeft=0;this._sync_scroll(0,0,"0ms");(this||e)._scrollLeft=-i.e;(this||e)._scrollTop=-i.f;this._correctScrollSize();this.render();if((this||e)._x_scroll){(this||e)._x_scroll._settings.scrollPos=-1;(this||e)._x_scroll.scrollTo((this||e)._scrollLeft);this.callEvent("onScrollY",[])}if((this||e)._y_scroll){(this||e)._y_scroll._settings.scrollPos=-1;(this||e)._y_scroll.scrollTo((this||e)._scrollTop);this.callEvent("onScrollY",[])}}}))}},_sync_scroll:function(i,s,n){var r=(this||e)._settings.prerender?0:(this||e)._scrollTop;s+=r;Vt._set_matrix((this||e)._body.childNodes[1].firstChild,i,s,n);(this||e)._settings.leftSplit&&Vt._set_matrix((this||e)._body.childNodes[0].firstChild,0,s,n);(this||e)._settings.rightSplit&&Vt._set_matrix((this||e)._body.childNodes[2].firstChild,0,s,n);(this||e)._settings.header&&Vt._set_matrix((this||e)._header.childNodes[1].firstChild,i,0,n);(this||e)._settings.footer&&Vt._set_matrix((this||e)._footer.childNodes[1].firstChild,i,0,n);var a="0ms"!==n;(this||e)._x_scroll&&(this||e)._x_scroll._sync(-i,a);(this||e)._y_scroll&&(this||e)._y_scroll._sync(-s+r,a);this.callEvent("onSyncScroll",[i,s,n])},_sync_y_scroll:function(i,s){var n=-this.getScrollState().x;Vt._set_matrix((this||e)._body.childNodes[1].firstChild,n,i,s);(this||e)._settings.leftSplit&&Vt._set_matrix((this||e)._body.childNodes[0].firstChild,0,i,s);(this||e)._settings.rightSplit&&Vt._set_matrix((this||e)._body.childNodes[2].firstChild,0,i,s);this.callEvent("onSyncScroll",[n,i,s])},_sync_x_scroll:function(i,s){var n=(this||e)._settings.prerender?-this.getScrollState().y:0;Vt._set_matrix((this||e)._body.childNodes[1].firstChild,i,n,s);(this||e)._settings.header&&Vt._set_matrix((this||e)._header.childNodes[1].firstChild,i,0,s);(this||e)._settings.footer&&Vt._set_matrix((this||e)._footer.childNodes[1].firstChild,i,0,s);this.callEvent("onSyncScroll",[i,n,s])},_sync_pos:function(i){(this||e)._settings.prerender||(i.f-=(this||e)._scrollTop)}};var ur={$init:function(){(this||e).data.attachEvent("onStoreUpdated",bind((function(e){e||this._adjustColumns()}),this||e));this.attachEvent("onStructureLoad",(this||e)._adjustColumns);this.attachEvent("onStructureUpdate",(this||e)._resizeColumns);this.attachEvent("onColumnResize",(function(e,i,s,n){n&&this._resizeColumns()}));this.attachEvent("onResize",(this||e)._resizeColumns)},_adjustColumns:function(){var i=false;var s=(this||e)._columns;for(var n=0;n<s.length;n++)s[n].adjust&&("header"==s[n].adjust||this.count())&&(i=this._adjustColumn(n,s[n].adjust,true)||i);if(i){this._updateColsSizeSettings(true);this._resizeColumns()}},_resizeColumns:function(){var i=(this||e)._settings.columns;var s=[];var n=0;if(i&&!(this||e)._settings.autowidth)for(var r=0;r<i.length;r++){var a=i[r].fillspace;if(a){s[r]=a;n+=1*a||1}}n&&this._fillColumnSize(s,n)},_fillColumnSize:function(i,s){var n=(this||e)._settings.columns;if(n){var r=(this||e)._content_width-(this||e)._scrollSizeY;var a=false;if(r>0){for(var o=0;o<n.length;o++)i[o]||(r-=n[o].width||(this||e)._settings.columnWidth);for(var l=0;l<i.length;l++)if(i[l]){var h=Math.min(r,Math.round(r*i[l]/s));a=this._setColumnWidth(l,h,true)||a;r-=n[l].width;s-=i[l]}a&&this._updateColsSizeSettings(true)}}},_getColumnConfigSize:function(i,s){var n=(this||e)._settings.columns[i];var r=n.minWidth||(this||e)._settings.minColumnWidth;if("header"!=s){var a=(this||e).data.order.length;n.adjustBatch&&n.adjustBatch<a&&(a=n.adjustBatch);var o=(this||e).data.order.slice(0,a);for(var l=0;l<a;l++)o[l]=o[l]?this._getValue(this.getItem(o[l]),n,0):"";r=Math.max(r,getTextSize(o,"webix_table_cell webix_cell").width)}if("data"!=s){for(var h=0;h<n.header.length;h++){var _=n.header[h];if(_){var c=0;if(_.rotate)for(var d=0;d<(_.rowspan||1);d++)c+=(this||e)._headers[d];var u="webix_table_cell webix_cell "+(_.css||"")+(_.rotate?"webix_measure_rotate":"");var f=getTextSize([_.text],u,c);r=Math.max(r,_.rotate?f.height:f.width)}}n.sort&&(r+=10)}r+=z.isIE?Ht.layoutPadding.space:0;return Math.min(r,n.maxWidth||(this||e)._settings.maxColumnWidth||1e5)},_adjustColumn:function(e,i,s){if(e>=0){var n=this._getColumnConfigSize(e,i);return this._setColumnWidth(e,n,s)}},adjustColumn:function(e,i){this._adjustColumn(this.getColumnIndex(e),i)},adjustRowHeight:function(i,s){if(i)this._adjustRowHeight(i);else{var n={};var r=(this||e)._settings.columns;for(var a=0;a<r.length;a++)this._adjustRowHeight(r[a].id,n);(this||e).data.each((function(e){e.$height=n[e.id]}))}s||this.refresh()},_adjustRowHeight:function(i,s){var n=this.getColumnConfig(i);var r;var a=create("DIV",{class:"webix_table_cell webix_measure_size webix_cell"},"");a.style.cssText="width:"+n.width+"px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;";(this||e).$view.appendChild(a);if(a.offsetHeight<1){r=(this||e).$view.cloneNode(true);document.body.appendChild(r);r.appendChild(a)}(this||e).data.each((function(i){var r;a.innerHTML=this._getValue(i,n,0);r=Math.max(a.scrollHeight,(this||e)._settings.rowHeight,(this||e)._settings.minRowHeight||0);r=Math.min(r,(this||e)._settings.maxRowHeight||1e5);s?s[i.id]=Math.max(r,s[i.id]||0):i.$height=r}),this||e);a=remove(a);r&&remove(r)}};var fr={math_setter:function(e){e&&this._math_init();return e},_math_pref:"$",_math_init:function(){if(!z.strict){(this||e).data.attachEvent("onStoreUpdated",bind((this||e)._parse_row_math,this||e));(this||e).data.attachEvent("onStoreLoad",bind((this||e)._parse_math,this||e));this.attachEvent("onStructureLoad",(this||e)._parse_math)}},_parse_row_math:function(i,s,n){if(i&&"paint"!=n)if("delete"==n)for(var r=0;r<(this||e)._columns.length;r++)this._remove_old_triggers(s,(this||e)._columns[r].id);else{"add"==n&&this._exprs_by_columns(s);for(var a=0;a<(this||e)._columns.length;a++){(this||e)._math_recalc={};this._parse_cell_math(i,(this||e)._columns[a].id)}(this||e)._math_recalc={}}},_parse_cell_math:function(i,s){var n=this.getItem(i);var r;r=n[(this||e)._math_pref+s]||n[s];if(r&&r.length>0&&"="===r.toString().substr(0,1)){n[(this||e)._math_pref+s]=r;n[s]=this._calculate(r,i,s)}else{"undefined"!==typeof n[(this||e)._math_pref+s]&&delete n[(this||e)._math_pref+s];this._remove_old_triggers(n,s)}if("undefined"!==typeof n.depends&&"undefined"!==typeof n.depends[s])for(var a in n.depends[s]){var o=n.depends[s][a][0]+"__"+n.depends[s][a][1];if("undefined"===typeof(this||e)._math_recalc[o]){(this||e)._math_recalc[o]=true;this._parse_cell_math(n.depends[s][a][0],n.depends[s][a][1])}}},_set_original_value:function(i,s){var n=this.getItem(i);"undefined"!==typeof n[(this||e)._math_pref+s]&&(n[s]=n[(this||e)._math_pref+s])},_parse_math:function(){if((this||e)._columns&&this.count()){this._exprs_by_columns();for(var i=0;i<(this||e)._columns.length;i++){var s=this.columnId(i);(this||e).data.each((function(i){(this||e)._math_recalc={};this._parse_cell_math(i.id,s)}),this||e)}(this||e)._math_recalc={}}},_exprs_by_columns:function(i){for(var s=0;s<(this||e)._columns.length;s++)if((this||e)._columns[s].math){var n=this.columnId(s);var r="="+(this||e)._columns[s].math;r=r.replace(/\$c/g,"#$c#");if(i){i[n]=this._parse_relative_expr(r,i.id,n);delete i[(this||e)._math_pref+n];this._remove_old_triggers(i,n)}else(this||e).data.each((function(i){i[n]=this._parse_relative_expr(r,i.id,n);delete i[(this||e)._math_pref+n];this._remove_old_triggers(i,n)}),this||e)}},_parse_relative_expr:function(e,i,s){return template(e)({$r:i,$c:s})},_get_calc_value:function(i,s){var n;if(!this.exists(i))return"#out_of_range";n=this.getItem(i);var r=n[(this||e)._math_pref+s]||n[s]||0;r=r.toString();if("="!==r.substring(0,1))return r;"undefined"===typeof n[(this||e)._math_pref+s]&&(n[(this||e)._math_pref+s]=n[s]);n[s]=this._calculate(r,i,s,true);return n[s]},_calculate:function(e,i,s,n){if(true===n){if(this._in_math_trace(i,s))return"#selfreference"}else this._start_math_trace();this._to_math_trace(i,s);var r=this.getItem(i);e=e.substring(1);var a=this._get_operations(e);var o=this._get_refs(e,i);if(a){e=this._replace_refs(e,o);e=this._parse_args(e,a)}else e=this._replace_refs(e,o,true);var l=this._math_exception(e);if(false!==l)return l;this._from_math_trace(i,s);this._remove_old_triggers(r,s);for(var h=0;h<o.length;h++)this._add_trigger([i,s],o[h]);l=this._math_exception(e);if(false!==l)return l;if(!e)return e;e=this._compute(e.replace(/\$r/g,r.id));l=this._math_exception(e);return false!==l?l:e},_get_operations:function(e){var i=/(\+|-|\*|\/)/g;var s=e.replace(/\[[^)]*?\]/g,"").match(i);return s},_get_refs:function(e,i){var s=/\[([^\]]+),([^\]]+)\]/g;var n=e.match(s);null===n&&(n=[]);for(var r=0;r<n.length;r++){var a=n[r];var o=a;a=a.substr(1,a.length-2);a=a.split(",");a[0]=this._trim(a[0]);a[1]=this._trim(a[1]);":"===a[0].substr(0,1)&&(a[0]=this.getIdByIndex(a[0].substr(1)));"$r"===a[0]&&(a[0]=i);":"===a[1].substr(0,1)&&(a[1]=this.columnId(a[1].substr(1)));a[2]=o;n[r]=a}return n},_replace_refs:function(e,i,s){var n="(",r=")";s&&(n=r="");for(var a=0;a<i.length;a++){var o=i[a];var l=this._get_calc_value(o[0],o[1]);isNaN(l)&&(l='"'+l+'"');e=e.replace(o[2],n+l+r)}return e},_parse_args:function(e,i){var s=[];for(var n=0;n<i.length;n++){var r=i[n];var a=this._split_by(e,r);s.push(a[0]);e=a[1]}s.push(e);for(var o=0;o<s.length;o++){var l=this._trim(s[o]);s[o]=l}var h="";for(var _=0;_<s.length-1;_++)h+=s[_]+i[_];h+=s[s.length-1];return h},_compute:function(e){var i;try{i=exec(e)}catch(s){assert(false,"Math error in datatable<br>"+e);i=""}return i.toString()},_split_by:function(e,i){var s=e.indexOf(i);var n=e.substr(0,s);var r=e.substr(s+1);return[n,r]},_trim:function(e){e=e.replace(/^ */g,"");e=e.replace(/ *$/g,"");return e},_start_math_trace:function(){(this||e)._math_trace=[]},_to_math_trace:function(i,s){(this||e)._math_trace[i+"__"+s]=true},_from_math_trace:function(i,s){"undefined"!==typeof(this||e)._math_trace[i+"__"+s]&&delete(this||e)._math_trace[i+"__"+s]},_in_math_trace:function(i,s){return"undefined"!==typeof(this||e)._math_trace[i+"__"+s]},_add_trigger:function(e,i){var s=this.getItem(i[0]);"undefined"===typeof s.depends&&(s.depends={});"undefined"===typeof s.depends[i[1]]&&(s.depends[i[1]]={});s.depends[i[1]][e[0]+"__"+e[1]]=e;s=this.getItem(e[0]);"undefined"===typeof s.triggers&&(s.triggers={});"undefined"===typeof s.triggers[e[1]]&&(s.triggers[e[1]]={});s.triggers[e[1]][i[0]+"__"+i[1]]=i},_remove_old_triggers:function(e,i){if(e&&"undefined"!==typeof e.triggers)for(var s in e.triggers[i]){var n=e.triggers[i][s];var r=this.getItem(n[0]);r&&delete r.depends[n[1]][e.id+"__"+i]}},_math_exception:function(e){var i=/#\w+/;var s=e.match(i);return null!==s&&s.length>0&&s[0]}};var gr={};var vr={_get_editor_type:function(e){return this.getColumnConfig(e.column).editor},getEditor:function(i,s){if(!i)return(this||e)._last_editor;if(1==arguments.length){s=i.column;i=i.row}return((this||e)._editors[i]||{})[s]},_for_each_editor:function(i){for(var s in(this||e)._editors){var n=(this||e)._editors[s];for(var r in n)"$count"!=r&&i.call(this||e,n[r])}},_init_editor:function(i,s,n){var r=i.row;var a=i.column;var o=s.config=this.getColumnConfig(a);false!==n&&this.showCell(r,a);var l=s.render();s.$inline&&(l=this._locateInput(i));s.node=l;var h=this.getItem(r);var _=o.editFormat;var c;(this||e)._settings.editMath&&(c=h["$"+a]);c=c||h[a];isUndefined(c)&&(c="");s.setValue(_?_(c):c,h);s.value=h[a];this._addEditor(i,s);s.$inline||(s._editor_pos=this._sizeToCell(i,l,true));s.afterRender&&s.afterRender();if((this||e)._settings.liveValidation){_event(s.node,"keyup",this._bind_live_validation(i,this||e));this.validateEditor(i)}return l},_bind_live_validation:function(e,i){return function(){i.validateEditor(e)}},_get_new_value:function(e){var i=this.getColumnConfig(e.column).editParse;var s=e.getValue();return i?i(s):s},_set_new_value:function(i,s,n){var r=n?{}:this.getItem(i.row);r[i.column]=s;(this||e)._settings.editMath&&(r["$"+i.column]=null);return r},_addEditor:function(i,s){var n=(this||e)._editors[i.row]=(this||e)._editors[i.row]||{};n.$count=(n.$count||0)+1;s.row=i.row;s.column=i.column;(this||e)._last_editor=n[i.column]=s;(this||e)._in_edit_mode++;(this||e)._last_editor_scroll=this.getScrollState()},_removeEditor:function(i){(this||e)._last_editor==i&&((this||e)._last_editor=0);i.destroy&&i.destroy();var s=(this||e)._editors[i.row];delete s[i.column];s.$count--;s.$count||delete(this||e)._editors[i.row];(this||e)._in_edit_mode--},_changeEditorId:function(i,s){var n=(this||e)._editors[i];if(n){(this||e)._editors[s]=n;delete(this||e)._editors[i];for(var r in n)"$count"!=r&&(n[r].row=s)}},_locate_cell:function(i){var s,n,r,a,o,l,h=this.getColumnConfig(i.column),_=0;if(h&&h.node&&h.attached){r=this.getIndexById(i.row);if((this||e)._spans_pull){l=this.getSpan(i.row,i.column);if(l)for(n=0;n<3;n++){s=(this||e)._spans_areas[n];for(a=0;!_&&a<s.childNodes.length;a++){o=s.childNodes[a];o.getAttribute("row")==r&&o.getAttribute("column")==this.getColumnIndex(i.column)&&(_=o)}}}!_&&r>=h._yr0-(this||e)._settings.topSplit&&r<h._yr1&&(_=h.node.childNodes[r-h._yr0+(this||e)._settings.topSplit])}return _},editCell:function(i,s,n,r){s=s||(this||e)._settings.columns[0].id;return le.edit.call(this||e,{row:i,column:s},n,r)},editRow:function(e){e&&e.row&&(e=e.row);var i=false;this.eachColumn((function(s){this.edit({row:e,column:s},i,!i);i=true}))},editColumn:function(e){e&&e.column&&(e=e.column);var i=false;this.eachRow((function(s){this.edit({row:s,column:e},i,!i);i=true}))},eachRow:function(i,s){var n=(this||e).data.order;s&&(n=(this||e).data._filter_order||n);for(var r=0;r<n.length;r++)i.call(this||e,n[r])},eachColumn:function(i,s){var n=(this||e)._hidden_column_order;if(s&&n.length)for(var r=0;r<n.length;r++){var a=this.getColumnConfig(n[r]);i.call(this||e,a.id,a)}else{var o=[].concat((this||e)._columns);for(var l=0;l<o.length;l++){var h=o[l];i.call(this||e,h.id,h)}}},_after_edit_next:function(i){if((this||e).getSelectedId){var s=this.getSelectedId(true);if(1==s.length){this._select(i);return false}}},_custom_tab_handler:function(i,s){if((this||e)._settings.editable&&!(this||e)._in_edit_mode){if(s.target&&"INPUT"==s.target.tagName)return true;var n=this.getSelectedId(true);if(1==n.length){var r=n[0];"row"==(this||e)._settings.select&&(r.column=(this||e)._settings.columns[s.shiftKey?0:(this||e)._settings.columns.length-1].id);this.editNext(i,r);return false}}return true},_find_cell_next:function(i,s,n){var r=this.getIndexById(i.row);var a=this.getColumnIndex(i.column);var o=(this||e).data.order;var l=(this||e)._columns;if(n)for(var h=r;h<o.length;h++){for(var _=a+1;_<l.length;_++){var c={row:o[h],column:l[_].id};if(s.call(this||e,c)&&(!(this||e)._checkCellMerge||!this._checkCellMerge(i,c))){c.toString=(this||e)._id_to_string;return c}}a=-1}else for(var d=r;d>=0;d--){for(var u=a-1;u>=0;u--){var f={row:o[d],column:l[u].id};if(s.call(this||e,f)){f.toString=(this||e)._id_to_string;return f}}a=l.length}return null},_correct_after_focus_y:function(){if((this||e)._in_edit_mode){var i=(this||e)._body.childNodes[1].firstChild.scrollTop;if(i){(this||e)._y_scroll.scrollTo(this.getScrollState().y+i);(this||e)._body.childNodes[1].firstChild.scrollTop=0}}},_correct_after_focus:function(){if((this||e)._in_edit_mode){var i=(this||e)._body.childNodes[1],s=i.scrollTop,n=i.scrollLeft;if((this||e)._ignore_after_focus_scroll)return(this||e)._ignore_after_focus_scroll=false;(this||e)._settings.prerender&&(this||e)._y_scroll.scrollTo(s);(this||e)._x_scroll.scrollTo(n);if((this||e)._touch_scroll){s&&((this||e)._body.childNodes[1].scrollTop=0);n&&((this||e)._body.childNodes[1].scrollLeft=0);(this||e)._ignore_after_focus_scroll=s||n}}},_component_specific_edit_init:function(){var i=this||e;this.attachEvent("onScrollY",(this||e)._update_editor_y_pos);this.attachEvent("onScrollX",(this||e)._update_editor_y_pos);this.attachEvent("onScrollY",(this||e)._refocus_inline_editor);this.attachEvent("onColumnResize",(function(){this.editStop()}));this.attachEvent("onAfterFilter",(function(){this.editStop()}));this.attachEvent("onRowResize",(function(){this.editStop()}));this.attachEvent("onAfterScroll",(function(){(this||e)._settings.topSplit&&this.editStop()}));(this||e)._body.childNodes[1].onscroll=function(){return i._correct_after_focus()};(this||e)._settings.prerender||((this||e)._body.childNodes[1].firstChild.onscroll=function(){return i._correct_after_focus_y()})},_update_editor_y_pos:function(){if((this||e)._in_edit_mode){var i=(this||e)._last_editor_scroll;(this||e)._last_editor_scroll=this.getScrollState();var s=(this||e)._last_editor_scroll.y-i.y;this._for_each_editor((function(i){if(i.getPopup){var n=this.getItemNode(i);var r=false;if((this||e)._settings.prerender){var a=i._editor_pos;var o=a.top-(this||e)._scrollTop;var l=a.left-(this||e)._scrollLeft;r=o<0||o+a.height>(this||e)._dtable_offset_height||l<0||l+a.width>(this||e).$width-(this||e)._scrollSizeX}!n||r?i.getPopup().show({x:-1e4,y:-1e4}):i.getPopup().show(n)}if(!(this||e)._settings.prerender&&!i.linkInput&&!i.$inline){i.node.top-=s;i.node.style.top=i.node.top+"px"}}))}}};var pr={$init:function(){this._clear_hidden_state();this.attachEvent("onStructureLoad",(this||e)._hideInitialColumns)},_clear_hidden_state:function(){(this||e)._hidden_column_hash={};(this||e)._hidden_column_order=_to_array();(this||e)._hidden_split=[0,0,0]},_hideInitialColumns:function(){var i=(this||e)._columns;for(var s=0;s<i.length;s++){i[s].header&&this._getInitialSpans(i,i[s].header);i[s].footer&&this._getInitialSpans(i,i[s].footer)}for(var n=i.length-1;n>=0;n--)(i[n].hidden||i[n].batch&&(this||e).config.visibleBatch&&i[n].batch!=(this||e).config.visibleBatch)&&this.hideColumn(i[n].id,{},true,true)},_getInitialSpans:function(e,i){for(var s=0;s<i.length;s++){var n=i[s];n&&n.colspan&&!n.$colspan&&(n.$colspan=n.colspan)}},moveColumn:function(i,s){var n=this.getColumnIndex(i);if(n==s||-1==n)return false;var r=(this||e)._hidden_column_order;var a=(this||e)._settings.columns;var o;var l=a.splice(n,1)[0];if(r.length){o=r.find(i);r.removeAt(o)}this._updateSplit(n,o,-1);var h=s-(s>n?1:0);d.insertAt.call(a,l,h);var _;if(r.length){var c=a[h-1];_=c&&c.id?r.find(c.id)+1:0;r.insertAt(l.id,_)}this._updateSplit(h,_,1);this._refresh_columns()},_init_horder:function(i,s){if(!i.length){for(var n=0;n<s.length;n++)i[n]=s[n].id;(this||e)._hidden_split=[(this||e)._settings.leftSplit,(this||e)._rightSplit,(this||e)._settings.rightSplit]}},isColumnVisible:function(i){return!(this||e)._hidden_column_hash[i]},hideColumn:function(i,s,n,r){var a=(this||e)._settings.columns;var o=(this||e)._hidden_column_order;var l=(this||e)._hidden_column_hash;var h,_=1;s=s||{};if(false!==r){var c=this.getColumnIndex(i);assert(-1!=c,"hideColumn: invalid ID or already hidden");if(-1==c||!this.callEvent("onBeforeColumnHide",[i]))return;this._init_horder(o,a);if(s.spans){var u=a[c].header;for(var f=0;f<u.length;f++)u[f]&&(_=Math.max(_,u[f].colspan||1))}this._fixSplit(c,_,-1);for(var g=c+_-1;g>=c;g--){this._hideColumn(c);h=a.splice(c,1)[0];l[h.id]=h;h._yr0=-1;h.hidden=true;delete(this||e)._columns_pull[h.id]}this.callEvent("onAfterColumnHide",[i])}else{h=l[i];assert(h,"showColumn: invalid ID or already visible");if(!h||!this.callEvent("onBeforeColumnShow",[i]))return;var v=null;var p=0;for(var m=0;m<o.length;m++){if(o[m]==i){p=m;break}l[o[m]]||(v=o[m])}if(s.spans){var b=h.header;for(var w=0;w<b.length;w++)if(b[w]){b[w].colspan=b[w].$colspan||b[w].colspan;_=Math.max(_,b[w].colspan||1)}}var x=v?this.getColumnIndex(v)+1:0;for(var y=p+_-1;y>=p;y--){var S=l[o[y]];if(S){d.insertAt.call(a,S,x);delete S.hidden;delete l[S.id];(this||e)._columns_pull[S.id]=S}else _--}this._fixSplit(p,_,1,true);this.callEvent("onAfterColumnShow",[i])}h.header&&this._fixColspansHidden(h,false!==r?0:1,"header");h.footer&&this._fixColspansHidden(h,false!==r?0:1,"footer");o.length===a.length&&this._clear_hidden_state();n||this._refresh_columns()},showColumn:function(e,i,s){return this.hideColumn(e,i,s,false)},_fixSplit:function(i,s,n,r){var a=r?(this||e)._hidden_split:[(this||e)._settings.leftSplit,(this||e)._rightSplit],o=_slicedToArray(a,2),l=o[0],h=o[1];i<l&&((this||e)._settings.leftSplit+=n*s);i>=h?(this||e)._settings.rightSplit+=n*s:(this||e)._rightSplit+=n*s},_updateSplit:function(i,s,n){if(i>=0){i<(this||e)._settings.leftSplit&&((this||e)._settings.leftSplit+=n);(this||e)._settings.rightSplit&&i>=(this||e)._rightSplit?(this||e)._settings.rightSplit+=n:(this||e)._rightSplit+=n}var r=(this||e)._hidden_column_order;if(r.length&&s>=0){s<(this||e)._hidden_split[0]&&((this||e)._hidden_split[0]+=n);(this||e)._hidden_split[2]&&s>=(this||e)._hidden_split[1]?(this||e)._hidden_split[2]+=n:(this||e)._hidden_split[1]+=n}},_fixColspansHidden:function(i,s,n){for(var r=i[n].length-1;r>=0;r--){var a=(this||e)._hidden_column_order;var o,l=false,h=0;for(var _=0;_<a.length;_++){var c=this.getColumnConfig(a[_]);var d=c[n][r];if(this.isColumnVisible(a[_])){if(l&&h>0&&o&&o.colspan>0){d=c[n][r]=o;o=d}else if(d&&d.$colspan&&h<=0){h=d.colspan=d.$colspan;o=d}l=null}else{if(d&&d.$colspan&&h<=0){h=d.colspan=d.$colspan;l=o=d}o&&h>0&&o.colspan--}h--}}},refreshColumns:function(i){(this||e)._dtable_column_refresh=true;if(i){this._clear_hidden_state();(this||e)._filter_elements={}}(this||e)._columns_pull={};for(var s=0;s<(this||e)._columns.length;s++){var n=(this||e)._columns[s];(this||e)._columns_pull[n.id]=n;n.attached=n.node=null}for(var r=0;r<3;r++){(this||e)._header.childNodes[r].innerHTML="";(this||e)._body.childNodes[r].firstChild.innerHTML=""}(this||e)._columns=(this||e).config.columns=i||(this||e).config.columns;(this||e)._rightSplit=(this||e)._columns.length-((this||e).config.rightSplit||0);(this||e)._dtable_fully_ready=0;this._define_structure();this._update_scroll();this.callEvent("onStructureUpdate");this.render();(this||e)._dtable_column_refresh=false},_refresh_columns:function(){(this||e)._dtable_fully_ready=0;this.callEvent("onStructureUpdate");this._apply_headers();this.render()},showColumnBatch:function(i,s,n){var r="undefined"!=typeof s;s=false!==s;var a=[];this.eachColumn((function(n,o){if(o.batch){var l=(this||e)._hidden_column_hash[o.id];s||(l=!l);o.batch==i&&l?this.hideColumn(o.id,{spans:true},true,!s):r||o.batch==i||l||this.hideColumn(o.id,{spans:true},true,s)}if(r&&s){var h=o.header;for(var _=0;_<h.length;_++)h[_]&&h[_].batch&&h[_].closed&&a.push(h[_].batch)}}),true);for(var o=0;o<a.length;o++)a[o]!=i&&this.showColumnBatch(a[o],false,true);n||this._refresh_columns()},_getHiddenColumnIndex:function(i){if((this||e)._hidden_column_order.length){for(var s=0;s<(this||e)._hidden_column_order.length;s++)if((this||e)._hidden_column_order[s]==i)return s;return-1}return this.getColumnIndex(i)},_getHiddenColumnId:function(i){return(this||e)._hidden_column_order.length?(this||e)._hidden_column_order[i]:this.columnId(i)}};var mr={$init:function(i){this.attachEvent("onAfterScroll",(this||e)._set_focusable_item);this.attachEvent("onFocus",(function(){addCss((this||e).$view,"webix_dtable_focused")}));this.attachEvent("onBlur",(function(){removeCss((this||e).$view,"webix_dtable_focused")}));"column"!=i.select&&((this||e).open||(this||e)._subViewStorage)&&this.attachEvent("onEnter",(function(){var i=this.getSelectedId(true);if(1==i.length&&!((this||e).getEditor&&this.getEditor())){var s=this.getItemNode(i[0]);i=i[0].row;("row"==(this||e).config.select||s.querySelector(".webix_tree_open")||s.querySelector(".webix_tree_close"))&&(this.isBranchOpen(i)?this.close(i):this.open(i))}}))},_set_focusable_item:function(){var i=this._getVisibleSelection();if(!i){var s=(this||e)._dataobj.querySelector(".webix_cell");s&&s.setAttribute("tabindex","0")}},_getVisibleSelection:function(){var e=this.getSelectedId(true);for(var i=0;i<e.length;i++)if(e[i].column&&this.isColumnVisible(e[i].column))return this.getItemNode(e[i]);return null},moveSelection:function(s,n,r){this._delayRender();if(!(this||e)._settings.disabled){n=n||{};var a=this.getSelectedId(true);var o=a.length-1;var l=!(!(this||e)._settings.multiselect&&!(this||e)._settings.areaselect)&&n.shift;if(a.length>1&&"cell"!==(this||e)._settings.select){a=a.sort(bind((function(e,i){return this.getIndexById(e.row)>this.getIndexById(i.row)||this.getColumnIndex(e.column)>this.getColumnIndex(i.column)?1:-1}),this||e));"up"!=s&&"left"!=s&&"top"!=s&&"pgup"!=s||(o=0)}if(o<0&&this.count()){if("down"==s||"right"==s)s="top";else{if("up"!=s&&"left"!=s)return;s="bottom"}o=0;a=[{row:1,column:1}]}if(o>=0){var h=a[o].row;var _=a[o].column;if("top"==s||"bottom"==s){h&&("top"==s?h=(this||e).data.getFirstId():"bottom"==s&&(h=(this||e).data.getLastId()));if(_){o=0;"bottom"==s&&(o=(this||e).config.columns.length-1);_=this.columnId(o)}}else if("up"==s||"down"==s||"pgup"==s||"pgdown"==s){if(h){var c=this.getIndexById(h);var d=1;"pgup"!=s&&"pgdown"!=s||(d=(this||e)._pager?(this||e)._pager.config.size:Math.round((this||e)._dtable_offset_height/(this||e)._settings.rowHeight));"up"==s||"pgup"==s?c-=d:"down"!=s&&"pgdown"!=s||(c+=d);c<0&&(c=0);c>=(this||e).data.order.length&&(c=(this||e).data.order.length-1);h=this.getIdByIndex(c);!h&&(this||e)._settings.pager&&this.showItemByIndex(c)}}else{if("right"!=s&&"left"!=s){assert(false,"Not supported selection moving mode");return}if(_&&"row"!=(this||e).config.select){var u=this.getColumnIndex(_);"right"==s?u++:"left"==s&&u--;u<0&&(u=0);u>=(this||e).config.columns.length&&(u=(this||e).config.columns.length-1);_=this.columnId(u)}else{if(((this||e).open||(this||e)._subViewStorage)&&"right"==s)return(this||e).open?this.open(h):this.openSub(h);if(((this||e).close||(this||e)._subViewStorage)&&"left"==s)return(this||e).close?this.close(h):this.closeSub(h)}}if(h){this.showCell(h,_);if(!(this||e).select){i.extend(this||e,(this||e)._selections._commonselect,true);(this||e)._settings.select=(this||e).open||(this||e)._subViewStorage?"row":"cell";i.extend(this||e,(this||e)._selections[(this||e)._settings.select],true)}var f={row:h,column:_};if(l&&"area"==(this||e)._settings.select){var g=(this||e)._selected_areas[(this||e)._selected_areas.length-1];this._extendAreaRange(f,g,s,n)}else this._select(f,l);if(!(this||e)._settings.clipboard&&false!==r){var v=this.getItemNode(f);v&&v.focus()}}}return false}}};var br={_set_drop_area:function(i){for(var s=0;s<(this||e)._columns.length;s++){var n=(this||e)._columns[s];var r=this.getItemNode({row:i,cind:s});r?r.parentNode.insertBefore(Nt._dropHTML[s],r):n.node.appendChild(Nt._dropHTML[s])}},_init_drop_area:function(){var i=[];var s=(this||e)._columns.length;var n=document.createElement("div");n.className="webix_drop_area";n.style.height=(this||e)._settings.rowHeight+"px";n.innerHTML=this.$dropHTML();for(var r=0;r<s;r++)i.push(n.cloneNode(true));return i}};var wr={drag_setter:function(s){this.attachEvent("onBeforeDrag",(function(e){return this._checkDragTopSplit(e.source)}));this.attachEvent("onBeforeDragIn",(function(i){var s=this._checkDragTopSplit(i.target);if(!s&&Nt._dropHTML){remove(Nt._dropHTML);(this||e)._marked_item_id=Nt._dropHTML=null}return s}));ne.drag_setter.call(this||e,s);"order"!=s&&"move"!=s||i.extend(this||e,br,true);return s},_add_css:function(i,s,n){var r=Nt._drag_context;(this||e)._settings.prerender||n||(i=[r.start]);for(var a=0;a<i.length;a++){for(var o=0;o<(this||e)._columns.length;o++){var l=this.getItemNode({row:i[a],cind:o});l&&addCss(l,s)}(this||e).data.addMark(i[a],s,1,1,true)}},_remove_css:function(i,s,n){var r=Nt._drag_context;(this||e)._settings.prerender||n||(i=[r.start]);for(var a=0;a<i.length;a++){for(var o=0;o<(this||e)._columns.length;o++){var l=this.getItemNode({row:i[a],cind:o});l&&removeCss(l,s)}(this||e).data.removeMark(i[a],s,1,true)}},_checkDragTopSplit:function(i){var s,n,r=false;if((this||e)._settings.topSplit&&i){isArray(i)||(i=[i]);for(s=0;!r&&s<i.length;s++){n=this.getIndexById(i[s]);r=n>=0&&n<(this||e)._settings.topSplit}}return!r},_toHTML:function(i){var s=(this||e)._content_width-(this||e)._scrollSizeY;var n="<div class='webix_dd_drag' style='width:"+s+"px;'>";var r=(this||e)._settings.columns;for(var a=0;a<r.length;a++){var o=this._getValue(i,r[a]);n+="<div style='width:"+r[a].width+"px;'>"+o+"</div>"}return n+"</div>"},getHeaderNode:function(i,s){return this._getHeaderNode(i,s,(this||e)._header)},getFooterNode:function(i,s){return this._getHeaderNode(i,s,(this||e)._footer)},_getHeaderNode:function(i,s,n){if(this.isColumnVisible(i)){var r=this.getColumnIndex(i);var a=(this||e)._settings.leftSplit>r?0:(this||e)._rightSplit<=r?2:1;s=s||0;var o=n.childNodes[a];var l="column";var h="row";return o.querySelector("div[".concat(l,'="').concat(r,'"][').concat(h,'="').concat(s,'"]'))}return null},getItemNode:function(i){if(i&&!i.header){var s=i.row||i;var n="number"===typeof i.rind?i.rind:this.getIndexById(s);var r=this._get_y_range();var a=r[0]-(this||e)._settings.topSplit;if(n<a&&n>r[1])return;var o=this._get_x_range();var l=(this||e)._settings.leftSplit?0:o[0];var h="number"===typeof i.cind;if(i.column||h){l=h?i.cind:this.getColumnIndex(i.column);if(l<(this||e)._rightSplit&&l>=(this||e)._settings.leftSplit&&(l<o[0]||l>o[1]))return}var _=(this||e)._settings.columns[l];if(_&&_.attached&&_.node){if("$webix-drop"===s)return Nt._dropHTML[l];var c=n<(this||e)._settings.topSplit||(this||e)._settings.prerender?n:n-a;var d=_.node.childNodes;var u=Math.min(d.length,c+1);for(var f=0;f<u;f++)"webix_drop_area"===d[f].className&&c++;return d[c]}}},_isDraggable:function(e){var i=e.target.nodeName;return"INPUT"!=i&&"TEXTAREA"!=i},dragColumn_setter:function(s){var n;"order"==s?n={$drag:bind((function(i,s,r){if(!this._isDraggable(s)||(this||e)._rs_process)return false;var a=this.locate(s);if(!a||!this.callEvent("onBeforeColumnDrag",[a.column,s]))return false;Nt._drag_context={from:n,start:a,custom:"column_dnd"};var o=this.getColumnConfig(a.column);if("touch"===r){var l=this.getHeaderNode(a.column,a.rind);(this||e)._relative_column_drag={x:pos(s).x-offset(l).x}}else(this||e)._relative_column_drag=posRelative(s);(this||e)._limit_column_drag=o.width;(this||e)._auto_scroll_force=true;return"<div class='webix_dd_drag_column' style='width:"+o.width+"px'>"+(o.header[0].text||"&nbsp;")+"</div>"}),this||e),$dragPos:bind((function(i,s,n){var r=this||e;var a=Nt.getContext();var o=offset((this||e).$view);n.style.display="none";var l=document.elementFromPoint(i.x,o.y+(this||e)._settings.headerRowHeight/2);var h=l?this.locate(l):null;var _=a.start.column;if(h&&h.column!=_&&(!(this||e)._column_dnd_temp_block||h.column!=(this||e)._last_sort_dnd_node)&&"column_dnd"==a.custom&&$$(l)==(this||e)){if(!this.callEvent("onBeforeColumnDropOrder",[_,h.column,s]))return;var c=this.getColumnIndex(_);var d=this.getColumnIndex(h.column);if(s.touches){(this||e)._dragTarget=s.target;(this||e)._dragTarget.style.display="none";(this||e).$view.parentNode.appendChild((this||e)._dragTarget)}this.moveColumn(_,d+(c<d?1:0));(this||e)._last_sort_dnd_node=h.column;(this||e)._column_dnd_temp_block=true}h&&h.column==_&&((this||e)._column_dnd_temp_block=false);n.style.display="block";i.x=i.x-(this||e)._relative_column_drag.x;i.y=o.y;if(i.x<o.x)i.x=o.x;else{var u=o.x+(this||e).$view.offsetWidth-(this||e)._scrollSizeY-(this||e)._limit_column_drag;i.x>u&&(i.x=u)}Nt._skip=true;(this||e)._auto_scroll_delay&&((this||e)._auto_scroll_delay=window.clearTimeout((this||e)._auto_scroll_delay));false!==(this||e)._settings.dragscroll&&((this||e)._auto_scroll_delay=delay((function(e){return r._auto_scroll_column(e)}),this||e,[pos(s)],250))}),this||e),$dragDestroy:bind((function(i,s){(this||e)._auto_scroll_force=null;(this||e)._auto_scroll_delay&&((this||e)._auto_scroll_delay=window.clearTimeout((this||e)._auto_scroll_delay));remove(s);(this||e)._dragTarget&&remove((this||e)._dragTarget);var n=Nt.getContext().start;this.callEvent("onAfterColumnDropOrder",[n.column,(this||e)._last_sort_dnd_node,i])}),this||e),$drop:function(){}}:s&&(n={_inner_drag_only:true,$drag:bind((function(i,s){if(!this._isDraggable(s)||(this||e)._rs_process)return false;var r=this.locate(s);if(!r||!this.callEvent("onBeforeColumnDrag",[r.column,s]))return false;Nt._drag_context={from:n,start:r,custom:"column_dnd"};var a=this.getColumnConfig(r.column).header;var o="&nbsp;";for(var l=0;l<a.length;l++)if(a[l]){o=a[l].text;break}(this||e)._auto_scroll_force=true;return"<div class='webix_dd_drag_column'>"+o+"</div>"}),this||e),$drop:bind((function(i,s,n){var r=n;n.touches&&(this||e)._drag_column_last&&(r=(this||e)._drag_column_last);var a=this.locate(r);if(!a)return false;var o=Nt.getContext().start.column;if(o!=a.column){if(!this.callEvent("onBeforeColumnDrop",[o,a.column,n]))return;var l=this.getColumnIndex(o);var h=this.getColumnIndex(a.column);this.moveColumn(o,h+(l<h?1:0));this.callEvent("onAfterColumnDrop",[o,a.column,n])}}),this||e),$dragIn:bind((function(i,s,r){var a=this||e;var o=Nt.getContext();if("column_dnd"!=o.custom||o.from!=n)return false;var l=r.target;while(-1==(l.className||"").indexOf("webix_hcell")){l=l.parentNode;if(!l)return}(this||e)._auto_scroll_delay&&((this||e)._auto_scroll_delay=window.clearTimeout((this||e)._auto_scroll_delay));false!==(this||e)._settings.dragscroll&&((this||e)._auto_scroll_delay=delay((function(e){return a._auto_scroll_column(e)}),this||e,[pos(r)],250));if(l!=(this||e)._drag_column_last){(this||e)._drag_column_last&&removeCss((this||e)._drag_column_last,"webix_dd_over_column");addCss(l,"webix_dd_over_column")}return(this||e)._drag_column_last=l}),this||e),$dragDestroy:bind((function(i,s){(this||e)._auto_scroll_force=null;(this||e)._auto_scroll_delay&&((this||e)._auto_scroll_delay=window.clearTimeout((this||e)._auto_scroll_delay));(this||e)._drag_column_last&&removeCss((this||e)._drag_column_last,"webix_dd_over_column");remove(s)}),this||e)});if(s){Nt.addDrag((this||e)._header,n);Nt.addDrop((this||e)._header,n,true);this.attachEvent("onDestruct",(function(){return Nt.unlink(n)}));(this||e)._auto_scroll||i.extend(this||e,G,true)}return s}};var xr={clearValidation:function(){for(var i in(this||e).data._marks)this._clear_invalid_css(i);(this||e).data.clearMark("webix_invalid",true)},_mark_invalid:function(e,i){this._clear_invalid_css(e);for(var s in i)this.addCellCss(e,s,"webix_invalid_cell");this.addCss(e,"webix_invalid")},_clear_invalid:function(e){this._clear_invalid_css(e);this.removeCss(e,"webix_invalid")},_clear_invalid_css:function(i){var s=(this||e).data.getMark(i,"$cellCss");if(s)for(var n in s)s[n]=s[n].replace("webix_invalid_cell","").replace("  "," ")},addRowCss:function(e,i,s){this.addCss(e,i,s)},removeRowCss:function(e,i,s){this.removeCss(e,i,s)},addCellCss:function(i,s,n,r){var a=(this||e).data.getMark(i,"$cellCss");var o=a||{};var l=o[s]||"";o[s]=l.replace(n,"").replace("  "," ")+" "+n;a||(this||e).data.addMark(i,"$cellCss",false,o,true);r||this.refresh(i)},removeCellCss:function(i,s,n,r){var a=(this||e).data.getMark(i,"$cellCss");if(a){var o=a[s]||"";o&&(a[s]=o.replace(n,"").replace("  "," "));r||this.refresh(i)}}};var yr={_prePrint:function(i,s){if(i.scroll&&!s)return true;i.header=isUndefined(i.header)?!!(this||e).config.header:i.header;i.footer=isUndefined(i.footer)?!!(this||e).config.footer:i.footer;i.xCorrection=i.xCorrection||0},_findIndex:function(e,i){var s=-1;for(var n=0;s<0&&n<e.length;n++)i(e[n])&&(s=n);return s},_getTableHeader:function(i,s,n){var r={},a=0;i.forEach(bind((function(o,l){var h=o[0],_=[],c=h.length;h.forEach(bind((function(i,o){var h=s[o+a];for(var d=0;d<h[n].length;d++){var u=h[n][d];if(u||r[l]&&r[l][d]){u=copy(u||{text:""});if(r[l]&&r[l][d]&&0===o){u.colspan=r[l][d];r[l][d]=0}if(u.colspan){var f=Math.min(u.colspan,c-o);r[l+1]=r[l+1]||{};r[l+1][d]=u.colspan-f;u.colspan=f}if(u.rowspan&&1===c){u.height=(u.height||(this||e).config.headerRowHeight)*u.rowspan;u.rowspan=null}var g={txt:u.rotate?this.getHeaderNode(h.id,d).innerHTML:u.text||(u.contentId?this.getHeaderContent(u.contentId).getValue():""),className:"webix_hcell webix_"+n+"_cell "+(u.css||""),style:{height:(u.height||(this||e).config.headerRowHeight)+"px",width:u.colspan?"auto":h.width+"px"},span:u.colspan||u.rowspan?{colspan:u.colspan||1,rowspan:u.rowspan||1}:null};_[d]=_[d]||[];_[d][o]=g}}}),this||e));i[l]="header"==n?_.concat(o):o.concat(_);a+=c}),this||e));return i},_getTableArray:function(i,s,n){var r=(this||e).config.columns;var a=this.getSelectedId(true);var o="page"==i.fit?Infinity:this._getPageWidth(i);var l=0;var h=0;var _=[];var c=0;var d=[];n=n||0+i.xCorrection;s=s||[];this.eachRow(bind((function(s){var u=0;var f=this.getItem(s);var g=this.getIndexById(s);var v=[];var p=false;for(var m=n;m<r.length;m++){var b=r[m].id;var w=this.getColumnIndex(b)-n;if(r[m]){u+=r[m].width;0===g&&d.push(r[m].width);if(u>o&&m>n){c=m;break}if("selection"!==i.data||"selection"==i.data&&-1!==this._findIndex(a,(function(e){return e.column==b&&e.row==s}))){var x;(this||e).getSpan&&(x=this.getSpan(s,b));if(x&&this.getColumnIndex(b)===n){var y=this.getColumnIndex(x[1]);if(y<n){x[2]=x[2]-(n-y);x[4]=x[4]?x[4]:f[x[1]]?this.getText(s,x[1]):null;x[1]=b}}if(!x||x&&x[0]==s&&x[1]==b){var S=x&&x[4]?x[4]:(this||e)._columns_pull[b]?this.getText(s,b):"";var $=this.getCss(s,b)+" "+(r[m].css||"")+(x?" webix_dtable_span "+(x[5]||""):"");var C={height:x&&x[3]>1?"auto":(f.$height||(this||e).config.rowHeight)+"px",width:x&&x[2]>1?"auto":r[m].width+"px"};v.push({txt:S,className:$,style:C,span:x?{colspan:x[2],spanStart:this.getColumnIndex(x[1]),rowspan:x[3]}:null});if(S||0===S){l=Math.max(w+1,l);h=Math.max(g+1,h)}p=p||!!S}else if(x){v.push({$inspan:true});l=Math.max(w+1,l);h=Math.max(g+1,h)}}}}i.skiprows&&!p||_.push(v)}),this||e));if(h&&l){if(i.trim){_.length=h;_=_.map((function(e){for(var i=e.length-1;i>=0;i--)if(e[i].span&&e[i].span.colspan){e[i].span.colspan=Math.min(e[i].span.colspan,e.length-i);break}e.length=l;return e}))}s.push(_)}if(c)this._getTableArray(i,s,c);else{i.footer&&(s=this._getTableHeader(s,r,"footer"));i.header&&(s=this._getTableHeader(s,r,"header"));"page"==i.fit&&this._correctWidth(s,d,l,i)}return s},_correctWidth:function(e,i,s,n){s&&n.trim&&(i.length=s);var r=0;for(var a=0;a<i.length;a++)r+=i[a];r>this._getPageWidth(n)&&e[0].forEach((function(e){for(var i=0;i<e.length;i++)e[i]&&e[i].style&&e[i].style.width&&(e[i].style.width="auto")}))},_getTableHTML:function(i,s){var n=create("div");i.forEach(bind((function(r,a){var o=create("table",{class:"webix_table_print "+(this||e).$view.className+(s.borderless?" borderless":""),style:"border-collapse:collapse",id:(this||e).$view.getAttribute("id")});r.forEach((function(e){var i=create("tr");e.forEach((function(e){if(!e.$inspan){var s=create("td");s.innerHTML=e.txt;s.className=e.className;for(var n in e.style)s.style[n]=e.style[n];if(e.span){s.colSpan=e.span.colspan;s.rowSpan=e.span.rowspan}i.appendChild(s)}}));o.appendChild(i)}));n.appendChild(o);if(a+1<i.length){var l=create("DIV",{class:"webix_print_pagebreak"});n.appendChild(l)}}),this||e));return n}};var Sr={$exportView:function(s){(this||e).isBranchOpen&&i.extend(s,{filterHTML:true});var n=s.export_mode;if("pdf"!=n&&"excel"!=n||s.dataOnly||!s.styles)return this||e;s.dataOnly=true;s.heights=isUndefined(s.heights)?"all":s.heights;var r="pdf"==n?toPDF(this||e,s):toExcel(this||e,s);r[0].styles=this._getExportStyles(s);delete s.dataOnly;return r},_getExportStyles:function(i){var s=i.export_mode;var n=(this||e).config.columns;var r=[];(this||e)._style_hash||((this||e)._style_hash={});(this||e)._style_hash[s]||((this||e)._style_hash[s]={});i.docHeader&&"excel"==s&&(r=[{0:this._getExportDocStyle(i.docHeader.css,s)},{0:{}}]);false!==i.header&&(r=this._getExportHStyles(i,"header",r,s));(this||e).data.each((function(i){var a={};for(var o=0;o<n.length;o++){var l=this.getCss(i.id,n[o].id);var h=n[o].node.className;var _="";var c=null;var d=null;if((this||e)._spans_pull&&(c=this.getSpan(i.id,n[o].id))){d=this.getSpanNode({row:c[0],column:c[1]});_="webix_dtable_span "+(c[5]||"")}else d=this.getItemNode({row:i.id,column:n[o].id});if(!d){d=create("div",{class:l,style:"visibility:hidden"});var u=n[o].node;if(!n[o].attached){u=create("div",{class:h,style:"visibility:hidden"});(this||e)._body.appendChild(u)}u.appendChild(d)}a[o]=this._getExportCellStyle(d,[l,h,_].join(":"),s)}r[r.length]=a}),this||e);false!==i.footer&&(this||e).config.footer&&(r=this._getExportHStyles(i,"footer",r,s));i.docFooter&&"excel"==s&&(r=r.concat([{0:{}},{0:this._getExportDocStyle(i.docFooter.css,s)}]));return r},_getExportHStyles:function(i,s,n,r){var a=(this||e).config.columns;var o=[];for(var l=0;l<a[0][s].length;l++){var h={};for(var _=0;_<a.length;_++){var c=a[_][s][l];if(c){var d=c.colspan?a[_+c.colspan-1].id:a[_].id;var u="header"==s?this.getHeaderNode(d,l):this.getFooterNode(d,l);if(u){var f=[u.className,c.css||"",s];h[_]=this._getExportCellStyle(u,f.join(":"),r);(c.colspan||c.rowspan)&&o.push([l,_,{colspan:c.colspan-1||0,rowspan:c.rowspan-1||0},h[_]])}}else for(var g=0;g<o.length;g++){var v=o[g][2],p=o[g][1],m=o[g][0];p+v.colspan>=_&&m+v.rowspan>=l&&(h[_]=o[g][3])}}n[n.length]=h}return n},_getBorderColor:function(e,i,s){return"0px"==e["border-".concat(s,"-width")]?null:ke.rgbToHex(e["border-".concat(s,"-color")])||i},_getExportCellStyle:function(i,s,n){if((this||e)._style_hash[n][s])return(this||e)._style_hash[n][s];var r=this._getRules(i);var a=ke.rgbToHex(r["background-color"])||"FFFFFF";var o={backgroundColor:a,fontSize:.75*r["font-size"].replace("px",""),color:ke.rgbToHex(r.color),textAlign:r["text-align"],borderRightColor:this._getBorderColor(r,a,"right"),borderLeftColor:this._getBorderColor(r,a,"left"),borderBottomColor:this._getBorderColor(r,a,"bottom"),borderTopColor:this._getBorderColor(r,a,"top")};var l="pdf"==n?o:this._getExcelCellRules(r,i,o);(this||e)._style_hash[n][s]=l;return l},_getExportDocStyle:function(s,n){s=i.extend(s||{},{visibility:"hidden","white-space":"nowrap","text-align":"left"});var r="";for(var a in s)r+=a+":"+s[a]+";";var o=create("div",{style:r});(this||e)._body.appendChild(o);var l=this._getExportCellStyle(o,r,n);remove(o);return l},_getExcelCellRules:function(e,i,s){var n={font:{},alignment:{},border:{}};n.font.name=e["font-family"].replace(/,.*$/,"");n.font.sz=s.fontSize;n.font.color={rgb:s.color};"normal"!==e["font-weight"]&&400!=e["font-weight"]&&(n.font.bold=true);"underline"===e["text-decoration-line"]&&(n.font.underline=true);"italic"===e["font-style"]&&(n.font.italic=true);"line-through"===e["text-decoration-line"]&&(n.font.strike=true);n.alignment.horizontal=s.textAlign;n.alignment.vertical=e.height==e["line-height"]?"center":"top";"normal"==e["white-space"]&&(n.alignment.wrapText=true);i.firstChild&&i.firstChild.className&&-1!==i.firstChild.className.indexOf("webix_rotate")&&(n.alignment.textRotation=90);n.fill={fgColor:{rgb:s.backgroundColor}};s.borderRightColor&&(n.border.right={style:"thin",color:{rgb:s.borderRightColor}});s.borderBottomColor&&(n.border.bottom={style:"thin",color:{rgb:s.borderBottomColor}});s.borderLeftColor&&(n.border.left={style:"thin",color:{rgb:s.borderLeftColor}});s.borderTopColor&&(n.border.top={style:"thin",color:{rgb:s.borderTopColor}});return n},_getRules:function(e){var i={};i=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle;return i}};var $r={};var Cr={};var kr={};var Ir={name:"datatable",defaults:{leftSplit:0,rightSplit:0,topSplit:0,columnWidth:100,sort:true,prerender:false,autoheight:false,autowidth:false,header:true,fixedRowHeight:true,scrollAlignY:true,scrollX:true,scrollY:true,datafetch:50,navigation:true},$skin:function(){(this||e).defaults.rowHeight=Ht.rowHeight;(this||e).defaults.minRowHeight=Ht.rowHeight-6;(this||e).defaults.headerRowHeight=Ht.barHeight-2*Ht.borderWidth;(this||e).defaults.minColumnWidth=2*Ht.dataPadding+Ht.borderWidth},on_click:{webix_excel_filter:function(){return false},webix_richfilter:function(){return false},webix_table_checkbox:function(i,s){s=this.locate(i);var n=this.getItem(s.row);var r=this.getColumnConfig(s.column);var a=i.target;var o="checkbox"==a.type?a.checked:n[s.column]!=r.checkValue;var l=o?r.checkValue:r.uncheckValue;var h={};h[s.column]=l;this.updateItem(s.row,h,(this||e)._settings.checkboxRefresh?"update":"save");this.callEvent("onCheck",[s.row,s.column,l]);return false},webix_table_radio:function(i){var s=this.locate(i);var n=this.getItem(s.row);var r=this.getColumnConfig(s.column);this.eachRow((function(i){var n=(this||e).data.pull[i];n&&n[s.column]==r.checkValue&&(n[s.column]=r.uncheckValue)}));n[s.column]=r.checkValue;this.callEvent("onCheck",[s.row,s.column,true]);this.refresh();return false}},on_dblclick:{webix_table_checkbox:function(){return(this||e).on_click.webix_table_checkbox.apply(this||e,arguments)}},on_context:{},$init:function(s){(this||e).on_click=i.extend({},(this||e).on_click);var n="<div class='webix_ss_header' section='header'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_body'><div class='webix_ss_left'><div class='webix_ss_center_scroll'></div></div>";n+="<div class='webix_ss_center'><div class='webix_ss_center_scroll' role='rowgroup'></div></div>";n+="<div class='webix_ss_right'><div class='webix_ss_center_scroll'></div></div></div>";n+="<div class='webix_ss_hscroll' role='scrollbar' aria-orientation='horizontal'></div><div class='webix_ss_footer' section='footer'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_vscroll_header'></div><div class='webix_ss_vscroll' role='scrollbar' aria-orientation='vertical'></div><div class='webix_ss_vscroll_footer'></div>";(this||e)._contentobj.innerHTML=n;(this||e)._top_id=(this||e)._contentobj.id=(this||e).name+uid();(this||e)._contentobj.className+=" webix_dtable";(this||e)._dataobj=(this||e)._contentobj;(this||e)._header=(this||e)._contentobj.firstChild;(this||e)._body=(this||e)._header.nextSibling;(this||e)._footer=(this||e)._body.nextSibling.nextSibling;(this||e)._viewobj.setAttribute("role","grid");s.editable||(this||e)._viewobj.setAttribute("aria-readonly","true");(this||e).data.provideApi(this||e,true);(this||e).data.attachEvent("onParse",bind((this||e)._call_onparse,this||e));(this||e).$ready.push((this||e)._first_render);(this||e)._columns=[];(this||e)._headers=[];(this||e)._footers=[];(this||e)._rows_cache=[];(this||e)._active_headers={};(this||e)._filter_elements={};(this||e)._sort_signs={};(this||e)._sort_signs_order=[];(this||e)._header_height=(this||e)._footer_height=0;(this||e)._destroy_with_me=[];(this||e).data.attachEvent("onServerConfig",bind((this||e)._config_table_from_file,this||e));(this||e).data.attachEvent("onServerOptions",bind((this||e)._config_options_from_file,this||e));this.attachEvent("onViewShow",(function(){this._restore_scroll_state();this._refresh_any_header_content()}));(this||e).data.attachEvent("onClearAll",bind((function(i){if(!i){(this||e)._scrollLeft=(this||e)._scrollTop=0;(this||e)._x_scroll&&(this||e)._x_scroll.reset();(this||e)._y_scroll&&(this||e)._y_scroll.reset();this._setLeftScroll(0)}}),this||e));this.attachEvent("onDestruct",(this||e)._clean_config_struct);this.attachEvent("onKeyPress",(this||e)._onKeyPress);this.attachEvent("onScrollY",(this||e)._adjust_rows);callEvent("onDataTable",[this||e,s])},_render_initial:function(){(this||e)._scrollSizeX=(this||e)._scrollSizeY=z.scrollSize;var i=(this||e)._settings.headerRowHeight+1;addStyle("#"+(this||e)._top_id+" .webix_cell { height:"+(this||e)._settings.rowHeight+"px; line-height:"+((this||e)._settings.rowLineHeight||(this||e)._settings.rowHeight)+"px;"+((this||e)._settings.fixedRowHeight?"":"white-space:normal;")+" }");addStyle("#"+(this||e)._top_id+" .webix_hcell { height:"+i+"px; line-height:"+i+"px;}");(this||e)._render_initial=function(){}},_first_render:function(){var i=this||e;(this||e).data.attachEvent("onStoreLoad",(function(){return i._refresh_any_header_content(true)}));(this||e).data.attachEvent("onSyncApply",(function(){return i._refresh_any_header_content(true)}));(this||e).data.attachEvent("onStoreUpdated",bind((function(){return(this||e).render.apply(this||e,arguments)}),this||e));(this||e).data.attachEvent("onStoreUpdated",bind((this||e)._refresh_tracking_header_content,this||e));this.render()},refresh:function(){this.render()},_delayRender:function(){var i=this||e;clearTimeout((this||e)._renderDelay);(this||e)._renderDelay=delay((function(){i._renderDelay=0;if(!isUndefined(i._delayedLeftScroll)){i._setLeftScroll(i._delayedLeftScroll);delete i._delayedLeftScroll}i.render()}))},render:function(i,s,n){if("save"!=n&&!(this||e)._renderDelay){if(!(this||e)._columns.length){var r=(this||e)._settings.columns;if(!r||!r.length){if(!(this||e)._settings.autoConfig||!(this||e).data.order.length||(this||e)._hidden_column_order.length)return;(this||e)._dtable_fully_ready=0;this._autoDetectConfig()}this._define_structure()}if(!this.isVisible((this||e)._settings.id)||(this||e).$blockRender)return this._render_initial();var a=(this||e).config.experimental&&!(this||e)._settings.subview;if(!i||-1==s||"paint"!=n&&"update"!=n||a){if((this||e)._render_timer){clearTimeout((this||e)._render_timer);(this||e)._render_timer=0}if(this.callEvent("onBeforeRender",[(this||e).data])){this._render_initial();(this||e)._dtable_fully_ready||this._apply_headers();(this||e)._content_width&&(a&&("paint"==n||"update"==n)&&i?this._repaint_single_row(i):this._check_rendered_cols(true,true));if(!i||"update"!=n){(this||e)._dtable_height=this._get_total_height();this._set_split_sizes_y()}(this||e)._viewobj.setAttribute("aria-colcount",Math.max((this||e)._hidden_column_order.length,(this||e)._columns.length));(this||e)._viewobj.setAttribute("aria-rowcount",(this||e).data.count());this.callEvent("onAfterRender",[(this||e).data]);return true}}else{(this||e)._render_timer&&clearTimeout((this||e)._render_timer);if((this||e)._render_timer&&(this||e)._render_timer_id!=i){(this||e)._render_timer_id=null;(this||e)._render_timer=delay((function(){this.render()}),this||e)}else{(this||e)._render_timer_id=i;(this||e)._render_timer=delay((function(){this.render(i,-1,n)}),this||e)}}}},getColumns:function(i){var s=(this||e)._hidden_column_order;if(i&&s.length){var n=[];for(var r=0;r<s.length;r++)n.push(this.getColumnConfig(s[r]));return n}return _toConsumableArray((this||e)._columns)},getColumnConfig:function(i){return(this||e)._columns_pull[i]||(this||e)._hidden_column_hash[i]},_config_options_from_file:function(i){for(var s in i){var n=this.getColumnConfig(s);assert(n,"Orphan collection: "+s);var r=new Ss({data:i[s]});(this||e)._destroy_with_me.push(r);this._bind_collection(r,n)}},_config_table_from_file:function(i){this._create_scheme_init();i.columns&&(this||e)._dtable_fully_ready&&this.refreshColumns(i.columns)},_define_structure:function(){if((this||e)._settings.columns){(this||e)._columns_pull={};(this||e)._columns=(this||e)._settings.columns;(this||e)._rightSplit=(this||e)._columns.length-((this||e).config.rightSplit||0);for(var i=0;i<(this||e)._columns.length;i++)this._prepare_single_column((this||e)._columns[i]);this._normalize_headers("header",(this||e)._headers);this._normalize_headers("footer",(this||e)._footers);this.callEvent("onStructureLoad",[])}},_prepare_single_column:function(i){(this||e)._columns_pull[i.id]=i;isUndefined(i.header)&&(i.header=i.id);var s=i.cssFormat;s&&(i.cssFormat=toFunctor(s,(this||e).$scope));i.width=this._correctColumnWidth(i.width||(this||e)._settings.columnWidth,i);"string"==typeof i.format&&(i.format=u[i.format]||window[i.format]);if(i.numberFormat){var n=i.numberFormat;"string"===typeof n&&(i.numberFormat=n=si.getConfig(n));i.format=si.numToStr(n);i.editFormat=i.editFormat||function(e){return si.format(e,n)};i.editParse=i.editParse||function(e){return si.parse(e,n)}}isUndefined(i.checkValue)&&(i.checkValue=1);isUndefined(i.uncheckValue)&&(i.uncheckValue=0);i.css&&"object"==_typeof(i.css)&&(i.css=createCss(i.css));var r=i.template;if(r){"string"==typeof r&&(r=r.replace(/#\$value#/g,"#"+i.id+"#"));i.template=template(r)}},_define_structure_and_render:function(){this._apply_headers()},_clean_config_struct:function(){for(var i=0;i<(this||e)._columns.length;i++){delete(this||e)._columns[i].attached;delete(this||e)._columns[i].node}},_apply_headers:function(){(this||e)._rightSplit=(this||e)._columns.length-((this||e).config.rightSplit||0);(this||e)._dtable_width=0;for(var i=0;i<(this||e)._columns.length;i++){if(!(this||e)._columns[i].node){var s=create("DIV");s.style.width=(this||e)._columns[i].width+"px";(this||e)._columns[i].node=s}i>=(this||e)._settings.leftSplit&&i<(this||e)._rightSplit&&((this||e)._dtable_width+=(this||e)._columns[i].width)}var n=[];if((this||e)._settings.rightSplit){var r=(this||e)._columns.length-(this||e)._settings.rightSplit;n[r]=" webix_first";n[r-1]=" webix_last"}if((this||e)._settings.leftSplit){var a=(this||e)._settings.leftSplit;n[a]=" webix_first";n[a-1]=" webix_last"}n[0]=(n[0]||"")+" webix_first webix_select_mark";var o=(this||e)._columns.length-1;n[o]=(n[o]||"")+" webix_last";for(var l=0;l<(this||e)._columns.length;l++){var h=(this||e)._columns[l].node;h.setAttribute("column",l);h.className="webix_column "+((this||e)._columns[l].css||"")+(n[l]||"")}this._create_scrolls();this._set_columns_positions();this._set_split_sizes_x();this._render_header_and_footer();(this||e)._dtable_fully_ready=true},_set_columns_positions:function(){var i=0;for(var s=0;s<(this||e)._columns.length;s++){var n=(this||e)._columns[s];s!=(this||e)._settings.leftSplit&&s!=(this||e)._rightSplit||(i=0);if(n.node){n.node.style.left=i+"px";if((this||e)._settings.leftSplit||(this||e)._settings.rightSplit){remove(n.node);n.attached=false}}i+=n.width}},_render_header_and_footer:function(){(this||e)._header_fix_width||((this||e)._header_fix_width=0);(this||e)._header_height=(this||e)._footer_height=0;if((this||e)._settings.header){this._refreshHeaderContent((this||e)._header,0,1);this._normalize_headers("header",(this||e)._headers);(this||e)._header_height=(this||e)._headers._summ;this._render_header_section((this||e)._header,"header",(this||e)._headers)}if((this||e)._settings.footer){this._refreshHeaderContent((this||e)._footer,0,1);this._normalize_headers("footer",(this||e)._footers);(this||e)._footer_height=(this||e)._footers._summ;this._render_header_section((this||e)._footer,"footer",(this||e)._footers)}this.refreshHeaderContent(false,false);this._size_header_footer_fix();for(var i=0;i<(this||e)._sort_signs_order.length;i++){var s=(this||e)._sort_signs_order[i];this._render_single_mark(s,(this||e)._sort_signs[s])}},_getHeaderHeight:function(i,s,n){var r=0;var a=i.colspan||1;var o="webix_hcell "+(i.css||"");if(i.rotate)o+=" webix_measure_rotate";else for(var l=0;l<a;l++)r+=(this||e)._columns[n+l]?(this||e)._columns[n+l].width:(this||e).config.columnWidth;var h=getTextSize([i.text],o,r);return i.rotate?h.width:h.height},_normalize_headers:function(i,s){var n=0;s.length=0;for(var r=0;r<(this||e)._columns.length;r++){var a=(this||e)._columns[r][i]||"";isArray(a)||(a=[a]);for(var o=0;o<a.length;o++){"object"!=_typeof(a[o])&&(a[o]={text:a[o]});a[o]&&a[o].height&&(s[o]=Math.max(s[o]||0,a[o].height));a[o]&&a[o].autoheight&&(s[o]=Math.max(s[o]||0,this._getHeaderHeight(a[o],(this||e)._columns[r],r)));a[o]&&a[o].css&&"object"===_typeof(a[o].css)&&(a[o].css=createCss(a[o].css))}n=Math.max(n,a.length);(this||e)._columns[r][i]=a}s._summ=n;for(var l=n-1;l>=0;l--){s[l]=s[l]||(this||e)._settings.headerRowHeight;s._summ+=1*s[l]}for(var h=0;h<(this||e)._columns.length;h++){var _=(this||e)._columns[h][i];for(var c=0;c<_.length;c++){if(_[c]&&_[c].rowspan)for(var d=1;d<_[c].rowspan;d++)_[c+d]=null;if(_[c]&&_[c].colspan)for(var u=1;u<_[c].colspan;u++)(this||e)._columns[h+u][i][c]=null}}for(var f=0;f<(this||e)._columns.length;f++){var g=(this||e)._columns[f][i];if(g.length<n){var v=g.length-1;g[v].rowspan=n-g.length+1;for(var p=v+1;p<n;p++)g[p]=null}}return n},_find_header_content:function(e,i){var s="active_id";return e.querySelector("DIV[".concat(s,'="').concat(i,'"]'))},getHeaderContent:function(s){var n=this._find_header_content((this||e)._header,s);n||(n=this._find_header_content((this||e)._footer,s));if(n){var r=(this||e)._active_headers[s];var a=fi[r.content];var o={type:a,getValue:function(e){return a.getValue(n,e)},setValue:function(e){return a.setValue(n,e)}};a.getHelper&&i.extend(o,a.getHelper(n,r));return o}},_render_empty_hcell:function(e,i){return"<div class='".concat(i,"' style='height:").concat(e,"px;'></div>")},_render_subheader:function(i,s,n,r,a){if(i==s)return"";var o="";var l='<div style="background:inherit;width:'.concat(n,'px;">');var h=(this||e)._columns[0][r].length;var _=0;for(var c=i;c<s;c++){var d=0;var u=(this||e)._columns[c].width;var f=c==i?"position:static;":"position:absolute;top:".concat(d,"px;left:").concat(_,"px;");l+='<div class="webix_hcolumn" style="'.concat(f,"width:").concat(u,'px;overflow:hidden;">');for(var g=0;g<h;g++){var v=(this||e)._columns[c][r][g];var p=a[g];var m="webix_hcell";(this||e)._columns[c].$selected&&(m+=" webix_sel_hcell");c==i&&(m+=" webix_first");c==s-1&&(m+=" webix_last");g==h-1&&(m+=" webix_last_row");if(v){if(v.content){v.contentId=v.contentId||uid();v.columnId=(this||e)._columns[c].id;v.format=(this||e)._columns[c].format;assert(fi,"Filtering extension was not included");assert(fi[v.content],"Unknown content type: "+v.content);v.text=fi[v.content].render(this||e,v);(this||e)._active_headers[v.contentId]=v;(this||e)._has_active_headers=true}v.css&&(m+=" "+v.css);var b="<div row='"+g+"'column='"+(v.colspan?v.colspan-1+c:c)+"'";var w="";v.contentId&&(b+=" active_id='"+v.contentId+"'");var x=false;var y=p;if(v.colspan&&v.colspan>1||v.rowspan&&v.rowspan>1){var S=this._summ_right((this||e)._columns,c,v.colspan)||u;y=this._summ_next(a,g,v.rowspan);y<=0&&(y=p);l+=this._render_empty_hcell(p+1,m);v.colspan&&c+v.colspan>=s&&(m+=" webix_last");v.rowspan&&g+v.rowspan>=h&&(m+=" webix_last_row");m+=" webix_span";x=true;w=" colspan='".concat(v.colspan||1,"' rowspan='").concat(v.rowspan||1,"' style='position:absolute;top:").concat(d,"px;left:").concat(_,"px;line-height:").concat(y+1,"px;width:").concat(S,"px;height:").concat(y+1,"px;'")}else p!=(this||e)._settings.headerRowHeight&&(w=" style='line-height:".concat(p+1,"px;height:").concat(p+1,"px;'"));b+=' class="'+m+'"';b+=" "+w+">";var $=""===v.text?"&nbsp;":v.text;v.rotate&&($="<div class='webix_rotate' style='width:"+(y-10)+"px;transform-origin:center "+(y-15)/2+"px;'>"+$+"</div>");b+=$+"</div>";x?o+=b:l+=b;d+=p+1}else{l+=this._render_empty_hcell(p+1,m);d+=p+1}}_+=u;l+="</div>"}return l+o+"</div>"},_summ_next:function(e,i,s){var n=-1;s+=i;for(i;i<s;i++)n+=e[i]+1;return n},_summ_right:function(e,i,s){var n=0;s+=i;for(i;i<s;i++)n+=e[i].width;return n},showItemByIndex:function(i,s){var n=(this||e)._settings.pager;if(n&&i>=(this||e)._settings.topSplit){var r=Math.floor(i/n.size);r!=n.page&&$$(n.id).select(r)}var a=this.getScrollState();if(i>=(this||e)._settings.topSplit||(this||e)._settings.prerender&&-1!=i){var o=this._get_y_range();if(i<o[0]+1||i>=o[1]-1){var l=this._getHeightByIndexSumm(n?(this||e).data.$min:0,i);var h=(this||e)._dtable_offset_height+1;var _=this._getHeightByIndex(i);if(i<o[0]+1)l=Math.max(0,l)-this._get_top_split_height();else if(l+_>h){l+=_-h;for(var c=i;c>0&&h>0;c--)h-=this._getHeightByIndex(c);i>0&&h&&(l+=this._getHeightByIndex(i+1))}else l=a.y;a.y=l}}if(-1!=s){if(s<(this||e)._settings.leftSplit||s>=(this||e)._rightSplit)return this.scrollTo(a.x,a.y);var d=this._get_x_range();if(s<d[0]+1||s>=d[1]-1){var u=0;for(var f=(this||e)._settings.leftSplit;f<s;f++)u+=(this||e)._columns[f].width;var g=(this||e)._columns[s].width;s<d[0]+1||(u+g>(this||e)._center_width?u+=g-(this||e)._center_width:u=a.x);a.x=u}}this.scrollTo(a.x,a.y)},showCell:function(e,i){if(!i||!e){var s=this.getSelectedId(true);if(1==s.length){i=i||s[0].column;e=e||s[0].row}}i=i?this.getColumnIndex(i):-1;e=e?this.getIndexById(e):-1;this.showItemByIndex(e,i)},scrollTo:function(i,s){if((this||e)._x_scroll){if((this||e)._scrollTo_touch)return this._scrollTo_touch(i,s);null!==i&&(this||e)._x_scroll.scrollTo(i);null!==s&&(this||e)._y_scroll.scrollTo(s)}},getScrollState:function(){if((this||e)._getScrollState_touch)return this._getScrollState_touch();var i=(this||e)._render_scroll_shift?0:(this||e)._render_scroll_diff||0;return{x:(this||e)._scrollLeft||0,y:(this||e)._scrollTop+i}},showItem:function(e){this.showItemByIndex(this.getIndexById(e),-1)},_render_header_section:function(i,s,n){var r=this||e;var a=i.childNodes;a[0].innerHTML=this._render_subheader(0,(this||e)._settings.leftSplit,(this||e)._left_width,s,n);a[1].innerHTML=this._render_subheader((this||e)._settings.leftSplit,(this||e)._rightSplit,(this||e)._dtable_width,s,n);a[2].innerHTML=this._render_subheader((this||e)._rightSplit,(this||e)._columns.length,(this||e)._right_width,s,n);var o=this.getScrollState().x;z.touch?Vt._set_matrix(a[1].firstChild,-o,0,"0ms"):a[1].scrollLeft=o;a[1].onscroll=function(){return r._scroll_with_header()}},_scroll_with_header:function(){var i=(this||e)._header.childNodes[1].scrollLeft;if((this||e)._ignore_after_focus_scroll)return(this||e)._ignore_after_focus_scroll=false;(this||e)._x_scroll.scrollTo(i);if((this||e)._touch_scroll){i&&((this||e)._header.childNodes[1].scrollLeft=0);(this||e)._ignore_after_focus_scroll=i}},_refresh_tracking_header_content:function(){this.refreshHeaderContent(true,true)},_refresh_any_header_content:function(e){this.refreshHeaderContent(false,true,null,e)},refreshHeaderContent:function(i,s,n,r){if((this||e)._settings.header){s&&this._refreshHeaderContent((this||e)._header,i,1,n,r);this._refreshHeaderContent((this||e)._header,i,0,n,r)}if((this||e)._settings.footer){s&&this._refreshHeaderContent((this||e)._footer,i,1,n,r);this._refreshHeaderContent((this||e)._footer,i,0,n,r)}},refreshFilter:function(e){this.refreshHeaderContent(false,true,e)},_refreshHeaderContent:function(i,s,n,r,a){if((this||e)._has_active_headers&&i){var o="DIV";var l="active_id";var h=i.querySelectorAll("".concat(o,"[").concat(l,"]"));for(var _=0;_<h.length;_++){var c=h[_].getAttribute("active_id");if(c){var d=(this||e)._active_headers[c];if(r&&r!=d.columnId)continue;var u=fi[d.content];n?u.getValue&&(d.value=u.getValue(h[_])):s&&!u.trackCells||a&&this.getColumnConfig(d.columnId).collection||u.refresh(this||e,h[_],d)}}}},headerContent:[],_set_size_scroll_area:function(i,s,n){if((this||e)._scrollSizeY){i.style.height=Math.max(s,1)-1+"px";i.style.width=((this||e)._rightSplit?0:n)+(this||e)._scrollSizeY-1+"px"}else i.style.display="none"},_size_header_footer_fix:function(){(this||e)._settings.header&&this._set_size_scroll_area((this||e)._header_scroll,(this||e)._header_height,(this||e)._header_fix_width);(this||e)._settings.footer&&this._set_size_scroll_area((this||e)._footer_scroll,(this||e)._footer_height,(this||e)._header_fix_width)},_update_scroll:function(){var i=!((this||e)._settings.autowidth||false===(this||e)._settings.scrollX);var s=!((this||e)._settings.autoheight||false===(this||e)._settings.scrollY);(this||e)._scrollSizeX=i?z.scrollSize:0;(this||e)._scrollSizeY=s?z.scrollSize:0;if((this||e)._x_scroll){(this||e)._x_scroll._settings.scrollSize=(this||e)._scrollSizeX;(this||e)._x_scroll._settings.scrollVisible=i}if((this||e)._y_scroll){(this||e)._y_scroll._settings.scrollSize=(this||e)._scrollSizeY;(this||e)._y_scroll._settings.scrollVisible=s}},_create_scrolls:function(){(this||e)._scrollTop=0;(this||e)._scrollLeft=0;var i=!((this||e)._settings.autowidth||false===(this||e)._settings.scrollX);var s=!((this||e)._settings.autoheight||false===(this||e)._settings.scrollY);i||((this||e)._scrollSizeX=0);s||((this||e)._scrollSizeY=0);if(!(this||e)._x_scroll){(this||e)._x_scroll=ui({view:"vscroll",container:(this||e)._footer.previousSibling,scrollWidth:(this||e)._dtable_width,scrollSize:(this||e)._scrollSizeX,scrollVisible:i});(this||e)._scrollSizeX||z.$customScroll||((this||e)._x_scroll._viewobj.style.position="absolute");(this||e)._x_scroll.attachEvent("onScroll",bind((this||e)._onscroll_x,this||e))}if(!(this||e)._y_scroll){(this||e)._header_scroll=(this||e)._footer.nextSibling;var n=(this||e)._header_scroll.nextSibling;(this||e)._footer_scroll=n.nextSibling;(this||e)._y_scroll=ui({view:"vscroll",container:n,scrollHeight:100,scroll:"y",scrollSize:(this||e)._scrollSizeY,scrollVisible:s});(this||e)._y_scroll.activeArea((this||e)._body);(this||e)._x_scroll.activeArea((this||e)._body,true);(this||e)._y_scroll.attachEvent("onScroll",bind((this||e)._onscroll_y,this||e))}(this||e)._content_width&&this.callEvent("onResize",[(this||e)._content_width,(this||e)._content_height]);z.$customScroll&&Kt.enable(this||e);(this||e)._create_scrolls=function(){}},columnId:function(i){return(this||e)._columns[i]&&(this||e)._columns[i].id},getColumnIndex:function(i){for(var s=0;s<(this||e)._columns.length;s++)if((this||e)._columns[s].id==i)return s;return-1},_getNodeBox:function(i,s){var n=0,r=0,a=0,o=0;var l;var h=0;for(l=0;l<(this||e)._columns.length;l++){if((this||e)._rightSplit==l||(this||e)._settings.leftSplit==l){n=0;h++}if((this||e)._columns[l].id==s)break;n+=(this||e)._columns[l].width}r+=(this||e)._columns[l].width;for(l=0;l<(this||e).data.order.length;l++){if((this||e).data.order[l]==i)break;o+=this._getHeightByIndex(l)}a+=this._getHeightByIndex(l);return[n,r,o-(this||e)._scrollTop,a,(this||e)._body.childNodes[h]]},_id_to_string:function(){return(this||e).row},locate:function(i,s){if((this||e)!=$$(i))return null;i=i.target||i;while(i&&i.getAttribute){if(i===(this||e).$view)break;var n=_getClassName(i).toString();var r=null;if(-1!=n.indexOf("webix_cell")){r=this._locate(i);r&&(r.row=(this||e).data.order[r.rind])}if(-1!=n.indexOf("webix_hcell")){r=this._locate(i);r&&(r.header=true)}if(-1!=n.indexOf("webix_drop_area")){r=this._locate(i);r&&(r.row=r.rind="$webix-drop")}if(r){if(s)return r.header?null:r.row;r.column=(this||e)._columns[r.cind].id;r.toString=(this||e)._id_to_string;return r}i=i.parentNode}return null},_locate:function(e){var i=e.parentNode;if(!i)return null;var s=1*(e.getAttribute("column")||i.getAttribute("column"));var n=e.getAttribute("aria-rowindex");var r=e.getAttribute("row")||(n?n-1:0);var a=1*(e.getAttribute("colspan")||i.getAttribute("colspan"));return{rind:r,cind:s,span:a}},_correctScrollSize:function(){var i=-(this||e)._center_width;for(var s=0;s<(this||e)._columns.length;s++)i+=(this||e)._columns[s].width;(this||e)._scrollLeft=Math.min((this||e)._scrollLeft,Math.max(0,i))},_updateColsSizeSettings:function(i){if((this||e)._dtable_fully_ready){this._correctScrollSize();this._set_columns_positions();this._set_split_sizes_x();this._render_header_and_footer();this._set_split_sizes_y();i||this._check_rendered_cols(false,false)}},setColumnWidth:function(e,i,s){return this._setColumnWidth(this.getColumnIndex(e),i,s)},_setColumnWidth:function(i,s,n,r){if(!(isNaN(s)||i<0)){var a=(this||e)._columns[i];s=this._correctColumnWidth(s,a);var o=a.width;if(o!=s){i>=(this||e)._settings.leftSplit&&i<(this||e)._rightSplit&&((this||e)._dtable_width+=s-o);a.width=s;if(!a.node)return false;a.node.style.width=s+"px";n||this._updateColsSizeSettings();this.callEvent("onColumnResize",[a.id,s,o,!!r]);return true}return false}},_correctColumnWidth:function(i,s){i=Math.max(i,s.minWidth||(this||e)._settings.minColumnWidth||0);i=Math.min(i,s.maxWidth||(this||e)._settings.maxColumnWidth||1e5);return i},_getRowHeight:function(i){return(i.$height||(this||e)._settings.rowHeight)+(i.$subopen?i.$subHeight:0)},_getHeightByIndex:function(i){var s=(this||e).data.order[i];return s?this._getRowHeight((this||e).data.pull[s]):(this||e)._settings.rowHeight},_getHeightByIndexSumm:function(i,s){if((this||e)._settings.fixedRowHeight)return Math.max(s-i,0)*(this||e)._settings.rowHeight;var n=0;for(;i<s;i++)n+=this._getHeightByIndex(i);return n},_cellPosition:function(i,s,n){if(i.row){s=i.column;i=i.row}var r=this.getColumnConfig(s).width;var a=this.getItem(i).$height||(this||e)._settings.rowHeight;if((this||e).config.spans&&n){var o=this.getSpan(i,s);if(o){var l=this.getSpanNode({row:o[0],column:o[1]});r=l.offsetWidth;a=l.offsetHeight}}var h=0;var _=0;for(var c=0;c<(this||e)._columns.length;c++){c!=(this||e)._settings.leftSplit&&c!=(this||e)._rightSplit||(h=0);var d=(this||e)._columns[c];if(d.id==s){var u=c<(this||e)._settings.leftSplit?0:c>=(this||e)._rightSplit?2:1;_=(this||e)._body.childNodes[u].firstChild;break}h+=d.width}var f=this.getIndexById(i);var g;if(f<(this||e)._settings.topSplit)g=this._getHeightByIndexSumm(0,f);else{var v=(this||e)._render_scroll_top||0;g=this._getHeightByIndexSumm(v,f)+((this||e)._render_scroll_shift||0)+(f>=v?this._get_top_split_height():0)}return{parent:_,top:g,left:h,width:r,height:a}},_get_top_split_height:function(){return(this||e)._settings.topSplit?this._getHeightByIndexSumm(0,(this||e)._settings.topSplit):0},_get_total_height:function(){var i=(this||e)._settings.pager;var s=0;var n=(this||e).data.order.length;if(i){s=i.size*i.page;n=Math.min(n,s+i.size);if(i.level){s=(this||e).data.$min;n=(this||e).data.$max}}return this._getHeightByIndexSumm(s,n)},setRowHeight:function(i,s){if(!isNaN(s)){s=Math.max(s,(this||e)._settings.minRowHeight||0);s=Math.min(s,(this||e)._settings.maxRowHeight||1e5);var n=this.getItem(i);var r=n.$height||(this||e)._settings.rowHeight;if(r!=s){n.$height=s;(this||e).config.fixedRowHeight=false;this.render();this.callEvent("onRowResize",[i,s,r])}}},_onscroll_y:function(i){var s=(this||e)._scrollTop!==i;(this||e)._scrollTop=i;if((this||e)._settings.prerender)if(z.touch)this._sync_y_scroll(-i,"0ms");else{var n=(this||e)._body.childNodes;for(var r=0;r<n.length;r++)n[r].scrollTop=i}else this._check_rendered_cols();z.$customScroll&&Kt._update_scroll((this||e)._body);if(s){this.callEvent("onScrollY",[]);this.callEvent("onAfterScroll",[])}},_setLeftScroll:function(i){(this||e)._scrollLeft=i;if(z.touch)return this._sync_x_scroll(-i,"0ms");(this||e)._body.childNodes[1].scrollLeft=i;(this||e)._settings.header&&((this||e)._header.childNodes[1].scrollLeft=i);(this||e)._settings.footer&&((this||e)._footer.childNodes[1].scrollLeft=i)},_onscroll_x:function(i){var s=(this||e)._scrollLeft!==i;(this||e)._renderDelay?(this||e)._delayedLeftScroll=i:this._setLeftScroll(i);(this||e)._settings.prerender||this._check_rendered_cols(true);z.$customScroll&&Kt._update_scroll((this||e)._body);if(s){this.callEvent("onScrollX",[]);this.callEvent("onAfterScroll",[])}},_get_x_range:function(i){if(i)return[0,(this||e)._columns.length];var s=(this||e)._scrollLeft;var n=(this||e)._settings.leftSplit;while(s>0&&(this||e)._columns.length-1>n){s-=(this||e)._columns[n].width;n++}var r=n;s&&n>0&&n--;s+=(this||e)._center_width;while(s>0&&r<(this||e)._rightSplit){s-=(this||e)._columns[r].width;r++}return[n,r]},getVisibleCount:function(){return Math.floor((this||e)._dtable_offset_height/(this||e).config.rowHeight)},_get_y_range:function(i){var s=(this||e)._scrollTop;var n=0;var r=this.count();var a=(this||e)._settings.pager;if(a){n=a.page*a.size;r=Math.min(r,n+a.size);if(a.level){n=(this||e).data.$min;r=(this||e).data.$max}}var o=n+(this||e)._settings.topSplit;if(i||(this||e)._settings.autoheight)return[o,r,0];var l=(this||e)._settings.fixedRowHeight?(this||e)._settings.rowHeight:0;if(l){var h=Math.ceil(s/l);s-=h*l;o+=h}else while(s>0){s-=this._getHeightByIndex(o);o++}var _=o>0&&s?-(this._getHeightByIndex(o-1)+s):0;var c=o;s&&o--;s+=((this||e)._dtable_offset_height||(this||e)._content_height)-this._get_top_split_height();if(l){var d=Math.ceil(s/l);s-=d*l;c+=d}else while(s>0&&c<r){s-=this._getHeightByIndex(c);c++}c>r&&(c=r);return[o,c,_]},_repaint_single_row:function(i){var s=this.getItem(i);var n=this.getIndexById(i);var r=this._get_y_range(true===(this||e)._settings.prerender);var a=(this||e)._settings.topSplit;var o="";if(n>=a){if(n<r[0]||n>=r[1])return;n-=r[0]-a}else o=n==a-1?" webix_topcell webix_last_topcell":" webix_topcell";var l=this._get_x_range();for(var h=0;h<(this||e)._columns.length;h++){var _=(this||e)._columns[h];h<(this||e)._rightSplit&&h>=(this||e)._settings.leftSplit&&(h<l[0]||h>l[1])&&(_._yr0=-999);if(_.attached&&_.node){var c=_.node.childNodes[n];if(!c)continue;var d=this._getValue(s,(this||e)._columns[h],0);c.innerHTML=d;c.className=this._getCss((this||e)._columns[h],d,s,i)+o}}},_check_rendered_cols:function(i,s){if((this||e)._columns.length&&!(this||e)._renderDelay){s&&this._clearColumnCache();var n=this._get_x_range((this||e)._settings.prerender);var r=this._get_y_range(true===(this||e)._settings.prerender);if(i){for(var a=(this||e)._settings.leftSplit;a<n[0];a++)this._hideColumn(a,s);for(var o=n[1];o<(this||e)._rightSplit;o++)this._hideColumn(o,s)}(this||e)._render_full_rows=[];for(var l=0;l<(this||e)._settings.leftSplit;l++)this._renderColumn(l,r,s);for(var h=n[0];h<n[1];h++)this._renderColumn(h,r,s,h==n[0]);for(var _=(this||e)._rightSplit;_<(this||e)._columns.length;_++)this._renderColumn(_,r,s);this._check_and_render_full_rows(r[0],r[1],s);this._check_load_next(r)}},_delete_full_rows:function(i,s){(this||e)._rows_cache_start=i;(this||e)._rows_cache_end=s;remove((this||e)._rows_cache);(this||e)._rows_cache=[]},_adjust_rows:function(){if((this||e)._rows_body&&!(this||e)._touch_scroll&&(this||e)._settings.prerender){var i=this.getScrollState();(this||e)._rows_body.style.top="-"+(i.y||0)+"px"}},_check_and_render_full_rows:function(i,s,n){(this||e)._rows_body&&((this||e)._rows_body.style.top=(this||e)._render_scroll_shift+"px");if(n||i!=(this||e)._rows_cache_start||s!=(this||e)._rows_cache_end){this._delete_full_rows(i,s);if((this||e)._render_full_row_some){(this||e)._render_full_row_some=false;for(var r=0;r<(this||e)._render_full_rows.length;r++){var a=(this||e)._render_full_rows[r];var o=this.getItem(a.id);var l;l="function"==typeof o.$row?o.$row.call(this||e,o,(this||e).type):this._getValue(o,this.getColumnConfig(o.$row),r);var h=(this||e)._rows_cache[r]=create("DIV",null,l);h.className="webix_cell "+(o.$sub?"webix_dtable_sub"+((this||e)._settings.subview?"view":"row"):"webix_dtable_colrow"+(o.$row?" webix_topcell"+((this||e).data.getMark(o.id,"webix_selected")?" webix_selected":""):""));h.setAttribute("column",0);h.setAttribute("row",a.index);var _=o.$height||(this||e)._settings.rowHeight;o.$subopen?h.style.height=o.$subHeight+"px":h.style.height=_+"px";h.style.paddingRight=z.scrollSize+"px";var c=(this||e)._render_full_rows[r].index<(this||e).config.topSplit?-(this||e)._render_scroll_shift:0;h.style.top=c+a.top+(o.$subopen?_-1:0)+"px";if(!(this||e)._rows_body){(this||e)._rows_body=create("DIV");(this||e)._rows_body.style.position="relative";(this||e)._rows_body.style.top=(this||e)._render_scroll_shift+"px";(this||e)._body.appendChild((this||e)._rows_body);this.attachEvent("onSyncScroll",(function(i,s,n){Vt._set_matrix((this||e)._rows_body,0,s,n)}))}(this||e)._rows_body.appendChild(h);(this||e)._settings.subview&&this.callEvent("onSubViewRender",[o,h])}}}else if((this||e).config.topSplit)for(var d=0;d<(this||e)._render_full_rows.length;d++){var u=(this||e)._rows_cache[d];(this||e)._render_full_rows[d].index<(this||e).config.topSplit&&(u.style.top=(this||e)._render_full_rows[d].top-(this||e)._render_scroll_shift+"px")}},_check_load_next:function(i){var s=(this||e)._settings.pager;var n=(this||e)._settings.datafetch;var r=!(this||e)._last_valid_render_pos||i[0]>=(this||e)._last_valid_render_pos;(this||e)._last_valid_render_pos=i[0];if((this||e)._data_request_flag){if(s&&(!n||n>=s.size)&&this._check_rows([0,s.size*s.page],Math.max(n,s.size),true))return(this||e)._data_request_flag=null;this._run_load_next((this||e)._data_request_flag,r);(this||e)._data_request_flag=null}else(this||e)._settings.loadahead&&this._check_rows(i,(this||e)._settings.loadahead,r)},_check_rows:function(i,s,n){var r=i[1];var a=r+s;if(!n){r=i[0]-s;a=i[0]}r<0&&(r=0);a=Math.min(a,(this||e).data.order.length-1);var o=false;for(var l=r;l<a;l++)if(!(this||e).data.order[l])if(o){o.last=l;o.count=l-r}else o={start:l,count:a-r};if(o){this._run_load_next(o,n);return true}},_run_load_next:function(i,s){var n=Math.max(i.count,(this||e)._settings.datafetch||(this||e)._settings.loadahead||0);var r=s?i.start:i.last-n+1;this._maybe_loading_already(i.count,i.start)||this.loadNext(n,r)},_preserveScrollTarget:function(i){if(z.isSafari){var s,n,r,a,o=[(this||e)._x_scroll,(this||e)._y_scroll];for(s=0;s<2;s++){a=o[s];a&&a._scroll_trg&&a._scroll_trg.parentNode==i&&(n=a._scroll_trg)}if(n){(this||e)._scrollWheelTrg&&remove((this||e)._scrollWheelTrg);(this||e)._scrollWheelTrg=n;r=n.cloneNode(true);n.parentNode.insertBefore(r,n);(this||e)._scrollWheelTrg.style.display="none";(this||e)._body.appendChild((this||e)._scrollWheelTrg)}}},_hideColumn:function(i){var s=(this||e)._columns[i];this._preserveScrollTarget(s.node);remove(s.node);s.attached=false},_clearColumnCache:function(){for(var i=0;i<(this||e)._columns.length;i++)(this||e)._columns[i]._yr0=-1;if((this||e)._rows_cache.length){remove((this||e)._rows_cache);(this||e)._rows_cache=[]}},getText:function(e,i){return this._getValue(this.getItem(e),this.getColumnConfig(i),0)},getCss:function(e,i){var s=this.getItem(e);return this._getCss(this.getColumnConfig(i),s[i],s,e)},_getCss:function(i,s,n,r){var a="webix_cell";if(i.cssFormat){var o=i.cssFormat(s,n,r,i.id);o&&("object"==_typeof(o)?a+=" "+createCss(o):a+=" "+o)}var l=n.$css;if(l){"object"==_typeof(l)&&(n.$css=l=createCss(l));a+=" "+l}var h=(this||e).data._marks[r];if(h){h.$css&&(a+=" "+h.$css);if(h.$cellCss){var _=h.$cellCss[i.id];_&&(a+=" "+_)}}if(n.$cellCss){var c=n.$cellCss[i.id];if(c){"object"==_typeof(c)&&(c=createCss(c));a+=" "+c}}var d=(this||e).data.getMark(n.id,"webix_selected");(d&&(d.$row||d[i.id])||i.$selected)&&(a+=(this||e)._select_css);return a},_getValue:function(i,s,n){if(!i)return"";var r;r=i[s.id];void 0!==r&&null!==r||(r="");s.format&&(r=s.format(r));s.template&&(r=s.template(i,(this||e).type,r,s,n));return r},type:{checkbox:function(e,i,s,n){var r=s==n.checkValue?'checked="true"':"";return"<input class='webix_table_checkbox' type='checkbox' "+r+">"},radio:function(e,i,s,n){var r=s==n.checkValue?'checked="true"':"";return"<input class='webix_table_radio' type='radio' "+r+">"},editIcon:function(){return"<span class='webix_icon wxi-pencil'></span>"},trashIcon:function(){return"<span class='webix_icon wxi-trash'></span>"}},type_setter:function(s){if((this||e).types&&(this||e).types[s]){(this||e).type=clone((this||e).types[s]);(this||e).type.css&&((this||e)._contentobj.className+=" "+(this||e).type.css)}else type(this||e,s);(this||e).type.on_click&&i.extend((this||e).on_click,(this||e).type.on_click);return s},_renderColumn:function(i,s,n,r){var a=(this||e)._columns[i];if(!a.attached){var o=i<(this||e)._settings.leftSplit?0:i>=(this||e)._rightSplit?2:1;(this||e)._body.childNodes[o].firstChild.appendChild(a.node);a.attached=true;a.split=o}(this||e)._render_scroll_top=s[0];(this||e)._render_scroll_shift=0;(this||e)._render_scroll_diff=s[2];if((this||e)._settings.scrollAlignY)s[1]==(this||e).data.order.length||(this||e).data.$pagesize&&s[1]%(this||e).data.$pagesize===0?a.node.style.top=((this||e)._render_scroll_shift=s[2])+"px":a._yr2&&(a.node.style.top="0px");else{(this||e)._render_scroll_shift=s[2];a.node.style.top=s[2]+"px"}if(!n&&a._yr0==s[0]&&a._yr1==s[1]&&(!(this||e)._settings.topSplit||a._render_scroll_shift==(this||e)._render_scroll_shift))return 0;var l="";var h=(this||e)._settings.columns[i];var _={row:(this||e)._settings.rowHeight,total:0,single:r};for(var c=0;c<(this||e)._settings.topSplit;c++)l+=this._render_single_cell(c,h,s,_,-(this||e)._render_scroll_shift,i);(this||e)._data_request_flag=null;for(var d=Math.max(s[0],(this||e)._settings.topSplit);d<s[1];d++)l+=this._render_single_cell(d,h,s,_,-1,i);this._preserveScrollTarget(a.node);a.node.innerHTML=l;a._yr0=s[0];a._yr1=s[1];a._yr2=s[2];a._render_scroll_shift=(this||e)._render_scroll_shift;return 1},_render_single_cell:function(i,s,n,r,a,o){var l=(this||e).data.order[i];var h=(this||e).data.getItem(l);var _="";if(h){var c=" role='gridcell' aria-rowindex='"+(i+1)+"' aria-colindex='"+(this.getColumnIndex(s.id)+1)+"'"+(h.$count||h.$sub?" aria-expanded='"+(h.open||h.$subopen?"true":"false")+"'":"")+(h.$level?" aria-level='"+h.$level+"'":"");if(r.single&&h.$row){(this||e)._render_full_row_some=true;(this||e)._render_full_rows.push({top:r.total,id:h.id,index:i});if(!h.$sub){var d=h.$height||r.row;r.total+=d;return"<div"+c+" class='webix_cell' style='height:"+d+"px;'></div>"}}var u=this._getValue(h,s,i);var f=this._getCss(s,u,h,l);var g=" aria-selected='true' tabindex='0'";if(-1!==f.indexOf("select"))if(-1!==f.indexOf("row")){var v=this._get_x_range();v[0]===o&&(c+=g)}else-1!==f.indexOf("col")?i===n[0]&&(c+=g):c+=g;var p=!!h.$subopen;var m=p?"margin-bottom:"+h.$subHeight+"px;":"";if(a>=0){a>0&&(m+="top:"+a+"px;'");f="webix_topcell "+f;i==(this||e)._settings.topSplit-1&&(f="webix_last_topcell "+f)}if(h.$height){_="<div"+c+" class='"+f+"' style='height:"+h.$height+"px;"+m+"'>"+u+"</div>";r.total+=h.$height-r.row}else _="<div"+c+" class='"+f+"'"+(m?" style='"+m+"'":"")+">"+u+"</div>";p&&(r.total+=h.$subHeight)}else{_="<div role='gridcell' class='webix_cell'></div>";(this||e)._data_request_flag?(this||e)._data_request_flag.last=i:(this||e)._data_request_flag={start:i,count:n[1]-i}}r.total+=r.row;return _},_set_split_sizes_y:function(){if((this||e)._columns.length&&!isNaN(1*(this||e)._content_height)){debug_size_box(this||e,["y-sizing"],true);var i=(this||e)._dtable_height+((this||e)._scrollSizeX?(this||e)._scrollSizeX:0);if(!(this||e)._settings.autoheight&&!(this||e)._settings.yCount||!this.resize()){(this||e)._y_scroll.sizeTo((this||e)._content_height,(this||e)._header_height,(this||e)._footer_height);(this||e)._y_scroll.define("scrollHeight",i);(this||e)._dtable_offset_height=Math.max(0,(this||e)._content_height-(this||e)._scrollSizeX-(this||e)._header_height-(this||e)._footer_height);for(var s=0;s<3;s++){(this||e)._body.childNodes[s].style.height=(this||e)._dtable_offset_height+"px";(this||e)._settings.prerender?(this||e)._body.childNodes[s].firstChild.style.height=(this||e)._dtable_height+"px":(this||e)._body.childNodes[s].firstChild.style.height=(this||e)._dtable_offset_height+"px"}(this||e)._header.style.height=(this||e)._header_height+"px"}}},_set_split_sizes_x:function(){if((this||e)._columns.length){var i=0;(this||e)._left_width=0;(this||e)._right_width=0;(this||e)._center_width=0;while(i<(this||e)._settings.leftSplit){(this||e)._left_width+=(this||e)._columns[i].width;i++}i=(this||e)._columns.length-1;while(i>=(this||e)._rightSplit){(this||e)._right_width+=(this||e)._columns[i].width;i--}if((this||e)._content_width&&(!(this||e)._settings.autowidth||!this.resize())){(this||e)._center_width=(this||e)._content_width-(this||e)._right_width-(this||e)._left_width-(this||e)._scrollSizeY;(this||e)._body.childNodes[1].firstChild.style.width=(this||e)._dtable_width+"px";(this||e)._body.childNodes[0].style.width=(this||e)._left_width+"px";(this||e)._body.childNodes[1].style.width=(this||e)._center_width+"px";(this||e)._body.childNodes[2].style.width=(this||e)._right_width+"px";(this||e)._header.childNodes[0].style.width=(this||e)._left_width+"px";(this||e)._header.childNodes[1].style.width=(this||e)._center_width+"px";(this||e)._header.childNodes[2].style.width=(this||e)._right_width+"px";(this||e)._footer.childNodes[0].style.width=(this||e)._left_width+"px";(this||e)._footer.childNodes[1].style.width=(this||e)._center_width+"px";(this||e)._footer.childNodes[2].style.width=(this||e)._right_width+"px";var s=(this||e)._center_width-(this||e)._dtable_width;s<0&&(s=0);if(s!=(this||e)._header_fix_width){(this||e)._header_fix_width=s;this._size_header_footer_fix()}(this||e)._x_scroll.sizeTo((this||e)._content_width-(this||e)._scrollSizeY);(this||e)._x_scroll.define("scrollWidth",(this||e)._dtable_width+(this||e)._left_width+(this||e)._right_width)}}},$getSize:function(i,s){if(((this||e)._settings.autoheight||(this||e)._settings.yCount)&&(this||e)._settings.columns){var n=((this||e)._settings.yCount||0)*(this||e)._settings.rowHeight;n||(n=this.isVisible()?(this||e)._dtable_height:this.count()*(this||e)._settings.rowHeight);(this||e)._settings.height=Math.max(n+((this||e)._scrollSizeX?(this||e)._scrollSizeX:0)-1,(this||e)._settings.minHeight||0)+(this||e)._header_height+(this||e)._footer_height}(this||e)._settings.autowidth&&(this||e)._settings.columns&&((this||e)._settings.width=Math.max((this||e)._dtable_width+(this||e)._left_width+(this||e)._right_width+(this||e)._scrollSizeY,(this||e)._settings.minWidth||0));var r=(this||e)._left_width+(this||e)._right_width+(this||e)._scrollSizeY;var a=St.api.$getSize.call(this||e,i,s);a[0]=Math.max(a[0]||r);return a},_restore_scroll_state:function(){if((this||e)._x_scroll){var i=this.getScrollState();(this||e)._x_scroll.config.scrollPos=(this||e)._y_scroll.config.scrollPos=-1;this.scrollTo(i.x,i.y)}},$setSize:function(){var i=(this||e)._content_width;var s=(this||e)._content_height;if(St.api.$setSize.apply(this||e,arguments)){if((this||e)._dtable_fully_ready){this.callEvent("onResize",[(this||e)._content_width,(this||e)._content_height,i,s]);this._set_split_sizes_x();this._set_split_sizes_y()}this.render()}},_on_header_click:function(i,s){var n=this.getColumnConfig(i);if((this||e)._settings.sort&&n.sort){var r="asc";(this||e)._last_sorted[n.id]?r="asc"==(this||e)._last_sorted[n.id].dir?"desc":"asc":(this||e)._sort_signs[n.id]&&(r="asc"==(this||e)._sort_signs[n.id].getAttribute("webix_sort_dir")?"desc":"asc");this._sort(n.id,r,n.sort,s.ctrlKey||s.metaKey)}},markSorting:function(i,s,n){s=s||"asc";if(!n){(this||e)._sort_signs_order=[];for(var r in(this||e)._sort_signs)if(r!==i){var a=(this||e)._sort_signs[r].parentNode;if(a){a.removeAttribute("aria-sort");a.removeAttribute("tabindex")}remove((this||e)._sort_signs[r]);delete(this||e)._sort_signs[r]}else{(this||e)._sort_signs_order.push(r);(this||e)._sort_signs[r].firstChild.innerHTML="1"}}if(i){if((this||e)._sort_signs[i])(this||e)._sort_signs[i].className="webix_ss_sort_".concat(s);else{var o=create("div",{webix_sort_dir:s,class:"webix_ss_sort_".concat(s)},'<div class="webix_ss_sort_num">'.concat((this||e)._sort_signs_order.length+1,"</div>"));this._render_single_mark(i,o,s);(this||e)._sort_signs[i]=o;(this||e)._sort_signs_order.push(i)}var l=(this||e)._sort_signs[(this||e)._sort_signs_order[0]];switch((this||e)._sort_signs_order.length){case 1:addCss(l,"webix_ss_sort_single");break;case 2:removeCss(l,"webix_ss_sort_single")}}},_render_single_mark:function(e,i,s){s=s||i.getAttribute("webix_sort_dir");var n=this._get_header_cell(this.getColumnIndex(e));if(n){"absolute"!=n.style.position&&(n.style.position="relative");n.appendChild(i);n.setAttribute("aria-sort",s+"ending");n.setAttribute("tabindex","0")}},scroll_setter:function(i){if("string"==typeof i){(this||e)._settings.scrollX=-1!=i.indexOf("x");(this||e)._settings.scrollY=-1!=i.indexOf("y");return i}return(this||e)._settings.scrollX=(this||e)._settings.scrollY=i},_get_header_cell:function(i){var s="column";var n=(this||e)._header.querySelectorAll("div[".concat(s,'="').concat(i,'"]'));var r=null;for(var a=0;a<n.length;a++){var o=n[a].getAttribute("active_id");if(o&&!fi[(this||e)._active_headers[o].content].$icon)return null;if(n[a].innerHTML){r=n[a];if((n[a].colSpan||0)<2)return r}}return r},_last_order:[],_last_sorted:{},_sort:function(i,s,n,r){var a=this||e;r="multi"===(this||e)._settings.sort&&r;s=s||"asc";if(!r){(this||e)._last_order=[];(this||e)._last_sorted={}}var o=this.getColumnConfig(i);var l="function"==typeof o.sort?{as:o.sort,dir:s}:{by:o.id,dir:s,as:o.sort};(this||e)._last_sorted[o.id]||(this||e)._last_order.push(o.id);(this||e)._last_sorted[o.id]=l;if("server"==n){var h=[o.id,s,n];(this||e)._last_order.length>1&&(h=[(this||e)._last_order.map((function(e){return a._last_sorted[e]}))]);this.callEvent("onBeforeSort",h);(this||e)._skip_server_op?(this||e)._skip_server_op.$params=h:this.loadNext(0,0,0,0,true,true).then((function(){return a._on_after_sort(h)}))}else{if("text"==n){var _="$text_"+o.id;(this||e).data.each((function(e){e[_]=this.getText(e.id,o.id)}),this||e);l.as="string";l.by=_}(this||e)._last_order.length>1?(this||e).data.sort((this||e)._last_order.map((function(e){return a._last_sorted[e]}))):(this||e).data.sort(l)}this.markSorting(o.id,l.dir,r)},_on_after_sort:function(e){this.callEvent("onAfterSort",e)},_mouseEventCall:function(i,s,n,r){var a,o,l;if(i.length)for(o=0;o<i.length;o++){a=toFunctor(i[o],(this||e).$scope);l=a.call(this||e,s,n,r);if(false===l)return false}},_mouseEvent:function(i,s,n,r){var a=i.target;if(!(this||e)._settings.subview||(this||e)==$$(a)){var o,l="",h=[],_=false,c=null;while(a&&a.parentNode&&(this||e)._viewobj&&a!=(this||e)._viewobj.parentNode){var d=_getClassName(a);if((l=d)&&s){l=l.toString().split(" ");for(var u=l.length-1;u>=0;u--)s[l[u]]&&h.push(s[l[u]])}if(a.parentNode.getAttribute&&!c){var f=a.parentNode.getAttribute("column")||a.getAttribute("column");if(f){var g=(this||e)._body.contains(a);if(!(this||e)._columns[f])return;_=true;if(g){var v=a.parentNode.getAttribute("row")||a.getAttribute("row");if(!v){if(a.getAttribute("column"))return;v=index(a);if(v>=(this||e)._settings.topSplit){var p=(this||e)._settings.pager;(p||!(this||e)._settings.prerender&&!(this||e)._settings.autoheight)&&(v+=(this||e)._columns[f]._yr0-(this||e)._settings.topSplit)}}(this||e)._item_clicked=c={row:(this||e).data.order[v],column:(this||e)._columns[f].id};c.toString=(this||e)._id_to_string}else(this||e)._item_clicked=c={column:(this||e)._columns[f].id};o=this._mouseEventCall(h,i,c,a);if(false===o)return;if(g)this.callEvent("on"+n,[c,i,a])&&r&&this.callEvent("on"+r,[c,i,a]);else if("ItemClick"==n){var m=(this||e)._header.contains(a);m&&this.callEvent("onHeaderClick",[c,i,a])&&this._on_header_click(c.column,i)}h=[]}}a=a.parentNode}this._mouseEventCall(h,i,c,(this||e).$view);return _}},_get_tooltip_data:function(i,s){var n=this.locate(s);if(!n)return null;var r=tt._tooltip;var a;if(n.header){var o=s.target;var l=o;var h;var _=n.cind-(n.span?n.span-1:0);var c=-1;while(l&&!h){l=l.parentNode;h=l.getAttribute("section")}while(o&&c<0){var d=o.getAttribute("row");d&&(c=d);o=o.parentNode}var u=(this||e)._columns[_][h][c];if(!u.tooltip)return null;r.type.template=template(true===u.tooltip?"#text#":u.tooltip);a=u}else{var f=r.type.column=this.getColumnConfig(n.column);if(!f.tooltip&&void 0!==f.tooltip)return null;if(true===f.tooltip||!f.tooltip&&isUndefined((this||e)._settings.tooltip.template))a=this.getText(n.row,n.column).toString();else if(f.tooltip){var g=s.target.getAttribute("webix_area");r.type.template=g?function(i,s){var n=i[f.id];return template(f.tooltip).call(this||e,i,s,n[g],g)}:template(f.tooltip)}else r.type.template=template((this||e)._settings.tooltip.template)}return void 0!==a?a:this.getItem(n.row)},$tooltipOut:function(){tt._hide_tooltip();delete tt._tooltip.type.column;return null},showOverlay:function(i){if(!(this||e)._datatable_overlay){var s=create("DIV",{class:"webix_overlay"},"");(this||e)._body.appendChild(s);(this||e)._datatable_overlay=s}(this||e)._datatable_overlay.innerHTML=i},hideOverlay:function(){if((this||e)._datatable_overlay){remove((this||e)._datatable_overlay);(this||e)._datatable_overlay=null}},mapCells:function(i,s,n,r,a,o){null===i&&(this||e).data.order.length>0&&(i=(this||e).data.order[0]);null===s&&(s=this.columnId(0));null===n&&(n=(this||e).data.order.length);null===r&&(r=(this||e)._settings.columns.length);if(this.exists(i)){i=this.getIndexById(i);s=this.getColumnIndex(s);if(null!==s)for(var l=0;l<n&&i+l<(this||e).data.order.length;l++){var h=i+l;var _=(this||e).data.order[h];if(_){var c=this.getItem(_);for(var d=0;d<r&&s+d<(this||e)._settings.columns.length;d++){var u=s+d;var f=this.columnId(u);var g=a(c[f],_,f,l,d);o||(c[f]=g)}}}}},_call_onparse:function(i,s){!(this||e)._settings.columns&&i.getConfig&&this.define("columns",i.getConfig(s))},_autoDetectConfig:function(){var i=this.getItem(this.getFirstId());var s=(this||e)._settings.columns=[];for(var n in i)"id"!=n&&"$"!=n[0]&&s.push({id:n,header:n[0].toUpperCase()+n.substr(1),sort:"string",editor:"text"});s.length&&(s[0].fillspace=true);"undefined"==typeof(this||e)._settings.select&&this.define("select","row")}};var Mr=i.protoUI(Ir,or,se,je,Zt,le,ve,xe,Gt,yr,Ue,xr,Sr,ne,wr,mr,pr,vr,fr,gr,ur,dr,cr,$r,_r,hr,lr,Cr,kr,kt,de,Jt,ie,me,pe,St.view,f,_t);var Tr={api:Ir,view:Mr};var Er={name:"treetable",$init:function(){i.extend((this||e).data,Fe,true);i.extend((this||e).type,Oe);i.extend(this||e,De,true);for(var s in Ve)(this||e).on_click[s]||((this||e).on_click[s]=this._unwrap_id(Ve[s]));(this||e).type.treetable=template("{common.space()}{common.icon()} {common.folder()}");(this||e).type.treecheckbox=function(i){return i.indeterminate&&!i.nocheckbox?"<div class='webix_tree_checkbox webix_indeterminate'></div>":Oe.checkbox.apply(this||e,arguments)};(this||e).data.provideApi(this||e,true);(this||e)._viewobj.setAttribute("role","treegrid")},_drag_order_complex:false,_unwrap_id:function(i){return function(s,n){n=n.row;return i.call(this||e,s,n)}},_close_branches:function(i){var s=(this||e)._settings.prerender?i.source:[i.start];for(var n=0;n<s.length;n++)this.close(s[n])},getState:function(){var s=se.getState.call(this||e);i.extend(s,Pe.getState.call(this||e));return s},setState:function(i){Pe.setState.call(this||e,i)&&se.setState.call(this||e,i)},clipboard_setter:function(s){i.extend((this||e)._paste,Re);return je.clipboard_setter.call(this||e,s)},_run_load_next:function(i,s){var n=i.start;for(var r=0;r<n;r++){var a=(this||e).data.order[r];a&&1!=this.getItem(a).$level&&i.start--}return Tr.api._run_load_next.call(this||e,i,s)}};i.protoUI(Er,Pe,Be,Ne,Tr.view);i.protoUI({name:"filter",defaults:{template:"GPL version doesn't support filter <br> You need Webix PRO"}},Ai.view);var get_inspector_config=function(e){var i={};var s=[];e=$$(e);for(var n in e.config)if(!Ar[n]&&"object"!=_typeof(e.config[n])&&"undefined"!=typeof e.config[n]&&"function"!=typeof e.config[n]){"view"==n||"id"==n?s.push({label:n,id:n}):s.push({label:n,type:"text",id:n});e.defaults[n]==e.config[n]&&(s[s.length-1].css={color:"#888"});i[n]=e.config[n]}s.sort((function(e,i){return!e.css&&i.css?-1:e.css&&!i.css||e.id>i.id?1:e.id==i.id?0:-1}));return{elements:s,data:i,head:" ["+e.name+"] <strong>"+e._settings.id+"</strong>"}};var create_inspector=function(){$$("webix_debug_inspector_win")||ui({id:"webix_debug_inspector_win",view:"window",top:2,left:0,width:350,height:350,head:false,autofit:false,body:{cols:[{width:10},{type:"clean",rows:[{view:"toolbar",elements:[{view:"label",value:"",id:"webix_debug_inspector_head"},{view:"button",width:100,value:"Hide",type:"custom",click:function(){show_inspector()}}]},{id:"webix_debug_inspector",nameWidth:150,view:"property",scroll:"y",elements:[],on:{onaftereditstop:function(i,s){if(i.old!=i.value){var n=i.value;if("true"===n||"false"===n)n="true"===n;else{var r=parseInt(n,10);r==n&&(n=r)}var a=$$((this||e).config.view);a.define(s.id,n);a.refreshColumns?a.refreshColumns():a.refresh&&a.refresh();a.resize()}}}}]}]}})};var show_inspector=function(e,i){create_inspector();var s=$$("webix_debug_inspector_win");if(e){var n=get_inspector_config(e);var r=document.body.offsetWidth;var a=document.body.offsetHeight;var o=i?pos(i):{x:0,y:0};s.define("height",Math.max(350,a-4));s.resize();var l=$$("webix_debug_inspector");l.define("elements",n.elements);l.define("view",e);s.show({x:o.x>r/2?0:r-370,y:0});$$("webix_debug_inspector").setValues(n.data);$$("webix_debug_inspector_head").setValue(n.head)}else s.hide()};var infi=function(e){return e>=1e5?"Any":e};var log_level=function(e,i,s){window.console.log((e==s?">>":"  ")+i+e.name+" / "+e.config.id);i+="  ";if(e._cells)for(var n=0;n<e._cells.length;n++)log_level(e._cells[n],i,s);e._head_cell&&log_level(e._head_cell,i,s);e._body_cell&&log_level(e._body_cell,i,s)};attachEvent("onLoadError",(function(e,i){var s;try{s=e.responseText}catch(e){s=""}s=s||"[EMPTY DATA]";var n="Data loading error, check console for details";0===s.indexOf("<?php")?n="PHP support missed":0===s.indexOf("WEBIX_ERROR:")&&(n=s.replace("WEBIX_ERROR:",""));message({type:"debug",text:n,expire:-1});if(window.console){var r=window.console;r.log("Data loading error");r.log("Object:",i);r.log("Response:",s);e&&r.log("XHTTP:",e)}}));ready((function(){var e=document.location.href;0===e.indexOf("file:")&&message({type:"error",text:"Please open sample by http,<br>not as file://",expire:-1})}));var Ar={_inner:true,awidth:true,cheight:true,bheight:true,aheight:true};var zr={view:"contextmenu",id:"webix:debugmenu",on:{onBeforeShow:function(i){if(!i.ctrlKey)return false;var s=locate(i,"view_id");if(!s)return false;(this||e).config.lastTarget=s;blockEvent();delay((function(){unblockEvent()}))},onShow:function(){var i=$$((this||e).config.lastTarget);var s="<span style='color:#888'>"+i._settings.id+"<sup style='float:right'>["+i.name+"]</sup></span>";document.getElementById("webix_debug_cmx").innerHTML=s}},data:["<div id='webix_debug_cmx'></div>",{id:"inspect",value:"Inspect"},{id:"docs",value:"Documentation"},{value:"Log to Console",submenu:[{id:"size",value:"Sizes"},{id:"tree",value:"Tree"},{id:"dump",value:"Dump"}]}],click:function(i,s){var n=$$((this||e).config.lastTarget);if("dump"==i){window.console.info("\n"+n.name+" / "+n.config.id);window.console.log("\nView: ",n,", Config: ",n.config,", Data: ",n.data);window.console.log(n.$view)}if("tree"==i){var r=n;while(n.getParentView())n=n.getParentView();window.console.log("");log_level(n,"",r)}if("size"==i){window.console.info("");window.console.info("\n"+n.name+" / "+n.config.id);window.console.info("\n[min]   ",n.config.width," x ",n.config.height);var a=n.$getSize(0,0);window.console.info("[max]    ",infi(a[1])," x ",infi(a[3])+(n.config.autoheight?", auto height":""));window.console.info("[gravity]   ",n.config.gravity);window.console.info("\n[content]    ",n._content_width," x ",n._content_height);window.console.info("[last set]   ",n._last_size[0]," x ",n._last_size[1]);n._settings._inner?window.console.info("\n[borders]   ","left:",!n._settings._inner.left,"\ttop:",!n._settings._inner.top,"\tright:",!n._settings._inner.right,"\tbottom:",!n._settings._inner.bottom):window.console.info("\n[borders]   none")}"docs"==i&&window.open("http://docs.webix.com/api__refs__ui."+n.name+".html","__blank");"inspect"==i&&show_inspector((this||e).config.lastTarget,s)}};ready((function(){zr.master=document.body;ui(zr)}));var Hr=i.proto({name:"DataRecord",isVisible:function(){return true},$init:function(i){(this||e).data=i||{};var s=i&&i.id?i.id:uid();(this||e)._settings={id:s};ui.views[s]=this||e},getValues:function(){return(this||e).data},setValues:function(s,n,r){(this||e).data=n?i.extend((this||e).data,s,true):s;this.callEvent("onChange",[s,r])},refresh:function(){this.callEvent("onBindRequest")}},f,vt,L,_t);var jr=i.proto({name:"DataValue",isVisible:function(){return true},$init:function(i){i&&!isUndefined(i.value)||((this||e).data=i||"");var s=i&&i.id?i.id:uid();(this||e)._settings={id:s};ui.views[s]=this||e},setValue:function(i,s){(this||e).data=i;this.callEvent("onChange",[i,s])},getValue:function(){return(this||e).data},refresh:function(){this.callEvent("onBindRequest")}},f,vt);var Pr=i.proto({name:"TreeCollection",$init:function(){i.extend((this||e).data,Fe,true);(this||e).data.provideApi(this||e,true);i.extend(this||e,De,true)}},Ne,Ss);i.Date=ii;i.Number=si;i.promise=Deferred;i.DataCollection=Ss;i.DataRecord=Hr;i.DataValue=jr;i.TreeCollection=Pr;i.AtomDataLoader=L;i.AtomRender=X;i.AutoScroll=G;i.AutoTooltip=kt;i.BaseBind=vt;i.BindSource=gt;i.Canvas=It;i.CodeParser=B;i.CollectionBind=dt;i.ContextHelper=Ut;i.CopyPaste=Xt;i.CustomPrint=Gt;i.CustomScroll=Kt;i.DataMarks=Jt;i.DataMove=Zt;i.DataLoader=ie;i.DataState=se;i.DataStore=DataStore;i.Destruction=ct;i.DragControl=Nt;i.DragItem=ne;i.DragOrder=re;i.EditAbility=le;i.EventSystem=f;i.FlexLayout=he;i.Group=de;i.GroupMethods=_e;i.GroupStore=ce;i.HTMLOptions=ue;i.HtmlMap=fe;i.IdSpace=ge;i.KeysNavigation=ve;i.MapCollection=pe;i.Modality=Bt;i.MouseEvents=me;i.Movable=Dt;i.NavigationButtons=be;i.OverlayBox=we;i.PagingAbility=xe;i.ProgressBar=ye;i.RecordBind=ft;i.RenderStack=Se;i.ResizeArea=Ft;i.SingleRender=$t;i.Scrollable=$e;i.SelectionModel=Ce;i.Settings=_t;i.Sparklines=Sparklines;i.TablePaste=je;i.TooltipControl=tt;i.Touch=Vt;i.TreeAPI=Pe;i.TreeClick=Ve;i.TreeDataLoader=Ne;i.TreeDataMove=De;i.TreeRenderStack=Le;i.TreeStateCheckbox=Be;i.TreeStore=Fe;i.TreeTablePaste=Re;i.TreeType=Oe;i.UIManager=ht;i.Undo=ae;i.UploadDriver=We;i.ValidateCollection=Ue;i.ValidateData=Qt;i.ValueBind=ut;i.Values=Ye;i.VirtualRenderStack=qe;i.VRenderStack=Xe;i.html=E;i.skin=Pt;i.debug=debug;i.i18n=u;i.ready=ready;i.env=z;i.color=ke;i.csv=qt;i.clipbuffer=Yt;i.storage=ri;i.template=template;i.type=type;i.editors=oe;i.animate=animate;i.print=print;i.rules=at;i.filters=_i;i.patterns=ci;i.fullscreen=lt;i.version=Ge;i.name=Ke;i.level_in=level_in;i.level_out=level_out;i.clone=clone;i.copy=copy;i.single=single;i.bind=bind;i.exec=exec;i.wrap=wrap;i.isUndefined=isUndefined;i.delay=delay;i.once=once;i.uid=uid;i.toNode=toNode;i.toFunctor=toFunctor;i.isArray=isArray;i.isDate=isDate;i._to_array=_to_array;i._power_array=d;i._events_final_destructor=_events_final_destructor;i._event=_event;i.event=event$1;i.eventRemove=eventRemove;i.callEvent=callEvent;i.attachEvent=attachEvent;i.detachEvent=detachEvent;i.blockEvent=blockEvent;i.unblockEvent=unblockEvent;i.mapEvent=mapEvent;i.hasEvent=hasEvent;i.stringify=stringify;i.toPNG=toPNG;i.toCSV=toCSV;i.toPDF=toPDF;i.toExcel=toExcel;i.alert=alert;i.confirm=confirm;i.modalbox=modalbox;i.prompt=prompt;i.message=message;i.editStop=editStop;i.ajax=ajax;i.DataDriver=N;i.dp=dp;i.DataProcessor=ee;i.remote=remote;i.require=require;i.proxy=proxy$5;i.send=send;i.ui=ui;i.$$=$$;Object.defineProperty(i,"__esModule",{value:true})}));const s=i.extend,n=i.protoUI,r=i.proto,a=i.promise,o=i.DataCollection,l=i.DataRecord,h=i.DataValue,_=i.TreeCollection,c=i.AtomDataLoader,d=i.AtomRender,u=i.AutoScroll,f=i.AutoTooltip,g=i.BaseBind,v=i.BindSource,p=i.Canvas,m=i.CodeParser,b=i.CollectionBind,w=i.ContextHelper,x=i.CopyPaste,y=i.CustomPrint,S=i.CustomScroll,$=i.DataMarks,C=i.DataMove,k=i.DataLoader,I=i.DataState,M=i.DataStore,T=i.Destruction,E=i.DragControl,A=i.DragItem,z=i.DragOrder,H=i.EditAbility,j=i.EventSystem,P=i.FlexLayout,V=i.Group,N=i.GroupMethods,D=i.GroupStore,L=i.HTMLOptions,B=i.HtmlMap,F=i.IdSpace,R=i.KeysNavigation,O=i.MapCollection,W=i.Modality,U=i.MouseEvents,Y=i.Movable,q=i.NavigationButtons,X=i.OverlayBox,G=i.PagingAbility,K=i.ProgressBar,J=i.RecordBind,Z=i.RenderStack,Q=i.ResizeArea,tt=i.SingleRender,et=i.Scrollable,it=i.SelectionModel,st=i.Settings,nt=i.Sparklines,rt=i.TablePaste,at=i.TooltipControl,ot=i.Touch,lt=i.TreeAPI,ht=i.TreeClick,_t=i.TreeDataLoader,ct=i.TreeDataMove,dt=i.TreeRenderStack,ut=i.TreeStateCheckbox,ft=i.TreeStore,gt=i.TreeTablePaste,vt=i.TreeType,pt=i.UIManager,mt=i.Undo,bt=i.UploadDriver,wt=i.ValidateCollection,xt=i.ValidateData,yt=i.ValueBind,St=i.Values,$t=i.VirtualRenderStack,Ct=i.VRenderStack,kt=i.html,It=i.skin,Mt=i.debug,Tt=i.i18n,Et=i.ready,At=i.env,zt=i.color,Ht=i.csv,jt=i.clipbuffer,Pt=i.storage,Vt=i.template,Nt=i.type,Dt=i.editors,Lt=i.animate,Bt=i.print,Ft=i.rules,Rt=i.filters,Ot=i.patterns,Wt=i.fullscreen,Ut=i.version,Yt=i.name,qt=i.level_in,Xt=i.level_out,Gt=i.clone,Kt=i.copy,Jt=i.single,Zt=i.bind,Qt=i.exec,te=i.wrap,ee=i.isUndefined,ie=i.delay,se=i.once,ne=i.uid,re=i.toNode,ae=i.toFunctor,oe=i.isArray,le=i.isDate,he=i._to_array,_e=i._power_array,ce=i._events_final_destructor,de=i._event,ue=i.eventRemove,fe=i.callEvent,ge=i.attachEvent,ve=i.detachEvent,pe=i.blockEvent,me=i.unblockEvent,be=i.mapEvent,we=i.hasEvent,xe=i.stringify,ye=i.toPNG,Se=i.toCSV,$e=i.toPDF,Ce=i.toExcel,ke=i.alert,Ie=i.confirm,Me=i.modalbox,Te=i.prompt,Ee=i.message,Ae=i.editStop,ze=i.ajax,He=i.DataDriver,je=i.dp,Pe=i.DataProcessor,Ve=i.remote,Ne=i.require,De=i.proxy,Le=i.send,Be=i.ui,Fe=i.$$,Re=i.__esModule;const Oe=i.Date,We=i.Number,Ue=i.event;export{Fe as $$,c as AtomDataLoader,d as AtomRender,u as AutoScroll,f as AutoTooltip,g as BaseBind,v as BindSource,p as Canvas,m as CodeParser,b as CollectionBind,w as ContextHelper,x as CopyPaste,y as CustomPrint,S as CustomScroll,o as DataCollection,He as DataDriver,k as DataLoader,$ as DataMarks,C as DataMove,Pe as DataProcessor,l as DataRecord,I as DataState,M as DataStore,h as DataValue,Oe as Date,T as Destruction,E as DragControl,A as DragItem,z as DragOrder,H as EditAbility,j as EventSystem,P as FlexLayout,V as Group,N as GroupMethods,D as GroupStore,L as HTMLOptions,B as HtmlMap,F as IdSpace,R as KeysNavigation,O as MapCollection,W as Modality,U as MouseEvents,Y as Movable,q as NavigationButtons,We as Number,X as OverlayBox,G as PagingAbility,K as ProgressBar,J as RecordBind,Z as RenderStack,Q as ResizeArea,et as Scrollable,it as SelectionModel,st as Settings,tt as SingleRender,nt as Sparklines,rt as TablePaste,at as TooltipControl,ot as Touch,lt as TreeAPI,ht as TreeClick,_ as TreeCollection,_t as TreeDataLoader,ct as TreeDataMove,dt as TreeRenderStack,ut as TreeStateCheckbox,ft as TreeStore,gt as TreeTablePaste,vt as TreeType,pt as UIManager,mt as Undo,bt as UploadDriver,Ct as VRenderStack,wt as ValidateCollection,xt as ValidateData,yt as ValueBind,St as Values,$t as VirtualRenderStack,Re as __esModule,de as _event,ce as _events_final_destructor,_e as _power_array,he as _to_array,ze as ajax,ke as alert,Lt as animate,ge as attachEvent,Zt as bind,pe as blockEvent,fe as callEvent,jt as clipbuffer,Gt as clone,zt as color,Ie as confirm,Kt as copy,Ht as csv,Mt as debug,i as default,ie as delay,ve as detachEvent,je as dp,Ae as editStop,Dt as editors,At as env,Ue as event,ue as eventRemove,Qt as exec,s as extend,Rt as filters,Wt as fullscreen,we as hasEvent,kt as html,Tt as i18n,oe as isArray,le as isDate,ee as isUndefined,qt as level_in,Xt as level_out,be as mapEvent,Ee as message,Me as modalbox,Yt as name,se as once,Ot as patterns,Bt as print,a as promise,Te as prompt,r as proto,n as protoUI,De as proxy,Et as ready,Ve as remote,Ne as require,Ft as rules,Le as send,Jt as single,It as skin,Pt as storage,xe as stringify,Vt as template,Se as toCSV,Ce as toExcel,ae as toFunctor,re as toNode,$e as toPDF,ye as toPNG,Nt as type,Be as ui,ne as uid,me as unblockEvent,Ut as version,te as wrap};

